import { ESBRequestBodyUtil } from './esb-request-body-utils';
import { WFEConditionalExecuter } from './wfe-conditional-query-executer-util';
import { SessionKeyUtil } from './session-key-util';
import { saveAs } from 'file-saver';
import { ModalRendererComponent } from '../components/modal-renderer/modal-renderer.component';
import { take } from 'rxjs/operators';
import { CommonUtil } from './common-util';
import { RepeatableBlockData } from '../models/repeatable-block-data/repetableBlockData.util';
import { AlertModalComponent } from '../components/alert-modal/alert-modal.component';
import { UndoRedo } from './undo-redo.util';
import { AssociatedMapUtil } from './associated-map-utils';
import ExternalRequestResponseUtil from './external-request-response.util';
import InternalResponseUtil from './internal-response.util';
import { EmptyUtil } from './empty-util';
import { RedirectionUtil } from './redirection-util';
import { ApplicationStateStoreUtil } from './application-state-store-util';
import { APIKeyUtil } from './api-key-util';
import { RepeatableworkflowHandler } from '../utils/repeatableworkflow-util';
import { isArray } from '@datorama/akita';
import { Injectable } from '@angular/core';
import { InBuildFunctionsUtil } from './inbuild-functions-util';
import { SetAPICallbackData } from './set-api-callback-data-util';
import * as XLSX from 'xlsx';
import html2canvas from 'html2canvas';
import html2pdf from 'html2pdf.js';
import * as i0 from "@angular/core";
import * as i1 from "../services/cee-api-service.service";
import * as i2 from "@angular/router";
import * as i3 from "../services/shared-events-service.service";
import * as i4 from "../services/internal-cee-emitter-service.service";
import * as i5 from "../services/wfe-step-loader.service";
import * as i6 from "../models/app-data/app-data.service";
import * as i7 from "../models/api-data/api-data.service";
import * as i8 from "@angular/material/dialog";
import * as i9 from "@angular/material/snack-bar";
import * as i10 from "@angular/common/http";
import * as i11 from "../services/file-upload-service.service";
export class WFEEventListHandler {
    ceeApiService;
    router;
    sharedEventsServices;
    internalCEEEmitter;
    wfeStepLoaderService;
    appDataService;
    apiDataService;
    dialog;
    snackBar;
    http;
    fileUploadService;
    event_list = [];
    inputDetails = {};
    success = [];
    failure = [];
    response = [];
    exception = [];
    commonUtil;
    undoRedoUtil;
    associatedMaputil;
    externalRequestResponseUtil;
    internalResponseUtil;
    additionalParameters = [];
    esbRequestBodyUtil;
    wfeConditionalQueryExecuter;
    sessionKeyUtil;
    repeatableBlockUtil;
    emptyUtil;
    redirectionUtil;
    applicationStateStore;
    apiKeyUtil;
    downloadType = '';
    workflowService;
    // cell data to store a specific cell within list or table
    cellAppData = {
        id: '',
        stepId: '',
        apiKey: '',
        fieldLabel: '',
        linkedBlockId: '',
        isRepeatedField: false,
        repeatedBlockFieldId: '',
        requestApiKey: [],
        responseApiKey: [],
        dataFormatSeparator: '',
        mandatory: false,
        editable: false,
        visible: false,
        value: '',
        isValid: true
    };
    apiConfigPath = 'assets/jsons/api_config.json';
    event = {}; // for file service call
    payLoad; // for file service call/setting the language
    modalGenericCssClass = '';
    fileDataArray = [];
    encriptedFileArray = [];
    fieldData = {};
    uniqueFields = [];
    inBuildFunctionsUtil;
    modelValue = -1;
    eventAdditionalParams = [];
    setAPIKeyUtil;
    handlerSaveData = {};
    isClear = false;
    constructor(ceeApiService, router, sharedEventsServices, internalCEEEmitter, wfeStepLoaderService, appDataService, apiDataService, dialog, snackBar, http, fileUploadService) {
        this.ceeApiService = ceeApiService;
        this.router = router;
        this.sharedEventsServices = sharedEventsServices;
        this.internalCEEEmitter = internalCEEEmitter;
        this.wfeStepLoaderService = wfeStepLoaderService;
        this.appDataService = appDataService;
        this.apiDataService = apiDataService;
        this.dialog = dialog;
        this.snackBar = snackBar;
        this.http = http;
        this.fileUploadService = fileUploadService;
        this.esbRequestBodyUtil = new ESBRequestBodyUtil(apiDataService);
        this.wfeConditionalQueryExecuter = new WFEConditionalExecuter(appDataService, apiDataService);
        this.sessionKeyUtil = new SessionKeyUtil();
        this.commonUtil = new CommonUtil();
        this.repeatableBlockUtil = new RepeatableBlockData();
        this.undoRedoUtil = new UndoRedo();
        this.associatedMaputil = new AssociatedMapUtil();
        this.externalRequestResponseUtil = new ExternalRequestResponseUtil(http, appDataService, apiDataService, sharedEventsServices);
        this.internalResponseUtil = new InternalResponseUtil(http, appDataService, apiDataService);
        this.emptyUtil = new EmptyUtil();
        this.redirectionUtil = new RedirectionUtil(router);
        this.applicationStateStore = new ApplicationStateStoreUtil(this.appDataService);
        this.apiKeyUtil = new APIKeyUtil();
        this.workflowService = new RepeatableworkflowHandler();
        this.inBuildFunctionsUtil = new InBuildFunctionsUtil();
        this.setAPIKeyUtil = new SetAPICallbackData(apiDataService);
    }
    switchEventDisplayType(event, eventList, primaryData = {}, payLoad) {
        this.event = event;
        this.payLoad = payLoad;
        // Set whole event list data for future use
        this.event_list = eventList;
        // console.log(event)
        // Function to switch between display type step, framework and workflow
        switch (event.display_type) {
            case 'StartRepeatableWorkflow':
                this.onStartRepeatableWorkflowEvent(event);
                break;
            case 'ExitRepeatableWorkflow':
                this.onExitRepeatableWorkflowEvent(event);
                break;
            case 'Workflow':
                this.onWorkflowEvent(event);
                break;
            // Download CSV event is same as the Framework just the difference is
            // that when this event is triggered user will be able to download the file
            // according to Display Type (now only supported Download CSV)
            case 'Download CSV':
            case 'Framework':
                if (event.display_type === 'Download CSV') {
                    this.downloadType = 'csv';
                }
                this.onFrameworkEvent(event, primaryData);
                break;
            case 'Functions':
            case 'Step':
                this.onStepEvent(event);
                break;
            case 'OnBack':
                history.go(-2);
                localStorage.setItem('forceOnBack', 'true');
                break;
            case 'OnLeave':
                if (!this.pageLeaveHref && !this.pageLeaveHrefTarget) {
                    //get all fieldIds
                    let fieldIds = [];
                    const appStoreData = this.appDataService.getAllAppStoreData();
                    for (const data of appStoreData) {
                        if (data.stepId === window['currentStepId']) {
                            fieldIds.push(data.id);
                        }
                    }
                    this.switchClearenceType({ 'field': fieldIds }, { invoke_event_config: { callback_config: [] } });
                }
                localStorage.removeItem('modal_on_page_leave');
                this.dialog.closeAll();
                if (this.pageLeaveStepId) {
                    this.redirectTo(this.pageLeaveStepId);
                }
                else if (this.pageLeaveHref) {
                    this.redirectToHref(this.pageLeaveHref, null, this.pageLeaveHrefTarget);
                }
                else {
                    history.go(-2);
                    localStorage.setItem('forceOnBack', 'true');
                }
                break;
            case 'LastKnownStep':
                this.redirectToLastSavedStep();
                break;
            // On filter function that will check if the data is found
            // payload should return true
            // if true then trigger onSuccess or trigger OnFailure
            case 'OnFilter':
                // checking payload not undefined
                // will trigger the OnFilter only when the filter is
                // needed
                if (payLoad !== undefined) {
                    this.onFilter(event, payLoad);
                }
                break;
            /*
        case 'ScrollToTop':
            window.scrollTo({ top: 0, behavior: 'smooth' });
            break; */
        }
        if (event['next_event_id']) {
            this.executeEvent(event['next_event_id']);
        }
    }
    // function that only triggers onFailure or OnSuccess
    // check the condition as well if condition is given
    onFilter(event, filterSuccess) {
        for (const eventParam of event.event_params) {
            // store the failure and success response
            if (eventParam.invoke_event_config && eventParam.invoke_event_config.callback_config) {
                this.success = eventParam.invoke_event_config.callback_config.OnSuccess;
                this.failure = eventParam.invoke_event_config.callback_config.onFailure;
                this.additionalParameters = eventParam.invoke_event_config.additional_parameters;
            }
            // check if there is condition it or not
            // and check if the filter success is true
            let passed = false;
            if (this.eventCondition(eventParam.condition)) {
                if (this.wfeConditionalQueryExecuter.evaluateConditionQuery(eventParam.query, eventParam.condition, '', {}, this.fieldData)) {
                    passed = true;
                }
            }
            else {
                passed = true;
            }
            if (passed && filterSuccess) {
                this.triggerSuccessOrFailure(this.success);
            }
            else {
                this.triggerSuccessOrFailure(this.failure, false);
            }
        }
    }
    redirectToLastSavedStep() {
        const sequence = this.apiDataService.getApiDataByApiKey(this.wfeStepLoaderService.additionalParameters['SequenceID'].split('$$')[1]);
        const step = this.apiDataService.getApiDataByApiKey(this.wfeStepLoaderService.additionalParameters['StepID'].split('$$')[1]);
        if (sequence && sequence.value && step && step.value) {
            const progressBar = this.wfeStepLoaderService.progressBarMap[sequence.value];
            if (progressBar && progressBar['progress']) {
                this.applicationStateStore.setProgressStatusOnLastSavedState(progressBar['progress'].progress_bar_id, step.value, progressBar);
                // According to the discussion on 16/09/2020 user will navigate to the step that comes from the backend
                // this.redirectTo(this.wfeStepLoaderService.getNextStepInCurrentSequence(step.value));
                this.redirectTo(step.value);
            }
        }
    }
    onComponentEventBatch(fieldData, presetData, stepId, type, primaryData = {}, isDefault = true, payLoad, displayType = '') {
        this.isClear = type === 'clear' ? true : false;
        if (!this.isClear) {
            for (const event of JSON.parse(JSON.stringify(fieldData.event_list))) {
                if (event.isDefault === isDefault &&
                    event.event_name.toLowerCase() === type.toLowerCase() &&
                    (displayType ? event.display_type.toLowerCase() === displayType.toLowerCase() : true)) {
                    this.setNextStepId(event, stepId);
                    window['eventElementId'] = fieldData.html_id;
                    if (presetData && presetData.repeatedBlockFieldId) {
                        primaryData = {
                            ...primaryData,
                            value: {
                                ...primaryData.value,
                                linkedBlockId: presetData.linkedBlockId,
                                position: presetData.position,
                                parentPosition: presetData.parentPosition,
                                unique_id: presetData.unique_id,
                                isRepeatable: true
                            }
                        };
                    }
                    this.switchEventDisplayType(event, fieldData.event_list, primaryData, payLoad);
                }
            }
        }
    }
    setNextStepId(event, stepId) {
        for (const eventParam of event.event_params) {
            if (eventParam.invoke_event_config && eventParam.invoke_event_config.callback_config && eventParam.invoke_event_config.callback_config.onResponse) {
                for (const onRes of eventParam.invoke_event_config.callback_config.onResponse) {
                    if (onRes.NavigatetoNextPage) {
                        onRes.NavigatetoNextPage = this.wfeStepLoaderService.getNextStepInCurrentSequence(stepId);
                    }
                }
            }
        }
    }
    onStartRepeatableWorkflowEvent(event) {
        for (const eventParams of event.event_params) {
            if (eventParams.invoke_event_config) {
                let redirectTo = true;
                if (this.eventCondition(eventParams.condition)) {
                    if (!this.wfeConditionalQueryExecuter.evaluateConditionQuery(eventParams.query, eventParams.condition)) {
                        redirectTo = false;
                        break;
                    }
                }
                if (redirectTo) {
                    const repeatableWorkflowId = eventParams.event_config.display_step;
                    const currentworkflowId = window['currentWorkflowId'];
                    this.additionalParameters = eventParams.invoke_event_config.additional_parameters;
                    let currentWorkflowIndex = 0;
                    const currentIndex = eventParams.invoke_event_config.additional_parameters
                        .find(i => i.parameter_type === 'workflow_current_index');
                    // workflow_current_index = always start from 0.
                    if (currentIndex) {
                        currentWorkflowIndex = currentIndex.value;
                    }
                    const repeatCountStatic = eventParams.invoke_event_config.additional_parameters
                        .find(i => i.parameter_type === 'repeat_count_static');
                    if (repeatCountStatic) {
                        this.workflowService
                            .initConfig(repeatableWorkflowId, currentWorkflowIndex, repeatCountStatic.value, currentworkflowId);
                    }
                    const repeatCountField = eventParams.invoke_event_config.additional_parameters
                        .find(i => i.parameter_type === 'repeat_count_field_id');
                    if (repeatCountField) {
                        const fieldData = this.appDataService.getFieldDataByFieldId(repeatCountField.value);
                        this.workflowService
                            .initConfig(repeatableWorkflowId, currentWorkflowIndex, fieldData, currentworkflowId);
                    }
                    const repeatCountApiKey = eventParams.invoke_event_config.additional_parameters
                        .find(i => i.parameter_type === 'repeat_count_api_key');
                    if (repeatCountApiKey) {
                        // tslint:disable-next-line: max-line-length
                        const apiDataCount = this.apiDataService.getApiDataByHandler(this.commonUtil.getHandlerName(repeatCountApiKey.value));
                        // tslint:disable-next-line: max-line-length
                        this.workflowService.initConfig(repeatableWorkflowId, currentWorkflowIndex, apiDataCount.value[repeatCountApiKey.value], currentworkflowId);
                    }
                    setTimeout(() => {
                        this.wfeStepLoaderService.setSequenceProgressInit(repeatableWorkflowId);
                        this.redirectTo(this.wfeStepLoaderService.getFirstStepInSquence(this.wfeStepLoaderService.getSequenceDefaultStepIdBySequenceId(repeatableWorkflowId).sequence));
                    }, 500);
                }
            }
        }
    }
    onExitRepeatableWorkflowEvent(event) {
        for (const eventParams of event.event_params) {
            if (eventParams.invoke_event_config) {
                let redirectTo = true;
                if (this.eventCondition(eventParams.condition)) {
                    if (!this.wfeConditionalQueryExecuter.evaluateConditionQuery(eventParams.query, eventParams.condition)) {
                        redirectTo = false;
                        break;
                    }
                }
                const currentworkflowId = window['currentWorkflowId'];
                const repatableWorkflowConfig = this.workflowService.getConfigByWorkflowId(currentworkflowId);
                if (repatableWorkflowConfig) {
                    this.workflowService.incriseConfigCount(currentworkflowId);
                    if (redirectTo) {
                        let targetStepId = null;
                        if ((repatableWorkflowConfig.length - 1) == repatableWorkflowConfig.count) {
                            this.additionalParameters = eventParams.invoke_event_config.additional_parameters;
                            const targetStep = eventParams.invoke_event_config.additional_parameters
                                .find(i => i.parameter_type === 'step_id');
                            if (targetStep) {
                                targetStepId = targetStep.value;
                                // this.workflowService.removeWorkflowFromConfig(workflowDetails.sequence_id);
                            }
                        }
                        else {
                            if (currentworkflowId) {
                                targetStepId = this.wfeStepLoaderService.getFirstStepInSquence(this.wfeStepLoaderService
                                    .getSequenceDefaultStepIdBySequenceId(currentworkflowId).sequence);
                            }
                        }
                        if (targetStepId) {
                            const workflowDetails = this.wfeStepLoaderService.getWorkflowDetails(targetStepId);
                            if (workflowDetails && workflowDetails.sequence && workflowDetails.sequence.length == 1) {
                                this.sharedEventsServices.exitWorkflowSameStepRedirectEmmiter.emit();
                            }
                            this.redirectTo(targetStepId);
                        }
                    }
                }
            }
        }
    }
    onWorkflowEvent(event) {
        for (const eventParams of event.event_params) {
            let redirectTo = true;
            if (this.eventCondition(eventParams.condition)) {
                if (!this.wfeConditionalQueryExecuter.evaluateConditionQuery(eventParams.query, eventParams.condition, '', {}, this.fieldData)) {
                    redirectTo = false;
                    break;
                }
            }
            if (redirectTo) {
                this.wfeStepLoaderService.setSequenceProgressInit(eventParams.event_config.display_step);
                this.redirectTo(this.wfeStepLoaderService.getFirstStepInSquence(this.wfeStepLoaderService.getSequenceDefaultStepIdBySequenceId(eventParams.event_config.display_step).sequence));
            }
        }
    }
    onFrameworkEvent(event, primaryData = {}) {
        for (const eventParam of event.event_params) {
            // store the failure and success response
            if (eventParam.invoke_event_config && eventParam.invoke_event_config.callback_config) {
                this.success = eventParam.invoke_event_config.callback_config.OnSuccess;
                this.failure = eventParam.invoke_event_config.callback_config.onFailure;
                this.response = eventParam.invoke_event_config.callback_config.onResponse;
                this.exception = eventParam.invoke_event_config.callback_config.onException;
                this.additionalParameters = eventParam.invoke_event_config.additional_parameters;
            }
            if (this.eventCondition(eventParam.condition)) {
                if (this.wfeConditionalQueryExecuter.evaluateConditionQuery(eventParam.query, eventParam.condition, primaryData.value && primaryData.value.unique_id ? primaryData.value.unique_id : '', {}, this.fieldData)) {
                    this.eventConfig(eventParam.event_config, eventParam, primaryData);
                }
                else {
                    this.sharedEventsServices.eventConditionalFailureSubscriber.emit(eventParam);
                }
            }
            else {
                this.eventConfig(eventParam.event_config, eventParam, primaryData);
            }
        }
    }
    onStepEvent(event) {
        for (const eventParam of event.event_params) {
            // store the failure and success response
            if (eventParam.invoke_event_config && eventParam.invoke_event_config.callback_config) {
                this.success = eventParam.invoke_event_config.callback_config.OnSuccess;
                this.failure = eventParam.invoke_event_config.callback_config.onFailure;
                this.response = eventParam.invoke_event_config.callback_config.onResponse;
                this.exception = eventParam.invoke_event_config.callback_config.onException;
                this.additionalParameters = eventParam.invoke_event_config.additional_parameters;
            }
            // set active menu id on local storage
            const acitiveHamburger = this.additionalParameters ? this.additionalParameters.find(i => i.parameter_type == 'isHamburgerItemActive') : [];
            if (acitiveHamburger && acitiveHamburger['value'] == 'true' && window['eventElementId']) {
                window.localStorage.setItem('active_item', window['eventElementId']);
            }
            // ***** //
            if (this.eventCondition(eventParam.condition)) {
                if (this.wfeConditionalQueryExecuter.evaluateConditionQuery(eventParam.query, eventParam.condition, '', {}, this.fieldData)) {
                    this.eventConfig(eventParam.event_config, eventParam);
                }
                else {
                    this.sharedEventsServices.eventConditionalFailureSubscriber.emit(eventParam);
                }
            }
            else {
                this.eventConfig(eventParam.event_config, eventParam);
            }
        }
    }
    eventCondition(conditionArray) {
        // execute on condition
        if (conditionArray && conditionArray.length > 0) {
            return true;
        }
        else {
            return false;
        }
    }
    async downloadFromS3(event) {
        try {
            const fileName = this.eventAdditionalParams['CEE_FILE_NAME'] ? this.eventAdditionalParams['CEE_FILE_NAME'].toLowerCase() : "";
            const s3Url = this.fieldData.value;
            //this.apiDataService.getApiDataByApiKey(fileName);
            // console.log("download method");
            // Fetch the PDF file from the S3 bucket
            const response = await fetch(s3Url);
            // console.log("download response");
            // Check if the response is successful
            if (!response.ok) {
                throw new Error(`Failed to fetch PDF: ${response.statusText}`);
            }
            // Convert the response to a Blob
            const blob = await response.blob();
            // Create a URL for the Blob
            const link = URL.createObjectURL(blob);
            // Create a temporary anchor element
            const a = document.createElement("a");
            a.setAttribute("download", fileName); // Set the desired file name
            a.setAttribute("href", link);
            // Append the anchor to the body
            document.body.appendChild(a);
            // Programmatically click the anchor to trigger the download
            a.click();
            // Clean up: remove the anchor element and revoke the Blob URL
            document.body.removeChild(a);
            URL.revokeObjectURL(link);
            // console.log("PDF downloaded successfully!");
        }
        catch (error) {
            console.error("Error downloading PDF:", error); //error printing
        }
    }
    convertHeaderToImageFixedHeight(element) {
        return new Promise((resolve, reject) => {
            if (!element)
                return reject(new Error('Header element not found'));
            // Create a deep clone to avoid modifying the original
            const clone = element.cloneNode(true);
            // Calculate PDF dimensions 
            const pdfWidthInPoints = 595.28; // A4 width in points
            const pixelsPerPoint = 96 / 72; // Conversion from points to pixels
            const pdfWidthInPixels = pdfWidthInPoints * pixelsPerPoint; // ~794px
            // Set margin in pixels
            const marginInPixels = 10; // 50px margin on each side
            const contentWidthInPixels = pdfWidthInPixels - (marginInPixels * 2); // Width after margins
            // Fixed header height
            const headerHeightInPixels = 120;
            // Create a wrapper with proper dimensions and styling
            const wrapper = document.createElement('div');
            wrapper.style.position = 'fixed';
            wrapper.style.top = '-9999px';
            wrapper.style.left = '0';
            wrapper.style.width = contentWidthInPixels + 'px';
            wrapper.style.height = headerHeightInPixels + 'px';
            wrapper.style.background = '#fff';
            wrapper.style.padding = '0';
            wrapper.style.margin = '0';
            wrapper.style.boxSizing = 'border-box';
            wrapper.style.display = 'flex'; // Use flexbox
            wrapper.style.flexDirection = 'row';
            wrapper.style.justifyContent = 'space-between'; // Space between columns
            wrapper.style.alignItems = 'center';
            // Select elements using the correct class names
            const firstColumn = clone.querySelector('.header-two-log');
            const secondColumn = clone.querySelector('.header-label');
            // Create fresh containers for our columns
            const leftColumnContainer = document.createElement('div');
            leftColumnContainer.style.width = '48%';
            leftColumnContainer.style.height = '100%';
            leftColumnContainer.style.display = 'flex';
            leftColumnContainer.style.alignItems = 'center';
            leftColumnContainer.style.justifyContent = 'flex-start';
            leftColumnContainer.style.padding = '5px';
            leftColumnContainer.style.boxSizing = 'border-box';
            const rightColumnContainer = document.createElement('div');
            rightColumnContainer.style.width = '48%';
            rightColumnContainer.style.height = '100%';
            rightColumnContainer.style.display = 'flex';
            rightColumnContainer.style.alignItems = 'center';
            rightColumnContainer.style.justifyContent = 'flex-end';
            rightColumnContainer.style.padding = '5px';
            rightColumnContainer.style.boxSizing = 'border-box';
            rightColumnContainer.style.textAlign = 'right';
            // Process and add first column content
            if (firstColumn) {
                // Extract and clean the logo image
                const logoImg = firstColumn.querySelector('img');
                if (logoImg) {
                    const newImg = document.createElement('img');
                    newImg.src = logoImg.src;
                    newImg.alt = logoImg.alt || 'Logo';
                    newImg.style.maxHeight = '100px';
                    newImg.style.maxWidth = '100%';
                    newImg.style.objectFit = 'contain';
                    leftColumnContainer.appendChild(newImg);
                }
                else {
                    // If no image, copy the text content
                    const firstColumnContent = document.createElement('div');
                    firstColumnContent.textContent = firstColumn.textContent || '';
                    firstColumnContent.style.fontSize = '10px';
                    firstColumnContent.style.fontWeight = 'bold';
                    firstColumnContent.style.textAlign = 'left';
                    leftColumnContainer.appendChild(firstColumnContent);
                }
            }
            // Process and add second column content
            // if (secondColumn) {
            //     // Extract text content, clean it and truncate after AM/PM
            //     let textContent = secondColumn.textContent || '';
            //     // Clean the text and truncate after AM/PM
            //     textContent = textContent
            //         .replace(/\{\{[^}]*\}\}/g, '') // Remove Angular bindings
            //         .replace(/class="[^"]*"/g, '') // Remove class attributes
            //         .replace(/\[class\]="[^"]*"/g, ''); // Remove Angular class bindings
            //     // Truncate text after AM/PM
            //     const amIndex = textContent.indexOf('AM');
            //     const pmIndex = textContent.indexOf('PM');
            //     if (amIndex > -1) {
            //         textContent = textContent.substring(0, amIndex + 2);
            //     } else if (pmIndex > -1) {
            //         textContent = textContent.substring(0, pmIndex + 2);
            //     }
            //     // Create a text element for the second column
            //     const secondColumnContent = document.createElement('div');
            //     secondColumnContent.style.fontSize = '10px';
            //     secondColumnContent.style.lineHeight = '1.3';
            //     secondColumnContent.style.textAlign = 'right';
            //     // Replace newlines with <br> tags
            //     textContent = textContent.replace(/\n/g, '<br>');
            //     secondColumnContent.innerHTML = textContent;
            //     rightColumnContainer.appendChild(secondColumnContent);
            // }
            if (secondColumn) {
                // Get the content from the second column
                const contentElement = secondColumn.querySelector('.Name') || secondColumn;
                let htmlContent = contentElement.innerHTML || secondColumn.innerHTML;
                // Log the content to verify it's not empty
                // console.log("Original HTML content:", htmlContent);
                // Ensure line breaks are preserved
                htmlContent = htmlContent.replace(/<br\s*\/?>/gi, '###BR###');
                htmlContent = htmlContent.replace(/\n/g, '<br>');
                htmlContent = htmlContent.replace(/###BR###/g, '<br>');
                // console.log("Formatted HTML content:", htmlContent);
                // Create a new element to hold the formatted content
                const formattedContent = document.createElement('div');
                formattedContent.style.fontFamily = 'Quicksand';
                formattedContent.style.fontSize = '8px';
                formattedContent.style.fontWeight = 'normal';
                formattedContent.style.color = '#000'; // Ensure text is black
                formattedContent.style.lineHeight = '1.2';
                formattedContent.style.whiteSpace = 'pre-wrap';
                formattedContent.style.background = 'transparent'; // Ensure background is transparent
                formattedContent.style.padding = '5px'; // Add some padding
                formattedContent.style.width = '100%'; // Ensures it takes full width
                // Set the HTML content
                formattedContent.innerHTML = htmlContent;
                // CRITICAL: Make sure to append this to the document
                if (rightColumnContainer) {
                    rightColumnContainer.appendChild(formattedContent);
                    // console.log("Content appended to rightColumnContainer");
                }
                else {
                    // If rightColumnContainer doesn't exist, append directly to secondColumn
                    secondColumn.innerHTML = '';
                    secondColumn.appendChild(formattedContent);
                    // console.log("Content appended to secondColumn");
                }
                // Verify the content is in the DOM
                // console.log("After appending, rightColumnContainer HTML:", 
                //     rightColumnContainer ? rightColumnContainer.innerHTML : "rightColumnContainer not found");
            }
            // Add columns to wrapper
            wrapper.appendChild(leftColumnContainer);
            wrapper.appendChild(rightColumnContainer);
            // Add to DOM
            document.body.appendChild(wrapper);
            // Ensure images are loaded
            const images = wrapper.querySelectorAll('img');
            const imagePromises = Array.from(images).map(img => {
                return new Promise((resolve) => {
                    if (img.complete) {
                        resolve();
                    }
                    else {
                        img.onload = () => resolve();
                        img.onerror = () => resolve();
                    }
                });
            });
            // Wait for images to load before rendering
            Promise.all(imagePromises).then(() => {
                // Small delay to ensure all styling is applied
                setTimeout(() => {
                    html2canvas(wrapper, {
                        scale: 2,
                        useCORS: true,
                        allowTaint: true,
                        logging: false,
                        backgroundColor: '#fff'
                    }).then(canvas => {
                        // Get data URL
                        const dataUrl = canvas.toDataURL('image/png');
                        // Clean up
                        document.body.removeChild(wrapper);
                        // Return the data URL and dimensions
                        resolve({
                            dataUrl,
                            width: contentWidthInPixels,
                            height: headerHeightInPixels
                        });
                    }).catch(error => {
                        // Clean up on error
                        console.error('error Promise load :', error);
                        if (document.body.contains(wrapper)) {
                            document.body.removeChild(wrapper);
                        }
                        reject(error);
                    });
                }, 100); // Small delay for styles
            });
        });
    }
    async loadFontForPDF(doc) {
        try {
            //   // Fetch the font file from the root path where it's available in the browser
            //   const response = await fetch('../../assets/fonts/Quicksand/static/Quicksand-Regular.ttf'); // Adjust path as needed
            //   const fontData = await response.arrayBuffer();
            //   const response1 = await fetch('../../assets/fonts/Quicksand/static/Quicksand-Bold.ttf'); // Adjust path as needed
            //   const fontData1 = await response1.arrayBuffer();
            //   // Convert ArrayBuffer to base64
            //   const base64Font = btoa(
            //     new Uint8Array(fontData)
            //       .reduce((data, byte) => data + String.fromCharCode(byte), '')
            //   );
            //   const base64Font1 = btoa(
            //     new Uint8Array(fontData1)
            //       .reduce((data, byte) => data + String.fromCharCode(byte), '')
            //   );
            const base64Font = '';
            const base64Font1 = '';
            console.log("first");
            // Add font to jsPDF
            const fontPath = 'Quicksand-Regular.ttf';
            doc.addFileToVFS(fontPath, base64Font);
            doc.addFont(fontPath, 'Quicksand', 'normal');
            doc.setFont('Quicksand', 'normal');
            const fontPath1 = 'Quicksand-Bold.ttf';
            doc.addFileToVFS(fontPath1, base64Font1);
            doc.addFont(fontPath1, 'Quicksand', 'bold');
            doc.setFont('Quicksand', 'bold');
            return Promise.resolve();
        }
        catch (error) {
            console.error('Error loading font:', error);
            // Fallback to standard font
            doc.setFont('helvetica');
            return Promise.resolve();
        }
    }
    // Then in your PDF generation method
    async generatePDF(event, elementOrId, filename = 'mortgage_application.pdf', printUpload = true) {
        let success, failure;
        if (event.invoke_event_config) {
            success = event.invoke_event_config.callback_config.OnSuccess ||
                event.invoke_event_config.callback_config.onResponse;
            failure = event.invoke_event_config.callback_config.onFailure ||
                event.invoke_event_config.callback_config.onException;
        }
        //   console.log("generatePDF started:");
        //   console.time('PDF Render Time');
        this.showLoader("Generating PDF... Please wait.");
        const sourceElementParent = document.getElementById(elementOrId);
        const generatedId = `section-nested-${elementOrId}`;
        var element = document.getElementById(generatedId);
        this.adjustDollerPrepend();
        this.adjustPercentageSuffix();
        element = this.transformInputsToLabelsAndWrapContent(element);
        // const element = //document.querySelector('.main-section-elements'); 
        const patterns = [/^Applicant_\d+$/, /^Date_\d+$/];
        element.querySelectorAll('*').forEach(el => {
            const text = el.textContent?.trim();
            if (text && patterns.some(p => p.test(text))) {
                el.style.color = 'transparent';
            }
        });
        this.cleanUpMaterialFields(element);
        if (!element) {
            console.error('Element not found for PDF.');
            return;
        }
        const options = {
            margin: [1.5625, 0.5, 0.5, 0.5],
            filename,
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2, useCORS: true },
            jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' },
            pagebreak: {
                mode: ['avoid-all', 'css', 'legacy'],
                avoid: ['.no-break', '.avoid-break']
            }
        };
        const self = this; // preserve context if needed
        const doc = await html2pdf().set(options).from(element).toPdf().get('pdf');
        const totalPages = doc.internal.getNumberOfPages();
        const containerIdHeader = (event['event_handler']?.toLowerCase() === 'step')
            ? 'stepblock-' + this.eventAdditionalParams['CEE_PRINT_SOURCE_HEADER']
            : this.eventAdditionalParams['CEE_PRINT_SOURCE_HEADER'];
        const sourceHtml_header = this.adjustTextareasForPDF(containerIdHeader) || document.createElement('div');
        const headerHeightInches = 100 / 96; // ≈ 1.0417 inches
        const pageWidth = doc.internal.pageSize.getWidth(); // full width in inches
        const margin = 0.5; // in inches
        const imageWidth = pageWidth - 2 * margin; // subtract left + right margins
        const imageX = margin; // start drawing at left margin
        this.convertHeaderToImageFixedHeight(sourceHtml_header).then(({ dataUrl, width, height }) => {
            for (let i = 1; i <= totalPages - 1; i++) {
                doc.setPage(i);
                doc.addImage(dataUrl, 'PNG', imageX, 0, imageWidth, headerHeightInches);
            }
            //   doc.save(filename);
            if (printUpload) {
                const blobObj = doc.output('blob');
                blobObj.name = filename; // optional: name the blob for backend
                // Call upload function
                try {
                    self.printUpload(blobObj, filename, success, failure);
                }
                catch (err) {
                    console.error('Upload failed:', err);
                    if (failure)
                        failure(err);
                }
            }
        });
        console.timeEnd('PDF Render Time');
    }
    transformInputsToLabelsAndWrapContent(element) {
        const clonedElement = element.cloneNode(true);
        // Convert <input> elements
        clonedElement.querySelectorAll('input').forEach(input => {
            const type = input.type?.toLowerCase();
            // Only replace text-like input types
            if (['text', 'email', 'number', 'tel', 'url', 'search', 'password', 'date'].includes(type)) {
                const wrapper = document.createElement('div');
                wrapper.textContent = input.value || '';
                wrapper.style.whiteSpace = 'normal';
                wrapper.style.wordBreak = 'break-word';
                wrapper.style.width = '100%';
                wrapper.style.display = 'inline-block';
                input.replaceWith(wrapper);
            }
        });
        // Replace only textareas
        clonedElement.querySelectorAll('textarea').forEach(textarea => {
            const wrapper = document.createElement('div');
            wrapper.textContent = textarea.value || '';
            wrapper.style.whiteSpace = 'pre-wrap'; // preserves line breaks
            wrapper.style.wordBreak = 'break-word';
            wrapper.style.width = '100%';
            wrapper.style.display = 'inline-block';
            textarea.replaceWith(wrapper);
        });
        this.replaceOnlyRadioAppViewRenderers(clonedElement);
        return clonedElement;
    }
    casePdfGenerate(event) {
        const self = this;
        // console.log("Generating PDF for event:");// comment
        //this.showLoader("Generating PDF... Please wait.");
        this.eventAdditionalParams = this.getAdditionalParameter();
        const printFormat = (this.eventAdditionalParams['CEE_PRINT_FORMAT'] || 'pdf').toLowerCase();
        const source = this.eventAdditionalParams['CEE_PRINT_SOURCE'];
        const containerIds = (event['event_handler']?.toLowerCase() === 'step')
            ? source.split('||').map(id => 'stepblock-' + id)
            : source.split('||');
        const containerIdHeader = (event['event_handler']?.toLowerCase() === 'step')
            ? 'stepblock-' + this.eventAdditionalParams['CEE_PRINT_SOURCE_HEADER']
            : this.eventAdditionalParams['CEE_PRINT_SOURCE_HEADER'];
        const splitContainerIds = [...containerIds];
        const sourceId = splitContainerIds[0];
        const filename = this.eventAdditionalParams['CEE_PRINT_FILE_NAME'] || "report_pdf.pdf";
        //const sourceHtml = this.adjustTextareasForPDF(sourceId);
        this.generatePDF(event, sourceId, filename); // test
    }
    adjustTextareasForPDF(sourceElementId) {
        const sourceElementParent = document.getElementById(sourceElementId);
        const generatedId = `section-nested-${sourceElementId}`;
        const generatedElement = document.getElementById(generatedId);
        // const sourceElementParent = document.querySelector('.main-section-elements'); 
        if (!sourceElementParent)
            return null;
        const clonedSourceParent = sourceElementParent.cloneNode(true);
        const combinedContainer = document.createElement('div');
        combinedContainer.appendChild(clonedSourceParent);
        combinedContainer.appendChild(sourceElementParent);
        // if (generatedElement) {
        //     const clonedGeneratedElement = generatedElement.cloneNode(true) as HTMLElement;
        //     combinedContainer.appendChild(clonedGeneratedElement);
        // }
        this.cleanUpMaterialFields(combinedContainer);
        const test = combinedContainer.querySelectorAll('.block_field_2514572_wrapper');
        test.forEach((wrapper) => {
            // console.log("test1");
        });
        this.replaceOnlyRadioAppViewRenderers(combinedContainer);
        test.forEach((wrapper) => {
            // console.log("test2");
        });
        const formElements = combinedContainer.querySelectorAll('input, textarea, select');
        formElements.forEach((el) => {
            if (!el || !el.tagName) {
                return;
            }
            let value = '';
            let displayElement;
            if (el.tagName === 'SELECT') {
                value = el.options[el.selectedIndex]?.text || '';
                displayElement = document.createElement('span');
                displayElement.innerText = value;
                displayElement.style.fontWeight = value ? 'bold' : 'normal';
            }
            else if (el.tagName === 'INPUT' && (el.type === 'checkbox')) {
                // For radio buttons and checkboxes
                const isChecked = el.checked;
                var labelText = this.findLabelText(el);
                // Create a custom element to represent the selection states
                displayElement = document.createElement('div');
                displayElement.style.display = 'inline-flex';
                displayElement.style.alignItems = 'center';
                // Prevent indicator from being split across PDF pages
                const avoidBreakWrapper = document.createElement('div');
                avoidBreakWrapper.style.display = 'inline-block';
                // avoidBreakWrapper.style.pageBreakInside = 'avoid';
                avoidBreakWrapper.style.breakInside = 'avoid';
                avoidBreakWrapper.style.setProperty('-webkit-column-break-inside', 'avoid');
                avoidBreakWrapper.style.setProperty('-moz-column-break-inside', 'avoid');
                avoidBreakWrapper.style.breakInside = 'avoid';
                avoidBreakWrapper.style.verticalAlign = 'middle';
                // Create the visual indicator (circle for radio, square for checkbox)
                const indicator = document.createElement('span');
                indicator.style.display = 'inline-block';
                indicator.style.width = '12px';
                indicator.style.height = '12px';
                indicator.style.border = '1px solid #000';
                indicator.style.marginRight = '6px';
                // indicator.style.marginBottom = '2px';
                // if (el.type === 'radio') {
                //     indicator.style.borderRadius = '50%';
                //     if (isChecked) {
                //         indicator.style.background = '#000';
                //         indicator.style.boxShadow = 'inset 0 0 0 2px #000';
                //     }
                // } else 
                if (el.type === 'checkbox') { // checkbox
                    if (isChecked) {
                        indicator.style.backgroundColor = '#000'; // Fill with black
                        indicator.style.border = '1px solid #000';
                        indicator.innerHTML = '✓'; // Checkmark symbol
                        indicator.style.color = '#fff'; // White checkmark
                        indicator.style.textAlign = 'center';
                        indicator.style.lineHeight = '10px';
                        indicator.style.fontSize = '10px';
                        indicator.style.fontWeight = 'bold';
                    }
                }
                // Add the indicator and label to our display element
                displayElement.appendChild(indicator);
                avoidBreakWrapper.appendChild(displayElement);
                // Add the label text if available
                const textSpan = document.createElement('span');
                textSpan.innerText = '';
                textSpan.style.borderBottom = 'none'; // ✅ Always remove underline
                textSpan.style.marginBottom = '2px';
                if (isChecked) {
                    textSpan.style.fontWeight = 'bold';
                    // textSpan.style.borderBottom = 'none';
                    // textSpan.style.marginBottom = '2px';
                }
                displayElement.appendChild(textSpan);
            }
            else {
                // For text inputs, textareas, etc.
                value = el.value || el.textContent || '';
                // Create a span to display the value
                displayElement = document.createElement('span');
                displayElement.innerText = value;
            }
            displayElement.style.display = 'inline-block';
            // displayElement.style.minHeight = '20px';
            displayElement.style.whiteSpace = 'pre-wrap';
            displayElement.style.color = '#000';
            displayElement.style.backgroundColor = '#fff';
            displayElement.style.font = getComputedStyle(el).font;
            // displayElement.style.padding = '4px 6px';
            displayElement.style.marginBottom = '6px';
            displayElement.style.fontWeight = 'bold';
            // If empty value, show an underline
            if (el.tagName !== 'INPUT' || (el.type !== 'radio' && el.type !== 'checkbox')) {
                if (!value.trim()) {
                    displayElement.style.borderBottom = '2px solid #ccc';
                    //displayElement.style.width = '100px';
                    displayElement.style.minHeight = '24px';
                    //displayElement.style.backgroundColor = '#fff'; // Light gray background to indicate it's filled
                    //displayElement.style.color = '#000'; // Black text color for visibility
                    displayElement.innerText = 'N/A'; // Default text to indicate it's filled
                    displayElement.style.fontWeight = 'bold';
                    displayElement.style.marginBottom = '4px';
                }
            }
            // Replace the original element with our display element
            el.parentNode.replaceChild(displayElement, el);
        });
        test.forEach((wrapper) => {
            // console.log("test3");
        });
        const images = combinedContainer.querySelectorAll('img');
        images.forEach((img) => {
            const original = sourceElementParent.querySelector(`img[src="${img.src}"]`);
            if (original instanceof HTMLImageElement) {
                const computedStyle = getComputedStyle(original);
                img.style.width = computedStyle.width;
                img.style.height = computedStyle.height;
            }
        });
        combinedContainer.style.width = '750px'; // Or whatever your target width is (slightly less than page width)
        combinedContainer.style.maxWidth = '750px';
        combinedContainer.style.padding = '20px';
        combinedContainer.style.boxSizing = 'border-box';
        combinedContainer.style.wordBreak = 'break-word';
        combinedContainer.style.overflowWrap = 'break-word';
        //combinedContainer.style.fontSize = '8px'; 
        const inlineAllStyles = (root) => {
            const allElements = root.querySelectorAll('*');
            allElements.forEach(el => {
                const computedStyle = window.getComputedStyle(el);
                // Only keep the most important styles for accurate text layout
                [
                    'font-family', 'font-size', 'font-weight', 'font-style',
                    'line-height', 'letter-spacing', 'color', 'background-color',
                    'text-align', 'vertical-align', 'text-transform',
                    'padding', 'margin', 'box-sizing', 'display', 'width', 'height',
                    'border', 'border-radius', 'white-space', 'overflow-wrap'
                ].forEach(prop => {
                    const value = computedStyle.getPropertyValue(prop);
                    el.style.fontFamily = 'Quicksand';
                    if (value) {
                        el.style.setProperty(prop, value);
                    }
                });
            });
        };
        inlineAllStyles(combinedContainer);
        test.forEach((wrapper) => {
            // console.log("test4");
        });
        // Fix label rendering issue
        const initialsLabels = combinedContainer.querySelectorAll('.col-md-2 .sharinginformationfo');
        initialsLabels.forEach((el) => {
            el.innerHTML = el.textContent?.trim() || '';
            el.style.fontFamily = 'Quicksand';
            el.style.fontWeight = 'normal';
            el.style.fontSize = '12px';
            el.style.whiteSpace = 'nowrap';
            el.style.letterSpacing = '0.3px';
            el.style.color = '#000';
            //el.style.background = 'transparent';
            el.style.display = 'inline-block';
        });
        const labelColumns = combinedContainer.querySelectorAll('.col-md-2');
        labelColumns.forEach((col) => {
            col.style.width = 'fit-content';
            col.style.minWidth = '150px';
            col.style.display = 'flex';
            col.style.alignItems = 'center';
        });
        const inputHeadingLabel = combinedContainer.querySelectorAll('.col-form-label,.cf-label-border-top');
        inputHeadingLabel.forEach((el) => {
            if (!el.innerText || !(el.innerText.trim() === '')) {
                el.style.color = '#808080';
                el.style.fontWeight = 'bold';
                el.style.letterSpacing = '1';
                //el.style.margin = '16px 0';
                el.style.fontFamily = 'Quicksand';
            }
            else {
                el.style.height = '0px';
                el.style.border = 'none';
                el.style.background = 'none';
                el.style.backgroundColor = 'transparent';
            }
        });
        const inputText = combinedContainer.querySelectorAll('.cf-label-bold');
        inputText.forEach((el) => {
            el.style.color = '#333';
            el.style.letterSpacing = '1';
            //el.style.margin = '16px 0';
            el.style.fontFamily = 'Quicksand';
        });
        boldFormatingOnSomeForms(combinedContainer);
        // If actual signature is not available, replace with a placeholder and need to modify this code
        // Find all elements with the class "visible_doc_sign" and make their text color white
        const visibleDocSignElements = combinedContainer.querySelectorAll('[class*="visible_doc_sign"]');
        visibleDocSignElements.forEach((node) => {
            // Change text color to white
            node.style.color = "white";
            // Optional: If you want to ensure it's not visible even when selected
            node.style.userSelect = "none";
        });
        //  // Apply manual styling for headings
        //  const mainHeadings = combinedContainer.querySelectorAll('.main-heading');
        //  mainHeadings.forEach((el: HTMLElement) => {
        //      //el.style.fontSize = '22px';
        //      el.style.fontWeight = 'bold';
        //      //el.style.margin = '16px 0';
        //      el.style.color = '#000'; // Optional: set a strong contrast color
        //      el.style.fontFamily = 'Quicksand-Bold'; // Ensure it's supported in PDF
        //  });
        const mainHeadings = combinedContainer.querySelectorAll('.main-heading');
        mainHeadings.forEach((el) => {
            el.style.fontFamily = 'Quicksand'; // ✅ Use the base family only
            el.style.fontWeight = 'bold'; // ✅ Use numeric bold weight (not 'bold' string)
            el.style.fontSize = '24px'; // Optional: adjust for clarity
            el.style.lineHeight = '1.2'; // ✅ Helps spacing
            el.style.letterSpacing = '0.4px'; // ✅ Prevents overlapping
            el.style.color = '#000';
        });
        // Apply styling for subheadings or other known classes
        const subHeadings = combinedContainer.querySelectorAll('[class*="sub-heading"]');
        subHeadings.forEach((el) => {
            el.style.fontFamily = 'Quicksand'; // ✅ Use the base family only
            el.style.fontWeight = 'bold'; // ✅ Use numeric bold weight (not 'bold' string)
            el.style.fontSize = '18px'; // Optional: adjust for clarity
            el.style.lineHeight = '1.2'; // ✅ Helps spacing
            el.style.letterSpacing = '0.4px'; // ✅ Prevents overlapping
            el.style.color = '#000';
            el.style.marginTop = '27px'; // Add space above sub-headings
            el.style.paddingTop = '5px'; // Additional padding for better spacing
        });
        // header issue
        // const wrapper = document.querySelector('div.block_field_1057637_wrapper') as HTMLElement;
        // if (wrapper) {
        //   wrapper.style.width = '600px';
        //   const leftCol = wrapper.querySelector('.col-md-6.field-0-0') as HTMLElement;
        //   const rightCol = wrapper.querySelector('.col-md-6.field-0-1') as HTMLElement;
        //   if (leftCol) leftCol.style.width = '300px';
        //   if (rightCol) rightCol.style.width = '300px';
        // }
        const wrappers = document.querySelectorAll('div.block_field_1057637_wrapper');
        wrappers.forEach(wrapper => {
            const wrapperEl = wrapper;
            wrapperEl.style.width = '600px';
            wrapperEl.style.marginBottom = "5px";
            const leftCol = wrapperEl.querySelector('.col-md-6.field-0-0');
            const rightCol = wrapperEl.querySelector('.col-md-6.field-0-1');
            if (leftCol)
                leftCol.style.width = '300px';
            if (rightCol)
                rightCol.style.width = '300px';
        });
        const wrappers1 = document.querySelectorAll('div.block_field_1127065_wrapper');
        wrappers1.forEach(wrapper => {
            const wrapperEl = wrapper;
            wrapperEl.style.width = '600px';
            wrapperEl.style.marginBottom = "5px";
            const leftCol = wrapperEl.querySelector('.col-md-6.field-0-0');
            const rightCol = wrapperEl.querySelector('.col-md-6.field-0-1');
            if (leftCol)
                leftCol.style.width = '300px';
            if (rightCol)
                rightCol.style.width = '300px';
        });
        const wrappers2 = document.querySelectorAll('div.block_field_1602836_wrapper');
        wrappers2.forEach(wrapper => {
            const wrapperEl = wrapper;
            wrapperEl.style.width = '600px';
            wrapperEl.style.marginBottom = "5px";
            const leftCol = wrapperEl.querySelector('.col-md-6.field-0-0');
            const rightCol = wrapperEl.querySelector('.col-md-6.field-0-1');
            if (leftCol)
                leftCol.style.width = '300px';
            if (rightCol)
                rightCol.style.width = '300px';
        });
        // const renderers = document.querySelectorAll('.app-view-renderer-7_45423-5');
        // renderers.forEach((el: Element) => {
        //     (el as HTMLElement).style.marginTop = '5px';
        // });
        const renderers1 = document.querySelectorAll('.app-view-renderer-5_45453-3');
        renderers1.forEach((el) => {
            el.style.marginTop = '5px';
        });
        // const renderers2 = document.querySelectorAll('.app-view-renderer-7_45423-6');
        // renderers2.forEach((el: Element) => {
        //     (el as HTMLElement).style.marginTop = '5px';
        // });
        this.fixStepLabelOverlapping(combinedContainer); // Fix overlapping step labels
        this.fixOverlappingBulletPoints(combinedContainer); // Fix overlapping bullet points
        this.fixNestedLabelStructures(combinedContainer); // test
        test.forEach((wrapper) => {
            // console.log("test5");
        });
        // Add spacing before each section element
        const sectionElements = combinedContainer.querySelectorAll('section');
        sectionElements.forEach((section) => {
            // section.style.marginTop = '10px'; // Add spacing before each section
            // section.style.paddingTop = '5px'; // Add additional padding
            section.style.marginBottom = '5px'; // Add spacing after each section
        });
        //tableHeadersElements(combinedContainer);
        // Function to detect if an element would overflow the current page
        const detectIfElementOverflowsPage = (element, currentY) => {
            const elementHeight = element.offsetHeight;
            const pageHeightPx = 1122; // A4 at 96 DPI
            return (currentY + elementHeight > pageHeightPx);
        };
        // Add PDF-row class to all table rows for page break detection
        // const allTableRows = combinedContainer.querySelectorAll('table tr, mat-mdc-table mat-row');
        // allTableRows.forEach((row: HTMLElement) => {
        //     row.classList.add('pdf-row');
        // });
        // Process page breaks for all rows in the document
        // let currentY = 0;
        // const pageHeightPx = 1122; // A4 at 96 DPI
        // let lastRowOfPage: HTMLElement | null = null;
        // Get all PDF rows in the document in sequence
        // const allPdfRows = combinedContainer.querySelectorAll('.pdf-row');
        // allPdfRows.forEach((row: HTMLElement, index) => {
        //     const rowHeight = row.offsetHeight;
        //     // If adding this row would overflow the page
        //     if (currentY + rowHeight > pageHeightPx + 5) {
        //         // Mark the previous row as the last row of the page
        //         if (lastRowOfPage) {
        //             // Apply page break properties to the last row of the page
        //             lastRowOfPage.style.setProperty('page-break-inside', 'avoid');
        //             lastRowOfPage.style.setProperty('break-inside', 'avoid');
        //             lastRowOfPage.style.setProperty('page-break-after', 'auto');
        //         }
        //         // Create spacer to push content to next page
        //         const spacer = document.createElement('div');
        //         spacer.style.height = (pageHeightPx - currentY) + 'px';
        //         spacer.style.display = 'block';
        //         row.parentNode?.insertBefore(spacer, row);
        //         // Reset for new page
        //         currentY = 0;
        //         lastRowOfPage = null;
        //     }
        //     // Update position and last row reference
        //     currentY += rowHeight;
        //     lastRowOfPage = row;
        //     // For the very last row in the document
        //     if (index === allPdfRows.length - 1 && lastRowOfPage) {
        //         lastRowOfPage.style.setProperty('page-break-inside', 'avoid');
        //         lastRowOfPage.style.setProperty('break-inside', 'avoid');
        //         lastRowOfPage.style.setProperty('page-break-after', 'auto');
        //     }
        // });
        this.fixNestedLabelStructures(combinedContainer); // test
        this.removeAddButton(combinedContainer);
        // Target elements within the combinedContainer, not the entire document
        // Target elements within the combinedContainer, not the entire document
        document.querySelectorAll('.section-0-0-1-3-0.step-45237,' +
            '.section-0-0-1-4-0.step-45521,' +
            '.app-view-renderer-18_46450-1.block_field_151851050333332_wrapper,' +
            '.app-view-renderer-14_45320-2,' +
            '.app-view-renderer-10_45320-2,' +
            '.cee-section.row.section-0-0-1-1-0.step-45043,' +
            '.block_field_1135670_wrapper,' +
            '.block_field_2553578_wrapper,' +
            '.block_field_2647691_wrapper,' +
            '.block_field_1993215_wrapper,' +
            '.block_field_2356219_wrapper,' +
            '.block_field_5622882_wrapper,' +
            '.block_field_6215202_wrapper,' +
            '.block_field_3214831_wrapper,' +
            '.block_field_2025129_wrapper,' +
            '.block_field_4756600_wrapper,' +
            '.block_field_2871196_wrapper,' +
            '.block_field_1981319_wrapper,' +
            '.block_field_2963716_wrapper,' +
            '.block_field_1297584_wrapper,' +
            '.block_field_5227011_wrapper,' +
            '.block_field_3802960_wrapper,' +
            '.block_field_5577468_wrapper,' +
            '.block_field_3245258_wrapper,' +
            '.block_field_2523354_wrapper,' +
            '.block_field_3245258_wrapper,' +
            '.block_field_2301701_wrapper,' +
            '.block_field_3078751_wrapper,' +
            '.block_field_3991634_wrapper,' +
            '.block_field_2426487_wrapper,' +
            '.block_field_3078751_wrapper,' +
            '.block_field_2231986_wrapper,' +
            '.block_field_3059426_wrapper,' +
            '.block_field_2782362_wrapper,' +
            '.block_field_3504770_wrapper,' +
            '.block_field_2235683_wrapper,' +
            '.block_field_4031710_wrapper,' +
            '.app-view-renderer-10_45320-2 block_field_2121787_wrapper,' +
            '.app-view-renderer-14_45320-2 block_field_4031710_wrapper,' +
            '.block_field_151851090851454_wrapper,' +
            '.block_field_151851090677458_wrapper,' +
            '.block_field_151851090842462_wrapper,' +
            '.block_field_5188238_wrapper,' +
            '.block_field_2514572_wrapper').forEach(el => {
            el.classList.remove('col-auto');
            el.classList.add('col-md-12');
        });
        document.querySelectorAll('.app-view-renderer-6_45068-1').forEach(el => {
            el.classList.remove('col-auto');
            el.classList.add('col-md-6');
        });
        document.querySelectorAll('.app-view-renderer-6_45068-1,' +
            '.app-view-renderer-5_45068-2').forEach(el => {
            el.classList.add('col-md-6');
        });
        document.querySelectorAll('.app-view-renderer-14_45320-3').forEach(el => {
            // console.log("app-view-renderer-14_45320-3", el);
            el.classList.remove('col-md-4');
            el.classList.add('col-md-3');
        });
        document.querySelectorAll('.app-view-renderer-9_46406-9').forEach(el => {
            // console.log("app-view-renderer-14_45320-3", el);
            el.classList.remove('col-md-4');
            el.classList.add('col-md-12');
        });
        document.querySelectorAll('.app-view-renderer-9_46406-9').forEach(el => {
            // console.log("app-view-renderer-14_45320-3", el);
            el.classList.remove('col-md-4');
            el.classList.add('col-md-3');
        });
        document.querySelectorAll('.cee-section row section-0-0-1-0-1').forEach(el => {
            el.classList.add('col-md-6');
        });
        document.querySelectorAll('.app-view-renderer-6_45068-1').forEach(el => {
            el.classList.add('col-md-6');
        });
        document.querySelectorAll('.app-view-renderer-5_45280-6.col-md-4').forEach(el => {
            el.classList.remove('col-md-4');
            el.classList.add('col-md-12');
        });
        document.querySelectorAll('.block_field_9728023_wrapper').forEach(el => {
            el.classList.remove('col-auto');
            el.classList.add('col-md-12');
        });
        test.forEach((wrapper) => {
            // console.log("test7");
        });
        this.boldAndColorInLabel(combinedContainer);
        this.removeCheckboxUnderline();
        this.adjustDollerPrepend();
        this.rebuildMaterialTables(combinedContainer);
        this.rebuildMaterialTablesInRepeatable(combinedContainer);
        this.applyResolutionSpecificFixes(combinedContainer);
        this.adjustPercentageSuffix();
        this.applyPageBreakStylesAfterTable(combinedContainer);
        this.transformSignaturesToTable(combinedContainer);
        this.mainBorrowerListPadding(combinedContainer);
        const labels = document.getElementsByClassName('acknowledgementandsi');
        document.querySelectorAll('.block_field_4031710_wrapper').forEach((wrapper) => {
            const validLabels = [];
            // Extract valid label text
            wrapper.querySelectorAll('label.acknowledgementandsi').forEach((label) => {
                const text = label.textContent?.trim();
                if (text && !text.includes('NaN') && /[a-zA-Z]/.test(text)) {
                    validLabels.push(text);
                }
            });
            // Create a container with the new label divs
            const container = document.createElement('div');
            container.className = 'custom-label-wrapper';
            validLabels.forEach((labelText) => {
                const labelDiv = document.createElement('div');
                labelDiv.textContent = labelText;
                labelDiv.style.color = '#808080';
                //labelDiv.style.marginBottom = '8px';
                labelDiv.style.fontWeight = 'bold';
                container.appendChild(labelDiv);
            });
            // Replace wrapper in-place
            if (validLabels.length > 0) {
                wrapper.replaceWith(container);
            }
            else {
                // If no valid labels, just remove the app-view-renderer
                wrapper.remove();
            }
        });
        this.processLabelWrappers([
            'block_field_151851090851454_wrapper',
            'block_field_151851090677458_wrapper',
            'block_field_151851090842462_wrapper'
        ]);
        const bf = combinedContainer.querySelectorAll('.data-list');
        bf.forEach((section) => {
            section.style.paddingBottom = '1px';
        });
        const bf2 = combinedContainer.querySelectorAll('.field-wrapper, .ng-star-inserted');
        bf2.forEach((section) => {
            section.style.paddingBottom = '2px';
        });
        const bf3 = combinedContainer.querySelectorAll('.app-view-renderer-15_46489-2');
        bf3.forEach((section) => {
            section.style.paddingBottom = '5px';
        });
        // Apply marginTop to different classes
        const fields1 = ['.app-view-renderer-9_45280-1', '.app-view-renderer-9_45280-3', '.app-view-renderer-9_45280-5'];
        this.setMarginForElements(combinedContainer, fields1, '30px');
        const fields2 = ['.app-view-renderer-8_46578-0', '.app-view-renderer-8_46578-1', '.app-view-renderer-8_46578-3', '.app-view-renderer-8_46578-5'];
        this.setMarginForElements(combinedContainer, fields2, '40px');
        const fields3 = ['.app-view-renderer-12_45280-0', '.app-view-renderer-12_45280-1'];
        this.setMarginForElements(combinedContainer, fields3, '50px');
        this.wrapPartialLabelText(combinedContainer);
        test.forEach((wrapper) => {
            // console.log("testend");
        });
        return combinedContainer;
    }
    processLabelWrappers(wrapperClassNames = []) {
        wrapperClassNames.forEach((className) => {
            document.querySelectorAll(`.${className}`).forEach((wrapper) => {
                const validLabels = [];
                // Extract valid labels
                wrapper.querySelectorAll('label').forEach((label) => {
                    const text = label.textContent?.trim();
                    if (text &&
                        !/Applicant_\d+/i.test(text) &&
                        !text.includes('NaN') &&
                        /[a-zA-Z]/.test(text)) {
                        validLabels.push(text);
                    }
                });
                if (validLabels.length > 0) {
                    // Create replacement structure
                    const rowDiv = document.createElement('div');
                    rowDiv.className = 'row';
                    const colDiv = document.createElement('div');
                    colDiv.className = 'col-md-12';
                    const table = document.createElement('div');
                    table.style.display = 'table';
                    table.style.width = '100%';
                    validLabels.forEach((labelText) => {
                        const row = document.createElement('div');
                        row.style.display = 'table-row';
                        const cell = document.createElement('div');
                        cell.style.display = 'table-cell';
                        cell.style.color = 'black';
                        cell.style.fontWeight = 'bold';
                        cell.style.padding = '4px 0';
                        cell.textContent = labelText;
                        row.appendChild(cell);
                        table.appendChild(row);
                    });
                    colDiv.appendChild(table);
                    rowDiv.appendChild(colDiv);
                    wrapper.replaceWith(rowDiv);
                }
                else {
                    wrapper.remove(); // No valid labels found
                }
            });
        });
    }
    wrapPartialLabelText(container) {
        const labels = container.querySelectorAll('label');
        labels.forEach(label => {
            let hasSpan = false;
            label.childNodes.forEach(node => {
                if (node.nodeType === Node.ELEMENT_NODE && node.tagName === 'SPAN') {
                    hasSpan = true;
                }
            });
            if (hasSpan) {
                // Only wrap unwrapped text nodes
                label.childNodes.forEach(node => {
                    if (node.nodeType === Node.TEXT_NODE && node.textContent?.trim()) {
                        // Wrap plain text in a span
                        const span = document.createElement('span');
                        span.textContent = node.textContent;
                        label.replaceChild(span, node);
                    }
                });
            }
        });
        //console.log("Wrapped partial label text in spans where applicable.",labels);
    }
    transformSignaturesToTable(tempRoot) {
        const targetSelectors = [
            '.block_field_9296486_wrapper,' +
                '.block_field_151851090851454_wrapper,' +
                '.block_field_5188238_wrapper'
            // Add more as 
        ];
        const signatureBlocks = tempRoot.querySelectorAll(targetSelectors.join(','));
        signatureBlocks.forEach(wrapper => {
            const appViewRenderer = wrapper.closest('app-view-renderer');
            if (!appViewRenderer)
                return;
            const rows = [];
            const signatureRows = wrapper.querySelectorAll('.row.show-in-row');
            signatureRows.forEach(rowEl => {
                const row = [];
                const colEls = Array.from(rowEl.children).filter(el => el.nodeType === 1 &&
                    el.classList &&
                    Array.from(el.classList).some(cls => cls.startsWith('col-md-')));
                colEls.forEach(colEl => {
                    const label = colEl.querySelector('label.signatures');
                    if (!label)
                        return; // Skip columns without the actual signed name/date
                    const text = label.textContent?.trim() || '';
                    const colClass = Array.from(colEl.classList).find(cls => cls.startsWith('col-md-')) || 'col-md-12';
                    const width = parseInt(colClass.replace('col-md-', ''), 10) / 12 * 100;
                    row.push({ text, width });
                });
                // Only push rows that contain meaningful data (e.g. Bunty Test, Date)
                if (row.length > 0)
                    rows.push(row);
            });
            if (rows.length > 0) {
                const table = buildTable(rows);
                appViewRenderer.replaceWith(table);
            }
        });
        function buildTable(rows) {
            const screenWidth = window.screen.width;
            const screenHeight = window.screen.height;
            const table = document.createElement('table');
            if (screenWidth === 1920 && screenHeight === 1080) {
                table.style.width = '92%';
            }
            else if (screenWidth === 1366 && screenHeight === 768) {
                table.style.width = '98%';
            }
            else {
                table.style.width = '90%';
            }
            table.style.borderCollapse = 'collapse';
            table.style.margin = '40px 0';
            table.style.fontSize = '14px';
            rows.forEach(row => {
                const tr = document.createElement('tr');
                row.forEach(cell => {
                    const td = document.createElement('td');
                    td.textContent = cell.text || '';
                    td.style.width = cell.width + '%';
                    td.style.fontWeight = 'bold'; // test
                    //td.style.color = 'grey'; // color for label
                    td.style.padding = '8px';
                    tr.appendChild(td);
                });
                table.appendChild(tr);
            });
            return table;
        }
    }
    mainBorrowerListPadding(combinedContainer) {
        const mainBorrower = combinedContainer.querySelectorAll('.bborrowerguarantorco.comp-574647'
        // '.app-view-renderer-7_45423-4.block_field_1135670_wrapper'
        );
        mainBorrower.forEach((node) => {
            // console.log("mainBorrower", node);
            // node.style.marginLeft = '0';
            node.style.paddingLeft = '0';
        });
        const test = combinedContainer.querySelectorAll('.cf-textfield label.col-form-label');
        test.forEach((node) => {
            // console.log("test", node);
            // node.style.marginLeft = '0';
            node.style.textTransform = 'capitalize';
        });
    }
    applyPageBreakStylesAfterTable(containerMain) {
        const section = document.querySelector('.cee-section.row.section-0-0-1-0-4.step-44897.template-');
        if (section) {
            section.style.setProperty('break-before', 'page'); // modern
            section.style.setProperty('page-break-before', 'always'); // legacy CSS
            section.style.setProperty('display', 'block');
        }
    }
    setMarginForElements(combinedContainer, classes, margin) {
        const elements = combinedContainer.querySelectorAll(classes.join(', '));
        elements.forEach((el) => {
            el.style.marginTop = margin;
        });
    }
    replaceOnlyRadioAppViewRenderers(containerMain) {
        const renderers = containerMain.querySelectorAll('app-view-renderer');
        renderers.forEach(renderer => {
            // Save non-radio/checkbox children before replacing
            const preservedNodes = [];
            renderer.childNodes.forEach(child => {
                if (child.nodeType === Node.ELEMENT_NODE &&
                    !child.matches('app-cee-radio, app-cee-checkbox')) {
                    preservedNodes.push(child);
                }
            });
            const radioComponent = renderer.querySelector('app-cee-radio');
            const checkboxComponent = renderer.querySelector('app-cee-checkbox');
            let containerSub = null;
            if (radioComponent) {
                // Look for a group-level label inside form-label
                const formLabelEl = radioComponent.querySelector('.form-label label');
                const questionText = formLabelEl?.innerText?.trim();
                const radios = radioComponent.querySelectorAll('input[type="radio"]');
                if (!radios.length)
                    return;
                const options = [];
                radios.forEach(radio => {
                    const radioId = radio.id;
                    const labelElement = radioComponent.querySelector(`label[for="${radioId}"]`);
                    const label = labelElement?.innerText?.trim() || radio.value;
                    options.push({ value: radio.value, label, checked: radio.checked });
                });
                containerSub = document.createElement('div');
                containerSub.classList.add('form-group');
                const optionsHtml = options.map(opt => {
                    const bullet = 'O';
                    if (opt.checked) {
                        return `<div style="margin-top: 0px; font-family: Quicksand;">
                        <strong><span style="color: #4287f5;">${bullet}</span>&nbsp;&nbsp;${opt.label}</strong>
                    </div>`;
                    }
                    else {
                        return `<div style="margin-top: 0px; font-family: Quicksand;">
                        <strong>${bullet}&nbsp;&nbsp;${opt.label}</strong>
                    </div>`;
                    }
                }).join('');
                const hasSpecificClass = renderer.classList.contains('app-view-renderer-15_45423-2');
                const marginTopStyle = hasSpecificClass ? 'margin-top: 35px;' : '';
                // Only add question text if it is NOT already preserved in a label node
                let questionHeaderHtml = '';
                const labelAlreadyPreserved = preservedNodes.some(node => {
                    // Check if any preserved node is a label or contains the question text
                    return (node.tagName?.toLowerCase() === 'label' ||
                        (node.textContent?.trim() === questionText));
                });
                if (questionText && !labelAlreadyPreserved) {
                    questionHeaderHtml = `<div style="margin-bottom: 2px;${marginTopStyle}"><strong>${questionText}</strong></div>`;
                }
                containerSub.innerHTML = `
                ${questionHeaderHtml}
                <div style="margin-left: 10px;">
                    ${optionsHtml}
                </div>
            `;
                containerSub.style.pageBreakInside = 'avoid';
                containerSub.style.breakInside = 'avoid';
                const classArray = [
                    'app-view-renderer-17_45521-51',
                    'app-view-renderer-17_45521-52',
                    'app-view-renderer-17_45521-53',
                    'app-view-renderer-12_45237-50',
                    'app-view-renderer-12_45237-51',
                    'app-view-renderer-12_45237-52',
                ];
                if (classArray.some(className => renderer.classList.contains(className))) {
                    const outerWrapper = document.createElement('div');
                    outerWrapper.className = 'col-md-4';
                    outerWrapper.appendChild(containerSub);
                    renderer.replaceWith(outerWrapper);
                }
            }
            else if (checkboxComponent) {
                const checkboxes = checkboxComponent.querySelectorAll('.custom-control-input');
                const options = [];
                checkboxes.forEach(checkbox => {
                    const checkboxId = checkbox.id;
                    const labelSpan = checkboxComponent.querySelector(`.custom-control-label[for="${checkboxId}"] span`);
                    const label = labelSpan?.textContent?.trim() || checkbox.value;
                    options.push({ value: checkbox.value, label, checked: checkbox.checked });
                });
                containerSub = document.createElement('div');
                containerSub.classList.add('form-group');
                const optionsHtml = options.map(opt => {
                    const bullet = opt.checked ? 'X' : 'O';
                    return `<div style="margin-top: 0px; font-family: Quicksand;"><strong>${bullet}&nbsp;&nbsp;${opt.label}</strong></div>`;
                }).join('');
                containerSub.innerHTML = `
                <div style="margin-left: 10px;">
                    ${optionsHtml}
                </div>
            `;
                containerSub.style.pageBreakInside = 'avoid';
                containerSub.style.breakInside = 'avoid';
            }
            if (containerSub) {
                // Remove all app-cee-radio elements from containerSub
                renderer.querySelectorAll('app-cee-radio').forEach(node => node.remove());
                // Remove all app-cee-checkbox elements from containerSub
                renderer.querySelectorAll('app-cee-checkbox').forEach(node => node.remove());
                // Re-add preserved nodes (like labels, images, etc.) before the radio/checkbox summary
                // But filter out any app-cee-radio or app-cee-checkbox elements
                preservedNodes.forEach(node => {
                    containerSub.insertBefore(node.cloneNode(true), containerSub.firstChild);
                });
                renderer.replaceWith(containerSub);
            }
        });
        document.querySelectorAll('.form-group').forEach(el => {
            el.style.pageBreakInside = 'avoid';
            el.style.breakInside = 'avoid';
        });
    }
    //     private replaceOnlyRadioAppViewRenderers(containerMain: HTMLElement) {
    //         const renderers = containerMain.querySelectorAll('app-view-renderer');
    //         renderers.forEach(renderer => {
    //             const radioComponent = renderer.querySelector('app-cee-radio');
    //             const checkboxComponent = renderer.querySelector('app-cee-checkbox');
    // if (radioComponent) {
    //     // Look for a group-level label inside form-label
    //     const formLabelEl = radioComponent.querySelector('.form-label label');
    //     const questionText = (formLabelEl as HTMLElement | null)?.innerText?.trim();
    //     const radios = radioComponent.querySelectorAll('input[type="radio"]') as NodeListOf<HTMLInputElement>;
    //     if (!radios.length) return;
    //     const options: { value: string; label: string; checked: boolean }[] = [];
    //     radios.forEach(radio => {
    //         const value = radio.value;
    //         const checked = radio.checked;
    //         const radioId = radio.id;
    //         const labelElement = radioComponent.querySelector(`label[for="${radioId}"]`);
    //         const label = (labelElement as HTMLElement | null)?.innerText?.trim() || value;
    //         options.push({ value, label, checked });
    //     });
    //     const containerSub = document.createElement('div');
    //     containerSub.classList.add('form-group');
    //     const optionsHtml = options.map(opt => {
    //         const bullet = 'O';
    //         if (opt.checked) {
    //             return `<div style="margin-top: 0px; font-family: Quicksand;">
    //                 <strong><span style="color: #4287f5;">${bullet}</span>&nbsp;&nbsp;${opt.label}</strong>
    //             </div>`;
    //         } else {
    //             return `<div style="margin-top: 0px; font-family: Quicksand;">
    //                 <strong>${bullet}&nbsp;&nbsp;${opt.label}</strong>
    //             </div>`;
    //         }
    //     }).join('');
    //     const hasSpecificClass = renderer.classList.contains('app-view-renderer-15_45423-2');
    //             const marginTopStyle = hasSpecificClass ? 'margin-top: 35px;' : '';
    //             //<div style="margin-bottom: 2px; ${marginTopStyle}">
    //     // Render question text only if it exists
    //     const questionHeaderHtml = questionText
    //         ? `<div style="margin-bottom: 2px;${marginTopStyle}"><strong>${questionText}</strong></div>`
    //         : '';
    //     containerSub.innerHTML = `
    //         ${questionHeaderHtml}
    //         <div style="margin-left: 10px;">
    //             ${optionsHtml}
    //         </div>
    //     `;
    //     containerSub.style.pageBreakInside = 'avoid';
    //     containerSub.style.breakInside = 'avoid';
    //     renderer.replaceWith(containerSub);
    // }else if (checkboxComponent) {
    //                 console.log('Processing checkbox component');
    //                 const checkboxes = checkboxComponent.querySelectorAll('.custom-control-input') as NodeListOf<HTMLInputElement>;
    //                 // Get all checkbox values and their associated labels
    //                 const options: { value: string; label: string; checked: boolean }[] = [];
    //                 checkboxes.forEach(checkbox => {
    //                     const value = checkbox.value;
    //                     const checked = checkbox.checked;
    //                     const checkboxId = checkbox.id;
    //                     const labelSpan = checkboxComponent.querySelector(`.custom-control-label[for="${checkboxId}"] span`);
    //                     const label = labelSpan?.textContent?.trim() || value;
    //                     options.push({ value, label, checked });
    //                 });
    //                 // Build the simplified HTML for checkbox
    //                 const containerSub = document.createElement('div');
    //                 containerSub.classList.add('form-group');
    //                 // const optionsHtml = options.map(opt => {
    //                 //     const mark = opt.checked ? '[X]' : '[ ]'; // Using filled and empty square symbols
    //                 //     return `<div style="display: inline-flex; align-items: center; white-space: pre-wrap; color: #000; background-color: #fff; font-family: Quicksand; margin-bottom: 6px; font-weight: bold;">${mark}&nbsp;&nbsp;${opt.label}</div>`;
    //                 // }).join('');
    //                 const optionsHtml = options.map(opt => {
    //                 const bullet = opt.checked ? 'X' : 'O';
    //                 return `<div style="margin-top: 0px;font-family: Quicksand;"><strong>${bullet}&nbsp;&nbsp;${opt.label}</strong></div>`;
    //             }).join('');
    //                 containerSub.innerHTML = `
    //                     <div style="margin-left: 10px;">
    //                     ${optionsHtml}
    //                     </div>
    //                 `;
    //                 containerSub.style.pageBreakInside = 'avoid';
    //                 containerSub.style.breakInside = 'avoid';
    //                 renderer.replaceWith(containerSub);
    //             }
    //         });
    //         document.querySelectorAll('.form-group').forEach(el => {
    //             (el as HTMLElement).style.pageBreakInside = 'avoid';
    //             (el as HTMLElement).style.breakInside = 'avoid';
    //         });
    //     }
    applyResolutionSpecificFixes(container) {
        const screenWidth = window.screen.width;
        const screenHeight = window.screen.height;
        if (screenWidth === 1920 && screenHeight === 1080) {
            // 👉 Logic for 1920x1080 resolution implemented
            // console.log('1920x1080 resolution detected');
            // Write your resolution-specific fixes here
        }
        else if (screenWidth === 1366 && screenHeight === 768) {
            // 👉 Logic for 1366x768 resolution
            // console.log('1366x768 resolution detected');
            // Write your resolution-specific fixes here
        }
        else {
            // 👉 Default logic for any other resolution
            // console.log('Other resolution detected');
            // Write fallback logic here
        }
    }
    // rebuildMaterialTables(container: HTMLElement) {
    //   const materialTables = container.querySelectorAll('table.mat-mdc-table');
    //   materialTables.forEach((table: HTMLTableElement) => {
    //     const newTable = document.createElement('table');
    //     newTable.style.pageBreakInside = 'avoid';
    //     newTable.style.borderCollapse = 'collapse';
    //     newTable.style.tableLayout = 'fixed';
    //     newTable.style.margin = '12px 0';
    //     newTable.style.width = '100%';
    //     const thead = table.querySelector('thead');
    //     const tbody = table.querySelector('tbody');
    //     const newTbody = document.createElement('tbody');
    //     let columnCount = 0;
    //     // Rebuild the header
    //     if (thead) {
    //       const oldHeadRow = thead.querySelector('tr');
    //       if (oldHeadRow) {
    //         const newThead = document.createElement('thead');
    //         const newHeadRow = document.createElement('tr');
    //         const ths = oldHeadRow.querySelectorAll('th');
    //         columnCount = ths.length;
    //         ths.forEach((th: HTMLElement) => {
    //           const newTh = document.createElement('th');
    //           newTh.innerText = th.innerText.trim();
    //           newTh.style.backgroundColor = '#656772';
    //           newTh.style.color = '#fff';
    //           newTh.style.fontWeight = 'bold';
    //           newTh.style.textAlign = 'center';
    //           newTh.style.padding = '8px';
    //           newTh.style.fontSize = '12px';
    //           newTh.style.width = `${95 / columnCount}%`;
    //           newTh.style.border = 'none';
    //           newHeadRow.appendChild(newTh);
    //         });
    //         newThead.appendChild(newHeadRow);
    //         newTable.appendChild(newThead);
    //       }
    //     }
    //     // Rebuild rows
    //     if (tbody) {
    //       const rows = Array.from(tbody.querySelectorAll('tr')).filter(row =>
    //         Array.from(row.querySelectorAll('td')).some(td => td.textContent?.trim())
    //       );
    //       rows.forEach((row, rowIndex) => {
    //         const newRow = document.createElement('tr');
    //         const tds = row.querySelectorAll('td');
    //         tds.forEach((td: HTMLElement) => {
    //           const newTd = document.createElement('td');
    //           newTd.innerText = td.innerText.trim();
    //           newTd.style.padding = '6px';
    //           newTd.style.fontSize = '12px';
    //           newTd.style.textAlign = 'center';
    //           newTd.style.width = `${95 / columnCount}%`;
    //           newTd.style.border = 'none';
    //           newRow.appendChild(newTd);
    //         });
    //         newTbody.appendChild(newRow);
    //         // Row divider except last
    //         if (rowIndex < rows.length - 1) {
    //           const dividerRow = document.createElement('tr');
    //           const dividerTd = document.createElement('td');
    //           dividerTd.colSpan = columnCount;
    //           dividerTd.style.borderBottom = '1px solid #ccc';
    //           dividerTd.style.height = '1px';
    //           dividerTd.style.padding = '0';
    //           dividerRow.appendChild(dividerTd);
    //           newTbody.appendChild(dividerRow);
    //         }
    //       });
    //     }
    //     // Add label row from next app-view-renderers
    //     const labelRow = document.createElement('tr');
    //     const tableWrapper = table.closest('app-view-renderer');
    //     let nextSibling = tableWrapper?.nextElementSibling;
    //     let appRenderers: HTMLElement[] = [];
    //     while (nextSibling && appRenderers.length < columnCount) {
    //       if (nextSibling.tagName.toLowerCase() === 'app-view-renderer') {
    //         appRenderers.push(nextSibling as HTMLElement);
    //       }
    //       nextSibling = nextSibling.nextElementSibling;
    //     }
    //     if (appRenderers.length === columnCount) {
    //       appRenderers.forEach(renderer => {
    //         const label = renderer.querySelector('label');
    //         const td = document.createElement('td');
    //         td.innerText = label?.textContent?.trim() || '';
    //         td.style.padding = '6px';
    //         td.style.fontSize = '12px';
    //         td.style.textAlign = 'center';
    //         td.style.width = `${95 / columnCount}%`;
    //         td.style.border = 'none';
    //         labelRow.appendChild(td);
    //         renderer.remove();
    //       });
    //       newTbody.appendChild(labelRow);
    //     }
    //     newTable.appendChild(newTbody);
    //     table.parentNode?.replaceChild(newTable, table);
    //   });
    // }
    rebuildMaterialTablesInRepeatable(container) {
        const materialTables = container.querySelectorAll('block_field_42137301');
        // const materialTables = Array.from(container.querySelectorAll('table.mat-mdc-table'))
        //   // Skip tables that have class comp-223 or comp-567 (add more as needed)
        //   .filter(table =>
        //     !Array.from(table.classList).some(cls =>
        //       ['block_field_42137301'].includes(cls)
        //     )
        //   );
        materialTables.forEach((table) => {
            const newTable = document.createElement('table');
            newTable.style.pageBreakInside = 'avoid';
            const screenWidth = window.screen.width;
            const screenHeight = window.screen.height;
            if (screenWidth === 1920 && screenHeight === 1080) {
                newTable.style.width = '92%';
            }
            else if (screenWidth === 1366 && screenHeight === 768) {
                newTable.style.width = '98%';
            }
            else {
                newTable.style.width = '90%';
            }
            newTable.style.borderCollapse = 'collapse';
            newTable.style.tableLayout = 'fixed';
            newTable.style.margin = '12px 0';
            const thead = table.querySelector('thead');
            const tbody = table.querySelector('tbody');
            // Copy headers
            if (thead) {
                const newThead = document.createElement('thead');
                const oldHeadRow = thead.querySelector('tr');
                newThead.style.display = 'table-header-group';
                var columns = 0;
                if (oldHeadRow) {
                    const newHeadRow = document.createElement('tr');
                    columns = oldHeadRow.querySelectorAll('th').length;
                    oldHeadRow.querySelectorAll('th').forEach((th) => {
                        const newTh = document.createElement('th');
                        newTh.innerText = th.innerText.trim();
                        newTh.style.backgroundColor = '#656772';
                        newTh.style.color = '#ffffff';
                        newTh.style.fontWeight = 'bold';
                        newTh.style.textAlign = 'center';
                        newTh.style.padding = '8px';
                        newTh.style.fontSize = '12px';
                        newTh.style.width = `${95 / columns}%`;
                        newTh.style.border = 'none';
                        newHeadRow.appendChild(newTh);
                    });
                    newThead.appendChild(newHeadRow);
                    newTable.appendChild(newThead);
                }
            }
            // Copy body rows
            if (tbody) {
                const newTbody = document.createElement('tbody');
                const rows = Array.from(tbody.querySelectorAll('tr')).filter(row => {
                    // Skip empty rows: all <td> are empty or invisible
                    const tds = Array.from(row.querySelectorAll('td'));
                    return tds.length && tds.some(td => td.textContent?.trim());
                });
                rows.forEach((row, rowIndex) => {
                    const newRow = document.createElement('tr');
                    const columns = row.querySelectorAll('td').length;
                    row.querySelectorAll('td').forEach((td) => {
                        const value = td.innerText.trim();
                        const newTd = document.createElement('td');
                        newTd.innerText = value;
                        newTd.style.padding = '6px';
                        newTd.style.fontSize = '12px';
                        newTd.style.textAlign = 'center';
                        newTd.style.width = `${95 / columns}%`;
                        newTd.style.border = 'none';
                        newRow.appendChild(newTd);
                    });
                    newTbody.appendChild(newRow);
                    // Add gray line after each row except the last one
                    if (rowIndex < rows.length - 1) {
                        const dividerRow = document.createElement('tr');
                        const dividerTd = document.createElement('td');
                        dividerTd.colSpan = row.querySelectorAll('td').length || 1;
                        dividerTd.style.borderBottom = '1px solid #ccc';
                        dividerTd.style.height = '1px';
                        dividerTd.style.padding = '0';
                        dividerRow.style.pageBreakInside = 'avoid';
                        dividerTd.style.pageBreakInside = 'avoid';
                        dividerRow.appendChild(dividerTd);
                        newTbody.appendChild(dividerRow);
                    }
                });
                // Add label row from next app-view-renderers
                const labelRow = document.createElement('tr');
                const tableWrapper = table.closest('div');
                let nextSibling = tableWrapper?.nextElementSibling;
                let appRenderers = [];
                while (nextSibling && appRenderers.length < columns) {
                    if (nextSibling.tagName.toLowerCase() === 'div') {
                        appRenderers.push(nextSibling);
                    }
                    nextSibling = nextSibling.nextElementSibling;
                }
                if (appRenderers.length === columns) {
                    appRenderers.forEach(renderer => {
                        const label = renderer.querySelector('label');
                        const td = document.createElement('td');
                        td.innerText = label?.textContent?.trim() || '';
                        td.style.padding = '6px';
                        td.style.fontSize = '14px';
                        td.style.fontWeight = 'bold';
                        td.style.textAlign = 'center';
                        td.style.width = `${95 / columns}%`;
                        td.style.border = 'none';
                        labelRow.appendChild(td);
                        renderer.remove();
                    });
                    newTbody.appendChild(labelRow);
                }
                newTable.appendChild(newTbody);
            }
            table.parentNode?.replaceChild(newTable, table);
            // Replace original table
            // table.parentNode?.replaceChild(newTable, table);
        });
        const targetSection1 = document.querySelector('.cee-section.row.section-0-0-1-0-4.step-44974.template-');
        if (targetSection1) {
            targetSection1.style.marginTop = '24px'; // or any value you prefer
        }
        const targetSection2 = document.querySelector('.cee-section.row.section-0-0-1-4-0.step-45237.template-');
        if (targetSection2) {
            targetSection2.style.marginTop = '50px'; // or any value you prefer
        }
    }
    rebuildMaterialTables(container) {
        //const materialTables = container.querySelectorAll('table.mat-mdc-table');
        const materialTables = Array.from(container.querySelectorAll('table.mat-mdc-table'))
            // Skip tables that have class comp-223 or comp-567 (add more as needed)
            .filter(table => !Array.from(table.classList).some(cls => ['block_field_42137301'].includes(cls)));
        materialTables.forEach((table) => {
            const newTable = document.createElement('table');
            newTable.style.pageBreakInside = 'avoid';
            const screenWidth = window.screen.width;
            const screenHeight = window.screen.height;
            if (screenWidth === 1920 && screenHeight === 1080) {
                newTable.style.width = '92%';
            }
            else if (screenWidth === 1366 && screenHeight === 768) {
                newTable.style.width = '98%';
            }
            else {
                newTable.style.width = '90%';
            }
            newTable.style.borderCollapse = 'collapse';
            newTable.style.tableLayout = 'fixed';
            newTable.style.margin = '12px 0';
            const thead = table.querySelector('thead');
            const tbody = table.querySelector('tbody');
            // Copy headers
            if (thead) {
                const newThead = document.createElement('thead');
                const oldHeadRow = thead.querySelector('tr');
                newThead.style.display = 'table-header-group';
                var columns = 0;
                if (oldHeadRow) {
                    const newHeadRow = document.createElement('tr');
                    columns = oldHeadRow.querySelectorAll('th').length;
                    oldHeadRow.querySelectorAll('th').forEach((th) => {
                        const newTh = document.createElement('th');
                        newTh.innerText = th.innerText.trim();
                        newTh.style.backgroundColor = '#656772';
                        newTh.style.color = '#ffffff';
                        newTh.style.fontWeight = 'bold';
                        newTh.style.textAlign = 'center';
                        newTh.style.padding = '8px';
                        newTh.style.fontSize = '12px';
                        newTh.style.width = `${95 / columns}%`;
                        newTh.style.border = 'none';
                        newHeadRow.appendChild(newTh);
                    });
                    newThead.appendChild(newHeadRow);
                    newTable.appendChild(newThead);
                }
            }
            // Copy body rows
            if (tbody) {
                const newTbody = document.createElement('tbody');
                const rows = Array.from(tbody.querySelectorAll('tr')).filter(row => {
                    // Skip empty rows: all <td> are empty or invisible
                    const tds = Array.from(row.querySelectorAll('td'));
                    return tds.length && tds.some(td => td.textContent?.trim());
                });
                rows.forEach((row, rowIndex) => {
                    const newRow = document.createElement('tr');
                    const columns = row.querySelectorAll('td').length;
                    row.querySelectorAll('td').forEach((td) => {
                        const value = td.innerText.trim();
                        const newTd = document.createElement('td');
                        newTd.innerText = value;
                        newTd.style.padding = '6px';
                        newTd.style.fontSize = '12px';
                        newTd.style.textAlign = 'center';
                        newTd.style.width = `${95 / columns}%`;
                        newTd.style.border = 'none';
                        newRow.appendChild(newTd);
                    });
                    newTbody.appendChild(newRow);
                    // Add gray line after each row except the last one
                    if (rowIndex < rows.length - 1) {
                        const dividerRow = document.createElement('tr');
                        const dividerTd = document.createElement('td');
                        dividerTd.colSpan = row.querySelectorAll('td').length || 1;
                        dividerTd.style.borderBottom = '1px solid #ccc';
                        dividerTd.style.height = '1px';
                        dividerTd.style.padding = '0';
                        dividerRow.style.pageBreakInside = 'avoid';
                        dividerTd.style.pageBreakInside = 'avoid';
                        dividerRow.appendChild(dividerTd);
                        newTbody.appendChild(dividerRow);
                    }
                });
                // Add label row from next app-view-renderers
                const labelRow = document.createElement('tr');
                const tableWrapper = table.closest('app-view-renderer');
                let nextSibling = tableWrapper?.nextElementSibling;
                let appRenderers = [];
                while (nextSibling && appRenderers.length < columns) {
                    if (nextSibling.tagName.toLowerCase() === 'app-view-renderer') {
                        appRenderers.push(nextSibling);
                    }
                    nextSibling = nextSibling.nextElementSibling;
                }
                if (appRenderers.length === columns) {
                    appRenderers.forEach(renderer => {
                        const label = renderer.querySelector('label');
                        const td = document.createElement('td');
                        td.innerText = label?.textContent?.trim() || '';
                        td.style.padding = '6px';
                        td.style.fontSize = '14px';
                        td.style.fontWeight = 'bold';
                        td.style.textAlign = 'center';
                        td.style.width = `${95 / columns}%`;
                        td.style.border = 'none';
                        labelRow.appendChild(td);
                        renderer.remove();
                    });
                    newTbody.appendChild(labelRow);
                }
                newTable.appendChild(newTbody);
            }
            table.parentNode?.replaceChild(newTable, table);
            // Replace original table
            // table.parentNode?.replaceChild(newTable, table);
        });
        const targetSection1 = document.querySelector('.cee-section.row.section-0-0-1-0-4.step-44974.template-');
        if (targetSection1) {
            targetSection1.style.marginTop = '24px'; // or any value you prefer
        }
        const targetSection2 = document.querySelector('.cee-section.row.section-0-0-1-4-0.step-45237.template-');
        if (targetSection2) {
            targetSection2.style.marginTop = '50px'; // or any value you prefer
        }
    }
    removeCheckboxUnderline() {
        document.querySelectorAll('app-view-renderer.border-bottom').forEach(el => {
            if (el.querySelector('input[type="checkbox"]')) {
                el.classList.remove('border-bottom');
            }
        });
    }
    adjustDollerPrepend() {
        document.querySelectorAll('.form-field.input-group').forEach(container => {
            const prependSpan = container.querySelector('.input-group-prepend span.input-group-text');
            const input = container.querySelector('input');
            if (prependSpan && prependSpan.textContent.trim() === '$' && input) {
                // Remove the prepend span's parent div
                prependSpan.closest('.input-group-prepend')?.remove();
                // Format the input value with commas and 2 decimal places
                let rawValue = input.value.replace(/[^\d.-]/g, ''); // Remove non-numeric except . and -
                let numericValue = parseFloat(rawValue);
                if (!isNaN(numericValue)) {
                    const formatted = `$ ${numericValue.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                    input.value = formatted;
                }
                else {
                    // fallback if value is empty or invalid
                    input.value = `$ 0.00`;
                }
            }
        });
    }
    adjustPercentageSuffix() {
        document.querySelectorAll('.form-field.input-group').forEach(container => {
            const appendSpan = container.querySelector('.input-group-append span.input-group-text');
            const input = container.querySelector('input');
            if (appendSpan && appendSpan.textContent.trim() === '%' && input) {
                // Remove the % span's parent div (if exists)
                const appendWrapper = appendSpan.closest('.input-group-append');
                if (appendWrapper)
                    appendWrapper.remove();
                // Clean and validate value
                let rawValue = input.value?.toString().trim() ?? '';
                let sanitized = rawValue.replace(/[^\d.-]/g, '');
                let numericValue = parseFloat(sanitized);
                if (!isNaN(numericValue) && isFinite(numericValue)) {
                    const formatted = `${numericValue.toLocaleString('en-US', {
                        minimumFractionDigits: 2,
                        maximumFractionDigits: 2
                    })}%`;
                    input.value = formatted;
                }
                else {
                    // If no valid value (empty/null/Infinity), show "N/A%" underlined
                    input.value = 'N/A%';
                    input.style.textDecoration = 'underline';
                }
            }
        });
    }
    boldAndColorInLabel(combinedContainer) {
        combinedContainer.querySelectorAll('app-view-renderer').forEach(renderer => {
            const isGray = renderer.classList.contains('cf-label-gray');
            const labels = renderer.querySelectorAll('label');
            // If this renderer contains repeatable-block-renderer and app-cee-textfield, change label color
            const hasRepeatableBlock = !!renderer.querySelector('repeatable-block-renderer');
            const hasTextfield = !!renderer.querySelector('app-cee-textfield');
            labels.forEach(label => {
                // Skip labels inside table rows
                const isInTableRow = !!label.closest('tr');
                if (isInTableRow)
                    return;
                // If label is inside repeatable-block-renderer and is an app-cee-label with both sub-heading and main-heading, ignore
                const isInRepeatableBlock = !!label.closest('repeatable-block-renderer');
                const isAppCeeLabel = label.closest('app-cee-label');
                const isAppCeeTextfield = label.closest('app-cee-textfield');
                const hasSubHeading = label.classList.contains('sub-heading');
                const hasMainHeading = label.classList.contains('main-heading');
                const signatures = label.classList.contains('cf-label-border-top');
                const isNonRepeatable = label.classList.contains('nonrepeatable');
                // const borroweracknowledgem = label.classList.contains('borroweracknowledgem');
                //for bc letter of direction sign
                const textgray = label.classList.contains('cf-text-gray');
                if (textgray) {
                    label.style.fontWeight = 'bold';
                    label.style.color = '#808080';
                }
                if (isInRepeatableBlock &&
                    isAppCeeLabel &&
                    hasSubHeading ||
                    hasMainHeading ||
                    signatures) {
                    return;
                }
                // If label has nonrepeatable class, set color to grey
                if (isNonRepeatable) {
                    label.style.fontWeight = 'bold';
                    label.style.color = '#808080';
                }
                // Special color if both repeatable-block-renderer and app-cee-textfield are present
                else if (hasRepeatableBlock && hasTextfield) {
                    label.style.fontWeight = 'bold';
                    label.style.color = '#808080';
                }
                else if (isGray) {
                    label.style.fontWeight = 'bold';
                    label.style.color = '#808080';
                }
                else {
                    label.style.fontWeight = 'bold';
                    label.style.color = '#000';
                    label.style.marginTop = '2px';
                }
                if (isAppCeeTextfield) {
                    label.style.fontWeight = 'bold';
                    label.style.color = '#808080';
                }
            });
        });
        const visibleDocSignElements = combinedContainer.querySelectorAll('.visible_doc_sign');
        visibleDocSignElements.forEach((node) => {
            if (node.tagName.toLowerCase() === 'label') {
                node.style.color = 'white';
                node.style.userSelect = 'none';
            }
            else {
                // Find all labels inside this element
                const labels = node.querySelectorAll('label');
                labels.forEach(label => {
                    label.style.color = 'white';
                    label.style.userSelect = 'none';
                });
            }
        });
        const partdfees = combinedContainer.querySelectorAll('.app-view-renderer-13_45453-5,' +
            '.comp-767690.disclosuretoborrower.sub-heading,' +
            '.app-view-renderer-16_45264-5,' +
            '.app-view-renderer-11_45248-1,' +
            '.app-view-renderer-13_45248-8,' +
            '.app-view-renderer-6_45068-5,' +
            '.comp-047998.mortgagetermsanddeta.sub-heading,' +
            '.borroweracknowledgem.comp-315380,' +
            '.comp-272030.propertydetails.sub-heading,' +
            '.borroweracknowledgem.comp-270575,' +
            '.comp-522024.propertydetails.sub-heading,' +
            '.comp-080556.mortgagedisclosure.sub-heading,' +
            '.comp-622582.mortgagedisclosure.sub-heading,' +
            '.borroweracknowledgem.comp-653290,' +
            '.comp-725363.partctheborrower.sub-heading,' +
            '.comp-764349.initials,' +
            '.comp-250920.initials,' +
            '.comp-645768.partbmortgageparticu,' +
            '.applicablefees.comp-045882.sub-heading,' +
            '.comp-310803.disclosures.sub-heading,' +
            '.borroweracknowledgem.comp-181498,' +
            '.borroweracknowledgem.comp-334366,' +
            '.comp-668063.propertydetails.sub-heading,' +
            '.comp-938657.mortgagedetails,' +
            '.comp-438653.propertydetails.sub-heading,' +
            '.comp-798931.mortgagepaymentinfor,' +
            '.comp-246925.mortgagepaymentinfor,' +
            '.comp-144347.rankofmortgage.sub-heading,' +
            '.comp-833723.icertification,' +
            '.comp-497578.loantovalueratioacco.sub-heading,' +
            '.comp-307024.hattacheddocuments,' +
            '.comp-999391.loantovalueratioacco,' +
            // '.borroweracknowledgem.comp-723061,' +
            '.comp-807498.partbmortgageparticu,' +
            '.comp-224544.partctheborrower,' +
            '.comp-343255.left-space.partbmortgageparticu,' +
            '.comp-529992.left-space.partdfees,' +
            '.comp-736184.importantthemortgage,' +
            '.comp-114778.partdfees,' +
            '.comp-070703.partdfees,' +
            '.comp-819861.partdfees.sub-heading,' +
            '.comp-417125.left-space.partbmortgageparticu,' +
            '.comp-061817.mortgagedetails.sub-heading,' +
            '.comp-144962.propertydetails.sub-heading,' +
            '.comp-853672.sectiondeclarationby,' +
            '.acknowledgement.comp-896244,' +
            '.comp-221634.left-space.partbmortgageparticu,' +
            '.comp-415093.left-space.partbmortgageparticu,' +
            '.comp-752238.interestinrecommende');
        // console.log("partdfees", partdfees);
        partdfees.forEach((node) => {
            node.style.marginTop = '55px';
        });
        const blackColorForNonrepeatable = combinedContainer.querySelectorAll('.comp-997412,.comp-226055,.number_list');
        // console.log("blackColorForNonrepeatable", blackColorForNonrepeatable);
        blackColorForNonrepeatable.forEach((node) => {
            node.style.fontWeight = 'bold';
            node.style.color = '#000';
        });
        const personalandconfident = combinedContainer.querySelectorAll('.comp-631870,.comp-054755');
        // console.log("personalandconfident", personalandconfident);
        personalandconfident.forEach((node) => {
            node.style.fontWeight = 'bold';
            node.style.color = '#808080';
        });
        const rankofmortgage = combinedContainer.querySelectorAll('.comp-709368.mortgagedetails,' +
            '.borroweracknowledgem.comp-715493,' +
            '.borroweracknowledgem.comp-795512,' +
            '.comp-061026.partdfees,' +
            '.comp-790134.partdfees,' +
            '.app-view-renderer-7_45280-21,' +
            // '.comp-659751.downpaymentsources.sub-heading,'+
            // '.field-wrapper.comp-00935933,'+
            // '.field-wrapper.comp-748372.disclosureandcredita,'+
            // '.app-view-renderer-5_45280-4,'+
            '.comp-103822.mortgagedetails,' +
            '.comp-144347.rankofmortgage.sub-heading,' +
            '.borroweracknowledgem.comp-911826');
        // console.log("rankofmortgage", rankofmortgage);
        rankofmortgage.forEach((node) => {
            node.style.marginTop = '5px';
        });
        const earlyendtothisagreem = combinedContainer.querySelectorAll('.number_list_inner span');
        // console.log("labels--", earlyendtothisagreem);
        earlyendtothisagreem.forEach((span) => {
            // Add margin-right to the span for spacing after the "d)", "b)", etc.
            // span.style.marginRight = '4px'; // adjust px as needed
            span.style.display = 'inline-block';
            span.style.width = '2em';
            span.style.textAlign = 'right';
            span.style.marginRight = '0.5em';
            span.style.flexShrink = '0';
        });
        const number_list_inner = combinedContainer.querySelectorAll('.earlyendtothisagreem,.number_list_inner');
        // console.log("number_list_inner--", number_list_inner);
        number_list_inner.forEach((span) => {
            span.style.display = 'flex';
            span.style.alignItems = 'flex-start'; /* Aligns the text nicely at the top */
            // span.style.marginBottom = '8px';
        });
        const borroweracknowledgem = combinedContainer.querySelectorAll('.borroweracknowledgem.comp-723061,' +
            '.borroweracknowledgem.comp-911826,' +
            '.borroweracknowledgem.comp-653290,' +
            '.borroweracknowledgem.comp-882636,' +
            '.borroweracknowledgem.comp-181498,' +
            '.borroweracknowledgem.comp-334366,' +
            '.borroweracknowledgem.comp-229059,' +
            '.borroweracknowledgem.comp-860567,' +
            '.comp-849985.mortgagedetails,' +
            '.comp-898828.partfcertification,' +
            '.borroweracknowledgem.comp-723061,' +
            '.borroweracknowledgem.comp-229059,' +
            'unique_field_052487,' +
            '.unique_field_683645');
        // console.log("borroweracknowledgem", borroweracknowledgem);
        borroweracknowledgem.forEach((node) => {
            node.style.marginTop = '65px'; // test
        });
        const sectionIdsToOffset = ['16_45423', '17_45423', '18_45423', '20_45423', '21_45423'];
        sectionIdsToOffset.forEach(id => {
            const section = document.getElementById(id);
            if (section) {
                section.style.marginTop = '20px';
            }
        });
        const sectionIdsToOffset1 = ['6_45219', '11_45032'];
        sectionIdsToOffset1.forEach(id => {
            const section = document.getElementById(id);
            if (section) {
                section.style.marginTop = '50px';
            }
        });
        const subjectPropertyHeading = combinedContainer.querySelectorAll('.comp-090171.sub-heading,' +
            '.comp-391105.mortgagesummary.sub-heading,' +
            '.comp-228213.mortgagesummary.sub-heading,' +
            '.app-view-renderer-7_46578-0');
        // console.log("borroweracknowledgem", borroweracknowledgem);
        subjectPropertyHeading.forEach((node) => {
            node.style.marginTop = '10px'; // test
        });
        const tableHeaderSection = document.getElementById('7_46578');
        if (tableHeaderSection) {
            //  console.log("tableHeaderSection found: ", tableHeaderSection);
            tableHeaderSection.style.marginTop = '50px';
        }
    }
    removeAddButton(container) {
        // Search within the container element, not the entire document
        const addButtons = container.querySelectorAll('button[aria-label="Click on Add"]');
        // Hide all matching buttons
        for (let i = 0; i < addButtons.length; i++) {
            const addButton = addButtons[i];
            if (addButton) {
                // Try multiple approaches to ensure it's hidden
                addButton.style.display = 'none';
                addButton.style.visibility = 'hidden';
                addButton.style.opacity = '0';
                addButton.style.position = 'absolute';
                addButton.style.pointerEvents = 'none';
                // Also try removing it completely
                addButton.parentNode?.removeChild(addButton);
            }
        }
        // Also try with other potential selectors
        const alternativeButtons = container.querySelectorAll('.add-button, button.add, [class*="add-btn"]');
        for (let i = 0; i < alternativeButtons.length; i++) {
            const btn = alternativeButtons[i];
            if (btn) {
                btn.style.display = 'none';
                btn.parentNode?.removeChild(btn);
            }
        }
    }
    fixStepLabelOverlapping(container) {
        const innerNumberlist = container.querySelectorAll('.cf-form-step label');
        innerNumberlist.forEach((el) => {
            // Apply font and basic styles
            el.style.fontFamily = "Quicksand";
            el.style.marginBottom = "4px"; // Space between lines if they're stacked vertically
        });
    }
    // Handler inner bullet points overlapping fixed
    fixOverlappingBulletPoints(container) {
        const innerNumberlist = container.querySelectorAll('.number_list_inner');
        innerNumberlist.forEach((el) => {
            // Apply font and basic styles
            el.style.fontFamily = "Quicksand";
            el.style.color = "#000";
            el.style.fontSize = "14px";
            el.style.lineHeight = "1.4"; // Increased for better line spacing
            el.style.letterSpacing = '0.3px';
            el.style.paddingRight = "0px"; // Reset padding
            el.style.marginTop = "4px"; // Space between lines if they're stacked vertically
            // Optional: Adjust vertical spacing with margin
            el.style.marginBottom = "10px"; // Space between lines if they're stacked vertically
        });
    }
    // Add this function to handle nested label structures
    fixNestedLabelStructures(container) {
        try {
            // Target labels with spans inside them, especially the termoftheagreement class
            const complexLabels = container.querySelectorAll('label.termoftheagreement, label.number_list');
            complexLabels.forEach((label) => {
                // Get the full text content
                const fullText = label.textContent?.trim() || '';
                // Create a new simpler element to replace the complex structure
                const simplifiedElement = document.createElement('div');
                simplifiedElement.textContent = fullText;
                // Copy styles from the original label
                const computedStyle = window.getComputedStyle(label);
                // Apply key styles to the new element
                simplifiedElement.style.fontFamily = 'Quicksand';
                simplifiedElement.style.fontSize = computedStyle.fontSize;
                simplifiedElement.style.fontWeight = label.classList.contains('termoftheagreement') ? 'bold' : 'normal';
                simplifiedElement.style.color = '#000';
                simplifiedElement.style.margin = '10px 0';
                simplifiedElement.style.padding = '0';
                simplifiedElement.style.display = 'block';
                simplifiedElement.style.lineHeight = '1.5';
                simplifiedElement.style.letterSpacing = '0.4px';
                // Add classes for identification but remove Angular attributes
                label.classList.forEach(className => {
                    simplifiedElement.classList.add(className);
                });
                // Replace the original complex element with our simplified version
                if (label.parentNode) {
                    label.parentNode.replaceChild(simplifiedElement, label);
                }
            });
            // Also look for any elements with number_list class
            const numberListItems = container.querySelectorAll('.number_list');
            numberListItems.forEach((item) => {
                if (item.tagName !== 'DIV') { // Skip if we already processed it above
                    // Extract number and content
                    const spanElement = item.querySelector('span');
                    const number = spanElement ? spanElement.textContent : '';
                    // Remove the span to get just the content
                    let content = item.textContent || '';
                    if (number) {
                        content = content.replace(number, '');
                    }
                    // Create a simplified version
                    const simplifiedItem = document.createElement('div');
                    simplifiedItem.textContent = (number || '') + content;
                    // Copy styles and classes
                    const computedStyle = window.getComputedStyle(item);
                    simplifiedItem.style.fontFamily = 'Quicksand';
                    simplifiedItem.style.fontSize = computedStyle.fontSize;
                    simplifiedItem.style.fontWeight = item.classList.contains('termoftheagreement') ? 'bold' : 'normal';
                    simplifiedItem.style.color = '#000';
                    simplifiedItem.style.margin = '8px 0';
                    simplifiedItem.style.padding = '0';
                    simplifiedItem.style.display = 'block';
                    // Copy classes
                    item.classList.forEach(className => {
                        simplifiedItem.classList.add(className);
                    });
                    // Replace the original
                    if (item.parentNode) {
                        item.parentNode.replaceChild(simplifiedItem, item);
                    }
                }
            });
        }
        catch (error) {
            console.error('Error fixing nested label structures:', error);
        }
    }
    findLabelText(inputElement) {
        // First try to find a label with a 'for' attribute matching this input's id
        if (inputElement.id) {
            const label = document.querySelector(`label[for="${inputElement.id}"]`);
            if (label)
                return label.textContent || '';
        }
        // Next check if the input is inside a label
        let parent = inputElement.parentElement;
        while (parent) {
            if (parent.tagName === 'LABEL') {
                // Get text content but exclude the input's value
                const clone = parent.cloneNode(true);
                const inputs = clone.querySelectorAll('input');
                inputs.forEach(input => input.parentNode?.removeChild(input));
                return clone.textContent?.trim() || '';
            }
            if (parent === document.body)
                break;
            parent = parent.parentElement;
        }
        // If no label found, try looking for sibling text or neighboring labels
        let sibling = inputElement.nextSibling;
        while (sibling) {
            if (sibling.nodeType === Node.TEXT_NODE && sibling.textContent?.trim()) {
                return sibling.textContent.trim();
            }
            if (sibling.nodeType === Node.ELEMENT_NODE &&
                sibling.tagName === 'LABEL') {
                return sibling.textContent || '';
            }
            sibling = sibling.nextSibling;
        }
        // If all else fails, return empty string or the name attribute
        return inputElement.name || '';
    }
    getCurrentTimestamp(format) {
        const now = new Date();
        const pad = (n) => n.toString().padStart(2, '0');
        const replacements = {
            yyyy: now.getFullYear().toString(),
            mm: pad(now.getMonth() + 1),
            dd: pad(now.getDate()),
            hh: pad(now.getHours()),
            mi: pad(now.getMinutes()),
            ss: pad(now.getSeconds())
        };
        // Normalize all matches to lowercase and replace using the above keys
        return format.replace(/YYYY|MM|DD|HH|MI|SS/gi, (match) => {
            const normalized = match.toLowerCase();
            switch (normalized) {
                case 'yyyy': return replacements.yyyy;
                case 'mm': return replacements.mm;
                case 'dd': return replacements.dd;
                case 'hh': return replacements.hh;
                case 'mi': return replacements.mi;
                case 'ss': return replacements.ss;
                default: return match;
            }
        });
    }
    // Function to insert timestamp before file extension
    getTimestampedFilename(filename, format) {
        if (!format)
            return filename;
        const timestamp = this.getCurrentTimestamp(format);
        const lastDotIndex = filename.lastIndexOf('.');
        if (lastDotIndex === -1) {
            return `${filename}_${timestamp}`;
        }
        const namePart = filename.substring(0, lastDotIndex);
        const extension = filename.substring(lastDotIndex);
        return `${namePart}_${timestamp}${extension}`;
    }
    printAndDownload(event) {
        const self = this;
        this.eventAdditionalParams = this.getAdditionalParameter();
        const printFormat = this.eventAdditionalParams['CEE_PRINT_FORMAT'] ? this.eventAdditionalParams['CEE_PRINT_FORMAT'].toLowerCase() : "pdf";
        const source = this.eventAdditionalParams['CEE_PRINT_SOURCE']; // "0_1221||1_1221"
        const parts = source.split(/##|\.\s*|\[\*\]/g).filter(Boolean);
        const containerIds = (event['event_handler'] && event['event_handler'].toLowerCase() === 'step')
            ? source.split('||').map(id => 'stepblock-' + id) // Split and map with prefix
            : source.split('||'); // Split directly if not 'step'
        const containerIdFooter = (event['event_handler'] && event['event_handler'].toLowerCase() == 'step') ? 'stepblock-' + this.eventAdditionalParams['CEE_PRINT_SOURCE_HEADER'] : this.eventAdditionalParams['CEE_PRINT_SOURCE_HEADER'];
        // Flatten the array to ensure proper structure
        const splitContainerIds = [...containerIds];
        var filename = this.eventAdditionalParams['CEE_PRINT_FILE_NAME'] ? this.eventAdditionalParams['CEE_PRINT_FILE_NAME'] : "report_pdf.pdf";
        const filenameTimeStamp = this.eventAdditionalParams['CEE_PRINT_TIMESTAMP'] ? this.eventAdditionalParams['CEE_PRINT_TIMESTAMP'] : "";
        filename = this.getTimestampedFilename(filename, filenameTimeStamp);
        //var filename = this.eventAdditionalParams['CEE_PRINT_FILE_NAME'] ? this.eventAdditionalParams['CEE_PRINT_FILE_NAME'] : "report_pdf.pdf"
        switch (printFormat) {
            case "downloadpdf":
                this.downloadFromS3(event);
                break;
            case "pdf":
                const regexForName = /\{(.*?)\}/g;
                const pdfFileName = this.eventAdditionalParams['CEE_PRINT_FILE_NAME'] ? this.getFileName(this.eventAdditionalParams['CEE_PRINT_FILE_NAME'], '', regexForName) : "report_pdf.pdf";
                // this.casePdfGenerate(event);
                this.sharedEventsServices.generatePdfUsingShadowDom.emit({
                    additionalParameters: this.eventAdditionalParams,
                    pdfFileName: pdfFileName,
                    event: event
                });
                const apiConfigToken = this.sharedEventsServices.printUploadUsingShadowDom.subscribe(async (res) => {
                    this.printUpload(res.blob, res.fileName, res.success, res.failure);
                    apiConfigToken.unsubscribe();
                });
                break;
            case "csv":
                let apiDatas = this.apiDataService.getApiDataByHandler(splitContainerIds[0].split('##')[0]);
                var apiKeyValue = this.getApiKeyValuePair(apiDatas);
                // console.log("apiKeyValue: ", apiKeyValue)
                const replacer = (key, value) => value === null ? '' : value; // specify how you want to handle null values here
                // find row with max keys so can cover all headers
                let indexWithMaxKeys = 0;
                if (apiKeyValue && apiKeyValue.length) {
                    indexWithMaxKeys = apiKeyValue.reduce((maxIndex, currentRow, currentIndex) => {
                        if (Object.keys(currentRow).length > Object.keys(apiKeyValue[maxIndex]).length) {
                            return currentIndex; // Return current index if current row has more keys
                        }
                        return maxIndex; // Keep the maxIndex if no update is needed
                    }, 0);
                }
                const header = Object.keys(apiKeyValue[indexWithMaxKeys]);
                let csv = apiKeyValue.map(row => header.map(fieldName => JSON.stringify(row[fieldName], replacer)).join(','));
                csv.unshift(header.join(','));
                let csvArray = csv.join('\r\n');
                var blob = new Blob([csvArray], { type: 'text/csv' });
                saveAs(blob, filename);
                break;
            case "excel":
            case "xls":
            case "xlsx":
                // const apiDatasExcel = this.apiDataService.getApiDataByHandler(splitContainerIds[0].split('##')[0]);
                // const apiKeyValueExcel = this.getApiKeyValuePair(apiDatasExcel);
                // if (apiKeyValueExcel && apiKeyValueExcel.length) {
                //     const worksheet = XLSX.utils.json_to_sheet(apiKeyValueExcel);
                //     const workbook = XLSX.utils.book_new();
                //     XLSX.utils.book_append_sheet(workbook, worksheet, "Sheet1");
                //     const excelBuffer = XLSX.write(workbook, {
                //         bookType: printFormat === "xls" ? "biff8" : "xlsx", // <== fixed
                //         type: "array"
                //     });
                //     const blob = new Blob([excelBuffer], {
                //         type: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                //     });
                //     saveAs(blob, filename.endsWith('.xlsx') || filename.endsWith('.xls') ? filename : filename + (printFormat === 'xls' ? '.xls' : '.xlsx'));
                // }
                const apiDatasExcelM = this.apiDataService.getApiDataByHandler(splitContainerIds[0].split('##')[0]);
                let updatedData = Object.keys(apiDatasExcelM.value).reduce((acc, key) => {
                    let newKey = key.replace(apiDatasExcelM.value.handler_name + '##', "");
                    acc[newKey] = apiDatasExcelM.value[key];
                    return acc;
                }, {});
                const blobdata = new Blob();
                const dats = this.unflattenJSON(updatedData);
                const arrs = Object.entries(dats[parts[1]]);
                const apiDatasExcels = arrs.map(([key, value]) => {
                    return { propertyName: key, value: value };
                });
                const workbook = XLSX.utils.book_new();
                for (let i = 0; i < apiDatasExcels.length; i++) {
                    let data = [];
                    if (parts.length > 1 && parts.includes(apiDatasExcels[i].propertyName)) { // If the property name is in the list, we can skip it
                        //console.log(apiDatasExcels[i].propertyName);
                        for (let j = 0; j < Object.keys(apiDatasExcels[i].value).length; j++) {
                            // Access specific properties
                            //console.log(apiDatasExcels[i].value[Object.keys(apiDatasExcels[i].value)[j]]);
                            data.push(apiDatasExcels[i].value[Object.keys(apiDatasExcels[i].value)[j]]);
                        }
                    }
                    else if (parts.length === 2 && !parts.includes(apiDatasExcels[i].propertyName)) {
                        // If the property name is in the list, we can skip it
                        for (let j = 0; j < Object.keys(apiDatasExcels[i].value).length; j++) {
                            // Access specific properties
                            //console.log(apiDatasExcels[i].value[Object.keys(apiDatasExcels[i].value)[j]]);
                            data.push(apiDatasExcels[i].value[Object.keys(apiDatasExcels[i].value)[j]]);
                        }
                    }
                    if (data.length > 0) {
                        const worksheet = data.length > 0 ? XLSX.utils.json_to_sheet(data) : XLSX.utils.aoa_to_sheet([]);
                        //const workbook = XLSX.utils.book_new();
                        if ((parts.length > 1 && parts.includes(apiDatasExcels[i].propertyName)) || (parts.length === 2 && !parts.includes(apiDatasExcels[i].propertyName))) {
                            XLSX.utils.book_append_sheet(workbook, worksheet, apiDatasExcels[i].propertyName);
                        }
                        const excelBuffer = XLSX.write(workbook, {
                            bookType: printFormat === "xls" ? "biff8" : "xlsx",
                            type: "array"
                        });
                        //workbook.SheetNames.push(apiDatasExcels[i].propertyName);
                        const blob = data.length > 0 ? new Blob([excelBuffer], {
                            type: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                        }) : new Blob([blobdata], {});
                        if (parts.length == 2 && i === apiDatasExcels.length - 1) {
                            saveAs(blob, filename.endsWith('.xlsx') || filename.endsWith('.xls') ? filename : filename + (printFormat === 'xls' ? '.xls' : '.xlsx'));
                        }
                        else if (parts.length > 2) {
                            saveAs(blob, filename.endsWith('.xlsx') || filename.endsWith('.xls') ? filename : filename + (printFormat === 'xls' ? '.xls' : '.xlsx'));
                        }
                    }
                }
                break;
            default:
                break;
        }
    }
    /**
    * method returns the name based on the configuration
    * @param originalName the original name from where
    * @param fileName the file name of the file
    * @param regex the regex from which the dynamic variables needs to be extracted
    * @returns the result name
    */
    getFileName(originalName, fileName, regex) {
        let result = originalName;
        const matched = originalName.match(new RegExp(regex));
        if (matched) {
            for (const name of matched) {
                let val = '';
                switch (name.toLowerCase()) {
                    case '{filename}':
                        val = fileName;
                        break;
                    case '{yyyymmddhhmmss}':
                    case '{timestamp}':
                        val = String(new Date().getTime());
                        break;
                    default:
                        if (name.includes('##')) {
                            const values = name.match(new RegExp(/[^{}]+/g));
                            const key = values ? values[0] : name;
                            const handlerData = this.apiDataService.getApiDataByHandler(key.split('##')[0]);
                            val = handlerData ? handlerData.value[key] : '';
                        }
                        else {
                            const apiData = this.apiDataService.getApiDataByApiKey(name);
                            val = apiData ? apiData.value : '';
                        }
                        break;
                }
                result = result.split(name).join(val);
            }
        }
        return result;
    }
    unflattenJSON(flatObj) {
        const result = {};
        for (const key in flatObj) {
            if (flatObj.hasOwnProperty(key)) {
                const keys = key.split('.');
                let current = result;
                for (let i = 0; i < keys.length; i++) {
                    const part = keys[i];
                    const arrayMatch = part.match(/(\w+)\[(\d+)\]/);
                    if (arrayMatch) {
                        // Handle array notation
                        const arrayKey = arrayMatch[1];
                        const arrayIndex = parseInt(arrayMatch[2]);
                        current[arrayKey] = current[arrayKey] || [];
                        if (i === keys.length - 1) {
                            current[arrayKey][arrayIndex] = flatObj[key];
                        }
                        else {
                            current[arrayKey][arrayIndex] = current[arrayKey][arrayIndex] || {};
                            current = current[arrayKey][arrayIndex];
                        }
                    }
                    else {
                        // Handle object notation
                        if (i === keys.length - 1) {
                            current[part] = flatObj[key];
                        }
                        else {
                            current[part] = current[part] || {};
                            current = current[part];
                        }
                    }
                }
            }
        }
        return result;
    }
    printUpload(blobObject, fileName, success, failure) {
        this.showLoader("Uploading PDF... Please wait.");
        let extraConfigData = {};
        const apiConfigData = localStorage.getItem('API_CONFIG');
        const parsedData = apiConfigData ? JSON.parse(apiConfigData) : null;
        if (parsedData && parsedData["file/upload"]) {
            extraConfigData = this.externalRequestResponseUtil.formTheRequestObj(parsedData["file/upload"]);
        }
        if (window.sessionStorage.getItem('CEE_OIDC') == '1' &&
            extraConfigData.hasAuthorisation == true) {
            const apiConfigToken = this.sharedEventsServices.apiConfigTokenEmitter.subscribe(async (res) => {
                this.uploads3pdf(res, blobObject, fileName, success, failure);
                apiConfigToken.unsubscribe();
            });
        }
        if (window.sessionStorage.getItem('CEE_OIDC') == '1' &&
            extraConfigData.hasAuthorisation == true) {
            extraConfigData.emitToken = true;
            this.sharedEventsServices.oidcDataEmitter.emit(extraConfigData);
        }
        else {
            this.uploads3pdf(extraConfigData, blobObject, fileName, success, failure);
        }
        // this.hideLoader()
    }
    async uploads3pdf(extraConfigData, blobObject, fileName, success, failure) {
        const timestamp = Date.now(); // date cuttent
        let payload = {
            type: "application/pdf",
            fileData: {
                apiKey: "",
                name: "testFileName",
                type: "application/pdf",
                attachmentName: fileName.toString(),
                key: "uploaded.pdf",
                attachmentPath: "",
                file: blobObject,
                fileSize: blobObject["size"],
                size: blobObject["size"],
                uId: timestamp.toString(),
            }
        };
        const response = await this.fileUploadService.genericFileService("OnUpload", payload, extraConfigData, "file/upload");
        if (Number(response.statusCode) === 200) {
            // call on response or on success
            if (response.emit) {
                const apiKeyData = this.apiDataService.getApiDataByHandler("file/upload");
                this.sharedEventsServices.emitApiSuccessResponse.emit(apiKeyData.value);
            }
            const successCallback = this.processCallbackBlocks({ body: response.data, status: response.statusCode }, success);
            if (successCallback && success) {
                this.getOnSuccess(successCallback);
            }
        }
        else {
            // call on exception or on failure
            if (response.emit) {
                this.sharedEventsServices.emitApiErrorResponse.emit(response.data);
            }
            const failureCallback = this.processCallbackBlocks({ body: response.data, status: response.statusCode }, failure);
            if (failureCallback && failure) {
                this.getOnFailure(failureCallback);
            }
        }
        setTimeout(() => {
            this.hideLoader();
        }, 500);
    }
    stripHtml(html) {
        const tempDiv = document.createElement("div");
        tempDiv.innerHTML = html;
        return tempDiv.textContent || tempDiv.innerText || "";
    }
    eventConfig(config, handler, primaryData = {}) {
        // console.log('config.display_step', config.display_step);
        // console.log('handler', handler);
        // event config will execute the step
        this.skipLoaderCheck();
        const flagBtn = localStorage.getItem('isButtonInvokeApi');
        const btnText = localStorage.getItem('buttonText');
        const plainBtnText = this.stripHtml(btnText);
        if (config.display_step) {
            switch (config.display_step) {
                case 'InvokeAPI':
                case 'InvokeCaptcha':
                    if (flagBtn === '1') {
                        const dialogRef = this.dialog.open(AlertModalComponent, {
                            data: {
                                message: `Do you want to ${plainBtnText}?`,
                                title: " ",
                                class: "custom-confirmation-box"
                            }
                        });
                        dialogRef.afterClosed().subscribe(result => {
                            localStorage.setItem('isButtonInvokeApi', '0');
                            if (result) {
                                this.eventHandler(handler, primaryData);
                            }
                            else {
                                const responseObj = {
                                    handler: handler,
                                    response: {},
                                    chk: false,
                                };
                                this.sharedEventsServices.eventConditionalFailureSubscriber.emit(responseObj);
                            }
                        });
                    }
                    else {
                        this.eventHandler(handler, primaryData);
                    }
                    break;
                case 'LanguageToggle':
                    if (this.payLoad &&
                        this.payLoad.uniqueId &&
                        this.payLoad.value) {
                        this.setLanguage(this.payLoad);
                    }
                    break;
                case 'PrintAndDownload':
                    this.printAndDownload(handler);
                    break;
                case 'SessionClearance':
                    this.switchClearenceType(this.sessionEventHandler(handler, 'EraseSessionData'), handler);
                    break;
                case 'CheckMandatory':
                    this.switchMandatoryCheckType(this.sessionEventHandler(handler, 'CheckMandatoryData'), handler);
                    break;
                case 'CheckValidation':
                    this.switchValidationCheckType(this.sessionEventHandler(handler, 'CheckValidData'), handler);
                    break;
                case 'ClearSessionValues':
                    this.switchClearAkitaStore(this.sessionEventHandler(handler, 'EraseSessionData'), handler, primaryData);
                    break;
                case 'ChangeVisibility':
                case 'ChangeEditable':
                case 'ChangeMandatory':
                    let readDataFromModal = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'ReadDataFromModal'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'ReadDataFromModal'; })[0].value == 'true' ? true : false : false;
                    this.fieldStateChangeEvent(this.sessionEventHandler(handler, 'FieldStateIds'), config.display_step, readDataFromModal);
                    break;
                case 'CopyToClipboard':
                    this.copyToClipboardEventHandler(handler);
                    break;
                case 'DismissModal':
                    this.dialog.closeAll();
                    this.commonUtil.moveMatDialogToBody();
                    this.sharedEventsServices.modelEmitter.emit({ data: { stepId: "", config: { disableClose: true } }, id: ``, panelClass: `` });
                    break;
                case 'Display Modal':
                    this.displayModal(handler);
                    this.sharedEventsServices.modelEmitter.emit({ data: { stepId: "", config: { disableClose: true } }, id: ``, panelClass: `` });
                    break;
                case 'HighlightMapMarker':
                    this.highlightMapMarker(handler);
                    break;
                case 'SearchFilter':
                    this.searchFilter(handler);
                    break;
                case 'MapCenter':
                    this.mapCenter(handler);
                    break;
                case 'MapLayer':
                    this.MapLayer(handler);
                    break;
                case 'ToggleAccordion':
                    this.toggleAccordion(handler);
                    break;
                case 'CancelTableInlineEdit':
                    setTimeout(() => {
                        this.sharedEventsServices.emitOnTableInlineEditCancelClicked.emit(handler);
                    }, 50);
                    break;
                case 'OpenTableInlineEdit':
                    setTimeout(() => {
                        this.sharedEventsServices.emitOnTableInlineEditClicked.emit(handler);
                    }, 50);
                    break;
                case 'Undo':
                    const fieldIds = this.getAdditionalParameter()['UndoFieldIds'].split('|').map(str => str.trim());
                    if (fieldIds.length > 0) {
                        this.undoRedoUtil.undoCurrentId();
                        setTimeout(() => {
                            this.sharedEventsServices.stateHistoryEmitter.emit(fieldIds);
                        }, 50);
                    }
                    break;
                case 'CustomFunctions':
                    handler.event_handler === "ExecuteOnLoadEvents" ? this.executeStepOnLoadEvents() : this.customFunctions(handler, 'Variables', 'Targets', primaryData);
                    break;
                case 'HistoryBack':
                    this.historyBack();
                    break;
                case 'StateModified':
                    this.stateModified(handler);
                    break;
                case 'SetValues':
                    this.setValuesOnEvent(handler, primaryData);
                    break;
                case 'ScrollToTop':
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    break;
                case 'ListCell':
                    if (primaryData && Object.keys(primaryData).length && primaryData.type) {
                        this.setCellData(primaryData, handler);
                    }
                    break;
                case 'GeoLocation':
                    const globalParameters = this.wfeStepLoaderService.additionalParameters;
                    this.getLocation(globalParameters, handler);
                    break;
                case 'StartTicker':
                    let fieldId = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'TickerID'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'TickerID'; })[0].value : '';
                    this.sharedEventsServices.startTickerEmitter.emit(fieldId);
                    break;
                case 'StopTicker':
                    let tickerId = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'TickerID'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'TickerID'; })[0].value : '';
                    this.sharedEventsServices.stopTickerEmitter.emit(tickerId);
                    break;
                case 'PauseTicker':
                    let timerId = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'TickerID'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'TickerID'; })[0].value : '';
                    this.sharedEventsServices.pauseTickerEmitter.emit(timerId);
                    break;
                case 'OpenSnackBar':
                    let timeOut = Number(handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'MessageDuration'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'MessageDuration'; })[0].value : 3000);
                    let messageHeaderText = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'MessageHeader'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'MessageHeader'; })[0].value : '';
                    let messageTextHandler = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'MessageText'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'MessageText'; })[0].value : '';
                    let actionButtonText = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'ActionButtonText'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'ActionButtonText'; })[0].value : '';
                    let panelClass = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'PanelClass'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'PanelClass'; })[0].value.split(' ') : ['ngx-toastr'];
                    let isProgressBarNeeded = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'ProgressBar'; }).length > 0 ? (handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'ProgressBar'; })[0].value.toLowerCase() == 'true' ? true : false) : false;
                    let messageVerticalPosition = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'MessageVerticalPosition'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'MessageVerticalPosition'; })[0].value : 'top';
                    let messageHorizontalPosition = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'MessageHorizontalPosition'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'MessageHorizontalPosition'; })[0].value : 'center';
                    let messageDynamicHandlers = messageTextHandler.split('||').length > 1 ? messageTextHandler.split('||')[1].split('|') : [];
                    let messageText = messageTextHandler ? messageTextHandler.split('||')[0] : "";
                    let dynamicText = [];
                    messageDynamicHandlers.forEach(messageHandler => {
                        let apiStoreData = this.apiDataService.getApiDataByHandler(messageHandler.split('##')[0]);
                        dynamicText.push(apiStoreData.value[messageHandler]);
                    });
                    let messageArr = messageText.split('{{dynamic}}');
                    let message = messageHeaderText ? "<h2>" + messageHeaderText + "</h2>" : '';
                    messageArr.forEach((msg, index) => {
                        message = message + msg + (dynamicText.length > index ? dynamicText[index] : "");
                    });
                    if (message && message != "") {
                        // this.snackBar.openFromComponent(SnackbarRendererComponent, {
                        //     data: {
                        //         html: message,
                        //         actionButton: actionButtonText,
                        //         progressBar: isProgressBarNeeded
                        //     },
                        //     verticalPosition: messageVerticalPosition,
                        //     horizontalPosition: messageHorizontalPosition,
                        //     panelClass: panelClass,
                        //     duration: Number(timeOut)
                        // });
                        this.wfeStepLoaderService.openToster({
                            html: message,
                            verticalPosition: messageVerticalPosition,
                            horizontalPosition: messageHorizontalPosition,
                            panelClass: panelClass,
                            progressBar: isProgressBarNeeded,
                            closeButton: actionButtonText && actionButtonText != '' ? true : false,
                            duration: Number(timeOut)
                        });
                    }
                    break;
                case 'SaveLocalData':
                    this.saveLocalDataProcess(handler, primaryData);
                    // this.emitUpdatedDataToStore(handler, apiKeyValue);
                    break;
                case 'cancelLocalData':
                    this.cancelLocalDataProcess(handler, primaryData);
                    // this.emitUpdatedDataToStore(handler, apiKeyValue);
                    break;
                case 'updateLocalData':
                    this.updateLocalDataProcess(handler, primaryData);
                    // this.emitUpdatedDataToStore(handler, apiKeyValueUpdate);
                    break;
                case 'DeleteLocalData':
                    var deleteWorningMessage = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'DeleteMessage'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'DeleteMessage'; })[0].value : 'false';
                    if (deleteWorningMessage.toLowerCase() != "false") {
                        this.onDeleteData(deleteWorningMessage, handler, primaryData);
                    }
                    else {
                        this.deleteLocalDataProcess(handler, primaryData);
                    }
                    break;
                case 'OIDCConnect':
                    // if (window.sessionStorage.getItem('CEE_OIDC') === '1') {
                    //     this.sharedEventsServices.oidcEventEmitter.emit(handler);
                    // }
                    // else {
                    //     console.error('OIDC not configured')
                    // }
                    this.sharedEventsServices.oidcEventEmitter.emit(handler);
                    break;
                case 'contextMenu':
                    this.contextMenu(handler, primaryData);
                    break;
                case 'ApplyFilter':
                    // console.log("################### ApplyFilter ###################")
                    let tableId = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'CEE_TABLE_ID'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'CEE_TABLE_ID'; })[0].value : '';
                    // console.log("hello ApplyFilter!: ",tableId);
                    this.sharedEventsServices.emitOnApplyRearrangeBtnClicked.emit(handler);
                    break;
                case 'stepRedirection':
                    if (flagBtn === '1') {
                        const dialogRef = this.dialog.open(AlertModalComponent, {
                            data: {
                                message: `Do you want to ${plainBtnText}?`,
                                title: " ",
                                class: "custom-confirmation-box"
                            }
                        });
                        dialogRef.afterClosed().subscribe(result => {
                            localStorage.setItem('isButtonInvokeApi', '0');
                            if (result) {
                                this.stepRedirection(handler);
                            }
                            else {
                                const responseObj = {
                                    handler: handler,
                                    response: {},
                                    chk: false,
                                };
                                this.sharedEventsServices.eventConditionalFailureSubscriber.emit(responseObj);
                            }
                        });
                    }
                    else {
                        this.stepRedirection(handler);
                    }
                    break;
                case 'CreateZip':
                    this.createZip(handler);
                    break;
                case 'extractEmailIds':
                    this.extractEmailIds(handler);
                    break;
                case 'scrollIntoView':
                    const target = handler.invoke_event_config.additional_parameters.find((el) => { return el.parameter_type == 'Target'; });
                    if (target) {
                        document.getElementById(target.value).scrollIntoView({
                            behavior: "smooth",
                            block: "start", // Align to the start (top) of the viewport
                        });
                    }
                    break;
                case 'SideMenuSelectionReset':
                    this.sharedEventsServices.sideMenuSelectionResetEmitter.emit();
                    break;
                default:
                    let display_step = config.display_step;
                    this.dialog.closeAll();
                    if (config.display_step.indexOf('#') !== -1 && config.display_step.split('#').length === 2) {
                        const splitDS = config.display_step.split('#');
                        display_step = splitDS[0];
                        if (document.getElementById(splitDS[1])) {
                            document.getElementById(splitDS[1]).scrollIntoView({ behavior: 'auto' });
                        }
                        else {
                            localStorage.setItem('scrollTarget', splitDS[1]);
                        }
                    }
                    if (display_step) {
                        var stepRedirectionTarget = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'Target'; })[0]?.value;
                        if (stepRedirectionTarget && !(['self', 'blank', 'top'].includes(stepRedirectionTarget.toLowerCase()))) {
                            this.sharedEventsServices.targetStepRedirection.emit({
                                stepId: this.wfeStepLoaderService.stepNameAndIdDataMap[display_step],
                                target: stepRedirectionTarget
                            });
                        }
                        else {
                            this.wfeStepLoaderService.loadStepByName(display_step).subscribe((data) => {
                                this.processStepRedirection(display_step, data, handler);
                            });
                        }
                    }
                    break;
            }
        }
    }
    getAkitaDataFromHandler(handler) {
        if (this.apiDataService.getApiDataByHandler(handler)) {
            return this.returnNestedData(this.apiDataService.getApiDataByHandler(handler).value);
        }
    }
    returnNestedData(data) {
        if (Object(data) !== data || Array.isArray(data)) {
            return data;
        }
        const regex = /\.?([^.\[\]]+)|\[(\d+)\]/g;
        const resultholder = {};
        // tslint:disable-next-line: forin
        for (const p in data) {
            let cur = resultholder;
            let prop = '';
            let m;
            while ((m = regex.exec(p))) {
                cur = cur[prop] || (cur[prop] = m[2] ? [] : {});
                prop = m[2] || m[1];
            }
            cur[prop] = data[p];
        }
        return resultholder[''] || resultholder;
    }
    stepRedirection(handler) {
        this.additionalParameters = handler.invoke_event_config.additional_parameters;
        const targetStep = handler.invoke_event_config.additional_parameters.find(i => i.parameter_type === 'CEE_dynaimcRoute');
        const target = handler.invoke_event_config.additional_parameters.find(i => i.parameter_type === 'Target');
        if (targetStep) {
            const appStoreData = this.appDataService.getAllAppStoreData();
            const updatedUrl = targetStep.value.replace(/%([^%]+)%/g, (_, key) => {
                for (const data of appStoreData) {
                    if (key == data.id) {
                        return data.value;
                    }
                }
            });
            this.redirectToHref(updatedUrl, null, target);
        }
    }
    openDrawer(data) {
        let isDisableClose = false;
        // data.dismiss_modal = 1 (i.e isDisableClose = true) is to restrict closing the modal when clicking outside the modal or pressing the escape key on the keyboard.
        if (data !== undefined && data.dismiss_modal === 1) {
            isDisableClose = true;
        }
        this.sharedEventsServices.modelEmitter.emit({ data: { stepId: data.tid, config: { disableClose: isDisableClose, dismissModal: data.dismiss_modal } }, id: `stepModal-${data.tid}`, panelClass: `stepModal-${data.tid}` });
    }
    getFileFetchURL() {
        const handler = 'file/fetch';
        const apiConfig = JSON.parse(localStorage.getItem('API_CONFIG'));
        const apiConfigObject = apiConfig[handler];
        if (!apiConfigObject) {
            // console.log(`Error in Mapping ${handler}`);
            return false;
        }
        const { requestBody, headers, queryParams, urlParams, url, methodType, requestType, isESB, hasAuthorisation, storageType, useUID, esbRequestBody } = this.externalRequestResponseUtil.formTheRequestObj(apiConfigObject);
        return url;
    }
    async createZip(handler) {
        const fileFetchURL = this.getFileFetchURL();
        const AssociatedAPIKey = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'AssociatedAPIKey'; }).length > 0 ?
            handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'AssociatedAPIKey'; })[0].value.split('||') : [];
        if (fileFetchURL && AssociatedAPIKey.length) {
            const AttachmentFiles = [];
            for (const apiKey of AssociatedAPIKey) {
                const handlerData = this.apiDataService.getApiDataByHandler(apiKey.split('##')[0]);
                if (handlerData) {
                    const resData = this.setAPIKeyUtil.setApiCallBackData(apiKey, handlerData.value);
                    if (resData && Array.isArray(resData) && resData.length) {
                        for (let i = 0; i < resData.length; i++) {
                            if (resData[i]['attachmentId']) {
                                const fetchUrl = fileFetchURL + resData[i]['attachmentId'];
                                const fetchRes = await this.http.get(fetchUrl).toPromise();
                                if (fetchRes && fetchRes['result']) {
                                    AttachmentFiles.push(fetchRes['result']);
                                }
                            }
                        }
                    }
                }
            }
            this.commonUtil.processZipFile(AttachmentFiles);
        }
    }
    processStepRedirection(display_step, data, handler) {
        if (data !== undefined) {
            this.wfeStepLoaderService.setStepDataInCache(display_step, data);
            // implemented by-default overRideWorkflow for ComplianceForms step redicrection to reduce the memory leak issue
            if (display_step == "ComplianceForms") {
                handler.event_handler = "overRideWorkflow";
            }
            if (data.display_as_modal === 1) {
                // Display the Step As Modal
                //this.openDialog(data);
                this.openDrawer(data);
                if (window['navOpenStaus'] == true) {
                    this.sharedEventsServices.hamburgermenuEmitter.emit(true);
                }
            }
            else if (handler.event_handler !== "") {
                this.redirectWithParams(handler, data.tid);
            }
            else {
                const ModalOnPageLeave = handler['ModalOnPageLeave'] ? handler['ModalOnPageLeave'] : null;
                this.sharedEventsServices.hamburgermenuEmitter.emit(true);
                this.redirectTo(data.tid, ModalOnPageLeave);
            }
        }
    }
    redirectWithParams(handler, stepId) {
        if (handler.event_handler == "overRideWorkflow") {
            this.sharedEventsServices.targetStepRedirection.emit({
                event_handler: handler.event_handler
            });
            this.redirectionUtil.redirectTo(stepId, '_self', '');
        }
        else if (handler.event_handler == "overRideWorkflowWithLocation") {
            this.sharedEventsServices.targetStepRedirection.emit({
                event_handler: handler.event_handler
            });
            this.redirectionUtil.redirectTo(stepId, 'location', '');
        }
        const apiConfig = JSON.parse(localStorage.getItem('API_CONFIG'));
        if (!apiConfig || !apiConfig[handler.event_handler]) {
            return;
        }
        const apiConfigObject = apiConfig[handler.event_handler];
        let { url, queryParams, urlParams } = this.externalRequestResponseUtil.formTheRequestObj(apiConfigObject);
        // set url param
        for (const key of Object.keys(urlParams)) {
            if (url.includes(`{${key}}`)) {
                url = url.split(`{${key}}`).join(encodeURIComponent(urlParams[key]));
            }
        }
        // set query param
        for (const key of Object.keys(queryParams)) {
            if (url.includes(`{${key}}`)) {
                url = url.split(`{${key}}`).join(encodeURIComponent(queryParams[key]));
            }
        }
        let _target = "_blank";
        if (handler && handler.invoke_event_config && handler.invoke_event_config.additional_parameters) {
            for (const ap of handler.invoke_event_config.additional_parameters) {
                if (ap.parameter_type === 'Target') {
                    switch (ap.value.toLowerCase()) {
                        case 'self':
                            _target = '_self';
                            break;
                        case 'blank':
                            _target = '_blank';
                            break;
                        case 'top':
                            _target = '_top';
                            break;
                        default:
                            break;
                    }
                }
            }
        }
        this.redirectionUtil.redirectTo(stepId, _target, url);
    }
    onDeleteData(deleteWorningMessage, handler, primaryData) {
        if (deleteWorningMessage) {
            this.dialog.closeAll();
            const dialogRef = this.dialog.open(AlertModalComponent, {
                data: {
                    message: deleteWorningMessage,
                    title: " "
                }
            });
            dialogRef.afterClosed().subscribe(result => {
                if (result) {
                    this.deleteLocalDataProcess(handler, primaryData);
                }
            });
        }
        else {
            this.deleteLocalDataProcess(handler, primaryData);
        }
    }
    deleteLocalDataProcess(handler, primaryData, responseData = {}) {
        let blockFields = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'blockFields'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'blockFields'; })[0].value ? true : false : false;
        let filterKey = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'PrimaryKeyName'; })[0].value;
        let table_key = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'table_key'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'table_key'; })[0].value : '';
        let blockFieldName = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'blockFields'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'blockFields'; })[0].value : '';
        let apiKeyValueArr = this.getAkitaDataFromHandler(handler.event_handler.split('##')[0])[handler.event_handler];
        let apiData = this.apiDataService.getApiDataByHandler(handler.event_handler.split('##')[0]);
        let apiKeyValue = [];
        let parentPositions;
        let deletePosition;
        let lastNumber = blockFieldName.split("$");
        if (apiData.value.handler_name && blockFields == true && responseData) {
            if (table_key === "borrowers.employment" || table_key === "properties.mortgage") {
                parentPositions = primaryData?.value?.parentPosition;
                deletePosition = primaryData?.value?.position;
            }
            else {
                parentPositions = lastNumber[lastNumber.length - 1];
                deletePosition = primaryData?.value?.data?.application_id;
            }
        }
        if (blockFields == true) {
            let tableKeyFormat = table_key.split(".");
            if (tableKeyFormat.length == 1) {
                apiKeyValue = apiKeyValueArr?.[tableKeyFormat[0]];
            }
            else {
                apiKeyValue = apiKeyValueArr?.[tableKeyFormat[0]]?.[parentPositions]?.[tableKeyFormat[1]];
            }
            if (!deletePosition && table_key !== "borrowers.employment" && table_key !== "properties.mortgage") {
                deletePosition = apiKeyValue[parentPositions]?.application_id;
            }
            let newArray;
            if (table_key === "borrowers.employment" || table_key === "properties.mortgage") {
                newArray = apiKeyValue.filter((_, index) => index !== deletePosition);
            }
            else {
                newArray = apiKeyValue.filter(function (el) {
                    return el[filterKey] != deletePosition;
                });
            }
            if (tableKeyFormat.length == 1) {
                apiKeyValueArr[tableKeyFormat[0]] = newArray;
            }
            else {
                apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]] = newArray;
            }
            if (table_key == "asset" && apiKeyValueArr['asset'].length > 0) {
                apiKeyValueArr['assetTotal']['count'] = apiKeyValueArr['asset'].length;
                apiKeyValueArr['assetTotal']['sum'] = apiKeyValueArr['asset'].map(item => item.cash_or_market_value).reduce((prev, next) => Number(prev) + Number(next));
                apiKeyValueArr['assetStr'] = "Assets Total assets " + apiKeyValueArr['assetTotal']['count'] + " | Total assets amount $" + apiKeyValueArr['assetTotal']['sum'];
            }
            if (apiKeyValueArr['asset'].length == 0) {
                apiKeyValueArr['assetTotal']['count'] = 0;
                apiKeyValueArr['assetTotal']['sum'] = 0;
                apiKeyValueArr['assetStr'] = "Assets Total assets 0 | Total assets amount $0";
            }
            if (table_key == "liabilities" && apiKeyValueArr['liabilities'].length > 0) {
                apiKeyValueArr['liabilityTotal']['count'] = apiKeyValueArr['liabilities'].length;
                apiKeyValueArr['liabilityTotal']['sum'] = apiKeyValueArr['liabilities'].map(item => item.monthly_payment).reduce((prev, next) => Number(prev) + Number(next));
                apiKeyValueArr['liabilitieStr'] = "Liabilities Total liabilities " + apiKeyValueArr['liabilityTotal']['count'] + " | Total liabilities amount $" + apiKeyValueArr['liabilityTotal']['sum'];
            }
            if (apiKeyValueArr['liabilities'].length == 0) {
                apiKeyValueArr['liabilityTotal']['count'] = 0;
                apiKeyValueArr['liabilityTotal']['sum'] = 0;
                apiKeyValueArr['liabilitieStr'] = "Liabilities Total liabilities 0 | Total liabilities amount $0";
            }
            if (table_key == "borrowers.borrowerAddress") {
                let tableKeyFormat = table_key.split(".");
                let addressData = apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]];
                let previousAddresses = [];
                let currentAddress = null;
                addressData.forEach((address, index) => {
                    if (address.move_out_date && address.move_out_date != "Invalid date") {
                        // Addresses with move_out_date are treated as Previous
                        previousAddresses.push(address);
                        apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]][index]['is_current'] = '';
                    }
                    else if (!currentAddress) {
                        // First address without move_out_date is treated as Current
                        currentAddress = address;
                        apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]][index]['is_current'] = 'current';
                    }
                    else {
                        // Any additional addresses without move_out_date are Previous
                        previousAddresses.push(address);
                        apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]][index]['is_current'] = '';
                    }
                });
                apiKeyValueArr[tableKeyFormat[0]][parentPositions]['addressStr'] = `${apiKeyValueArr[tableKeyFormat[0]][parentPositions]['personal_info']['first_name']}'s living address details       ${currentAddress?.address ?? '-'}`;
                if (!apiKeyValueArr[tableKeyFormat[0]][parentPositions].hasOwnProperty('processaddress')) {
                    apiKeyValueArr[tableKeyFormat[0]][parentPositions]['processaddress'] = {};
                }
                if (apiKeyValueArr[tableKeyFormat[0]][parentPositions] && apiKeyValueArr[tableKeyFormat[0]][parentPositions]['processaddress']) {
                    apiKeyValueArr[tableKeyFormat[0]][parentPositions]['processaddress']['currentAddress'] = { ...currentAddress };
                    apiKeyValueArr[tableKeyFormat[0]][parentPositions]['processaddress']['previousAddresses'] = previousAddresses;
                }
            }
            if (table_key == "borrowers.income") {
                let tableKeyFormat = table_key.split(".");
                apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]].forEach((element) => {
                    element['yearlyEarning'] = this.calculateYearlyIncome(element);
                });
                let incomeData = apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]];
                let totalIncome = this.calculateTotalAndCount(incomeData, 'yearlyEarning').totalIncome;
                apiKeyValueArr[tableKeyFormat[0]][parentPositions]['incomeStr'] = `${apiKeyValueArr[tableKeyFormat[0]][parentPositions]['personal_info']['first_name']}'s Additional income details   <span>     Total Income: ${incomeData?.length ?? 0} | Total Amount: $ ${totalIncome ?? 0}/annually </span>`;
            }
            if (table_key == "properties") {
                let tableKeyFormat = table_key.split(".");
                apiKeyValueArr['property_length'] = apiKeyValueArr[tableKeyFormat[0]].length > -1 ? apiKeyValueArr[tableKeyFormat[0]].length : apiKeyValueArr['property_length'];
            }
            this.emitUpdatedDataToStore(handler, apiKeyValueArr);
        }
        else {
            for (const key of Object.keys(apiData.value)) {
                let indexArr = key.match(/^.*?\[[^\d]*(\d+)[^\d]*\].*$/);
                let index = indexArr ? Number(indexArr[1]) : -1;
                let indexKey = key.split('.')[1];
                let obj = {};
                if (index > -1) {
                    if (apiKeyValue[index]) {
                        apiKeyValue[index][indexKey] = apiData.value[key];
                    }
                    else {
                        obj[indexKey] = apiData.value[key];
                        apiKeyValue[index] = obj;
                    }
                }
            }
            apiKeyValue.filter(function (el) {
                return el[filterKey] != primaryData.value.data[filterKey];
            });
            if (table_key == "asset" && apiKeyValueArr['asset'].length > 0) {
                apiKeyValueArr['assetTotal']['count'] = apiKeyValueArr['asset'].length;
                apiKeyValueArr['assetTotal']['sum'] = apiKeyValueArr['asset'].map(item => item.cash_or_market_value).reduce((prev, next) => Number(prev) + Number(next));
                apiKeyValueArr['assetStr'] = "Assets Total assets " + apiKeyValueArr['assetTotal']['count'] + " | Total assets amount $" + apiKeyValueArr['assetTotal']['sum'];
            }
            if (apiKeyValueArr['asset'].length == 0) {
                apiKeyValueArr['assetTotal']['count'] = 0;
                apiKeyValueArr['assetTotal']['sum'] = 0;
                apiKeyValueArr['assetStr'] = "Assets Total assets 0 | Total assets amount $0";
            }
            if (table_key == "liabilities" && apiKeyValueArr['liabilities'].length > 0) {
                apiKeyValueArr['liabilityTotal']['count'] = apiKeyValueArr['liabilities'].length;
                apiKeyValueArr['liabilityTotal']['sum'] = apiKeyValueArr['liabilities'].map(item => item.monthly_payment).reduce((prev, next) => Number(prev) + Number(next));
                apiKeyValueArr['liabilitieStr'] = "Liabilities Total liabilities " + apiKeyValueArr['liabilityTotal']['count'] + " | Total liabilities amount $" + apiKeyValueArr['liabilityTotal']['sum'];
            }
            if (apiKeyValueArr['liabilities'].length == 0) {
                apiKeyValueArr['liabilityTotal']['count'] = 0;
                apiKeyValueArr['liabilityTotal']['sum'] = 0;
                apiKeyValueArr['liabilitieStr'] = "Liabilities Total liabilities 0 | Total liabilities amount $0";
            }
            if (table_key == "borrowers.borrowerAddress") {
                let tableKeyFormat = table_key.split(".");
                let addressData = apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]];
                let previousAddresses = [];
                let currentAddress = null;
                addressData.forEach((address, index) => {
                    if (address.move_out_date && address.move_out_date != "Invalid date") {
                        // Addresses with move_out_date are treated as Previous
                        previousAddresses.push(address);
                        apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]][index]['is_current'] = '';
                    }
                    else if (!currentAddress) {
                        // First address without move_out_date is treated as Current
                        currentAddress = address;
                        apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]][index]['is_current'] = 'current';
                    }
                    else {
                        // Any additional addresses without move_out_date are Previous
                        previousAddresses.push(address);
                        apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]][index]['is_current'] = '';
                    }
                });
                apiKeyValueArr[tableKeyFormat[0]][parentPositions]['addressStr'] = `${apiKeyValueArr[tableKeyFormat[0]][parentPositions]['personal_info']['first_name']}'s living address details       ${currentAddress?.address ?? '-'}`;
                if (!apiKeyValueArr[tableKeyFormat[0]][parentPositions].hasOwnProperty('processaddress')) {
                    apiKeyValueArr[tableKeyFormat[0]][parentPositions]['processaddress'] = {};
                }
                if (apiKeyValueArr[tableKeyFormat[0]][parentPositions] && apiKeyValueArr[tableKeyFormat[0]][parentPositions]['processaddress']) {
                    apiKeyValueArr[tableKeyFormat[0]][parentPositions]['processaddress']['currentAddress'] = { ...currentAddress };
                    apiKeyValueArr[tableKeyFormat[0]][parentPositions]['processaddress']['previousAddresses'] = previousAddresses;
                }
            }
            if (table_key == "borrowers.income") {
                let tableKeyFormat = table_key.split(".");
                apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]].forEach((element) => {
                    element['yearlyEarning'] = this.calculateYearlyIncome(element);
                });
                let incomeData = apiKeyValueArr[tableKeyFormat[0]][parentPositions][tableKeyFormat[1]];
                let totalIncome = this.calculateTotalAndCount(incomeData, 'yearlyEarning').totalIncome;
                apiKeyValueArr[tableKeyFormat[0]][parentPositions]['incomeStr'] = `${apiKeyValueArr[tableKeyFormat[0]][parentPositions]['personal_info']['first_name']}'s Additional income details   <span>     Total Income: ${incomeData?.length ?? 0} | Total Amount: $ ${totalIncome ?? 0}/annually </span>`;
            }
            if (table_key == "properties") {
                let tableKeyFormat = table_key.split(".");
                apiKeyValue['property_length'] = apiKeyValue[tableKeyFormat[0]].length > -1 ? apiKeyValue[tableKeyFormat[0]].length : apiKeyValue['property_length'];
            }
            this.emitUpdatedDataToStore(handler, apiKeyValue);
        }
    }
    cancelLocalDataProcess(handler, primaryData) {
        let apiKeyValueArr = this.getAkitaDataFromHandler(handler.event_handler.split('##')[0])[handler.event_handler];
        if (primaryData.value) {
            apiKeyValueArr.primaryData = {
                position: primaryData.value.position,
                linkedBlockId: primaryData.value.linkedBlockId,
                repeatedBlockFieldId: primaryData.value.repeatedBlockFieldId,
                unique_id: primaryData.value.unique_id,
                isCancelEvent: "true",
            };
        }
        this.emitUpdatedDataToStore(handler, apiKeyValueArr);
    }
    saveLocalDataProcess(handler, primaryData, responseData = {}) {
        let primaryKeyName = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'PrimaryKeyName'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'PrimaryKeyName'; })[0].value : '';
        let ReadDataFromModal = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'ReadDataFromModal'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'ReadDataFromModal'; })[0].value == 'true' ? true : false : false;
        let blockFields = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'blockFields'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'blockFields'; })[0].value ? true : false : false;
        let blockFieldName = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'blockFields'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'blockFields'; })[0].value : '';
        let table_key = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'table_key'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'table_key'; })[0].value : '';
        let splitKeys = primaryKeyName.split('||');
        let tempKeyCreate;
        if (splitKeys.length > 0) {
            primaryKeyName = splitKeys[0];
            tempKeyCreate = '_' + splitKeys[1];
        }
        this.uniqueFields = [];
        let uniqueFieldsAdditionalParam = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'UniqueFields'; });
        if (uniqueFieldsAdditionalParam.length > 0) {
            uniqueFieldsAdditionalParam[0].value.split('||').forEach(element => {
                let elementArr = element.split('|');
                let tempObj = {
                    req_key: elementArr.length > 0 ? elementArr[0] : '',
                    message: elementArr.length > 1 ? elementArr[1] : 'Please provide unique value!'
                };
                this.uniqueFields.push(tempObj);
            });
        }
        let sectionFields = {};
        let sectionFieldsFiltered = {};
        if (blockFields != true) {
            if (ReadDataFromModal) {
                sectionFields = this.wfeStepLoaderService && this.wfeStepLoaderService.rootData && this.wfeStepLoaderService.rootData['sectionFields'] ? this.wfeStepLoaderService.rootData['sectionFields'] : {};
            }
            else {
                sectionFields = this.wfeStepLoaderService && this.wfeStepLoaderService.lastStepRootData && this.wfeStepLoaderService.lastStepRootData['sectionFields'] ? this.wfeStepLoaderService.lastStepRootData['sectionFields'] : {};
            }
            // Filtering only current step data
            let stepId = ReadDataFromModal ? window['currentModalId'] : window['currentStepId'];
            const sectionFieldsArray = Object.entries(sectionFields);
            const filteredSectionFields = sectionFieldsArray.filter(([key, value]) => key.includes(stepId));
            // let sectionFieldsFiltered = {};
            filteredSectionFields.forEach(e => {
                sectionFieldsFiltered[e[0]] = e[1];
            });
        }
        else {
            sectionFields = this.wfeStepLoaderService && this.wfeStepLoaderService.lastStepRootData && this.wfeStepLoaderService.lastStepRootData['blockFields'] ? this.wfeStepLoaderService.lastStepRootData['blockFields'] : {};
            sectionFieldsFiltered[blockFieldName] = sectionFields[blockFieldName];
        }
        const newObj = {};
        if (sectionFieldsFiltered) {
            for (const key of Object.keys(sectionFieldsFiltered)) {
                sectionFieldsFiltered[key]?.forEach(fieldId => {
                    this.appDataService.getIndividualAppData(fieldId).pipe(take(1)).subscribe(fieldData => {
                        if (fieldData.length > 0 && fieldData[0]['requestApiKey']) {
                            let reqKey = fieldData[0]['requestApiKey'][0];
                            let fieldValue = fieldData[0]['value'];
                            if (reqKey != "" && reqKey != undefined) {
                                newObj[reqKey] = fieldValue;
                            }
                            if (fieldData[0]['isRepeatedField']) {
                                const blockId = fieldData[0]["linkedBlockId"];
                                let blockData;
                                if (tempKeyCreate) {
                                    blockData = this.getRepetableBlockDataFromBlockIdwithResponseKey(blockId, reqKey);
                                }
                                else {
                                    blockData = this.getRepetableBlockDataFromBlockId(blockId);
                                }
                                if (reqKey != "" && reqKey != undefined) {
                                    newObj[reqKey] = blockData;
                                }
                            }
                            else if (fieldData[0]['apiKey'] == 'Generic Block') {
                                // console.log("field:----> ",fieldData)
                                const blockId = fieldData[0]["linkedBlockId"];
                                // if (blockId) {
                                let blockObject = {};
                                this.wfeStepLoaderService.loadBlockByName(blockId).toPromise().then((data) => {
                                    if (blockFields != true) {
                                        data['block_fields'].forEach(element => {
                                            if (element['field_type'] != "Button" && element['field_type'] != "label") {
                                                let blockFieldRequestKey = element['requestApiKey'] ? element['requestApiKey'] : element['unique_id'];
                                                // let blockFieldRequestKey = element['requestApiKey'].split('##')[element['requestApiKey'].split('##').length - 1] ? element['requestApiKey'].split('##')[element['requestApiKey'].split('##').length - 1] : element['unique_id'];
                                                let blockFieldValue = this.appDataService.getFieldDataByFieldId(element.unique_id);
                                                blockObject[blockFieldRequestKey] = blockFieldValue;
                                                // console.log("unique_id: ", element.unique_id, " field data: ", this.appDataService.getFieldDataByFieldId(element.unique_id));
                                            }
                                        });
                                    }
                                    else {
                                        data['block_fields'].forEach(element => {
                                            if (element['field_type'] != "Button" && element['field_type'] != "label" && element['field_type'] != "Table") {
                                                let blockFieldRequestKey = element['requestApiKey'] ? element['requestApiKey'] : element['unique_id'];
                                                // let blockFieldRequestKey = element['requestApiKey'].split('##')[element['requestApiKey'].split('##').length - 1] ? element['requestApiKey'].split('##')[element['requestApiKey'].split('##').length - 1] : element['unique_id'];
                                                let blockFieldValue = this.appDataService.getFieldDataByFieldId(element.unique_id);
                                                blockObject[blockFieldRequestKey] = blockFieldValue;
                                                // console.log("unique_id: ", element.unique_id, " field data: ", this.appDataService.getFieldDataByFieldId(element.unique_id));
                                            }
                                        });
                                    }
                                    // console.log("blockData:-----> ",blockObject);
                                    if (reqKey != "" && reqKey != undefined) {
                                        newObj[reqKey] = blockObject;
                                    }
                                });
                                // }
                            }
                        }
                    });
                });
            }
        }
        let isDuplicateItemFound = -1;
        let isNonUniqueItemFound = -1;
        let nonUniqueItemWarningMsg = "Value provided is not unique!";
        let apiDatas = this.apiDataService.getApiDataByHandler(handler.event_handler.split('##')[0]);
        let parentPosition;
        let position;
        if (apiDatas.value.handler_name && blockFields == true && responseData) {
            parentPosition = primaryData?.value?.parentPosition;
            position = primaryData?.value?.position;
            newObj[primaryKeyName] = responseData['data']?.application_id || responseData['data']?.mainAddressResponse?.application_id;
            if (responseData && responseData['data'] && responseData['data']['addressSituationsResponse'] && responseData['data']['addressSituationsResponse']['application_id']) {
                newObj['address_situations_application_id'] = responseData['data']['addressSituationsResponse']['application_id'];
                newObj['address'] = (newObj?.unit ? (newObj?.unit + '-') : '') + `${newObj?.street_long} ${newObj?.street_type} ${newObj?.street_direction} ${newObj?.country}` + (newObj?.province ? (', ' + newObj?.province) : '') + (newObj?.postal_code ? (', ' + newObj?.postal_code) : '');
            }
        }
        else {
            if (!newObj[primaryKeyName]) {
                newObj[primaryKeyName] = new Date().getTime();
            }
        }
        let apiKeyValueArr = blockFields == true ? this.getAkitaDataFromHandler(handler.event_handler.split('##')[0])[handler.event_handler] : this.getApiKeyValuePair(apiDatas);
        ;
        // console.log("apiKeyValueArr: ", apiKeyValueArr)
        if (table_key == "asset" || table_key == "liabilities") {
            let borrowerList = apiKeyValueArr['borrowerList'];
            let borrowerNamesList = [];
            borrowerNamesList = borrowerList.filter(obj => newObj["borrower_ids"].indexOf(obj.id) > -1);
            let borrowerNames = borrowerNamesList.map(obj => obj.name).join(', ');
            // console.log("borrowerNames: ", borrowerNames)
            newObj['assoicated_borrower_id'] = newObj['borrower_ids'];
            newObj['borrower_ids'] = borrowerNames;
        }
        if (Array.isArray(newObj[primaryKeyName]) && tempKeyCreate) {
            const dummyArray = newObj[primaryKeyName];
            let apiKeyValueSet = [];
            let includedIds = [];
            this.modelValue = -1;
            for (let i = 0; i <= dummyArray.length - 1; i++) {
                if (dummyArray[i]?.[primaryKeyName] && dummyArray[i][primaryKeyName] != '') {
                    let copiedObject = JSON.parse(JSON.stringify(newObj));
                    copiedObject[primaryKeyName] = (new Date().getTime() + i).toString();
                    copiedObject[primaryKeyName + tempKeyCreate] = dummyArray[i][primaryKeyName];
                    apiKeyValueSet.push(copiedObject);
                }
            }
            apiKeyValueSet.forEach((value) => {
                this.uniqueFields.forEach((val) => {
                    if (!includedIds.includes(value[val.req_key])) {
                        includedIds.push(value[val.req_key]);
                    }
                    else {
                        this.modelValue = 1;
                    }
                });
            });
            if (this.modelValue != 1) {
                apiKeyValueArr.forEach((value) => {
                    this.uniqueFields.forEach((val) => {
                        if (includedIds.includes(value[val.req_key])) {
                            this.modelValue = 1;
                        }
                    });
                });
            }
            if (this.modelValue === 1) {
                return apiKeyValueArr;
            }
            else {
                apiKeyValueArr.push(...apiKeyValueSet);
            }
        }
        else {
            let dummyArray = apiKeyValueArr;
            this.modelValue = -1;
            if (blockFields !== true) {
                apiKeyValueArr?.forEach((value, index) => {
                    if (value[primaryKeyName] == newObj[primaryKeyName]) {
                        isDuplicateItemFound = index;
                    }
                    this.uniqueFields.forEach((val) => {
                        if (value[val.req_key] == newObj[val.req_key]) {
                            if (tempKeyCreate && value[primaryKeyName] != newObj[primaryKeyName]) {
                                this.modelValue = 1;
                            }
                            else {
                                isNonUniqueItemFound = index;
                                nonUniqueItemWarningMsg = val.message;
                            }
                        }
                    });
                });
            }
            if (isDuplicateItemFound > -1 && this.modelValue != 1) {
                apiKeyValueArr[isDuplicateItemFound] = newObj;
            }
            else if (isNonUniqueItemFound > -1) {
                this.snackBar.open(nonUniqueItemWarningMsg, 'OK', {
                    verticalPosition: 'top',
                    panelClass: ['mat-toolbar', 'mat-primary']
                });
            }
            else if (this.modelValue == 1) {
                apiKeyValueArr = dummyArray;
            }
            else {
                if (blockFields !== true) {
                    apiKeyValueArr.push(newObj);
                }
                else {
                    let tableKeyFormat = table_key.split(".");
                    let parentArray = [];
                    if (tableKeyFormat.length == 1) {
                        parentArray = apiKeyValueArr[tableKeyFormat[0]];
                    }
                    else {
                        if (table_key === "borrowers.employment") {
                            parentArray = apiKeyValueArr[tableKeyFormat[0]][parentPosition][tableKeyFormat[1]];
                        }
                        else {
                            parentArray = apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]];
                        }
                    }
                    if (parentArray && Array.isArray(parentArray)) {
                        if (!Object.isExtensible(parentArray)) {
                            parentArray = [...parentArray, newObj];
                        }
                        else {
                            parentArray.push(newObj);
                        }
                    }
                    if (tableKeyFormat.length == 1) {
                        apiKeyValueArr[tableKeyFormat[0]] = parentArray;
                    }
                    else {
                        if (table_key === "borrowers.borrowerAddress" || table_key === "borrowers.income") {
                            apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]] = parentArray;
                        }
                        else {
                            apiKeyValueArr[tableKeyFormat[0]][parentPosition][tableKeyFormat[1]] = parentArray;
                        }
                    }
                }
            }
        }
        if (table_key == "asset") {
            apiKeyValueArr['assetTotal']['count'] = apiKeyValueArr['asset'].length;
            apiKeyValueArr['assetTotal']['sum'] = apiKeyValueArr['asset'].map(item => item.cash_or_market_value).reduce((prev, next) => Number(prev) + Number(next));
            apiKeyValueArr['assetStr'] = "Assets Total assets " + apiKeyValueArr['assetTotal']['count'] + " | Total assets amount $" + apiKeyValueArr['assetTotal']['sum'];
        }
        if (table_key == "liabilities") {
            apiKeyValueArr['liabilityTotal']['count'] = apiKeyValueArr['liabilities'].length;
            apiKeyValueArr['liabilityTotal']['sum'] = apiKeyValueArr['liabilities'].map(item => item.monthly_payment).reduce((prev, next) => Number(prev) + Number(next));
            apiKeyValueArr['liabilitieStr'] = "Liabilities Total liabilities " + apiKeyValueArr['liabilityTotal']['count'] + " | Total liabilities amount $" + apiKeyValueArr['liabilityTotal']['sum'];
        }
        if (table_key == "borrowers.borrowerAddress") {
            let tableKeyFormat = table_key.split(".");
            let addressData = apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]];
            let previousAddresses = [];
            let currentAddress = null;
            addressData.forEach((address, index) => {
                if (address.move_out_date && address.move_out_date != "Invalid date") {
                    // Addresses with move_out_date are treated as Previous
                    previousAddresses.push(address);
                    apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]][index]['is_current'] = '';
                }
                else if (!currentAddress) {
                    // First address without move_out_date is treated as Current
                    currentAddress = address;
                    apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]][index]['is_current'] = 'current';
                }
                else {
                    // Any additional addresses without move_out_date are Previous
                    previousAddresses.push(address);
                    apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]][index]['is_current'] = '';
                }
            });
            apiKeyValueArr[tableKeyFormat[0]][position]['addressStr'] = `${apiKeyValueArr[tableKeyFormat[0]][position]['personal_info']['first_name']}'s living address details       ${currentAddress?.address ?? '-'}`;
            if (!apiKeyValueArr[tableKeyFormat[0]][position].hasOwnProperty('processaddress')) {
                apiKeyValueArr[tableKeyFormat[0]][position]['processaddress'] = {};
            }
            if (apiKeyValueArr[tableKeyFormat[0]][position] && apiKeyValueArr[tableKeyFormat[0]][position]['processaddress']) {
                apiKeyValueArr[tableKeyFormat[0]][position]['processaddress']['currentAddress'] = { ...currentAddress };
                apiKeyValueArr[tableKeyFormat[0]][position]['processaddress']['previousAddresses'] = previousAddresses;
            }
        }
        if (table_key == "borrowers.income") {
            let tableKeyFormat = table_key.split(".");
            apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]].forEach((element) => {
                element['yearlyEarning'] = this.calculateYearlyIncome(element);
            });
            let incomeData = apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]];
            let totalIncome = this.calculateTotalAndCount(incomeData, 'yearlyEarning').totalIncome;
            apiKeyValueArr[tableKeyFormat[0]][position]['incomeStr'] = `${apiKeyValueArr[tableKeyFormat[0]][position]['personal_info']['first_name']}'s Additional income details   <span>     Total Income: ${incomeData?.length ?? 0} | Total Amount: $ ${totalIncome ?? 0}/annually </span>`;
        }
        if (table_key == "mortgage") {
            let tableKeyFormat = table_key.split(".");
            apiKeyValueArr[tableKeyFormat[0]]['loan_amount'] = newObj['purchase_price'];
            apiKeyValueArr[tableKeyFormat[0]]['total_loan_amount'] = newObj['purchase_price'];
            apiKeyValueArr[tableKeyFormat[0]]['purchase_price'] = newObj['purchase_price'];
            apiKeyValueArr[tableKeyFormat[0]]['property_value'] = newObj['purchase_price'];
            apiKeyValueArr[tableKeyFormat[0]]['lender'] = newObj['lender'];
            apiKeyValueArr[tableKeyFormat[0]]['qualifyingMonthlyPayment'] = responseData['data']['qualifyingMonthlyPayment'];
            apiKeyValueArr[tableKeyFormat[0]]['freequencyPayment'] = responseData['data']['freequencyPayment'];
        }
        if (table_key == "properties") {
            let tableKeyFormat = table_key.split(".");
            apiKeyValueArr['property_length'] = apiKeyValueArr[tableKeyFormat[0]].length > -1 ? apiKeyValueArr[tableKeyFormat[0]].length : apiKeyValueArr['property_length'];
        }
        if (table_key == "subjectProperty") {
            let tableKeyFormatsub = table_key.split(".");
            if (apiKeyValueArr[tableKeyFormatsub[0]].length == 0) {
                apiKeyValueArr[tableKeyFormatsub[0]][0] = {};
            }
            apiKeyValueArr[tableKeyFormatsub[0]][0]['total_expenses'] = Number(Number(newObj['monthly_heating_fees']) + Number(newObj['monthly_hydro_costs']) + Number(newObj['monthly_insurance_costs']) + Number(newObj['monthly_management_costs']) + Number(newObj['monthly_repairs_costs']) + Number(newObj['monthly_interest_costs']) + Number(newObj['monthly_other_costs']) + Number(newObj['monthly_rental_income']) + Number(newObj['monthly_condo_fees'])) || 0;
            apiKeyValueArr[tableKeyFormatsub[0]][0]['address'] = newObj['contact/update/getAddressFromLookup##input'];
            table_key = "mortgage";
            let tableKeyFormat = table_key.split(".");
            apiKeyValueArr[tableKeyFormat[0]]['loan_amount'] = newObj['purchase_price'];
            apiKeyValueArr[tableKeyFormat[0]]['total_loan_amount'] = newObj['purchase_price'];
            apiKeyValueArr[tableKeyFormat[0]]['purchase_price'] = newObj['purchase_price'];
            apiKeyValueArr[tableKeyFormat[0]]['property_value'] = newObj['purchase_price'];
            apiKeyValueArr.loan_amount = newObj['purchase_price'];
            table_key = "subjectProperty";
        }
        if (table_key == "mortgage") {
            table_key = "subjectProperty";
            let tableKeyFormat = table_key.split(".");
            if (apiKeyValueArr[tableKeyFormat[0]].length == 0) {
                apiKeyValueArr[tableKeyFormat[0]][0] = {};
            }
            apiKeyValueArr[tableKeyFormat[0]][0]['purchase_price'] = newObj['loan_amount'];
            apiKeyValueArr.loan_amount = newObj['loan_amount'];
            table_key = "mortgage";
        }
        this.emitUpdatedDataToStore(handler, apiKeyValueArr);
    }
    calculateYearlyIncome(data) {
        const frequencyMultiplier = {
            Annual: 1,
            Monthly: 12,
            'Bi-weekly': 26,
            'Semi-monthly': 24,
            'Semi- monthly': 24,
            Weekly: 52,
        };
        const { income, payment_frequency } = data;
        const multiplier = frequencyMultiplier[payment_frequency];
        // if (!multiplier) {
        //   throw new Error(`Invalid payment frequency: ${payment_frequency}`);
        // }
        return income * multiplier;
    }
    calculateTotalAndCount(data, key) {
        const totalIncome = data.reduce((total, item) => Number(total) + (Number(item[key]) || 0), 0);
        const recordCount = data.length;
        return { totalIncome, recordCount };
    }
    updateLocalDataProcess(handler, primaryData, responseData = {}) {
        let primaryKeyName = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'PrimaryKeyName'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'PrimaryKeyName'; })[0].value : '';
        let ReadDataFromModal = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'ReadDataFromModal'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'ReadDataFromModal'; })[0].value == 'true' ? true : false : false;
        let blockFields = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'blockFields'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'blockFields'; })[0].value ? true : false : false;
        let blockFieldName = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'blockFields'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'blockFields'; })[0].value : '';
        let filterKey = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'PrimaryKeyName'; })[0]?.value;
        let table_key = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'table_key'; }).length > 0 ? handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'table_key'; })[0].value : '';
        let splitKeys = primaryKeyName.split('||');
        let tempKeyCreate;
        if (splitKeys.length > 0) {
            primaryKeyName = splitKeys[0];
            tempKeyCreate = '_' + splitKeys[1];
        }
        this.uniqueFields = [];
        let uniqueFieldsAdditionalParam = handler.invoke_event_config.additional_parameters.filter(function (el) { return el.parameter_type == 'UniqueFields'; });
        if (uniqueFieldsAdditionalParam.length > 0) {
            uniqueFieldsAdditionalParam[0].value.split('||').forEach(element => {
                let elementArr = element.split('|');
                let tempObj = {
                    req_key: elementArr.length > 0 ? elementArr[0] : '',
                    message: elementArr.length > 1 ? elementArr[1] : 'Please provide unique value!'
                };
                this.uniqueFields.push(tempObj);
            });
        }
        let sectionFields = {};
        let sectionFieldsFiltered = {};
        if (blockFields != true) {
            if (ReadDataFromModal) {
                sectionFields = this.wfeStepLoaderService && this.wfeStepLoaderService.rootData && this.wfeStepLoaderService.rootData['sectionFields'] ? this.wfeStepLoaderService.rootData['sectionFields'] : {};
            }
            else {
                sectionFields = this.wfeStepLoaderService && this.wfeStepLoaderService.lastStepRootData && this.wfeStepLoaderService.lastStepRootData['sectionFields'] ? this.wfeStepLoaderService.lastStepRootData['sectionFields'] : {};
            }
            // Filtering only current step data
            let stepId = ReadDataFromModal ? window['currentModalId'] : window['currentStepId'];
            const sectionFieldsArray = Object.entries(sectionFields);
            const filteredSectionFields = sectionFieldsArray.filter(([key, value]) => key.includes(stepId));
            let sectionFieldsFiltered = {};
            filteredSectionFields.forEach(e => {
                sectionFieldsFiltered[e[0]] = e[1];
            });
        }
        else {
            sectionFields = this.wfeStepLoaderService && this.wfeStepLoaderService.lastStepRootData && this.wfeStepLoaderService.lastStepRootData['blockFields'] ? this.wfeStepLoaderService.lastStepRootData['blockFields'] : {};
            sectionFieldsFiltered[blockFieldName] = sectionFields[blockFieldName];
        }
        const newObj = {};
        if (sectionFieldsFiltered) {
            for (const key of Object.keys(sectionFieldsFiltered)) {
                sectionFieldsFiltered[key].forEach(fieldId => {
                    this.appDataService.getIndividualAppData(fieldId).pipe(take(1)).subscribe(fieldData => {
                        if (fieldData.length > 0 && fieldData[0]['requestApiKey']) {
                            let reqKey = fieldData[0]['requestApiKey'][0];
                            let fieldValue = fieldData[0]['value'];
                            if (reqKey != "" && reqKey != undefined) {
                                newObj[reqKey] = fieldValue;
                            }
                            if (fieldData[0]['isRepeatedField']) {
                                const blockId = fieldData[0]["linkedBlockId"];
                                let blockData;
                                if (tempKeyCreate) {
                                    blockData = this.getRepetableBlockDataFromBlockIdwithResponseKey(blockId, reqKey);
                                }
                                else {
                                    blockData = this.getRepetableBlockDataFromBlockId(blockId);
                                }
                                if (reqKey != "" && reqKey != undefined) {
                                    newObj[reqKey] = blockData;
                                }
                            }
                            else if (fieldData[0]['apiKey'] == 'Generic Block') {
                                // console.log("field:----> ",fieldData)
                                const blockId = fieldData[0]["linkedBlockId"];
                                // if (blockId) {
                                let blockObject = {};
                                this.wfeStepLoaderService.loadBlockByName(blockId).toPromise().then((data) => {
                                    if (blockFields != true) {
                                        data['block_fields'].forEach(element => {
                                            if (element['field_type'] != "Button" && element['field_type'] != "label") {
                                                let blockFieldRequestKey = element['requestApiKey'] ? element['requestApiKey'] : element['unique_id'];
                                                // let blockFieldRequestKey = element['requestApiKey'].split('##')[element['requestApiKey'].split('##').length - 1] ? element['requestApiKey'].split('##')[element['requestApiKey'].split('##').length - 1] : element['unique_id'];
                                                let blockFieldValue = this.appDataService.getFieldDataByFieldId(element.unique_id);
                                                blockObject[blockFieldRequestKey] = blockFieldValue;
                                                // console.log("unique_id: ", element.unique_id, " field data: ", this.appDataService.getFieldDataByFieldId(element.unique_id));
                                            }
                                        });
                                    }
                                    else {
                                        data['block_fields'].forEach(element => {
                                            if (element['field_type'] != "Button" && element['field_type'] != "label" && element['field_type'] != "Table") {
                                                let blockFieldRequestKey = element['requestApiKey'] ? element['requestApiKey'] : element['unique_id'];
                                                // let blockFieldRequestKey = element['requestApiKey'].split('##')[element['requestApiKey'].split('##').length - 1] ? element['requestApiKey'].split('##')[element['requestApiKey'].split('##').length - 1] : element['unique_id'];
                                                let blockFieldValue = this.appDataService.getFieldDataByFieldId(element.unique_id);
                                                blockObject[blockFieldRequestKey] = blockFieldValue;
                                                // console.log("unique_id: ", element.unique_id, " field data: ", this.appDataService.getFieldDataByFieldId(element.unique_id));
                                            }
                                        });
                                    }
                                    // console.log("blockData:-----> ",blockObject);
                                    if (reqKey != "" && reqKey != undefined) {
                                        newObj[reqKey] = blockObject;
                                    }
                                });
                                // }
                            }
                        }
                    });
                });
            }
        }
        let apiData = this.apiDataService.getApiDataByHandler(handler.event_handler.split('##')[0]);
        let apiKeyValueArr = this.getAkitaDataFromHandler(handler.event_handler.split('##')[0])[handler.event_handler];
        if (table_key == "asset" || table_key == "liabilities") {
            let borrowerList = apiKeyValueArr['borrowerList'];
            let borrowerNamesList = [];
            borrowerNamesList = borrowerList.filter(obj => newObj["borrower_ids"].indexOf(obj.id) > -1);
            let borrowerNames = borrowerNamesList.map(obj => obj.name).join(', ');
            // console.log("borrowerNames: ", borrowerNames)
            newObj['assoicated_borrower_id'] = newObj['borrower_ids'];
            newObj['borrower_ids'] = borrowerNames;
        }
        if (table_key == "deal_info") {
            newObj['application_id'] = newObj['deal_application_id'];
            table_key = "";
        }
        let apiKeyValue = [];
        let editPosition;
        let applicationId;
        let parentPosition;
        let position;
        if (apiData.value.handler_name && blockFields == true && responseData) {
            parentPosition = primaryData?.value?.parentPosition;
            position = primaryData?.value?.position;
            editPosition = newObj[primaryKeyName];
            if (blockFields == true) {
                let tableKeyFormat = table_key.split(".");
                if (table_key == "") {
                    apiKeyValue = apiKeyValueArr;
                }
                else if (tableKeyFormat.length == 1) {
                    apiKeyValue = apiKeyValueArr?.[tableKeyFormat[0]];
                }
                else {
                    if (table_key === "borrowers.employment") {
                        filterKey = "application_id";
                        apiKeyValue = apiKeyValueArr?.[tableKeyFormat[0]]?.[parentPosition]?.[tableKeyFormat[1]];
                    }
                    else {
                        apiKeyValue = apiKeyValueArr?.[tableKeyFormat[0]]?.[position]?.[tableKeyFormat[1]];
                    }
                }
                if (table_key == "mortgage") {
                    applicationId = apiKeyValue['application_id'];
                }
                if (newObj && newObj['address_situations_application_id']) {
                    newObj['address'] = (newObj?.unit ? (newObj?.unit + '-') : '') + `${newObj?.street_long} ${newObj?.street_type} ${newObj?.street_direction} ${newObj?.country}` + (newObj?.province ? (', ' + newObj?.province) : '') + (newObj?.postal_code ? (', ' + newObj?.postal_code) : '');
                }
                let updatedArray = apiKeyValue;
                if (table_key == "" && newObj['transaction_type']) {
                    newObj['previous_transaction_type'] = updatedArray['transaction_type'];
                }
                if (Array.isArray(apiKeyValue)) {
                    updatedArray = apiKeyValue.map(obj => obj[filterKey] === editPosition ? { ...obj, ...newObj } : obj);
                }
                else {
                    updatedArray = { ...updatedArray, ...newObj };
                }
                if (table_key == "") {
                    apiKeyValueArr = updatedArray;
                }
                else if (tableKeyFormat.length == 1) {
                    apiKeyValueArr[tableKeyFormat[0]] = updatedArray;
                }
                else {
                    if (table_key === "borrowers.employment") {
                        apiKeyValueArr[tableKeyFormat[0]][parentPosition][tableKeyFormat[1]] = updatedArray;
                    }
                    else {
                        apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]] = updatedArray;
                    }
                }
                if (table_key == "asset") {
                    apiKeyValueArr['assetTotal']['count'] = apiKeyValueArr['asset'].length;
                    apiKeyValueArr['assetTotal']['sum'] = apiKeyValueArr['asset'].map(item => item.cash_or_market_value).reduce((prev, next) => Number(prev) + Number(next));
                    apiKeyValueArr['assetStr'] = "Assets Total assets " + apiKeyValueArr['assetTotal']['count'] + " | Total assets amount $" + apiKeyValueArr['assetTotal']['sum'];
                }
                if (table_key == "liabilities") {
                    apiKeyValueArr['liabilityTotal']['count'] = apiKeyValueArr['liabilities'].length;
                    apiKeyValueArr['liabilityTotal']['sum'] = apiKeyValueArr['liabilities'].map(item => item.monthly_payment).reduce((prev, next) => Number(prev) + Number(next));
                    apiKeyValueArr['liabilitieStr'] = "Liabilities Total liabilities " + apiKeyValueArr['liabilityTotal']['count'] + " | Total liabilities amount $" + apiKeyValueArr['liabilityTotal']['sum'];
                }
                if (table_key == "borrowers.borrowerAddress") {
                    let tableKeyFormat = table_key.split(".");
                    let addressData = apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]];
                    let previousAddresses = [];
                    let currentAddress = null;
                    addressData.forEach((address, index) => {
                        if (address.move_out_date && address.move_out_date != "Invalid date") {
                            // Addresses with move_out_date are treated as Previous
                            previousAddresses.push(address);
                            apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]][index]['is_current'] = '';
                        }
                        else if (!currentAddress) {
                            // First address without move_out_date is treated as Current
                            currentAddress = address;
                            apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]][index]['is_current'] = 'current';
                        }
                        else {
                            // Any additional addresses without move_out_date are Previous
                            previousAddresses.push(address);
                            apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]][index]['is_current'] = '';
                        }
                    });
                    apiKeyValueArr[tableKeyFormat[0]][position]['addressStr'] = `${apiKeyValueArr[tableKeyFormat[0]][position]['personal_info']['first_name']}'s living address details       ${currentAddress?.address ?? '-'}`;
                    if (!apiKeyValueArr[tableKeyFormat[0]][position].hasOwnProperty('processaddress')) {
                        apiKeyValueArr[tableKeyFormat[0]][position]['processaddress'] = {};
                    }
                    if (apiKeyValueArr[tableKeyFormat[0]][position] && apiKeyValueArr[tableKeyFormat[0]][position]['processaddress']) {
                        apiKeyValueArr[tableKeyFormat[0]][position]['processaddress']['currentAddress'] = { ...currentAddress };
                        apiKeyValueArr[tableKeyFormat[0]][position]['processaddress']['previousAddresses'] = previousAddresses;
                    }
                }
                if (table_key == "borrowers.income") {
                    let tableKeyFormat = table_key.split(".");
                    apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]].forEach((element) => {
                        element['yearlyEarning'] = this.calculateYearlyIncome(element);
                    });
                    let incomeData = apiKeyValueArr[tableKeyFormat[0]][position][tableKeyFormat[1]];
                    let totalIncome = this.calculateTotalAndCount(incomeData, 'yearlyEarning').totalIncome;
                    apiKeyValueArr[tableKeyFormat[0]][position]['incomeStr'] = `${apiKeyValueArr[tableKeyFormat[0]][position]['personal_info']['first_name']}'s Additional income details   <span>     Total Income: ${incomeData?.length ?? 0} | Total Amount: $ ${totalIncome ?? 0}/annually </span>`;
                }
                if (table_key == "properties") {
                    let tableKeyFormat = table_key.split(".");
                    apiKeyValueArr['property_length'] = apiKeyValueArr[tableKeyFormat[0]].length > -1 ? apiKeyValueArr[tableKeyFormat[0]].length : apiKeyValueArr['property_length'];
                }
                if (table_key == "mortgage") {
                    let tableKeyFormat = table_key.split(".");
                    apiKeyValueArr[tableKeyFormat[0]]['application_id'] = applicationId;
                    apiKeyValueArr[tableKeyFormat[0]]['loan_amount'] = newObj['loan_amount'];
                    apiKeyValueArr[tableKeyFormat[0]]['total_loan_amount'] = newObj['loan_amount'];
                    apiKeyValueArr[tableKeyFormat[0]]['purchase_price'] = newObj['property_value'];
                    apiKeyValueArr[tableKeyFormat[0]]['property_value'] = newObj['property_value'];
                    apiKeyValueArr[tableKeyFormat[0]]['lender'] = newObj['lender'];
                    apiKeyValueArr[tableKeyFormat[0]]['qualifyingMonthlyPayment'] = responseData['data']['qualifyingMonthlyPayment'];
                    apiKeyValueArr[tableKeyFormat[0]]['freequencyPayment'] = responseData['data']['freequencyPayment'];
                }
                if (table_key == "subjectProperty") {
                    let tableKeyFormatsub = table_key.split(".");
                    if (apiKeyValueArr[tableKeyFormatsub[0]].length == 0) {
                        apiKeyValueArr[tableKeyFormatsub[0]][0] = {};
                    }
                    apiKeyValueArr[tableKeyFormatsub[0]][0]['total_expenses'] = Number(Number(newObj['monthly_heating_fees']) + Number(newObj['monthly_hydro_costs']) + Number(newObj['monthly_insurance_costs']) + Number(newObj['monthly_management_costs']) + Number(newObj['monthly_repairs_costs']) + Number(newObj['monthly_interest_costs']) + Number(newObj['monthly_other_costs']) + Number(newObj['monthly_rental_income']) + Number(newObj['monthly_condo_fees'])) || 0;
                    apiKeyValueArr[tableKeyFormatsub[0]][0]['address'] = newObj['contact/update/getAddressFromLookup##input'];
                    table_key = "mortgage";
                    let tableKeyFormat = table_key.split(".");
                    apiKeyValueArr[tableKeyFormat[0]]['application_id'] = applicationId;
                    apiKeyValueArr[tableKeyFormat[0]]['loan_amount'] = newObj['purchase_price'] - apiKeyValueArr[tableKeyFormat[0]]['down_payment'];
                    apiKeyValueArr[tableKeyFormat[0]]['total_loan_amount'] = newObj['purchase_price'] - apiKeyValueArr[tableKeyFormat[0]]['down_payment'];
                    apiKeyValueArr[tableKeyFormat[0]]['purchase_price'] = newObj['purchase_price'];
                    apiKeyValueArr[tableKeyFormat[0]]['property_value'] = newObj['purchase_price'];
                    apiKeyValueArr.loan_amount = newObj['purchase_price'];
                    table_key = "subjectProperty";
                }
                if (table_key == "mortgage") {
                    table_key = "subjectProperty";
                    let tableKeyFormat = table_key.split(".");
                    if (apiKeyValueArr[tableKeyFormat[0]].length == 0) {
                        apiKeyValueArr[tableKeyFormat[0]][0] = {};
                    }
                    apiKeyValueArr[tableKeyFormat[0]][0]['purchase_price'] = newObj['property_value'];
                    apiKeyValueArr.loan_amount = newObj['loan_amount'];
                    table_key = "mortgage";
                }
                this.emitUpdatedDataToStore(handler, apiKeyValueArr);
            }
        }
    }
    getApiKeyValuePair(apiDatas) {
        let apiKeyValue = [];
        if (apiDatas) {
            for (const key of Object.keys(apiDatas.value)) {
                if (key == "handler_name") {
                    continue;
                }
                let indexArr = key.match(/^.*?\[[^\d]*(\d+)[^\d]*\].*$/);
                let index = indexArr ? Number(indexArr[1]) : -1;
                let indexKey = key.split('.')[1];
                let obj = {};
                if (index > -1) {
                    if (apiKeyValue[index]) {
                        apiKeyValue[index][indexKey] = apiDatas.value[key];
                    }
                    else {
                        obj[indexKey] = apiDatas.value[key];
                        apiKeyValue[index] = obj;
                    }
                }
            }
        }
        return apiKeyValue;
    }
    getRepetableBlockDataFromBlockId(blockId) {
        const repeatableLocalStorageData = this.repeatableBlockUtil.getRepeatableLocalStorageDataByBlockId(blockId);
        var repeatableBlockData = [];
        if (repeatableLocalStorageData) {
            for (const objKey of Object.keys(repeatableLocalStorageData)) {
                const fieldDetails = objKey.split("$");
                const fieldData = this.appDataService.getFieldDataByFieldId(objKey);
                if (fieldDetails.length > 2) {
                    if (repeatableBlockData[fieldDetails[2]]) {
                        repeatableBlockData[fieldDetails[2]][fieldDetails[1]] = fieldData;
                    }
                    else {
                        repeatableBlockData[fieldDetails[2]] = { [fieldDetails[1]]: fieldData };
                    }
                }
            }
        }
        return repeatableBlockData;
    }
    getRepetableBlockDataFromBlockIdwithResponseKey(blockId, resKey) {
        const repeatableLocalStorageData = this.repeatableBlockUtil.getRepeatableLocalStorageDataByBlockId(blockId);
        var repeatableBlockData = [];
        if (repeatableLocalStorageData) {
            for (const objKey of Object.keys(repeatableLocalStorageData)) {
                const fieldDetails = objKey.split("$");
                const fieldData = this.appDataService.getFieldDataByFieldId(objKey);
                if (fieldDetails.length > 2) {
                    repeatableBlockData[fieldDetails[2]] = { [resKey]: fieldData };
                }
            }
        }
        return repeatableBlockData;
    }
    emitLoginStateDataToStore(handler, res) {
        if (res.loginStatus) {
            if (handler.invoke_event_config.callback_config?.OnSuccess) {
                if (this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.OnSuccess)) {
                    this.getOnSuccess(this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.OnSuccess));
                }
            }
        }
        else {
            if (handler.invoke_event_config.callback_config?.onFailure) {
                if (this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onFailure)) {
                    this.getOnFailure(this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onFailure));
                }
            }
        }
    }
    emitUpdatedDataToStore(handler, res) {
        var finalRes = {};
        finalRes[(handler.event_handler.includes('##') ? handler.event_handler.split('##')[1] : 'details').replace('[*]', '')] = res;
        const response = {
            handler: handler.event_handler.includes('##') ? handler.event_handler.split('##')[0] : handler.event_handler,
            response: finalRes,
            event_success: true,
            storageType: localStorage.getItem('storageType'),
            statusCode: 0
        };
        const { formattedResponse } = this.externalRequestResponseUtil.storeResponse(response);
        const result = formattedResponse;
        const apiTempData = {
            id: handler.event_handler.includes('##') ? handler.event_handler.split('##')[0] : handler.event_handler,
            apiUrl: handler.event_handler.includes('##') ? handler.event_handler.split('##')[0] : handler.event_handler,
            apiKey: handler.event_handler.includes('##') ? handler.event_handler.split('##')[0] : handler.event_handler,
            value: result.response
        };
        this.apiDataService.setApiDataByApiUrl(Object.assign({}, apiTempData));
        this.sharedEventsServices.emitApiSuccessResponse.emit(result.response);
        if (this.modelValue === 1) {
            if (handler.invoke_event_config.callback_config?.onFailure) {
                if (this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onFailure)) {
                    this.getOnFailure(this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onFailure));
                }
            }
        }
        else {
            if (handler.invoke_event_config.callback_config?.OnSuccess) {
                if (this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.OnSuccess)) {
                    this.getOnSuccess(this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.OnSuccess));
                }
            }
        }
    }
    skipLoaderCheck() {
        const SkipL = this.additionalParameters ? this.additionalParameters.find(i => i.parameter_type == 'SkipLoader') : [];
        this.wfeStepLoaderService.loaderService.skipLoading = SkipL && SkipL['value'] === "true";
    }
    setLanguage(obj) {
        this.wfeStepLoaderService.stepDataStore = {};
        this.wfeStepLoaderService.blockDataStore = {};
        // localStorage.removeItem('stepDataCache');
        // localStorage.removeItem('lastBlockLoaded');
        // localStorage.removeItem('blockDataCache');
        window.localStorage.setItem('langField', obj.uniqueId);
        window.localStorage.setItem('lang', `/${obj.value}`);
        // this.internalCEEEmitter.languageChangeEmitter.emit(`/${obj.value}`);
        window.location.reload();
    }
    stateModified(handler) {
        if (this.hasUnsavedData && this.modalOnPageLeave) {
            /* this.dialog.closeAll();
            history.pushState(null, document.title, document.location.toString());
            this.wfeStepLoaderService.loadStepById(this.modalOnPageLeave).subscribe((data: any) => {
                if (data !== undefined && data.display_as_modal === 1) {
                    this.openDialog(data);
                }
            }); */
            const callBackData = handler.invoke_event_config.callback_config;
            if (callBackData && callBackData.OnSuccess) {
                this.triggerSuccessOrFailure(callBackData.OnSuccess);
            }
        }
        else {
            const callBackData = handler.invoke_event_config.callback_config;
            if (callBackData && callBackData.onFailure) {
                this.triggerSuccessOrFailure(callBackData.onFailure, false);
            }
        }
    }
    historyBack() {
        localStorage.removeItem('modal_on_page_leave');
        let isDrawerOpen = localStorage.getItem('isDrawerOpen');
        if (this.dialog.openDialogs.length || String(isDrawerOpen) == '1') {
            this.dialog.closeAll();
            history.go(-2);
        }
        else {
            //Commented below line and added timeout to close popup and go back by -2
            history.go(-1);
        }
        // this.redirectionUtil.redirectTo(sessionStorage.getItem('previousStepId'));
        localStorage.setItem('forceOnBack', 'true');
    }
    openDialog(data) {
        let isDisableClose = false;
        // data.dismiss_modal = 1 (i.e isDisableClose = true) is to restrict closing the modal when clicking outside the modal or pressing the escape key on the keyboard.
        if (data !== undefined && data.dismiss_modal === 1) {
            isDisableClose = true;
        }
        const dialogRef = this.dialog.open(ModalRendererComponent, { data: { stepId: data.tid, config: { disableClose: isDisableClose } }, id: `stepModal-${data.tid}`, panelClass: `stepModal-${data.tid}` });
        dialogRef.afterClosed().subscribe(result => {
            // console.log('The dialog ' + data.tid + ' was closed.');
        });
    }
    openAlert(data) {
        this.dialog.open(AlertModalComponent, { data: { message: data } });
    }
    getBase64(file) {
        const reader = new FileReader();
        reader.onload = () => {
            // console.log(reader.result);
            this.encriptedFileArray.push(String(reader.result).split('base64,')[1]);
        };
        if (file) {
            reader.readAsDataURL(file);
        }
    }
    async eventHandler(handler, primaryData) {
        // handle all the events
        if (handler.event_handler !== '') {
            this.fileDataArray = [];
            const apiType = localStorage.getItem('API_TYPE');
            let SaveHandler = [];
            if (localStorage.getItem('save_handler')) {
                SaveHandler = localStorage.getItem('save_handler').split('|').map(s => s.trim());
            }
            // File Encription Code
            let eventAdditionalParameters = handler.invoke_event_config ? handler.invoke_event_config.additional_parameters : [];
            let fileEncriptionArr = eventAdditionalParameters?.filter(function (item) {
                return item['parameter_type'] == "FileEncription" && item['value'].toLowerCase() == "base64";
            });
            let table_operations = eventAdditionalParameters?.filter(function (item) {
                return item['parameter_type'] == "table_operations";
            });
            let table_operations_block = eventAdditionalParameters?.filter(function (item) {
                return item['parameter_type'] == "table_operations_block";
            });
            let tableOperations = table_operations?.length > 0 ? table_operations[0]?.value?.toLowerCase() : '';
            let tableOperationsBlock = table_operations_block?.length > 0 ? table_operations_block[0]?.value?.toLowerCase() : '';
            let isFileEncripted = fileEncriptionArr?.length > 0 && fileEncriptionArr[0]?.value?.toLowerCase() == "base64" ? true : false;
            let fileData = this.payLoad && this.payLoad['fileData'] && this.payLoad['fileData']['file'] ? this.payLoad['fileData']['file'] : null;
            this.fileDataArray.push(fileData);
            this.encriptedFileArray = [];
            this.fileDataArray.forEach(file => {
                this.getBase64(file);
            });
            // switch gets called only when there is payload and payLoad type if an file
            if (this.payLoad && this.payLoad.type === 'file' && !isFileEncripted) {
                let success;
                let failure;
                if (handler.invoke_event_config) {
                    success = handler.invoke_event_config.callback_config.OnSuccess ||
                        handler.invoke_event_config.callback_config.onResponse;
                    failure = handler.invoke_event_config.callback_config.onFailure ||
                        handler.invoke_event_config.callback_config.onException;
                }
                // check / get the extra payload from the config
                // extra config Data needs to be passed so that the
                // more parameters can be configured through config
                let extraConfigData = {};
                const apiConfigData = localStorage.getItem('API_CONFIG');
                const parsedData = apiConfigData ? JSON.parse(apiConfigData) : null;
                // get additional parameters
                let additionalParameters = this.getAdditionalParameter(), eventHandlerName = handler.event_handler, // default event handler name
                hasCustomEventHandler = false; // default hasCustomEventHandler flag
                // check if additional parameter CEE_CustomEventHandler is present
                if (additionalParameters.hasOwnProperty('CEE_CustomEventHandler') && additionalParameters['CEE_CustomEventHandler'] !== '') {
                    eventHandlerName = additionalParameters['CEE_CustomEventHandler'];
                    hasCustomEventHandler = true;
                }
                if (parsedData && parsedData[eventHandlerName]) {
                    extraConfigData = this.externalRequestResponseUtil.formTheRequestObj(parsedData[eventHandlerName]);
                    extraConfigData['customEventHandler'] = eventHandlerName;
                    extraConfigData['hasCustomEventHandler'] = hasCustomEventHandler;
                }
                // check if the file action needs token
                if (window.sessionStorage.getItem('CEE_OIDC') == '1' &&
                    extraConfigData.hasAuthorisation == true) {
                    const apiConfigToken = this.sharedEventsServices.apiConfigTokenEmitter.subscribe(async (res) => {
                        apiConfigToken.unsubscribe();
                        // call the act on file action method
                        await this.actOnFileAction(res, handler, success, failure);
                    });
                }
                if (window.sessionStorage.getItem('CEE_OIDC') == '1' &&
                    extraConfigData.hasAuthorisation == true) {
                    // * setting emit token to true so that msal service
                    // * send the api config data back through  apiConfigToken emitter
                    extraConfigData.emitToken = true;
                    this.sharedEventsServices.oidcDataEmitter.emit(extraConfigData);
                }
                else {
                    // call the act on file action method
                    await this.actOnFileAction(extraConfigData, handler, success, failure);
                }
            }
            else {
                switch (apiType) {
                    case 'ESB':
                        let requestBody = this.esbRequestBodyUtil.getESBRequestBody();
                        let queryParams;
                        // would work if the api key is not hashed
                        if (this.getAdditionalParameter()['QueryParameter']) {
                            queryParams = this.getAdditionalParameter()['QueryParameter'].split('|');
                        }
                        if (queryParams) {
                            const body = {};
                            for (const param of queryParams) {
                                body[param] = requestBody[param];
                            }
                            requestBody = body;
                        }
                        this.ceeApiService.ESBRequestHandler(handler.event_handler, requestBody).subscribe(res => {
                            if (res['status'] === 'ok') {
                                const successData = JSON.parse(res['api_response']);
                                const appBaseResult = window.sessionStorage.getItem('ApplicationBaseResultPath');
                                if (successData[appBaseResult] !== undefined) {
                                    this.sharedEventsServices.emitApiSuccessResponse.emit(JSON.parse(res['api_response'])[appBaseResult]);
                                    if (typeof (successData[appBaseResult]) === 'string' ||
                                        typeof (successData[appBaseResult]) === 'number') {
                                        // set the data to the akita store
                                        this.saveData(appBaseResult, handler.event_handler, successData[appBaseResult]);
                                    }
                                    else {
                                        for (const data of Object.keys(successData[appBaseResult])) {
                                            if (typeof (successData[appBaseResult][data]) === 'string' ||
                                                typeof (successData[appBaseResult][data]) === 'number') {
                                                // set the data to the akita store
                                                this.saveData(data, handler.event_handler, successData[appBaseResult][data]);
                                            }
                                            else {
                                                // set the data to the akita store
                                                this.saveData(data, handler.event_handler, JSON.stringify(successData[appBaseResult][data]));
                                            }
                                        }
                                    }
                                }
                                if (handler.invoke_event_config.callback_config.OnSuccess) {
                                    if (this.processCallbackBlocks(JSON.parse(res['api_response']), handler.invoke_event_config.callback_config.OnSuccess)) {
                                        this.getOnSuccess(this.processCallbackBlocks(JSON.parse(res['api_response']), handler.invoke_event_config.callback_config.OnSuccess));
                                    }
                                }
                                else {
                                    if (this.processCallbackBlocks(JSON.parse(res['api_response']), handler.invoke_event_config.callback_config.onResponse)) {
                                        this.getOnResponse(this.processCallbackBlocks(JSON.parse(res['api_response']), handler.invoke_event_config.callback_config.onResponse));
                                    }
                                }
                            }
                            else {
                                if (handler.invoke_event_config.callback_config.onFailure) {
                                    if (this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onFailure)) {
                                        this.getOnFailure(this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onFailure));
                                    }
                                }
                                else {
                                    if (this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onResponse)) {
                                        this.getOnResponse(this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onResponse));
                                    }
                                }
                            }
                        }, err => {
                            if (handler.invoke_event_config.callback_config.onFailure) {
                                if (this.processCallbackBlocks(err, handler.invoke_event_config.callback_config.onFailure)) {
                                    this.getOnFailure(this.processCallbackBlocks(err, handler.invoke_event_config.callback_config.onFailure));
                                }
                            }
                            else {
                                if (this.processCallbackBlocks(err, handler.invoke_event_config.callback_config.onException)) {
                                    this.getOnException(this.processCallbackBlocks(err, handler.invoke_event_config.callback_config.onException));
                                }
                            }
                        });
                        break;
                    case 'INTERNAL':
                    case 'EXTERNAL':
                        let success;
                        let failure;
                        let exception;
                        if (handler.invoke_event_config) {
                            success = handler.invoke_event_config.callback_config.OnSuccess ?
                                handler.invoke_event_config.callback_config.OnSuccess :
                                handler.invoke_event_config.callback_config.onResponse;
                            failure = handler.invoke_event_config.callback_config.onFailure ?
                                handler.invoke_event_config.callback_config.onFailure :
                                handler.invoke_event_config.callback_config.onResponse;
                            exception = handler.invoke_event_config.callback_config.onFailure ?
                                handler.invoke_event_config.callback_config.onFailure :
                                handler.invoke_event_config.callback_config.onException;
                        }
                        const responseSubscription = this.sharedEventsServices.eventResponseSubscriber.subscribe((res) => {
                            if (res.handler !== handler.event_handler) {
                                return;
                            }
                            const result = JSON.parse(JSON.stringify(res));
                            const { formattedResponse, flattenResponse } = this.externalRequestResponseUtil.storeResponse(res);
                            const modifiedResult = formattedResponse;
                            if (flattenResponse.logout) {
                                this.OIDCLogout();
                                responseSubscription.unsubscribe();
                                return;
                            }
                            const internalAPIResponseEmitter = primaryData['internalAPIResponseEmitter'];
                            if (internalAPIResponseEmitter) {
                                internalAPIResponseEmitter.emit(modifiedResult.response);
                                responseSubscription.unsubscribe();
                                return;
                            }
                            if (tableOperations) {
                                let derived_event_handler = '';
                                if (handler?.invoke_event_config?.callback_config?.onResponse[0]?.additional_parameters) {
                                    derived_event_handler = handler.invoke_event_config.callback_config.onResponse[0].additional_parameters.filter(function (el) { return el.parameter_type == 'CEE_table_local_opetation'; }).length > 0 ? handler.invoke_event_config.callback_config.onResponse[0].additional_parameters.filter(function (el) { return el.parameter_type == 'CEE_table_local_opetation'; })[0].value : '';
                                }
                                let handleSaveData = {
                                    result: result.response,
                                    primaryData: primaryData,
                                    tableOperations: tableOperations,
                                    tableOperationsBlock: tableOperationsBlock,
                                    ModalOnPageLeave: null,
                                    event_config: { display_step: derived_event_handler },
                                    event_handler: handler.invoke_event_config.callback_config.onResponse[0].handler,
                                    invoke_event_config: {
                                        additional_parameters: handler.invoke_event_config.callback_config.onResponse[0].additional_parameters
                                    }
                                };
                                if (tableOperationsBlock !== 'subject_property' && tableOperationsBlock !== 'subject_property_mortgage' && tableOperationsBlock !== 'mortgage' && tableOperationsBlock !== 'update_subject_property') {
                                    if (handleSaveData.tableOperations === "save" && tableOperationsBlock !== 'properties') {
                                        this.saveLocalDataProcess(handleSaveData, handleSaveData.primaryData, handleSaveData.result);
                                    }
                                    if (handleSaveData.tableOperations === "update" && tableOperationsBlock !== 'properties') {
                                        this.updateLocalDataProcess(handleSaveData, handleSaveData.primaryData, handleSaveData.result);
                                    }
                                    if (handleSaveData.tableOperations === "delete" && tableOperationsBlock !== 'properties' && tableOperationsBlock !== 'mortgagedelete') {
                                        this.deleteLocalDataProcess(handleSaveData, handleSaveData.primaryData, handleSaveData.result);
                                    }
                                }
                                else {
                                    if (tableOperationsBlock === 'subject_property' || tableOperationsBlock === 'mortgage') {
                                        this.handlerSaveData[tableOperationsBlock] = handleSaveData;
                                    }
                                }
                            }
                            if (result.event_success) {
                                this.sharedEventsServices.emitApiSuccessResponse.emit(modifiedResult.response);
                                if (success) {
                                    const successCallback = this.processCallbackBlocks(flattenResponse, success);
                                    if (successCallback) {
                                        if (SaveHandler.includes(res.handler)) {
                                            localStorage.removeItem('has_unsaved_data');
                                        }
                                        const _this = this;
                                        setTimeout(() => {
                                            _this.getOnSuccess(successCallback);
                                        }, 0);
                                    }
                                }
                                responseSubscription.unsubscribe();
                            }
                            else {
                                if (failure) {
                                    const failureCallback = this.processCallbackBlocks(flattenResponse, failure);
                                    if (failureCallback) {
                                        this.getOnFailure(failureCallback);
                                    }
                                }
                                responseSubscription.unsubscribe();
                            }
                        }, err => {
                            console.error(`Error Occurred while fetching response. ${err}`);
                            if (exception) {
                                const exceptionCallback = this.processCallbackBlocks(err, exception);
                                if (exceptionCallback) {
                                    this.getOnFailure(exceptionCallback);
                                }
                            }
                            responseSubscription.unsubscribe();
                        });
                        const SaveResponseDataStepId = handler.invoke_event_config && handler.invoke_event_config.additional_parameters ? handler.invoke_event_config.additional_parameters.find(function (p) { return p.parameter_type === 'SaveResponseData'; }) : null;
                        if (SaveResponseDataStepId && SaveResponseDataStepId.value) {
                            this.internalResponseUtil.saveResponseData(SaveResponseDataStepId.value);
                        }
                        if (isFileEncripted) {
                            setTimeout(() => {
                                this.externalRequestResponseUtil.prepareObjectToBeSent(handler.event_handler, apiType === 'INTERNAL' ? 'internal' : '', true, this.downloadType, this.encriptedFileArray, primaryData, tableOperations, tableOperationsBlock);
                            }, 1000);
                        }
                        else {
                            this.externalRequestResponseUtil.prepareObjectToBeSent(handler.event_handler, apiType === 'INTERNAL' ? 'internal' : '', true, this.downloadType, [], primaryData, tableOperations, tableOperationsBlock);
                        }
                        break;
                    default:
                        let appData = [];
                        let apiData = [];
                        // store the appData
                        this.appDataService.getAllAppData().subscribe(res => {
                            // console.log('appData', res);
                            if (localStorage.getItem('singleApiKey') === 'true') {
                                appData = res;
                            }
                            else {
                                let finalArr = [];
                                for (const data of res) {
                                    let obj = {};
                                    const arr = [];
                                    for (const requestKey of data['requestApiKey']) {
                                        obj = data;
                                        obj = { ...obj, apiKey: requestKey };
                                        arr.push(obj);
                                    }
                                    finalArr = [...finalArr, ...arr];
                                }
                                appData = finalArr;
                            }
                            // console.log('app Data', appData);
                        });
                        // store the apiData
                        this.apiDataService.getAllApiData().subscribe(res => {
                            // console.log('apiData', res);
                            apiData = res;
                        });
                        // update the app data with the mandatory data from the repeatable block
                        for (const data in appData) {
                            if (appData[data].linkedBlockId) {
                                const obj = {};
                                obj['mandatory'] =
                                    this.repeatableBlockUtil.getRepeatableLocalStorageData(appData[data].linkedBlockId, String(appData[data].id))['isMandatory'];
                                appData[data] = { ...appData[data], ...obj };
                            }
                        }
                        // console.log(appData);
                        const eventHandlerEmitterObject = {
                            handler: handler.event_handler,
                            appData,
                            apiData
                        };
                        this.sharedEventsServices.eventHandlerEmitter.emit(eventHandlerEmitterObject);
                        // subscribe to the outer event
                        const subscription = this.sharedEventsServices.eventResponseSubscriber.subscribe(res => {
                            if (res['event_sucess']) {
                                if (res['listResult']) {
                                    this.sharedEventsServices.emitApiSuccessResponse.emit(res['listResult']);
                                }
                                else {
                                    this.sharedEventsServices.emitApiSuccessResponse.emit(res);
                                }
                                if (typeof (res) === 'string' ||
                                    typeof (res) === 'number') {
                                    // set the data to the akita store
                                    this.saveData(String(res), handler.event_handler, res);
                                }
                                else {
                                    for (const data of Object.keys(res)) {
                                        if (typeof (res[data]) === 'string' ||
                                            typeof (res[data]) === 'number') {
                                            // set the data to the akita store
                                            this.saveData(data, handler.event_handler, res[data]);
                                        }
                                        else {
                                            // set the data to the akita store
                                            this.saveData(data, handler.event_handler, JSON.stringify(res[data]));
                                        }
                                    }
                                }
                                if (handler.invoke_event_config.callback_config.OnSuccess) {
                                    if (this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.OnSuccess)) {
                                        this.getOnSuccess(this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.OnSuccess));
                                    }
                                }
                                else {
                                    if (this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onResponse)) {
                                        this.getOnResponse(this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onResponse));
                                    }
                                }
                                subscription.unsubscribe();
                            }
                            else {
                                if (handler.invoke_event_config.callback_config.onFailure) {
                                    if (this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onFailure)) {
                                        this.getOnFailure(this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onFailure));
                                    }
                                }
                                else {
                                    if (this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onResponse)) {
                                        this.getOnResponse(this.processCallbackBlocks(res, handler.invoke_event_config.callback_config.onResponse));
                                    }
                                }
                                subscription.unsubscribe();
                            }
                        });
                        break;
                }
            }
        }
    }
    updateMortageSubjectPropertyData() {
        let handleSaveData = this.handlerSaveData['subject_property'] ? this.handlerSaveData['subject_property'] : this.handlerSaveData['mortgage'];
        if (handleSaveData?.tableOperations === "save") {
            this.saveLocalDataProcess(handleSaveData, handleSaveData.primaryData, handleSaveData.result);
        }
        if (handleSaveData?.tableOperations === "update") {
            this.updateLocalDataProcess(handleSaveData, handleSaveData.primaryData, handleSaveData.result);
        }
        if (handleSaveData?.tableOperations === "delete") {
            this.deleteLocalDataProcess(handleSaveData, handleSaveData.primaryData, handleSaveData.result);
        }
    }
    /**
     * method acts on each and every file action
     * @param extraConfigData: api config data
     * @param handler: the event handler
     * @param success: the success event
     * @param failure: the failure event
     * @returns void
     */
    async actOnFileAction(extraConfigData, handler, success, failure) {
        let eventHandlerName = handler.event_handler;
        if (extraConfigData.hasOwnProperty('hasCustomEventHandler') && extraConfigData['hasCustomEventHandler']) {
            eventHandlerName = extraConfigData['customEventHandler'];
        }
        if (extraConfigData.isExternal) {
            extraConfigData.handler = handler.event_handler;
            if (this.payLoad && this.payLoad.fileData) {
                extraConfigData.attachmentId = this.payLoad.fileData.attachmentId;
            }
            this.sharedEventsServices.eventHandlerEmitter.emit(extraConfigData);
            return;
        }
        const response = await this.fileUploadService.genericFileService(this.event.event_name, this.payLoad, extraConfigData, handler.event_handler);
        //
        if (Number(response.statusCode) === 200) {
            // call on response or on success
            if (response.emit) {
                const apiKeyData = this.apiDataService.getApiDataByHandler(eventHandlerName);
                this.sharedEventsServices.emitApiSuccessResponse.emit(apiKeyData.value);
            }
            const successCallback = this.processCallbackBlocks({ body: response.data, status: response.statusCode }, success);
            if (successCallback && success) {
                this.getOnSuccess(successCallback);
            }
        }
        else {
            // call on exception or on failure
            if (response.emit) {
                this.sharedEventsServices.emitApiErrorResponse.emit(response.data);
            }
            const failureCallback = this.processCallbackBlocks({ body: response.data, status: response.statusCode }, failure);
            if (failureCallback && failure) {
                this.getOnFailure(failureCallback);
            }
        }
    }
    /**
     * Redirect to logout when the response is to logout the user
     */
    OIDCLogout() {
        let logout = '';
        if (window.sessionStorage.getItem('CEE_Login_Step')) {
            logout = window.sessionStorage.getItem('CEE_Login_Step');
        }
        else {
            console.error(`CEE_Login_Step Not Found in global application constants.
             So redirecting to default step of the default sequence `);
            logout = Object.values(this.wfeStepLoaderService.sequenceDataMap)[0];
        }
        window.sessionStorage.clear();
        this.appDataService.removeAllAppData();
        this.apiDataService.removeAllApiData();
        this.wfeStepLoaderService.stepDataStore = {};
        this.wfeStepLoaderService.blockDataStore = {};
        // localStorage.removeItem('stepDataCache');
        // localStorage.removeItem('lastBlockLoaded');
        // localStorage.removeItem('blockDataCache');
        this.redirectionUtil.redirectTo(logout);
    }
    saveData(key, url, apiValue) {
        const apiData = {
            id: key,
            apiUrl: url,
            apiKey: key,
            value: apiValue
        };
        // console.log(apiData)
        this.apiDataService.setApiData(Object.assign({}, apiData));
    }
    processCallbackBlock(res, failureBlocks) {
        let callbackBlock;
        if (failureBlocks) {
            for (const failure of failureBlocks) {
                // console.log('failure block', failure);
                const data = this.checkResponseValues(res, failure);
                if (data) {
                    callbackBlock = data;
                }
            }
        }
        // console.log(callbackBlock);
        return callbackBlock;
    }
    processCallbackBlocks2(res, failureBlocks) {
        let callbackBlock = [];
        if (failureBlocks) {
            for (const failure of failureBlocks) {
                // console.log('failure block', failure);
                const data = this.checkResponseValues(res, failure);
                if (data) {
                    callbackBlock.push(data);
                }
            }
        }
        // console.log(callbackBlock);
        return callbackBlock;
    }
    processCallbackBlocks(res, failureBlocks) {
        const callbackBlock = [];
        if (failureBlocks && failureBlocks.length > 0) {
            const actualStatus = res?.statusCode?.toString() || res?.status?.toString() || res?.header_status?.toString() || res?.return?.toString() || '200'; // Default to 200 if not defined
            for (const failure of failureBlocks) {
                const expectedStatus = failure?.api_response?.header_status?.toString();
                // ✅ Check header_status per block if defined
                if (expectedStatus && expectedStatus !== actualStatus) {
                    continue; // ❌ skip this block, status mismatch
                }
                // ✅ Now check response_values and conditions
                const data = this.checkResponseValues(res, failure);
                if (data) {
                    callbackBlock.push(data);
                }
            }
        }
        return callbackBlock;
    }
    checkResponseValues(res, callbackConfigBlock) {
        const { header_status, response_values } = callbackConfigBlock.api_response;
        let contains = true;
        let statusPass = true;
        const response = JSON.parse(JSON.stringify(res)); // to check the status code as res.body is getting assigned to res
        res = res && res.body ? res.body : res;
        // check if res has status then check status else check the response
        if (response.body && response.status && header_status && header_status != response.status) {
            statusPass = false;
            contains = null;
        }
        if (statusPass && response_values && Object.keys(response_values).length > 0) {
            contains = null;
            const referenceValues = Object.assign({}, response_values);
            Object.keys(referenceValues).forEach(key => {
                if (contains === false) {
                    return;
                }
                if (res[key] == referenceValues[key]) {
                    contains = true;
                }
                else if (res[key] !== null && (typeof (res[key]) === 'boolean' || typeof (res[key]) === 'object' || Array.isArray(res[key]))
                    && JSON.stringify(res[key]) === JSON.stringify(JSON.parse(referenceValues[key]))) {
                    contains = true;
                }
                else if (referenceValues[key].includes('|') && referenceValues[key].split('|').map(str => str.trim()).includes(res[key])) {
                    contains = true;
                }
                else if (referenceValues[key] === "*" && res[key]) {
                    contains = true;
                }
                else {
                    contains = false;
                    return;
                }
            });
        }
        // console.log(contains);
        if (contains) {
            return callbackConfigBlock;
        }
        else {
            return undefined;
        }
    }
    getOnFailure(failureBlock) {
        // console.log("failureBlock: ",failureBlock)
        if (failureBlock !== undefined) {
            // act on failure
            if (!isArray(failureBlock)) {
                failureBlock = [failureBlock];
            }
            failureBlock.forEach(event => {
                this.executeEventCallback(event);
            });
        }
        else {
            if (this.failure !== undefined) {
                for (const event of this.failure) {
                    this.executeEventCallback(event);
                }
            }
        }
    }
    /**
     *  get Response is executed every time there is an API Call
     *  be it ESB or Generic Mapper or Response Recieved for the Project End API Call
     */
    getOnResponse(responseBlock) {
        // console.log("responseBlock: ",responseBlock)
        if (responseBlock !== undefined) {
            // act on response
            if (!isArray(responseBlock)) {
                responseBlock = [responseBlock];
            }
            responseBlock.forEach(event => {
                this.executeEventCallback(event);
            });
        }
        else {
            if (this.response !== undefined) {
                for (const event of this.response) {
                    this.executeEventCallback(event);
                }
            }
        }
    }
    /**
     * Exception Block is only triggered when there is an exception in case of API calling
     * @param exceptionBlock
     */
    getOnException(exceptionBlock) {
        // console.log("exceptionBlock: ",exceptionBlock)
        if (exceptionBlock !== undefined) {
            // act on Excption
            if (!isArray(exceptionBlock)) {
                exceptionBlock = [exceptionBlock];
            }
            exceptionBlock.forEach(event => {
                this.executeEventCallback(event);
            });
        }
        else {
            if (this.response !== undefined) {
                for (const event of this.exception) {
                    this.executeEventCallback(event);
                }
            }
        }
    }
    getOnSuccess(successBlock) {
        // console.log("successBlock: ",successBlock)
        if (successBlock !== undefined) {
            // act on success
            if (!isArray(successBlock)) {
                successBlock = [successBlock];
            }
            successBlock.forEach(event => {
                this.executeEventCallback(event);
            });
        }
        else {
            if (this.success !== undefined) {
                // console.log(this.success);
                for (const event of this.success) {
                    this.executeEventCallback(event);
                }
            }
        }
    }
    executeEventCallback(event) {
        if (!event) {
            return false;
        }
        if (event.NavigatetoNextPage) {
            this.redirectTo(event.NavigatetoNextPage);
        }
        // console.log(event, 'called');
        if (event.next_event_id !== '') {
            // check buffer time
            const bufferTime = event.additional_parameters ? event.additional_parameters.find((i) => i.parameter_type === 'BufferTime') : null;
            setTimeout(() => {
                this.executeEvent(event.next_event_id);
            }, bufferTime && !isNaN(Number(bufferTime.value)) ? Number(bufferTime.value) : 0);
        }
        else {
            this.updateMortageSubjectPropertyData();
        }
        // execute handler
        // execute message code
        const inlineErrorField = event.additional_parameters ? event.additional_parameters.find((i) => i.parameter_type === 'InlineErrorField') : null;
        const message = this.wfeStepLoaderService.getMessage(event.message_code);
        if (message) {
            if (inlineErrorField) {
                document.getElementById(inlineErrorField.value).innerHTML = '<div class="alert alert-danger">' + message + '</div>';
            }
            else {
                const timeOut = Number(localStorage.getItem('messageTimeOut'));
                this.snackBar.dismiss();
                if (timeOut !== 0) {
                    this.snackBar.open(message, 'OK', {
                        verticalPosition: 'top',
                        panelClass: ['mat-toolbar', 'mat-primary'],
                        duration: Number(timeOut)
                    });
                }
                else {
                    this.snackBar.open(message, 'OK', {
                        verticalPosition: 'top',
                        panelClass: ['mat-toolbar', 'mat-primary']
                    });
                }
            }
        }
        else {
            if (inlineErrorField) {
                document.getElementById(inlineErrorField.value).innerHTML = '';
            }
        }
        // ==== deprecated feature
        // for (const additionalParam of event.additional_parameters) {
        //     if (additionalParam.value) {
        //         const object = {
        //             display_step: (additionalParam.value).split('|')[0]
        //         };
        //         // console.log(object);
        //         this.eventConfig(object, '');
        //     }
        // }
    }
    // special event handler to handle the session clear event
    sessionEventHandler(handler, parameterType) {
        if (handler.event_handler !== '') {
            const obj = {};
            let arr = [];
            for (const additionalParameter of this.additionalParameters) {
                if (additionalParameter.parameter_type === parameterType) {
                    arr = [...arr, ...additionalParameter.value.includes('|') ?
                            additionalParameter.value.split('|').map(str => str.trim()) :
                            new Array(additionalParameter.value)];
                }
            }
            obj[handler.event_handler] = arr;
            return obj;
        }
    }
    // special event handler to handle the Display Modal event
    displayModal(handler) {
        let modals = JSON.parse(localStorage.getItem('modals'));
        modals.forEach((modal, i) => {
            if (modal.modalId == handler.event_handler) {
                const dialogRef = this.dialog.open(ModalRendererComponent, { data: { modal: modal }, id: `eventModal-${handler.event_handler}`, panelClass: `eventModal-${handler.event_handler}` });
                dialogRef.afterClosed().subscribe(result => {
                    // console.log('The dialog ' + modal.modalId + ' was closed.');
                });
            }
        });
    }
    // Add class to the element with '.cdk-overlay-pane' class selector of a modal.
    toggleModalCssClass() {
        const modalWrapper = window.document.querySelector('.cdk-overlay-pane');
        if (modalWrapper) {
            modalWrapper.classList.toggle('modal-step-wrapper');
            modalWrapper.classList.toggle(this.modalGenericCssClass);
        }
    }
    // special event handler to handle the mandatory check event
    copyToClipboardEventHandler(handler) {
        if (handler.event_handler !== '') {
            for (const additionalParam of this.additionalParameters) {
                const object = {};
                object[handler.event_handler] = additionalParam.value;
                this.switchCopyToClipboardType(object);
            }
        }
    }
    // special event handler to highlight Map Marker
    highlightMapMarker(handler) {
        const additionalParams = this.getAdditionalParameter();
        if (additionalParams['MapMarkerKey']) {
            this.sharedEventsServices.mapMarkerEmitter.emit(additionalParams);
        }
    }
    // special event handler to Search Filter
    searchFilter(handler) {
        const additionalParams = this.getAdditionalParameter();
        const obj = {
            uniqueIds: [],
            filterCol: [],
            values: []
        };
        obj['uniqueIds'] = additionalParams['TargetFields'].split('|').map(str => str.trim());
        obj['values'] = this.appDataService.getFieldDataByFieldIds(additionalParams['ValueFields'], '|');
        obj['filterCol'] = this.appDataService.getFieldDataByFieldIds(additionalParams['FilterColumnKeys'], '|').filter(str => str).length ? this.appDataService.getFieldDataByFieldIds(additionalParams['FilterColumnKeys'], '|') :
            additionalParams['FilterColumnKeys'].split('|').map(str => str.trim());
        if (this.getAdditionalParameter()['TargetFields']) {
            this.sharedEventsServices.searchFilterEmitter.emit(obj);
        }
    }
    // special event handler to map Center
    mapCenter(handler) {
        const additionalParams = this.getAdditionalParameter();
        const obj = {
            uniqueIds: [],
            values: []
        };
        obj['uniqueIds'] = additionalParams['TargetFields'].split('|').map(str => str.trim());
        obj['values'] = this.appDataService.getFieldDataByFieldIds(additionalParams['ValueFields'], '|');
        if (additionalParams['TargetFields']) {
            this.sharedEventsServices.mapCenterEmitter.emit(obj);
        }
    }
    // special event handler to map Layer
    MapLayer(handler) {
        const additionalParams = this.getAdditionalParameter();
        const obj = {
            uniqueIds: [],
            values: []
        };
        obj['uniqueIds'] = additionalParams['TargetFields'].split('|').map(str => str.trim());
        obj['values'] = this.appDataService.getFieldDataByFieldIds(additionalParams['ValueFields'], '|');
        if (additionalParams['TargetFields']) {
            this.sharedEventsServices.mapLayerEmitter.emit(obj);
        }
    }
    // special event handler to Toggle Accordion
    toggleAccordion(handler) {
        this.sharedEventsServices.toggleAccordionEmitter.emit(this.getAdditionalParameter());
    }
    // execute OnLoad events of current step
    executeStepOnLoadEvents() {
        let oldUrl = this.router.url;
        this.router.navigateByUrl("/dummy-unknown-route", { skipLocationChange: true, state: { "executeOnLoadEvents": true } })
            .then(() => {
            this.router.navigate([oldUrl]);
        });
    }
    // customFunctions
    customFunctions(handler, parameter_type1, parameter_type2, primaryData) {
        const obj = {};
        let variables = [];
        let targets = [];
        for (const additionalParameter of this.additionalParameters) {
            if (additionalParameter.parameter_type === parameter_type1) {
                variables = [...variables, ...additionalParameter.value.includes('|') ?
                        additionalParameter.value.split('|').map(str => str.trim()) :
                        new Array(additionalParameter.value)];
            }
            if (additionalParameter.parameter_type === parameter_type2) {
                targets = [...targets, ...additionalParameter.value.includes('|') ?
                        additionalParameter.value.split('|').map(str => str.trim()) :
                        new Array(additionalParameter.value)];
            }
        }
        this.switchCustomHandlerFunction(handler, variables, targets, primaryData);
    }
    executeEvent(eventId) {
        // execute the event
        for (const singleEvent of this.event_list) {
            // console.log(this.event_list, singleEvent['event_id'], eventId);
            if (singleEvent['event_id'] === eventId) {
                this.switchEventDisplayType(singleEvent, this.event_list);
                break;
            }
        }
    }
    async switchClearenceType(clearObject, handlerData, primaryData = {}) {
        let rootData = this.wfeStepLoaderService.rootData;
        const keys = Object.keys(clearObject);
        let blocks;
        // let blockKeys = [];
        let uniqueIds = [];
        let apiKeys = [];
        let stepIds = [];
        let handlers = [];
        let stepValues;
        let fromStep = false;
        switch (keys[0]) {
            case 'workflow':
                for (const steps of clearObject[keys[0]]) {
                    stepIds = [...stepIds, ...this.wfeStepLoaderService.getListOfStepIdsByWorkflow(steps)];
                }
                stepValues = this.appDataService.getAllAppStoreData();
                for (const stepVal of stepValues) {
                    if (stepIds.includes(stepVal.stepId)) {
                        uniqueIds.push(stepVal.id);
                        apiKeys.push(stepVal.apiKey);
                        apiKeys = [...apiKeys, ...stepVal.requestApiKey];
                        apiKeys = [...apiKeys, ...stepVal.responseApiKey];
                        fromStep = true;
                        if (stepVal.linkedBlockId) {
                            this.repeatableBlockUtil.removeByBlockId(stepVal.linkedBlockId);
                        }
                    }
                }
                break;
            case 'handler':
                handlers = Object.assign(handlers, clearObject[keys[0]]);
                break;
            case 'block':
                for (const blockKey of clearObject[keys[0]]) {
                    if (rootData && rootData.blockFields && rootData.blockFields[blockKey]) {
                        uniqueIds = [...uniqueIds, ...rootData.blockFields[blockKey]];
                    }
                }
                break;
            case 'step':
                stepValues = this.appDataService.getAllAppStoreData();
                stepIds = clearObject[keys[0]];
                for (const stepVal of stepValues) {
                    if (stepIds.includes(stepVal.stepId)) {
                        uniqueIds.push(stepVal.id);
                        apiKeys.push(stepVal.apiKey);
                        apiKeys = [...apiKeys, ...stepVal.requestApiKey];
                        apiKeys = [...apiKeys, ...stepVal.responseApiKey];
                        fromStep = true;
                        if (stepVal.linkedBlockId) {
                            this.repeatableBlockUtil.removeByBlockId(stepVal.linkedBlockId);
                        }
                    }
                }
                break;
            case 'section':
                for (const blockKey of clearObject[keys[0]]) {
                    if (rootData && rootData.sectionFields && rootData.sectionFields[blockKey]) {
                        uniqueIds = [...uniqueIds, ...rootData.sectionFields[blockKey]];
                    }
                }
                break;
            case 'field':
                uniqueIds = [...uniqueIds, ...clearObject[keys[0]]];
                break;
            case 'repeatable_block':
                const allAPPData = this.appDataService.getAllAppStoreData();
                clearObject[keys[0]].forEach((repeatBlockId) => {
                    // const repeatBlock = allAPPData.find(i => i.id === repeatBlockId || i.linkedBlockId === repeatBlockId);
                    let foundByLinkedBlockId = false; // to check if the repeat block is found by linkedBlockId
                    const repeatBlock = allAPPData.find(i => {
                        if (i.id === repeatBlockId) {
                            foundByLinkedBlockId = false;
                            return true;
                        }
                        else if (i.linkedBlockId === repeatBlockId) {
                            foundByLinkedBlockId = true;
                            return true;
                        }
                        return false;
                    });
                    if (repeatBlock) {
                        if (repeatBlock.stepId == window['currentStepId'] && !foundByLinkedBlockId) {
                            // Handle the case where block is on current step and not found by linkedBlockId
                            this.sharedEventsServices.repeatableBlockSessionClearanceEmitter.emit(repeatBlockId);
                        }
                        else {
                            // Common code path for both cases where foundByLinkedBlockId is true
                            // or when repeatBlock.stepId != window['currentStepId'] and foundByLinkedBlockId is false
                            if (foundByLinkedBlockId) {
                                // Get all ids of the repeatable block when found by linkedBlockId
                                const filteredIds = allAPPData.reduce((acc, i) => {
                                    if (i.linkedBlockId === repeatBlockId) {
                                        acc.push(i.id);
                                    }
                                    return acc;
                                }, []);
                                uniqueIds = [...uniqueIds, ...filteredIds, repeatBlockId];
                                if (repeatBlockId) {
                                    localStorage.removeItem(repeatBlockId + '_count');
                                    localStorage.removeItem('RepeatableBlock_' + repeatBlockId);
                                }
                            }
                            else {
                                // Handle case when block is not on current step and not found by linkedBlockId
                                let linkBlockId = null;
                                uniqueIds = allAPPData
                                    .filter(i => {
                                    linkBlockId = i.linkedBlockId;
                                    return i.repeatedBlockFieldId === repeatBlockId;
                                })
                                    .map(i => i.id);
                                uniqueIds.push(repeatBlockId);
                                if (linkBlockId) {
                                    localStorage.removeItem(linkBlockId + '_count');
                                    localStorage.removeItem('RepeatableBlock_' + linkBlockId);
                                }
                            }
                        }
                    }
                });
                break;
            case 'associated_repeatable_block':
                this.sharedEventsServices.associatedRepeatableBlockSessionClearanceEmitter.emit(clearObject[keys[0]]);
                break;
            case 'api_key':
                apiKeys = [...apiKeys, ...clearObject[keys[0]]];
                break;
            case 'all':
                /*  window.sessionStorage.clear(); */
                this.dialog.closeAll();
                this.wfeStepLoaderService.stepDataStore = {};
                this.wfeStepLoaderService.blockDataStore = {};
                // localStorage.removeItem('stepDataCache');
                // localStorage.removeItem('lastBlockLoaded');
                // localStorage.removeItem('blockDataCache');
                this.appDataService.removeAllAppData();
                this.apiDataService.removeAllApiData();
                break;
        }
        const callBackData = handlerData.invoke_event_config.callback_config;
        if (handlers.length) {
            for (const handler of handlers) {
                this.apiDataService.deleteApiData(handler);
            }
        }
        const skipFieldsId = handlerData.invoke_event_config.additional_parameters.find(i => i.parameter_type === 'SkipEraseFields');
        let skipFieldsIds = [];
        if (skipFieldsId) {
            skipFieldsIds = skipFieldsId.value.split('|');
        }
        uniqueIds = uniqueIds.filter(e => !skipFieldsIds.includes(e));
        this.undoRedoUtil.deletById(uniqueIds);
        this.associatedMaputil.deleteByIds(uniqueIds);
        this.appDataService.deleteMultipleAppData(uniqueIds);
        // clear the language in the session storage
        if (uniqueIds.includes(window.localStorage.getItem('langField'))) {
            window.localStorage.removeItem('lang');
            this.wfeStepLoaderService.stepDataStore = {};
            this.wfeStepLoaderService.blockDataStore = {};
            // localStorage.removeItem('stepDataCache');
            // localStorage.removeItem('lastBlockLoaded');
            // localStorage.removeItem('blockDataCache');
        }
        const userInfoHandler = this.OIDCinfo && this.OIDCinfo['userInfoHandler'] ? this.OIDCinfo['userInfoHandler'] : "userInfo";
        apiKeys = apiKeys.filter(e => {
            if (userInfoHandler && this.commonUtil.getHandlerName(e) === userInfoHandler) {
                return false;
            }
            else {
                return true;
            }
        });
        this.apiDataService.deleteMultipleApiData(apiKeys, fromStep);
        this.triggerSuccessOrFailure(callBackData.OnSuccess);
    }
    // getter setter goes here
    get OIDCinfo() {
        return localStorage.getItem('oidc_config') ? localStorage.getItem('oidc_config') : false;
    }
    async switchClearAkitaStore(clearObject, handlerData, primaryData = {}) {
        let rootData = this.wfeStepLoaderService.rootData;
        const keys = Object.keys(clearObject);
        const emitterObj = {
            unique_ids: [],
            apiKeys: []
        };
        let isAssociated = false;
        let isRBKey = false;
        let stepList;
        let uniqueIdJSON;
        let blockKeys;
        let sectionKeys;
        const skipFieldsId = handlerData.invoke_event_config.additional_parameters.find(i => i.parameter_type === 'SkipEraseFields');
        let skipFieldsIds = [];
        if (skipFieldsId) {
            skipFieldsIds = skipFieldsId.value.split('|');
        }
        let key = keys[0];
        if (key.startsWith('rb_')) {
            isRBKey = true;
            key = key.replace('rb_', '');
        }
        switch (key) {
            case 'workflow':
                stepList = this.wfeStepLoaderService.getListOfStepIdsByWorkflow(clearObject[keys[0]]);
                uniqueIdJSON = await this.wfeStepLoaderService.loadWFEUniqueIdJSON().toPromise();
                emitterObj['unique_ids'] = this.getSessionKeyBySteps(stepList, uniqueIdJSON);
                break;
            case 'block':
                blockKeys = [];
                for (const blockKey of clearObject[keys[0]]) {
                    if (rootData && rootData.blockFields && rootData.blockFields[blockKey]) {
                        blockKeys = [...blockKeys, ...rootData.blockFields[blockKey]];
                    }
                }
                emitterObj['unique_ids'] = blockKeys;
                break;
            case 'step':
                const stepAppValues = this.appDataService.getAllAppStoreData();
                stepList = clearObject[keys[0]];
                const stepfieldIds = [];
                for (const stepVal of stepAppValues) {
                    if (stepList.includes(stepVal.stepId)) {
                        if (stepVal.repeatedBlockFieldId != "") {
                            const repeatFieldArr = stepVal.id.split('$');
                            if (repeatFieldArr.length > 0 && !skipFieldsIds.includes(repeatFieldArr[1])) {
                                stepfieldIds.push(stepVal.id);
                            }
                        }
                        else {
                            if (!skipFieldsIds.includes(stepVal.id)) {
                                stepfieldIds.push(stepVal.id);
                            }
                        }
                    }
                }
                emitterObj['unique_ids'] = [...new Set(stepfieldIds)];
                break;
            case 'section':
                sectionKeys = [];
                for (const blockKey of clearObject[keys[0]]) {
                    if (rootData && rootData.sectionFields && rootData.sectionFields[blockKey]) {
                        sectionKeys = [...sectionKeys, ...rootData.sectionFields[blockKey]];
                    }
                }
                sectionKeys = sectionKeys.filter(e => !skipFieldsIds.includes(e));
                emitterObj['unique_ids'] = sectionKeys;
                break;
            case 'repeatable_block':
                const stepValues = this.appDataService.getAllAppStoreData();
                const repeatedBlockIds = clearObject[keys[0]];
                const fieldIds = [];
                for (const stepVal of stepValues) {
                    if (repeatedBlockIds.includes(stepVal.repeatedBlockFieldId)) {
                        const repeatFieldArr = stepVal.id.split('$');
                        if (!skipFieldsIds.includes(repeatFieldArr[1])) {
                            fieldIds.push(stepVal.id);
                        }
                    }
                }
                emitterObj['unique_ids'] = [...new Set(fieldIds)];
                break;
            case 'associated_field':
            case 'field':
                if (keys[0] === 'associated_field') {
                    isAssociated = true;
                }
                emitterObj['unique_ids'] = clearObject[keys[0]];
                break;
            case 'api_key':
                emitterObj['apiKeys'] = clearObject[keys[0]];
                emitterObj['skipFieldsIds'] = skipFieldsIds;
                break;
        }
        // console.log(emitterObj);
        if (isAssociated) {
            emitterObj['isAssociated'] = true;
        }
        const callBackData = handlerData.invoke_event_config.callback_config;
        if (emitterObj.unique_ids.length > 0) {
            // for repeatable field
            if (isRBKey) {
                let unique_id = primaryData?.value?.unique_id;
                if (unique_id) {
                    let words = unique_id.split('$');
                    if (words.length === 3) {
                        emitterObj.unique_ids.forEach((ele, index, arr) => {
                            arr[index] = `${words[0]}$${ele}$${words[2]}`;
                        });
                    }
                    else if (words.length === 4) {
                        emitterObj.unique_ids.forEach((ele, index, arr) => {
                            arr[index] = `${words[0]}$${ele}$${words[2]}$${words[3]}`;
                        });
                    }
                }
            }
            this.appDataService.clearDataUsingUniqueIds(emitterObj.unique_ids, (message) => {
                setTimeout(() => {
                    this.sharedEventsServices.emitForEmptySession.emit(emitterObj);
                    if (message) {
                        if (callBackData && callBackData.OnSuccess) {
                            this.triggerSuccessOrFailure(callBackData.OnSuccess);
                        }
                    }
                    else {
                        // console.log('Error Occurred while clearing session data', message);
                    }
                }, 0);
            });
        }
        else if (emitterObj.apiKeys.length > 0) {
            this.appDataService.clearDataUsingApiKeys(emitterObj.apiKeys, (message) => {
                this.sharedEventsServices.emitForEmptySession.emit(emitterObj);
                if (message) {
                    if (callBackData && callBackData.OnSuccess) {
                        this.triggerSuccessOrFailure(callBackData.OnSuccess);
                    }
                }
                else {
                    // console.log('Error Occurred while clearing session data', message);
                }
            });
        }
        else {
            this.sharedEventsServices.emitForEmptySession.emit(emitterObj);
            if (callBackData && callBackData.onFailure) {
                this.triggerSuccessOrFailure(callBackData.onFailure, false);
            }
        }
    }
    /**
     * function triggers success or failure based on the type
     * true for success and false for failure
     */
    triggerSuccessOrFailure(callbacks, type = true) {
        if (callbacks) {
            callbacks.forEach(callback => {
                if (type) {
                    this.getOnSuccess(callback);
                }
                else {
                    this.getOnFailure(callback);
                }
            });
        }
        else {
            return;
        }
    }
    async switchMandatoryCheckType(clearObject, handlerData) {
        const keys = Object.keys(clearObject);
        const additionalParam = this.getAdditionalParameter();
        const fieldData = [];
        let stepIds = [];
        let blockKeys = [];
        const emptyFieldIds = [];
        let blocks;
        const appStoreData = this.appDataService.getAllAppStoreData();
        const mandatoryArr = []; // only done because dcss requires to check all the mandatory keys and show labels as a modal
        switch (keys[0]) {
            case 'workflow':
                for (const steps of clearObject[keys[0]]) {
                    stepIds = [...stepIds, ...this.wfeStepLoaderService.getListOfStepIdsByWorkflow(steps)];
                }
                for (const data of appStoreData) {
                    if (stepIds.includes(data.stepId)) {
                        emptyFieldIds.push(data.id);
                        if (data.mandatory && this.emptyUtil.isEmpty(data.value)) {
                            mandatoryArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(data.fieldLabel);
                            }
                        }
                        else {
                            mandatoryArr.push(true);
                        }
                    }
                }
                break;
            case 'block':
                blocks = await this.wfeStepLoaderService.loadWFEUniqueIdJSON().toPromise();
                blockKeys = [];
                for (const blockKey of clearObject[keys[0]]) {
                    blockKeys = [...blockKeys, ...this.getSessionKeyByBlock(blockKey, blocks)];
                }
                appStoreData.forEach(element => {
                    if (blockKeys.includes(element.id)) {
                        emptyFieldIds.push(element.id);
                        if (element.mandatory && this.emptyUtil.isEmpty(element.value)) {
                            mandatoryArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(element.fieldLabel);
                            }
                        }
                        else {
                            mandatoryArr.push(true);
                        }
                    }
                });
                break;
            case 'step':
                stepIds = clearObject[keys[0]];
                for (const data of appStoreData) {
                    if (stepIds.includes(data.stepId)) {
                        emptyFieldIds.push(data.id);
                        if (data.mandatory && this.emptyUtil.isEmpty(data.value)) {
                            mandatoryArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(data.fieldLabel);
                            }
                        }
                        else {
                            mandatoryArr.push(true);
                        }
                    }
                }
                break;
            case 'section':
                blocks = await this.wfeStepLoaderService.loadWFEUniqueIdJSON().toPromise();
                blockKeys = [];
                for (const blockKey of clearObject[keys[0]]) {
                    blockKeys = [...blockKeys, ...this.getSessionKeyBySection(blockKey, blocks)];
                }
                appStoreData.forEach(element => {
                    if (blockKeys.includes(element.id)) {
                        emptyFieldIds.push(element.id);
                        if (element.mandatory && this.emptyUtil.isEmpty(element.value)) {
                            mandatoryArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(element.fieldLabel);
                            }
                        }
                        else {
                            mandatoryArr.push(true);
                        }
                    }
                });
                break;
            case 'repeatable_block':
                appStoreData.forEach(element => {
                    if (clearObject[keys[0]].includes(element.repeatedBlockFieldId)) {
                        emptyFieldIds.push(element.id);
                        if (element.mandatory && this.emptyUtil.isEmpty(element.value)) {
                            mandatoryArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(element.fieldLabel);
                            }
                        }
                        else {
                            mandatoryArr.push(true);
                        }
                    }
                });
                break;
            case 'field':
                appStoreData.forEach(element => {
                    if (clearObject[keys[0]].includes(element.id)) {
                        emptyFieldIds.push(element.id);
                        if (element.mandatory && this.emptyUtil.isEmpty(element.value)) {
                            mandatoryArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(element.fieldLabel);
                            }
                        }
                        else {
                            mandatoryArr.push(true);
                        }
                    }
                });
                break;
            case 'api_key':
                appStoreData.forEach(element => {
                    if (clearObject[keys[0]].includes(element.apiKey)) {
                        emptyFieldIds.push(element.id);
                        if (element.mandatory && this.emptyUtil.isEmpty(element.value)) {
                            mandatoryArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(element.fieldLabel);
                            }
                        }
                        else {
                            mandatoryArr.push(true);
                        }
                    }
                });
                break;
        }
        // console.log(emptyFieldIds, mandatoryArr);
        if (additionalParam.MandatoryCheck?.toLowerCase() === 'true') {
            this.sharedEventsServices.showMandatoryErrorMsg.emit({ fields: emptyFieldIds, type: 'event' });
        }
        const callBackData = handlerData.invoke_event_config.callback_config;
        if (mandatoryArr.includes(false)) {
            if (additionalParam['DisplayAsModal']) {
                const modalData = {
                    showMandateFields: true,
                    heading: additionalParam['DisplayAsModal'],
                    fields: fieldData
                };
                this.openAlert(modalData);
            }
            else {
                if (callBackData && callBackData.onFailure) {
                    this.triggerSuccessOrFailure(callBackData.onFailure, false);
                }
            }
        }
        else {
            if (callBackData && callBackData.OnSuccess) {
                this.triggerSuccessOrFailure(callBackData.OnSuccess);
            }
        }
    }
    async switchValidationCheckType(clearObject, handlerData) {
        const keys = Object.keys(clearObject);
        const additionalParam = this.getAdditionalParameter();
        const fieldData = [];
        let stepIds = [];
        let blockKeys = [];
        const invalidFieldIds = [];
        let blocks;
        const appStoreData = this.appDataService.getAllAppStoreData();
        const validArr = []; // only done because dcss requires to check all the valid keys and show labels as a modal
        switch (keys[0]) {
            case 'workflow':
                for (const steps of clearObject[keys[0]]) {
                    stepIds = [...stepIds, ...this.wfeStepLoaderService.getListOfStepIdsByWorkflow(steps)];
                }
                for (const data of appStoreData) {
                    if (stepIds.includes(data.stepId)) {
                        invalidFieldIds.push(data.id);
                        if (data.mandatory && (this.emptyUtil.isEmpty(data.value) || !data.isValid)) {
                            validArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(data.fieldLabel);
                            }
                        }
                        else {
                            validArr.push(true);
                        }
                    }
                }
                break;
            case 'block':
                blocks = await this.wfeStepLoaderService.loadWFEUniqueIdJSON().toPromise();
                blockKeys = [];
                for (const blockKey of clearObject[keys[0]]) {
                    blockKeys = [...blockKeys, ...this.getSessionKeyByBlock(blockKey, blocks)];
                }
                appStoreData.forEach(element => {
                    if (blockKeys.includes(element.id)) {
                        invalidFieldIds.push(element.id);
                        if (element.mandatory && (this.emptyUtil.isEmpty(element.value) || !element.isValid)) {
                            validArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(element.fieldLabel);
                            }
                        }
                        else {
                            validArr.push(true);
                        }
                    }
                });
                break;
            case 'step':
                stepIds = clearObject[keys[0]];
                for (const data of appStoreData) {
                    if (stepIds.includes(data.stepId)) {
                        invalidFieldIds.push(data.id);
                        if (data.mandatory && (this.emptyUtil.isEmpty(data.value) || !data.isValid)) {
                            validArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(data.fieldLabel);
                            }
                        }
                        else {
                            validArr.push(true);
                        }
                    }
                }
                break;
            case 'section':
                blocks = await this.wfeStepLoaderService.loadWFEUniqueIdJSON().toPromise();
                blockKeys = [];
                for (const blockKey of clearObject[keys[0]]) {
                    blockKeys = [...blockKeys, ...this.getSessionKeyBySection(blockKey, blocks)];
                }
                appStoreData.forEach(element => {
                    if (blockKeys.includes(element.id)) {
                        invalidFieldIds.push(element.id);
                        if (element.mandatory && (this.emptyUtil.isEmpty(element.value) || !element.isValid)) {
                            validArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(element.fieldLabel);
                            }
                        }
                        else {
                            validArr.push(true);
                        }
                    }
                });
                break;
            case 'repeatable_block':
                appStoreData.forEach(element => {
                    if (clearObject[keys[0]].includes(element.repeatedBlockFieldId)) {
                        invalidFieldIds.push(element.id);
                        if (element.mandatory && (this.emptyUtil.isEmpty(element.value) || !element.isValid)) {
                            validArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(element.fieldLabel);
                            }
                        }
                        else {
                            validArr.push(true);
                        }
                    }
                });
                break;
            case 'field':
                appStoreData.forEach(element => {
                    if (clearObject[keys[0]].includes(element.id)) {
                        invalidFieldIds.push(element.id);
                        if (element.mandatory && (this.emptyUtil.isEmpty(element.value) || !element.isValid)) {
                            validArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(element.fieldLabel);
                            }
                        }
                        else {
                            validArr.push(true);
                        }
                    }
                });
                break;
            case 'api_key':
                appStoreData.forEach(element => {
                    if (clearObject[keys[0]].includes(element.apiKey)) {
                        invalidFieldIds.push(element.id);
                        if (element.mandatory && (this.emptyUtil.isEmpty(element.value) || !element.isValid)) {
                            validArr.push(false);
                            if (additionalParam['ShowFieldLabels']) {
                                fieldData.push(element.fieldLabel);
                            }
                        }
                        else {
                            validArr.push(true);
                        }
                    }
                });
                break;
        }
        // console.log(invalidFieldIds, validArr);
        if (additionalParam.ValidationCheck.toLowerCase() === 'true') {
            this.sharedEventsServices.showValidationErrorMsg.emit({ fields: invalidFieldIds, type: 'event' });
        }
        const callBackData = handlerData.invoke_event_config.callback_config;
        if (validArr.includes(false)) {
            if (additionalParam['DisplayAsModal']) {
                const modalData = {
                    showMandateFields: true,
                    heading: additionalParam['DisplayAsModal'],
                    fields: fieldData
                };
                this.openAlert(modalData);
            }
            else {
                if (callBackData && callBackData.onFailure) {
                    this.triggerSuccessOrFailure(callBackData.onFailure, false);
                }
            }
        }
        else {
            if (callBackData && callBackData.OnSuccess) {
                this.triggerSuccessOrFailure(callBackData.OnSuccess);
            }
        }
    }
    switchCustomHandlerFunction(handler, variables, targets, primaryData) {
        const variableValues = {};
        const targetValues = [];
        // tslint:disable-next-line: no-unused-expression
        variables.length && (variables.forEach((element) => {
            this.appDataService.getIndividualAppData(element).subscribe(res => {
                if (res[0]) {
                    variableValues[res[0].id] = res[0].value;
                }
            });
        }));
        // tslint:disable-next-line: no-unused-expression
        targets.length && (targets.forEach((element) => {
            targetValues.push(element);
        }));
        const customEventVariableEmitterObject = {
            handler: handler.event_handler,
            variables: variableValues,
            targets: targetValues,
            primaryData: primaryData
        };
        const callBackData = handler.invoke_event_config?.callback_config;
        if (typeof this.inBuildFunctionsUtil[customEventVariableEmitterObject.handler] === "function") {
            const r = this.inBuildFunctionsUtil[customEventVariableEmitterObject.handler](customEventVariableEmitterObject);
            if (typeof r === 'object' && typeof r['then'] === "function") {
                r.then(ret => {
                    if (!ret) {
                        if (callBackData && callBackData.onFailure) {
                            this.triggerSuccessOrFailure(callBackData.onFailure);
                        }
                    }
                    else {
                        if (callBackData && callBackData.OnSuccess) {
                            this.triggerSuccessOrFailure(callBackData.OnSuccess);
                        }
                    }
                });
            }
            else if (typeof r === 'boolean') {
                if (!r) {
                    if (callBackData && (callBackData.onFailure)) {
                        this.triggerSuccessOrFailure(callBackData.onFailure);
                    }
                    else if (callBackData && callBackData.OnFailure) {
                        this.triggerSuccessOrFailure(callBackData.OnFailure);
                    }
                }
                else {
                    if (callBackData && callBackData.OnSuccess) {
                        this.triggerSuccessOrFailure(callBackData.OnSuccess);
                    }
                    else if (callBackData && callBackData.onSuccess) {
                        this.triggerSuccessOrFailure(callBackData.onSuccess);
                    }
                }
            }
        }
        else {
            this.sharedEventsServices.customEventVariableEmitter.emit(customEventVariableEmitterObject);
            if (callBackData && callBackData.OnSuccess) {
                this.triggerSuccessOrFailure(callBackData.OnSuccess);
            }
        }
    }
    switchCopyToClipboardType(object) {
        const keys = Object.keys(object);
        let copied_fields = [];
        switch (keys[0]) {
            case 'Fieldvalue':
                object[keys[0]].split('|').forEach(element => {
                    this.appDataService.getIndividualAppData(element.trim()).subscribe(res => {
                        copied_fields.push(res[0].value);
                    });
                });
                this.copyToClipboard(copied_fields.join(','));
                break;
            case 'URL':
                this.copyToClipboard(document.URL);
                break;
        }
    }
    copyToClipboard(val) {
        const selBox = document.createElement('textarea');
        selBox.style.position = 'fixed';
        selBox.style.left = '0';
        selBox.style.top = '0';
        selBox.style.opacity = '0';
        selBox.value = val;
        document.body.appendChild(selBox);
        selBox.focus();
        selBox.select();
        document.execCommand('copy');
        document.body.removeChild(selBox);
    }
    getSessionKeyByBlock(blockId, uniqueIdJSON) {
        let sessionKeys = [];
        const uniqueIds = [];
        for (const singleObject of uniqueIdJSON) {
            for (const blocksData of singleObject.data.blocks) {
                for (const singleBlock in blocksData) {
                    if (singleBlock === blockId) {
                        sessionKeys = [...sessionKeys, ...blocksData[singleBlock]];
                    }
                }
            }
        }
        for (const key of sessionKeys) {
            uniqueIds.push(this.sessionKeyUtil.getFieldNameFromSessionKey(key));
        }
        return [...new Set(uniqueIds)];
    }
    getSessionKeyBySteps(stepIds, uniqueIdJSON) {
        const uniqueIds = [];
        let sessionKeys = [];
        for (const obj of uniqueIdJSON) {
            if (stepIds.includes(obj.stepId)) {
                for (const sectionData of obj.data.sections) {
                    // tslint:disable-next-line: forin
                    for (const singleSection in sectionData) {
                        sessionKeys = [...sessionKeys, ...sectionData[singleSection]];
                    }
                }
                for (const blocksData of obj.data.blocks) {
                    // tslint:disable-next-line: forin
                    for (const singleBlock in blocksData) {
                        sessionKeys = [...sessionKeys, ...blocksData[singleBlock]];
                    }
                }
            }
        }
        for (const key of sessionKeys) {
            uniqueIds.push(this.sessionKeyUtil.getFieldNameFromSessionKey(key));
        }
        return [...new Set(uniqueIds)];
    }
    getSessionKeyBySection(sectionId, uniqueIdJSON) {
        const uniqueIds = [];
        let sessionKeys = [];
        for (const singleObject of uniqueIdJSON) {
            for (const sectionData of singleObject.data.sections) {
                for (const singleSection in sectionData) {
                    if (singleSection === sectionId) {
                        sessionKeys = [...sessionKeys, ...sectionData[singleSection]];
                    }
                }
            }
        }
        for (const key of sessionKeys) {
            uniqueIds.push(this.sessionKeyUtil.getFieldNameFromSessionKey(key));
        }
        return [...new Set(uniqueIds)];
    }
    // this is the additional parameter object that is in the root
    // of the invoke_event_config
    getAdditionalParameter() {
        const additionalParam = {};
        for (const param of this.additionalParameters) {
            additionalParam[param.parameter_type] = param.value;
        }
        return additionalParam;
    }
    // function that sets cell data of list or table
    setCellData(primaryData, handler) {
        this.cellAppData.stepId = primaryData.stepId;
        if (primaryData.type === 'table') {
            for (const field of primaryData.value.fields) {
                if (primaryData.value.data[field.unique_id] !== undefined && field.field_type !== "Menu") {
                    const obj = {};
                    obj.id = field.unique_id;
                    obj.value = primaryData.value.data[field.unique_id] || '';
                    // not using concatenation because child field within list does not support concatenation
                    obj.responseApiKey =
                        this.apiKeyUtil.getMultipleApiKeys(field.response_api_key);
                    obj.requestApiKey = this.apiKeyUtil.getMultipleApiKeys(field.request_api_key);
                    obj.apiKey = field.api_key;
                    this.appDataService.setAppData({ ...this.cellAppData, ...obj });
                }
            }
        }
        else {
            this.getListCellData(primaryData.value.fields);
        }
        if (handler.invoke_event_config) {
            const callBackData = handler.invoke_event_config.callback_config;
            if (callBackData && callBackData.OnSuccess) {
                this.triggerSuccessOrFailure(callBackData.OnSuccess);
            }
        }
    }
    // recursive function to find all the keys which has request response api key
    // and store the data in the akita store app data
    getListCellData(data) {
        for (const field of data) {
            if (field.child_fields && field.child_fields.length) {
                this.getListCellData(field.child_fields);
            }
            else {
                if (localStorage.getItem('singleApiKey') === 'true' ? field.api_key : (field.request_api_key || field.response_api_key) && field.field_type !== "Menu") {
                    const object = {};
                    object.id = field.unique_id;
                    object.value = field.rowData.value || '';
                    // not using concatenation because child field within list does not support concatenation
                    object.responseApiKey =
                        this.apiKeyUtil.getMultipleApiKeys(field.response_api_key);
                    object.requestApiKey = this.apiKeyUtil.getMultipleApiKeys(field.request_api_key);
                    object.apiKey = field.api_key;
                    this.appDataService.setAppData({ ...this.cellAppData, ...object });
                }
            }
        }
    }
    get hasUnsavedData() {
        return localStorage.getItem('has_unsaved_data') === 'true' ? true : false;
    }
    get modalOnPageLeave() {
        return localStorage.getItem('modal_on_page_leave') ? localStorage.getItem('modal_on_page_leave') : false;
    }
    get pageLeaveStepId() {
        return localStorage.getItem('page_leave_step_id') ? localStorage.getItem('page_leave_step_id') : false;
    }
    get pageLeaveHref() {
        return localStorage.getItem('page_leave_href') ? localStorage.getItem('page_leave_href') : false;
    }
    get pageLeaveHrefTarget() {
        return localStorage.getItem('page_leave_href_target') ? localStorage.getItem('page_leave_href_target') : '';
    }
    get getOnPageLeaveCheckType() {
        return localStorage.getItem('OnPageLeaveCheckType') ? localStorage.getItem('OnPageLeaveCheckType') : false;
    }
    redirectTo(stepId, ModalOnPageLeave = null, target = null) {
        if ((this.modalOnPageLeave || ModalOnPageLeave) && !(this.getOnPageLeaveCheckType === 'saved' && !this.hasUnsavedData)) {
            this.pageLeaveHref && localStorage.removeItem('page_leave_href');
            localStorage.setItem('page_leave_step_id', stepId);
            this.wfeStepLoaderService.loadStepById(ModalOnPageLeave ? ModalOnPageLeave : this.modalOnPageLeave).subscribe((data) => {
                if (data !== undefined && data.display_as_modal === 1) {
                    this.openDialog(data);
                }
            });
        }
        else {
            this.redirectionUtil.redirectTo(stepId, target);
        }
    }
    redirectToHref(link, ModalOnPageLeave = null, target = null) {
        const globalParameters = this.wfeStepLoaderService.additionalParameters;
        if (this.hasUnsavedData && (this.modalOnPageLeave || ModalOnPageLeave)) {
            this.pageLeaveStepId && localStorage.removeItem('page_leave_step_id');
            localStorage.setItem('page_leave_href', link);
            if (target) {
                localStorage.setItem('page_leave_href_target', target);
            }
            this.wfeStepLoaderService.loadStepById(ModalOnPageLeave ? ModalOnPageLeave : this.modalOnPageLeave).subscribe((data) => {
                if (data !== undefined && data.display_as_modal === 1) {
                    this.openDialog(data);
                }
            });
        }
        else if (globalParameters['externalSitePrompt'] && !this.pageLeaveHref) {
            this.pageLeaveStepId && localStorage.removeItem('page_leave_step_id');
            localStorage.setItem('page_leave_href', link);
            if (target) {
                localStorage.setItem('page_leave_href_target', target);
            }
            this.displayModal({ event_handler: globalParameters['externalSitePrompt'] });
        }
        else {
            if (target) {
                window.open(link, target);
            }
            else {
                window.location.href = link;
            }
        }
    }
    /**
     * function that emits the value of the field state event with the fields and the value
     * @param obj the type of the event can be block, section, field and the field ids
     * @param type the type of the state to be change like visibility, mandatory, editable
     */
    async fieldStateChangeEvent(obj, type, readDataFromModal) {
        const stateChangedObj = {
            type,
            ids: [],
            value: this.getAdditionalParameter()['FieldStateValue'].split('|').map(str => Number(str.trim()))
        };
        let uniqueIdJSON;
        switch (Object.keys(obj)[0]) {
            case 'field':
                stateChangedObj.ids = obj['field'];
                break;
            case 'step':
                const stepIds = obj['step'];
                const appStoreData = this.appDataService.getAllAppStoreData();
                for (const data of appStoreData) {
                    if (stepIds.includes(data.stepId)) {
                        stateChangedObj.ids.push(String(data.id));
                    }
                }
                break;
            case 'section':
                uniqueIdJSON = await this.wfeStepLoaderService.loadWFEUniqueIdJSON().toPromise();
                let stepId = readDataFromModal ? window['currentModalId'] : window['currentStepId'];
                uniqueIdJSON = uniqueIdJSON.filter(i => i.stepId === stepId);
                for (const sectionKey of obj['section']) {
                    stateChangedObj.ids = [...stateChangedObj.ids, ...this.getSessionKeyBySection(sectionKey, uniqueIdJSON)];
                }
                break;
            case 'block':
                uniqueIdJSON = await this.wfeStepLoaderService.loadWFEUniqueIdJSON().toPromise();
                for (const blockKey of obj['block']) {
                    stateChangedObj.ids = [...stateChangedObj.ids, ...this.getSessionKeyByBlock(blockKey, uniqueIdJSON)];
                }
                break;
        }
        // console.log(stateChangedObj);
        this.sharedEventsServices.emitFieldStateChangeEventEmitter.emit(stateChangedObj);
    }
    // set field values
    setValuesOnEvent(handler, primaryData = {}) {
        const additionalParams = this.getAdditionalParameter();
        const obj = {
            uniqueIds: [],
            apiKeys: [],
            values: [],
            triggerUpdate: additionalParams.TriggerOnUpdateEvent && additionalParams.TriggerOnUpdateEvent.toLowerCase() === 'false' ? true : false
        };
        if (!additionalParams['TargetFields'] || !additionalParams['ValueFields']) {
            return;
        }
        switch (handler.event_handler) {
            case 'single_static_value':
            case 'multi_static_value':
                obj['uniqueIds'] = additionalParams['TargetFields'].split('|').map(str => str.trim());
                obj['values'] = additionalParams['ValueFields'].split('|').map(str => str.trim());
                //arithmetic operations
                for (let index = 0; index < obj['values'].length; index++) {
                    let v = obj['values'][index];
                    if (v.includes('%value%') && obj['uniqueIds'][index]) {
                        const tVal = this.appDataService.getFieldDataByFieldId(obj['uniqueIds'][index]);
                        v = v.replace(/%value%/, tVal);
                    }
                    if (v.includes('(calc)')) {
                        try {
                            v = eval(v.split('(calc)')[1]);
                        }
                        catch (error) {
                            console.error(error);
                        }
                    }
                    obj['values'][index] = v;
                }
                break;
            case 'single_field_value':
            case 'multi_field_value':
                let uniqueIds = additionalParams['TargetFields'].split('|').map(str => str.trim());
                let valueFields = additionalParams['ValueFields'];
                if (additionalParams['TargetFields'].includes('(dateCalc)')) {
                    obj['uniqueIds'] = [];
                    obj['values'] = [];
                    let values = additionalParams['ValueFields'].split('|').map(str => str.trim());
                    for (let index = 0; index < values.length; index++) {
                        let tVal = uniqueIds[index];
                        if (tVal.includes('(dateCalc)')) {
                            try {
                                tVal = tVal.split('(dateCalc)')[1];
                                var arrStr = tVal.split(/[%%]/);
                                obj['uniqueIds'].push(arrStr[1]);
                                const targetValue = new Date(this.appDataService.getFieldDataByFieldId(values[index]));
                                var calString = arrStr[2].trim();
                                if (calString && calString.length > 0) {
                                    let operator = calString[0];
                                    let unit = calString[calString.length - 1];
                                    let amount = Number(calString.replace(unit, '').replace(operator, '').trim());
                                    switch (unit) {
                                        case 'd':
                                            switch (operator) {
                                                case '+':
                                                    targetValue.setDate(targetValue.getDate() + amount);
                                                    break;
                                                case '-':
                                                    targetValue.setDate(targetValue.getDate() - amount);
                                                    break;
                                            }
                                            break;
                                        case 'm':
                                            switch (operator) {
                                                case '+':
                                                    targetValue.setMonth(targetValue.getMonth() + amount);
                                                    break;
                                                case '-':
                                                    targetValue.setMonth(targetValue.getMonth() - amount);
                                                    break;
                                            }
                                            break;
                                        case 'y':
                                            switch (operator) {
                                                case '+':
                                                    targetValue.setFullYear(targetValue.getFullYear() + amount);
                                                    break;
                                                case '-':
                                                    targetValue.setFullYear(targetValue.getFullYear() - amount);
                                                    break;
                                            }
                                            break;
                                    }
                                }
                                let finalDate = ((targetValue.getMonth() > 8) ? (targetValue.getMonth() + 1) : ('0' + (targetValue.getMonth() + 1))) + '/' + ((targetValue.getDate() > 9) ? targetValue.getDate() : ('0' + targetValue.getDate())) + '/' + targetValue.getFullYear();
                                obj['values'].push(finalDate);
                            }
                            catch (error) {
                                console.error(error);
                            }
                        }
                    }
                }
                else {
                    if (primaryData && primaryData.value && primaryData.value.isRepeatable && primaryData.stepId) {
                        valueFields = valueFields.split('|')
                            .map((targetField) => {
                            if (targetField.startsWith(primaryData.stepId))
                                return targetField;
                            ;
                            let targetId = primaryData.stepId + '$' + targetField;
                            if (primaryData.value.parentPosition != null && primaryData.value.parentPosition != undefined) {
                                targetId += '$' + primaryData.value.parentPosition;
                            }
                            if (primaryData.value.position != null || primaryData.value.position != undefined) {
                                targetId += '$' + primaryData.value.position;
                            }
                            return targetId;
                        }).join('|');
                    }
                    obj['uniqueIds'] = additionalParams['TargetFields'].split('|').map(str => str.trim());
                    obj['values'] = this.appDataService.getFieldDataByFieldIds(valueFields, '|');
                }
                // console.log('obj', obj);
                break;
            case 'single_api_key_value':
            case 'multi_api_key_value':
                obj['apiKeys'] = additionalParams['TargetFields'].split('|').map(str => str.trim());
                obj['values'] = this.apiDataService.getApiKeyValueByKeyString(additionalParams['ValueFields'], '|');
                break;
            case 'single_field_api_key_value':
            case 'multi_field_api_key_value':
                obj['uniqueIds'] = additionalParams['TargetFields'].split('|').map(str => str.trim());
                if (this.isCheckboxValueAsArray()) {
                    obj['values'] = this.apiDataService.getAPIKeyValueByArray(additionalParams['ValueFields'], '|');
                }
                else {
                    obj['values'] = this.apiDataService.getApiKeyValueByKeyString(additionalParams['ValueFields'], '|');
                }
                break;
            case 'single_api_key_field_value':
            case 'multi_api_key_field_value':
                obj['apiKeys'] = additionalParams['TargetFields'].split('|').map(str => str.trim());
                obj['values'] = this.appDataService.getFieldDataByFieldIds(additionalParams['ValueFields'], '|');
                break;
            default:
                break;
        }
        let isWaitForDataSet = additionalParams['CEE_event_wait_for_data_set']?.toLowerCase() == 'true';
        if (isWaitForDataSet) {
            const subscription = this.sharedEventsServices.settingFieldValueEventFinished.subscribe(() => {
                subscription.unsubscribe();
                this.eventSetValueFinished(handler);
            });
            this.sharedEventsServices.emitSetFieldValueOnEvent.emit(obj);
        }
        else {
            this.sharedEventsServices.emitSetFieldValueOnEvent.emit(obj);
            setTimeout(() => {
                this.eventSetValueFinished(handler);
            }, 0);
        }
    }
    eventSetValueFinished(handler) {
        const callBackData = handler.invoke_event_config.callback_config;
        if (callBackData && callBackData.OnSuccess) {
            this.triggerSuccessOrFailure(callBackData.OnSuccess);
        }
    }
    isCheckboxValueAsArray() {
        const isCheckArray = this.additionalParameters ? this.additionalParameters.find(i => i.parameter_type == 'CheckAllCheckboxGroup') : [];
        if (isCheckArray && isCheckArray['value'] == 'true') {
            return true;
        }
        return false;
    }
    // set geo location
    getLocation(globalParameters, handler) {
        // if there are global parameters CEE_DeviceLatitude or CEE_DeviceLongitude
        // then get the location information
        if (globalParameters.CEE_DeviceLatitude ||
            globalParameters.CEE_DeviceLongitude) {
            if ('geolocation' in navigator) {
                navigator.geolocation.getCurrentPosition((position) => {
                    this.saveGeoLocation(globalParameters, position.coords.latitude, position.coords.longitude);
                    const callBackData = handler.invoke_event_config.callback_config;
                    if (callBackData && callBackData.OnSuccess) {
                        this.triggerSuccessOrFailure(callBackData.OnSuccess);
                    }
                }, error => {
                    this.saveGeoLocation(globalParameters, '', '');
                    // Display error based on the error code.
                    const { code } = error;
                    switch (code) {
                        case 3:
                            console.error('Error occurred while getting device location: Handle timeout.');
                            break;
                        case 1:
                            console.error('Error occurred while getting device location: User denied the request.');
                            break;
                        case 2:
                            console.error('Error occurred while getting device location: Position not available.');
                            break;
                    }
                });
            }
            else {
                console.error('Geolocation is not supported by this browser.');
            }
        }
        if (globalParameters.CEE_DeviceInfo) {
            if (navigator.userAgent) {
                let deviceInfoBox = {
                    browserAgent: navigator.userAgent,
                    currentBrowser: this.detectBrowser(),
                    currentOs: this.detectOperatingSystem(),
                    currentOsVersion: this.detectOperatingSystemVersion(),
                    currentDevice: this.detectDeviceType(),
                    browserLanguage: navigator.language,
                    browserTimezone: Intl.DateTimeFormat().resolvedOptions().timeZone
                };
                this.saveDeviceInfo(globalParameters, deviceInfoBox);
                const callBackData = handler.invoke_event_config.callback_config;
                if (callBackData && callBackData.OnSuccess) {
                    this.triggerSuccessOrFailure(callBackData.OnSuccess);
                }
            }
            else {
                this.saveDeviceInfo(globalParameters, {});
            }
        }
    }
    detectBrowser() {
        const userAgent = navigator.userAgent;
        if (userAgent.includes("Firefox")) {
            return "Mozilla Firefox";
        }
        else if (userAgent.includes("Chrome")) {
            return "Google Chrome";
        }
        else if (userAgent.includes("Safari")) {
            return "Apple Safari";
        }
        else if (userAgent.includes("Edge")) {
            return "Microsoft Edge";
        }
        else if (userAgent.includes("Opera") || userAgent.includes("OPR")) {
            return "Opera";
        }
        else if (userAgent.includes("Trident") || userAgent.includes("MSIE")) {
            return "Internet Explorer";
        }
        else {
            return "Unknown browser";
        }
    }
    detectOperatingSystem() {
        const userAgent = navigator.userAgent;
        if (/Win/i.test(userAgent)) {
            return "Windows";
        }
        else if (/Mac/i.test(userAgent)) {
            return "Mac OS";
        }
        else if (/Linux/i.test(userAgent)) {
            return "Linux";
        }
        else if (/iPhone|iPad|iPod/i.test(userAgent)) {
            return "iOS";
        }
        else if (/Android/i.test(userAgent)) {
            return "Android";
        }
        else {
            return "Unknown operating system";
        }
    }
    detectOperatingSystemVersion() {
        const userAgent = navigator.userAgent;
        if (/Win/i.test(userAgent)) {
            const windowsVersionRegex = /Windows NT (\d+\.\d+)/;
            const windowsVersionMatch = userAgent.match(windowsVersionRegex);
            if (windowsVersionMatch) {
                return "Windows " + windowsVersionMatch[1];
            }
        }
        else if (/Mac/i.test(userAgent)) {
            const macVersionRegex = /Mac OS X (\d+[\._]\d+(?:[\._]\d+)?)/;
            const macVersionMatch = userAgent.match(macVersionRegex);
            if (macVersionMatch) {
                return "Mac OS " + macVersionMatch[1].replace(/_/g, ".");
            }
        }
        else if (/Linux/i.test(userAgent)) {
            const linuxVersionRegex = /Linux (\d+\.\d+\.\d+)/;
            const linuxVersionMatch = userAgent.match(linuxVersionRegex);
            if (linuxVersionMatch) {
                return "Linux " + linuxVersionMatch[1];
            }
        }
        else if (/iPhone|iPad|iPod/i.test(userAgent)) {
            const iosVersionRegex = /OS (\d+_\d+(?:_\d+)?)/;
            const iosVersionMatch = userAgent.match(iosVersionRegex);
            if (iosVersionMatch) {
                return "iOS " + iosVersionMatch[1].replace(/_/g, ".");
            }
        }
        else if (/Android/i.test(userAgent)) {
            const androidVersionRegex = /Android (\d+\.\d+(?:\.\d+)?)/;
            const androidVersionMatch = userAgent.match(androidVersionRegex);
            if (androidVersionMatch) {
                return "Android " + androidVersionMatch[1];
            }
        }
        return "Unknown operating system version";
    }
    detectDeviceType() {
        const userAgent = navigator.userAgent;
        if (/Mobi/i.test(userAgent) || /Android/i.test(userAgent)) {
            return "Mobile";
        }
        else if (/iPad/i.test(userAgent) || /Tablet/i.test(userAgent)) {
            return "Tablet";
        }
        else {
            return "Desktop";
        }
    }
    saveDeviceInfo(globalParameters, browserAgent) {
        const browserAgentApiKey = globalParameters.CEE_DeviceInfo &&
            globalParameters.CEE_DeviceInfo.includes('$$') ?
            globalParameters.CEE_DeviceInfo.split('$$')[1] : globalParameters.CEE_DeviceInfo;
        this.saveData(browserAgentApiKey, '', browserAgent);
        this.emitData(browserAgentApiKey, browserAgent);
    }
    saveGeoLocation(globalParameters, latitude, longitude) {
        const latApiKey = globalParameters.CEE_DeviceLatitude &&
            globalParameters.CEE_DeviceLatitude.includes('$$') ?
            globalParameters.CEE_DeviceLatitude.split('$$')[1] : globalParameters.CEE_DeviceLatitude;
        const longApiKey = globalParameters.CEE_DeviceLongitude &&
            globalParameters.CEE_DeviceLongitude.includes('$$') ?
            globalParameters.CEE_DeviceLongitude.split('$$')[1] : globalParameters.CEE_DeviceLongitude;
        this.saveData(latApiKey, '', latitude);
        this.saveData(longApiKey, '', longitude);
        this.emitData(latApiKey, latitude);
        this.emitData(longApiKey, longitude);
    }
    emitData(response_api_key, data) {
        const obj = {};
        obj[response_api_key] = data;
        if (response_api_key.includes('##')) {
            obj['handler_name'] = response_api_key.split('##')[0];
        }
        this.sharedEventsServices.emitApiSuccessResponse.emit(obj);
    }
    //special event handler for context menu
    contextMenu(handler, primaryData) {
        const additionalParams = this.getAdditionalParameter();
        let contextArray = [additionalParams['TargetFields'].split('|').map(str => str.trim())[0], primaryData.x, primaryData.y];
        if (additionalParams['TargetFields']) {
            this.sharedEventsServices.contextMenuEmitter.emit(contextArray);
        }
    }
    extractEmailIds(event) {
        this.eventAdditionalParams = this.getAdditionalParameter();
        const sourceFieldName = this.eventAdditionalParams && this.eventAdditionalParams['CEE_EXTRACT_EMAIL_SOURCE_FIELD'] ? this.eventAdditionalParams['CEE_EXTRACT_EMAIL_SOURCE_FIELD'] : '';
        const extractEmailIdsStoreKey = this.eventAdditionalParams && this.eventAdditionalParams['CEE_EXTRACT_EMAIL_STORE_FIELD'] ? this.eventAdditionalParams['CEE_EXTRACT_EMAIL_STORE_FIELD'] : '';
        let sourceFieldValue;
        if (sourceFieldName) {
            sourceFieldValue = this.appDataService.getFieldDataByFieldId(sourceFieldName);
        }
        let extractedEmailIds = '';
        if (sourceFieldValue) {
            //regex to match emails inside data-id attribute
            const dataIdRegex = /data-id="([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6})"/g;
            let matchArray;
            const matchedEmails = [];
            // Collect all matches
            while ((matchArray = dataIdRegex.exec(sourceFieldValue)) !== null) {
                matchedEmails.push(matchArray[1]); // Group 1 contains just the email
            }
            if (matchedEmails.length > 0) {
                const uniqueEmails = [...new Set(matchedEmails)];
                extractedEmailIds = uniqueEmails.join(",");
            }
        }
        if (extractEmailIdsStoreKey) {
            this.appDataService.getIndividualAppData(extractEmailIdsStoreKey).pipe(take(1)).subscribe(fieldData => {
                if (fieldData.length > 0) {
                    let changeValue = {
                        ...fieldData[0],
                        value: extractedEmailIds
                    };
                    this.appDataService.updateAppData(changeValue);
                }
            });
        }
    }
    cleanUpMaterialFields(combinedContainer) {
        // Remove datepicker-related elements
        combinedContainer.querySelectorAll('[mat-datepicker-input],mat-datepicker-input,shadow-dateInput').forEach(el => {
            // console.log('Removing element:', el);
            el.remove();
        });
        combinedContainer.querySelectorAll('.mat-mdc-form-field-icon-suffix').forEach(el => {
            // console.log('Removing element:', el);
            el.remove();
        });
        combinedContainer.querySelectorAll('input.mat-datepicker-input').forEach(input => {
            input.remove();
        });
        combinedContainer.querySelectorAll('mat-icon[aria-label="close date picker"]').forEach(el => el.remove());
        // Remove error message elements
        combinedContainer.querySelectorAll('div.error-message-validation').forEach(div => div.remove());
        // Set background color for text field wrappers
        combinedContainer.querySelectorAll('.mat-mdc-text-field-wrapper').forEach(wrapper => {
            wrapper.style.background = 'white';
        });
    }
    // Helper function to show the loader
    showLoader(message = 'Processing your download...') {
        // Create loader if it doesn't exist
        if (!document.getElementById('download-loader')) {
            const loader = document.createElement('div');
            loader.id = 'download-loader';
            loader.className = 'loader-overlay';
            loader.innerHTML = `
                <div class="loader-spinner">
                    <div class="spinner"></div>
                    <p>${message}</p>
                </div>
                `;
            document.body.appendChild(loader);
            // Add styles if needed
            const style = document.createElement('style');
            style.textContent = `
                .loader-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(0, 0, 0, 0.5);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 9999;
                }
                .loader-spinner {
                    background-color: white;
                    padding: 20px;
                    border-radius: 5px;
                    text-align: center;
                }
                .spinner {
                    border: 4px solid #f3f3f3;
                    border-top: 4px solid #3498db;
                    border-radius: 50%;
                    width: 30px;
                    height: 30px;
                    animation: spin 2s linear infinite;
                    margin: 0 auto 10px;
                }
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                `;
            document.head.appendChild(style);
        }
        else {
            // Update message if loader already exists
            const messageElement = document.querySelector('#download-loader .loader-spinner p');
            if (messageElement) {
                messageElement.textContent = message;
            }
        }
        // Show the loader
        document.getElementById('download-loader').style.display = 'flex';
    }
    // Helper function to hide the loader
    hideLoader() {
        const loader = document.getElementById('download-loader');
        if (loader) {
            loader.style.display = 'none';
        }
    }
    static ɵfac = function WFEEventListHandler_Factory(t) { return new (t || WFEEventListHandler)(i0.ɵɵinject(i1.CeeApiService), i0.ɵɵinject(i2.Router), i0.ɵɵinject(i3.SharedEventsServiceService), i0.ɵɵinject(i4.CEEInternalEmitterService), i0.ɵɵinject(i5.WfeStepLoaderService), i0.ɵɵinject(i6.AppDataService), i0.ɵɵinject(i7.ApiDataService), i0.ɵɵinject(i8.MatDialog), i0.ɵɵinject(i9.MatSnackBar), i0.ɵɵinject(i10.HttpClient), i0.ɵɵinject(i11.FileUploadService)); };
    static ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: WFEEventListHandler, factory: WFEEventListHandler.ɵfac, providedIn: 'root' });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(WFEEventListHandler, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], () => [{ type: i1.CeeApiService }, { type: i2.Router }, { type: i3.SharedEventsServiceService }, { type: i4.CEEInternalEmitterService }, { type: i5.WfeStepLoaderService }, { type: i6.AppDataService }, { type: i7.ApiDataService }, { type: i8.MatDialog }, { type: i9.MatSnackBar }, { type: i10.HttpClient }, { type: i11.FileUploadService }], null); })();
function boldFormatingOnSomeForms(combinedContainer) {
    const downpayment = combinedContainer.querySelectorAll('.downpayment');
    //  console.log("downpayment", downpayment);
    downpayment.forEach((el) => {
        if (el.textContent.toLowerCase().includes('total')) {
            el.style.color = '#333';
            el.style.letterSpacing = '1';
            el.style.fontWeight = 'bold';
            //el.style.margin = '16px 0';
            el.style.fontFamily = 'Quicksand';
        }
    });
    const forminvestorlenderdi = combinedContainer.querySelectorAll('.forminvestorlenderdi');
    //  console.log("forminvestorlenderdi", forminvestorlenderdi);
    forminvestorlenderdi.forEach((el) => {
        // if (el.textContent.toLowerCase().includes('total')) {
        el.style.color = '#000';
        el.style.letterSpacing = '1';
        el.style.fontWeight = 'bold';
        //el.style.margin = '16px 0';
        el.style.fontFamily = 'Quicksand';
        // }
    });
    const downpaymentvalue = combinedContainer.querySelectorAll('.comp-558905.downpayment');
    // console.log("downpayment", downpaymentvalue);
    downpaymentvalue.forEach((el) => {
        // if (el.textContent.toLowerCase().includes('total')) {
        el.style.color = '#333';
        el.style.letterSpacing = '1';
        el.style.fontWeight = 'bold';
        //el.style.margin = '16px 0';
        el.style.fontFamily = 'Quicksand';
        // }
    });
    // cf-label-border-top comp-129398 fees ng-star-inserted
    const totalFees = combinedContainer.querySelectorAll('.cf-label-border-top.comp-129398.fees.ng-star-inserted');
    //    console.log("downpayment", downpaymentvalue);
    totalFees.forEach((el) => {
        // if (el.textContent.toLowerCase().includes('total')) {
        el.style.color = '#333';
        el.style.letterSpacing = '1';
        el.style.fontWeight = 'bold';
        //el.style.margin = '16px 0';
        el.style.fontFamily = 'Quicksand';
        // }
    });
    // class="amortizationschedule cf-border-top comp-537946 ng-star-inserted"
    const amortizationschedule = combinedContainer.querySelectorAll('.cf-border-top,.comp-151851120759569.ng-star-inserted,.comp-238698.findersfeedisclosure,.comp-876320.findersfeedisclosure,.comp-054542.findersfeedisclosure,.comp-077658.findersfeedisclosure,.comp-852414.findersfeedisclosure,.comp-029222.findersfeedisclosure,.comp-401941.findersfeedisclosure,.comp-735575.themortgagorsacknowl');
    //    console.log("downpayment", downpaymentvalue);
    amortizationschedule.forEach((el) => {
        // if (el.textContent.toLowerCase().includes('total')) {
        el.style.color = '#333';
        el.style.letterSpacing = '1';
        el.style.fontWeight = 'bold';
        //el.style.margin = '16px 0';
        el.style.fontFamily = 'Quicksand';
    });
}
function tableHeadersElements(combinedContainer) {
    // const tableHeaders = combinedContainer.querySelectorAll('th.mat-mdc-header-cell.mat-sort-header');
    // // const tableHeaders = combinedContainer.querySelectorAll('mat-mdc-table thead tr th');
    // // console.log("tableHeaders--",tableHeaders);
    // tableHeaders.forEach((header: HTMLElement) => {
    //     // Set background color and text color
    //     header.style.backgroundColor = '#656772';
    //     header.style.color = '#ffffff'; // White text
    //     // Calculate and set dynamic font size based on content length
    //     const content = header.textContent || '';
    //     const contentLength = content.trim().length;
    //     // Dynamic font size calculation - smaller font for longer text
    //     let fontSize = '14px'; // Default size
    //     if (contentLength > 20) {
    //         fontSize = '12px';
    //     }
    //     if (contentLength > 30) {
    //         fontSize = '11px';
    //     }
    //     if (contentLength > 40) {
    //         fontSize = '10px';
    //     }
    //     // header.style.fontSize = fontSize;
    //     // header.style.fontWeight = 'bold';
    //     // header.style.padding = '8px 4px'; // Add adequate padding
    //     // header.style.whiteSpace = 'normal'; // Allow text wrapping
    //     // header.style.wordBreak = 'break-word'; // Break long words if needed
    //     // header.style.lineHeight = '1.2'; // Tighter line height for wrapped text
    //     // header.style.maxHeight = 'none'; // Remove any height restrictions
    //     // header.style.overflow = 'visible'; // Ensure text is not cut off
    //     // ✅ New: Center-align text horizontally and vertically
    //     header.style.textAlign = 'center'; // Horizontal center
    //     header.style.verticalAlign = 'middle'; // Vertical center
    //     const innerTextDiv = header.querySelector('.width_clear');
    //     if (innerTextDiv) {
    //         const innerElem = innerTextDiv as HTMLElement;
    //         // innerElem.style.fontFamily = 'Arial, sans-serif';  // Or your preferred font
    //         innerElem.style.fontSize = '12px'; //fontSize;
    //         innerElem.style.fontWeight = 'bold';
    //         innerElem.style.color = '#ffffff';
    //         innerElem.style.textAlign = 'left';
    //         innerElem.style.verticalAlign = 'middle';
    //         // innerElem.style.whiteSpace = 'normal';
    //         // innerElem.style.overflow = 'visible';
    //         innerElem.style.whiteSpace = 'nowrap'; // Prevent new lines
    //         innerElem.style.overflow = 'hidden';
    //         innerElem.style.textOverflow = 'ellipsis'; // Add ellipsis if text overflows
    //     }
    // });
    const headers = combinedContainer.querySelectorAll('th.mat-mdc-header-cell.mat-sort-header');
    headers.forEach((header) => {
        header.style.backgroundColor = '#656772';
        header.style.color = '#ffffff';
        header.style.textAlign = 'center';
        header.style.verticalAlign = 'middle';
        header.style.fontSize = '13px';
        header.style.fontWeight = 'bold';
        header.style.padding = '8px 4px';
        header.style.whiteSpace = 'nowrap'; // Prevent wrapping
        header.style.overflow = 'visible'; // Ensure full text
        // header.style.position = 'static';   // Remove sticky if present
        // Optionally, don't set height unless you must:
        // header.style.height = '28px'; // Or whatever is appropriate
        header.style.tableLayout = 'auto';
        // Also style any direct inner content if needed
        const innerDiv = header.querySelector('.width_clear');
        if (innerDiv) {
            innerDiv.style.fontSize = '12px';
            innerDiv.style.fontWeight = 'bold';
            innerDiv.style.color = '#ffffff';
            innerDiv.style.whiteSpace = 'nowrap';
        }
    });
    // cf-label-bold comp-177164 liabilitiescombined ng-star-inserted
    const innerTextDiv = combinedContainer.querySelectorAll('.liabilitiescombined.ng-star-inserted');
    innerTextDiv.forEach((innerElem) => {
        // const innerElem = innerTextDiv as HTMLElement;
        // innerElem.style.fontFamily = 'Arial, sans-serif';  // Or your preferred font
        innerElem.style.fontSize = '14px'; // fontSize;
        // innerElem.style.fontWeight = 'bold';
        // innerElem.style.color = '#ffffff';
        // innerElem.style.textAlign = 'center';
        // innerElem.style.padding = '4px 4px'; // Add adequate padding
        // innerElem.style.whiteSpace = 'normal'; // Allow text wrapping
        innerElem.style.wordBreak = 'break-word'; // Break long words if needed
        innerElem.style.lineHeight = '1.2'; // Tighter line height for wrapped text
        // innerElem.style.maxHeight = 'none'; // Remove any height restrictions
        innerElem.style.overflow = 'visible';
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ZlLWV2ZW50LWxpc3QtaGFuZGxlci11dGlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vQW5ndWxhci0xNy9FU0YtQW5ndWxhci1XRkUtTGlicmFyeS9wcm9qZWN0cy9uZy1jZWUtY29yZS9zcmMvbGliL3V0aWxzL3dmZS1ldmVudC1saXN0LWhhbmRsZXItdXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSx1Q0FBdUMsQ0FBQztBQUMvRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFJcEQsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLFlBQVksQ0FBQztBQWFwQyxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSx1REFBdUQsQ0FBQztBQUUvRixPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDdEMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx5REFBeUQsQ0FBQztBQUM5RixPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxpREFBaUQsQ0FBQztBQUN0RixPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDNUMsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDM0QsT0FBTywyQkFBaUQsTUFBTSxrQ0FBa0MsQ0FBQztBQUNqRyxPQUFPLG9CQUFvQixNQUFNLDBCQUEwQixDQUFDO0FBQzVELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDekMsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3JELE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQzNFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUk1QyxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUU3RSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDMUMsT0FBTyxFQUFFLFVBQVUsRUFBYSxNQUFNLGVBQWUsQ0FBQztBQUN0RCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUloRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUVsRSxPQUFPLEtBQUssSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUM3QixPQUFPLFdBQVcsTUFBTSxhQUFhLENBQUM7QUFDdEMsT0FBTyxRQUFRLE1BQU0sYUFBYSxDQUFDOzs7Ozs7Ozs7Ozs7O0FBT25DLE1BQU0sT0FBTyxtQkFBbUI7SUEyRGhCO0lBQ0E7SUFDQTtJQUNEO0lBQ0M7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNEO0lBQ0M7SUFwRVosVUFBVSxHQUFnQixFQUFFLENBQUM7SUFDN0IsWUFBWSxHQUFXLEVBQUUsQ0FBQztJQUMxQixPQUFPLEdBQW9CLEVBQUUsQ0FBQztJQUM5QixPQUFPLEdBQW9CLEVBQUUsQ0FBQztJQUM5QixRQUFRLEdBQW9CLEVBQUUsQ0FBQztJQUMvQixTQUFTLEdBQW9CLEVBQUUsQ0FBQztJQUNoQyxVQUFVLENBQWE7SUFDdkIsWUFBWSxDQUFXO0lBQ3ZCLGlCQUFpQixDQUFvQjtJQUNyQywyQkFBMkIsQ0FBOEI7SUFDekQsb0JBQW9CLENBQXVCO0lBQzNDLG9CQUFvQixHQUFxQyxFQUFFLENBQUM7SUFDcEQsa0JBQWtCLENBQXFCO0lBQ3ZDLDJCQUEyQixDQUF5QjtJQUNwRCxjQUFjLENBQWlCO0lBQy9CLG1CQUFtQixDQUFzQjtJQUN6QyxTQUFTLENBQVk7SUFDckIsZUFBZSxDQUFrQjtJQUNqQyxxQkFBcUIsQ0FBNEI7SUFDakQsVUFBVSxDQUFhO0lBQ3ZCLFlBQVksR0FBRyxFQUFFLENBQUM7SUFDbEIsZUFBZSxDQUE0QjtJQUduRCwwREFBMEQ7SUFDMUQsV0FBVyxHQUFZO1FBQ25CLEVBQUUsRUFBRSxFQUFFO1FBQ04sTUFBTSxFQUFFLEVBQUU7UUFDVixNQUFNLEVBQUUsRUFBRTtRQUNWLFVBQVUsRUFBRSxFQUFFO1FBQ2QsYUFBYSxFQUFFLEVBQUU7UUFDakIsZUFBZSxFQUFFLEtBQUs7UUFDdEIsb0JBQW9CLEVBQUUsRUFBRTtRQUN4QixhQUFhLEVBQUUsRUFBRTtRQUNqQixjQUFjLEVBQUUsRUFBRTtRQUNsQixtQkFBbUIsRUFBRSxFQUFFO1FBQ3ZCLFNBQVMsRUFBRSxLQUFLO1FBQ2hCLFFBQVEsRUFBRSxLQUFLO1FBQ2YsT0FBTyxFQUFFLEtBQUs7UUFDZCxLQUFLLEVBQUUsRUFBRTtRQUNULE9BQU8sRUFBRSxJQUFJO0tBQ2hCLENBQUM7SUFFRixhQUFhLEdBQUcsOEJBQThCLENBQUM7SUFDL0MsS0FBSyxHQUFRLEVBQUUsQ0FBQyxDQUFDLHdCQUF3QjtJQUN6QyxPQUFPLENBQU0sQ0FBQyw2Q0FBNkM7SUFDM0Qsb0JBQW9CLEdBQUcsRUFBRSxDQUFDO0lBQzFCLGFBQWEsR0FBUSxFQUFFLENBQUM7SUFDeEIsa0JBQWtCLEdBQVEsRUFBRSxDQUFDO0lBQzdCLFNBQVMsR0FBUSxFQUFFLENBQUM7SUFDcEIsWUFBWSxHQUFRLEVBQUUsQ0FBQztJQUN2QixvQkFBb0IsQ0FBdUI7SUFDM0MsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ2hCLHFCQUFxQixHQUFRLEVBQUUsQ0FBQztJQUNoQyxhQUFhLENBQXFCO0lBQ2xDLGVBQWUsR0FBUSxFQUFFLENBQUM7SUFDMUIsT0FBTyxHQUFZLEtBQUssQ0FBQztJQUN6QixZQUNZLGFBQTRCLEVBQzVCLE1BQWMsRUFDZCxvQkFBZ0QsRUFDakQsa0JBQTZDLEVBQzVDLG9CQUEwQyxFQUMxQyxjQUE4QixFQUM5QixjQUE4QixFQUM5QixNQUFpQixFQUNqQixRQUFxQixFQUN0QixJQUFnQixFQUNmLGlCQUFxQztRQVZyQyxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUM1QixXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QseUJBQW9CLEdBQXBCLG9CQUFvQixDQUE0QjtRQUNqRCx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQTJCO1FBQzVDLHlCQUFvQixHQUFwQixvQkFBb0IsQ0FBc0I7UUFDMUMsbUJBQWMsR0FBZCxjQUFjLENBQWdCO1FBQzlCLG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQUM5QixXQUFNLEdBQU4sTUFBTSxDQUFXO1FBQ2pCLGFBQVEsR0FBUixRQUFRLENBQWE7UUFDdEIsU0FBSSxHQUFKLElBQUksQ0FBWTtRQUNmLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBb0I7UUFHN0MsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksa0JBQWtCLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDakUsSUFBSSxDQUFDLDJCQUEyQixHQUFHLElBQUksc0JBQXNCLENBQUMsY0FBYyxFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBQzlGLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxjQUFjLEVBQUUsQ0FBQztRQUMzQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksVUFBVSxFQUFFLENBQUM7UUFDbkMsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksbUJBQW1CLEVBQUUsQ0FBQztRQUNyRCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksUUFBUSxFQUFFLENBQUM7UUFDbkMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksaUJBQWlCLEVBQUUsQ0FBQztRQUNqRCxJQUFJLENBQUMsMkJBQTJCLEdBQUcsSUFBSSwyQkFBMkIsQ0FBQyxJQUFJLEVBQUUsY0FBYyxFQUFFLGNBQWMsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO1FBQy9ILElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLG9CQUFvQixDQUFDLElBQUksRUFBRSxjQUFjLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFDM0YsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbkQsSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUkseUJBQXlCLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ2hGLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxVQUFVLEVBQUUsQ0FBQztRQUNuQyxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUkseUJBQXlCLEVBQUUsQ0FBQztRQUN2RCxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxvQkFBb0IsRUFBRSxDQUFDO1FBQ3ZELElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxrQkFBa0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUNoRSxDQUFDO0lBRUQsc0JBQXNCLENBQUMsS0FBVSxFQUFFLFNBQXNCLEVBQUUsV0FBVyxHQUFHLEVBQUUsRUFBRSxPQUFhO1FBQ3RGLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ3ZCLDJDQUEyQztRQUMzQyxJQUFJLENBQUMsVUFBVSxHQUFHLFNBQVMsQ0FBQztRQUM1QixxQkFBcUI7UUFDckIsdUVBQXVFO1FBQ3ZFLFFBQVEsS0FBSyxDQUFDLFlBQVksRUFBRTtZQUV4QixLQUFLLHlCQUF5QjtnQkFDMUIsSUFBSSxDQUFDLDhCQUE4QixDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUMzQyxNQUFNO1lBQ1YsS0FBSyx3QkFBd0I7Z0JBQ3pCLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDMUMsTUFBTTtZQUNWLEtBQUssVUFBVTtnQkFDWCxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM1QixNQUFNO1lBQ1YscUVBQXFFO1lBQ3JFLDJFQUEyRTtZQUMzRSw4REFBOEQ7WUFDOUQsS0FBSyxjQUFjLENBQUM7WUFDcEIsS0FBSyxXQUFXO2dCQUNaLElBQUksS0FBSyxDQUFDLFlBQVksS0FBSyxjQUFjLEVBQUU7b0JBQ3ZDLElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO2lCQUM3QjtnQkFDRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO2dCQUMxQyxNQUFNO1lBQ1YsS0FBSyxXQUFXLENBQUM7WUFDakIsS0FBSyxNQUFNO2dCQUNQLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3hCLE1BQU07WUFDVixLQUFLLFFBQVE7Z0JBQ1QsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNmLFlBQVksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxDQUFDO2dCQUM1QyxNQUFNO1lBQ1YsS0FBSyxTQUFTO2dCQUNWLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixFQUFFO29CQUNsRCxrQkFBa0I7b0JBQ2xCLElBQUksUUFBUSxHQUFHLEVBQUUsQ0FBQztvQkFDbEIsTUFBTSxZQUFZLEdBQWMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO29CQUN6RSxLQUFLLE1BQU0sSUFBSSxJQUFJLFlBQVksRUFBRTt3QkFDN0IsSUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLLE1BQU0sQ0FBQyxlQUFlLENBQUMsRUFBRTs0QkFDekMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUE7eUJBQ3pCO3FCQUNKO29CQUNELElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLG1CQUFtQixFQUFFLEVBQUUsZUFBZSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQTtpQkFDcEc7Z0JBQ0QsWUFBWSxDQUFDLFVBQVUsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO2dCQUMvQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO2dCQUN2QixJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUU7b0JBQ3RCLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO2lCQUN6QztxQkFBTSxJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7b0JBQzNCLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7aUJBQzNFO3FCQUFNO29CQUNILE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDZixZQUFZLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxNQUFNLENBQUMsQ0FBQztpQkFDL0M7Z0JBQ0QsTUFBTTtZQUNWLEtBQUssZUFBZTtnQkFDaEIsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7Z0JBQy9CLE1BQU07WUFDViwwREFBMEQ7WUFDMUQsNkJBQTZCO1lBQzdCLHNEQUFzRDtZQUN0RCxLQUFLLFVBQVU7Z0JBQ1gsaUNBQWlDO2dCQUNqQyxvREFBb0Q7Z0JBQ3BELFNBQVM7Z0JBQ1QsSUFBSSxPQUFPLEtBQUssU0FBUyxFQUFFO29CQUN2QixJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztpQkFDakM7Z0JBQ0QsTUFBTTtZQUNWOzs7cUJBR1M7U0FDWjtRQUNELElBQUksS0FBSyxDQUFDLGVBQWUsQ0FBQyxFQUFFO1lBQ3hCLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUM7U0FDN0M7SUFDTCxDQUFDO0lBRUQscURBQXFEO0lBQ3JELG9EQUFvRDtJQUM1QyxRQUFRLENBQUMsS0FBWSxFQUFFLGFBQWE7UUFDeEMsS0FBSyxNQUFNLFVBQVUsSUFBSSxLQUFLLENBQUMsWUFBWSxFQUFFO1lBQ3pDLHlDQUF5QztZQUN6QyxJQUFJLFVBQVUsQ0FBQyxtQkFBbUIsSUFBSSxVQUFVLENBQUMsbUJBQW1CLENBQUMsZUFBZSxFQUFFO2dCQUNsRixJQUFJLENBQUMsT0FBTyxHQUFHLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDO2dCQUN4RSxJQUFJLENBQUMsT0FBTyxHQUFHLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDO2dCQUN4RSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsVUFBVSxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDO2FBQ3BGO1lBQ0Qsd0NBQXdDO1lBQ3hDLDBDQUEwQztZQUMxQyxJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDbkIsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsRUFBRTtnQkFDM0MsSUFBSSxJQUFJLENBQUMsMkJBQTJCLENBQUMsc0JBQXNCLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO29CQUN6SCxNQUFNLEdBQUcsSUFBSSxDQUFDO2lCQUNqQjthQUNKO2lCQUFNO2dCQUNILE1BQU0sR0FBRyxJQUFJLENBQUM7YUFDakI7WUFDRCxJQUFJLE1BQU0sSUFBSSxhQUFhLEVBQUU7Z0JBQ3pCLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDOUM7aUJBQU07Z0JBQ0gsSUFBSSxDQUFDLHVCQUF1QixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUM7YUFDckQ7U0FDSjtJQUNMLENBQUM7SUFFTyx1QkFBdUI7UUFDM0IsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxrQkFBa0IsQ0FDbkQsSUFBSSxDQUFDLG9CQUFvQixDQUFDLG9CQUFvQixDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pGLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQy9DLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3RSxJQUFJLFFBQVEsSUFBSSxRQUFRLENBQUMsS0FBSyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ2xELE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzdFLElBQUksV0FBVyxJQUFJLFdBQVcsQ0FBQyxVQUFVLENBQUMsRUFBRTtnQkFDeEMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGlDQUFpQyxDQUN4RCxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7Z0JBQ3RFLHVHQUF1RztnQkFDdkcsdUZBQXVGO2dCQUN2RixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUMvQjtTQUNKO0lBQ0wsQ0FBQztJQUVNLHFCQUFxQixDQUFDLFNBQWMsRUFBRSxVQUFlLEVBQUUsTUFBVyxFQUFFLElBQVksRUFBRSxjQUFtQixFQUFFLEVBQUUsWUFBcUIsSUFBSSxFQUFFLE9BQWEsRUFBRSxjQUFzQixFQUFFO1FBQzlLLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDL0MsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDZixLQUFLLE1BQU0sS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRTtnQkFDbEUsSUFBSSxLQUFLLENBQUMsU0FBUyxLQUFLLFNBQVM7b0JBQzdCLEtBQUssQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLEtBQUssSUFBSSxDQUFDLFdBQVcsRUFBRTtvQkFDckQsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLEtBQUssV0FBVyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDdkYsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7b0JBQ2xDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxPQUFPLENBQUM7b0JBQzdDLElBQUksVUFBVSxJQUFJLFVBQVUsQ0FBQyxvQkFBb0IsRUFBRTt3QkFDL0MsV0FBVyxHQUFHOzRCQUNWLEdBQUcsV0FBVzs0QkFDZCxLQUFLLEVBQUU7Z0NBQ0gsR0FBRyxXQUFXLENBQUMsS0FBSztnQ0FDcEIsYUFBYSxFQUFFLFVBQVUsQ0FBQyxhQUFhO2dDQUN2QyxRQUFRLEVBQUUsVUFBVSxDQUFDLFFBQVE7Z0NBQzdCLGNBQWMsRUFBRSxVQUFVLENBQUMsY0FBYztnQ0FDekMsU0FBUyxFQUFFLFVBQVUsQ0FBQyxTQUFTO2dDQUMvQixZQUFZLEVBQUUsSUFBSTs2QkFDckI7eUJBQ0osQ0FBQztxQkFDTDtvQkFDRCxJQUFJLENBQUMsc0JBQXNCLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxVQUFVLEVBQUUsV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2lCQUNsRjthQUNKO1NBQ0o7SUFDTCxDQUFDO0lBRUQsYUFBYSxDQUFDLEtBQUssRUFBRSxNQUFNO1FBQ3ZCLEtBQUssTUFBTSxVQUFVLElBQUksS0FBSyxDQUFDLFlBQVksRUFBRTtZQUN6QyxJQUFJLFVBQVUsQ0FBQyxtQkFBbUIsSUFBSSxVQUFVLENBQUMsbUJBQW1CLENBQUMsZUFBZSxJQUFJLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxlQUFlLENBQUMsVUFBVSxFQUFFO2dCQUMvSSxLQUFLLE1BQU0sS0FBSyxJQUFJLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxlQUFlLENBQUMsVUFBVSxFQUFFO29CQUMzRSxJQUFJLEtBQUssQ0FBQyxrQkFBa0IsRUFBRTt3QkFDMUIsS0FBSyxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyw0QkFBNEIsQ0FBQyxNQUFNLENBQUMsQ0FBQztxQkFDN0Y7aUJBQ0o7YUFDSjtTQUNKO0lBQ0wsQ0FBQztJQUVNLDhCQUE4QixDQUFDLEtBQUs7UUFDdkMsS0FBSyxNQUFNLFdBQVcsSUFBSSxLQUFLLENBQUMsWUFBWSxFQUFFO1lBQzFDLElBQUksV0FBVyxDQUFDLG1CQUFtQixFQUFFO2dCQUVqQyxJQUFJLFVBQVUsR0FBRyxJQUFJLENBQUM7Z0JBQ3RCLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLEVBQUU7b0JBQzVDLElBQUksQ0FBQyxJQUFJLENBQUMsMkJBQTJCLENBQUMsc0JBQXNCLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsU0FBUyxDQUFDLEVBQUU7d0JBQ3BHLFVBQVUsR0FBRyxLQUFLLENBQUM7d0JBQ25CLE1BQU07cUJBQ1Q7aUJBQ0o7Z0JBQ0QsSUFBSSxVQUFVLEVBQUU7b0JBQ1osTUFBTSxvQkFBb0IsR0FBRyxXQUFXLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQztvQkFDbkUsTUFBTSxpQkFBaUIsR0FBRyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQztvQkFDdEQsSUFBSSxDQUFDLG9CQUFvQixHQUFHLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQztvQkFFbEYsSUFBSSxvQkFBb0IsR0FBRyxDQUFDLENBQUM7b0JBQzdCLE1BQU0sWUFBWSxHQUFHLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUI7eUJBQ3JFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxjQUFjLEtBQUssd0JBQXdCLENBQUMsQ0FBQztvQkFDOUQsZ0RBQWdEO29CQUNoRCxJQUFJLFlBQVksRUFBRTt3QkFDZCxvQkFBb0IsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDO3FCQUM3QztvQkFFRCxNQUFNLGlCQUFpQixHQUFHLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUI7eUJBQzFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxjQUFjLEtBQUsscUJBQXFCLENBQUMsQ0FBQztvQkFDM0QsSUFBSSxpQkFBaUIsRUFBRTt3QkFDbkIsSUFBSSxDQUFDLGVBQWU7NkJBQ2YsVUFBVSxDQUFDLG9CQUFvQixFQUFFLG9CQUFvQixFQUFFLGlCQUFpQixDQUFDLEtBQUssRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO3FCQUUzRztvQkFFRCxNQUFNLGdCQUFnQixHQUFHLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUI7eUJBQ3pFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxjQUFjLEtBQUssdUJBQXVCLENBQUMsQ0FBQztvQkFDN0QsSUFBSSxnQkFBZ0IsRUFBRTt3QkFDbEIsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxxQkFBcUIsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDcEYsSUFBSSxDQUFDLGVBQWU7NkJBQ2YsVUFBVSxDQUFDLG9CQUFvQixFQUFFLG9CQUFvQixFQUFFLFNBQVMsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO3FCQUU3RjtvQkFDRCxNQUFNLGlCQUFpQixHQUFHLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUI7eUJBQzFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxjQUFjLEtBQUssc0JBQXNCLENBQUMsQ0FBQztvQkFDNUQsSUFBSSxpQkFBaUIsRUFBRTt3QkFDbkIsNENBQTRDO3dCQUM1QyxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7d0JBQ3RILDRDQUE0Qzt3QkFFNUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsb0JBQW9CLEVBQUUsb0JBQW9CLEVBQUUsWUFBWSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO3FCQUcvSTtvQkFDRCxVQUFVLENBQUMsR0FBRyxFQUFFO3dCQUNaLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyx1QkFBdUIsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO3dCQUN4RSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxxQkFBcUIsQ0FDM0QsSUFBSSxDQUFDLG9CQUFvQixDQUFDLG9DQUFvQyxDQUFDLG9CQUFvQixDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztvQkFFeEcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2lCQUNYO2FBQ0o7U0FDSjtJQUNMLENBQUM7SUFDTSw2QkFBNkIsQ0FBQyxLQUFLO1FBQ3RDLEtBQUssTUFBTSxXQUFXLElBQUksS0FBSyxDQUFDLFlBQVksRUFBRTtZQUMxQyxJQUFJLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRTtnQkFDakMsSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDO2dCQUN0QixJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxFQUFFO29CQUM1QyxJQUFJLENBQUMsSUFBSSxDQUFDLDJCQUEyQixDQUFDLHNCQUFzQixDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLFNBQVMsQ0FBQyxFQUFFO3dCQUNwRyxVQUFVLEdBQUcsS0FBSyxDQUFDO3dCQUNuQixNQUFNO3FCQUNUO2lCQUNKO2dCQUNELE1BQU0saUJBQWlCLEdBQUcsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUM7Z0JBRXRELE1BQU0sdUJBQXVCLEdBQVEsSUFBSSxDQUFDLGVBQWUsQ0FBQyxxQkFBcUIsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO2dCQUNuRyxJQUFJLHVCQUF1QixFQUFFO29CQUN6QixJQUFJLENBQUMsZUFBZSxDQUFDLGtCQUFrQixDQUFDLGlCQUFpQixDQUFDLENBQUM7b0JBQzNELElBQUksVUFBVSxFQUFFO3dCQUNaLElBQUksWUFBWSxHQUFHLElBQUksQ0FBQzt3QkFDeEIsSUFBSSxDQUFDLHVCQUF1QixDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsSUFBSSx1QkFBdUIsQ0FBQyxLQUFLLEVBQUU7NEJBQ3ZFLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxXQUFXLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUM7NEJBQ2xGLE1BQU0sVUFBVSxHQUFHLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUI7aUNBQ25FLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxjQUFjLEtBQUssU0FBUyxDQUFDLENBQUM7NEJBQy9DLElBQUksVUFBVSxFQUFFO2dDQUNaLFlBQVksR0FBRyxVQUFVLENBQUMsS0FBSyxDQUFDO2dDQUNoQyw4RUFBOEU7NkJBQ2pGO3lCQUVKOzZCQUFNOzRCQUNILElBQUksaUJBQWlCLEVBQUU7Z0NBQ25CLFlBQVksR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMscUJBQXFCLENBQzFELElBQUksQ0FBQyxvQkFBb0I7cUNBQ3BCLG9DQUFvQyxDQUFDLGlCQUFpQixDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7NkJBQzlFO3lCQUNKO3dCQUNELElBQUksWUFBWSxFQUFFOzRCQUNkLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsQ0FBQzs0QkFDbkYsSUFBSSxlQUFlLElBQUksZUFBZSxDQUFDLFFBQVEsSUFBSSxlQUFlLENBQUMsUUFBUSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7Z0NBQ3JGLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxtQ0FBbUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQzs2QkFDeEU7NEJBQ0QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQzt5QkFDakM7cUJBQ0o7aUJBQ0o7YUFDSjtTQUNKO0lBQ0wsQ0FBQztJQUNNLGVBQWUsQ0FBQyxLQUFLO1FBQ3hCLEtBQUssTUFBTSxXQUFXLElBQUksS0FBSyxDQUFDLFlBQVksRUFBRTtZQUMxQyxJQUFJLFVBQVUsR0FBRyxJQUFJLENBQUM7WUFDdEIsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsRUFBRTtnQkFDNUMsSUFBSSxDQUFDLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUU7b0JBQzVILFVBQVUsR0FBRyxLQUFLLENBQUM7b0JBQ25CLE1BQU07aUJBQ1Q7YUFDSjtZQUNELElBQUksVUFBVSxFQUFFO2dCQUNaLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyx1QkFBdUIsQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUN6RixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxxQkFBcUIsQ0FDM0QsSUFBSSxDQUFDLG9CQUFvQixDQUFDLG9DQUFvQyxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQzthQUN4SDtTQUVKO0lBQ0wsQ0FBQztJQUVNLGdCQUFnQixDQUFDLEtBQVksRUFBRSxjQUFtQixFQUFFO1FBQ3ZELEtBQUssTUFBTSxVQUFVLElBQUksS0FBSyxDQUFDLFlBQVksRUFBRTtZQUN6Qyx5Q0FBeUM7WUFDekMsSUFBSSxVQUFVLENBQUMsbUJBQW1CLElBQUksVUFBVSxDQUFDLG1CQUFtQixDQUFDLGVBQWUsRUFBRTtnQkFDbEYsSUFBSSxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQztnQkFDeEUsSUFBSSxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQztnQkFDeEUsSUFBSSxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQztnQkFDMUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQztnQkFDNUUsSUFBSSxDQUFDLG9CQUFvQixHQUFHLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQzthQUNwRjtZQUVELElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLEVBQUU7Z0JBQzNDLElBQUksSUFBSSxDQUFDLDJCQUEyQixDQUFDLHNCQUFzQixDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLFNBQVMsRUFBRSxXQUFXLENBQUMsS0FBSyxJQUFJLFdBQVcsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUU7b0JBQzFNLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFlBQVksRUFBRSxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUM7aUJBQ3RFO3FCQUNJO29CQUNELElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxpQ0FBaUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUE7aUJBQy9FO2FBQ0o7aUJBQU07Z0JBQ0gsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLFVBQVUsRUFBRSxXQUFXLENBQUMsQ0FBQzthQUN0RTtTQUNKO0lBQ0wsQ0FBQztJQUVNLFdBQVcsQ0FBQyxLQUFZO1FBQzNCLEtBQUssTUFBTSxVQUFVLElBQUksS0FBSyxDQUFDLFlBQVksRUFBRTtZQUN6Qyx5Q0FBeUM7WUFDekMsSUFBSSxVQUFVLENBQUMsbUJBQW1CLElBQUksVUFBVSxDQUFDLG1CQUFtQixDQUFDLGVBQWUsRUFBRTtnQkFDbEYsSUFBSSxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQztnQkFDeEUsSUFBSSxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQztnQkFDeEUsSUFBSSxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQztnQkFDMUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQztnQkFDNUUsSUFBSSxDQUFDLG9CQUFvQixHQUFHLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQzthQUNwRjtZQUNELHNDQUFzQztZQUN0QyxNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxjQUFjLElBQUksdUJBQXVCLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQzNJLElBQUksZ0JBQWdCLElBQUksZ0JBQWdCLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTSxJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO2dCQUNyRixNQUFNLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQzthQUN4RTtZQUNELFdBQVc7WUFDWCxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxFQUFFO2dCQUMzQyxJQUFJLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUU7b0JBQ3pILElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLFlBQVksRUFBRSxVQUFVLENBQUMsQ0FBQztpQkFDekQ7cUJBQ0k7b0JBQ0QsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGlDQUFpQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQTtpQkFDL0U7YUFDSjtpQkFBTTtnQkFDSCxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7YUFDekQ7U0FDSjtJQUNMLENBQUM7SUFFRCxjQUFjLENBQUMsY0FBMkI7UUFDdEMsdUJBQXVCO1FBQ3ZCLElBQUksY0FBYyxJQUFJLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzdDLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7YUFBTTtZQUNILE9BQU8sS0FBSyxDQUFDO1NBQ2hCO0lBQ0wsQ0FBQztJQUVELEtBQUssQ0FBQyxjQUFjLENBQUMsS0FBSztRQUN0QixJQUFJO1lBQ0EsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsZUFBZSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtZQUM3SCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQztZQUNuQyxtREFBbUQ7WUFFbkQsa0NBQWtDO1lBQ2xDLHdDQUF3QztZQUN4QyxNQUFNLFFBQVEsR0FBRyxNQUFNLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNwQyxvQ0FBb0M7WUFDcEMsc0NBQXNDO1lBQ3RDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFO2dCQUNkLE1BQU0sSUFBSSxLQUFLLENBQUMsd0JBQXdCLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO2FBQ2xFO1lBRUQsaUNBQWlDO1lBQ2pDLE1BQU0sSUFBSSxHQUFHLE1BQU0sUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1lBRW5DLDRCQUE0QjtZQUM1QixNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRXZDLG9DQUFvQztZQUNwQyxNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3RDLENBQUMsQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsNEJBQTRCO1lBQ2xFLENBQUMsQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBRTdCLGdDQUFnQztZQUNoQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUU3Qiw0REFBNEQ7WUFDNUQsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBRVYsOERBQThEO1lBQzlELFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdCLEdBQUcsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFMUIsK0NBQStDO1NBQ2xEO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDWixPQUFPLENBQUMsS0FBSyxDQUFDLHdCQUF3QixFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUEsZ0JBQWdCO1NBQ2xFO0lBQ0wsQ0FBQztJQUlMLCtCQUErQixDQUFDLE9BQW9CO1FBQ2hELE9BQU8sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7WUFDbkMsSUFBSSxDQUFDLE9BQU87Z0JBQUUsT0FBTyxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxDQUFDO1lBRW5FLHNEQUFzRDtZQUN0RCxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBZ0IsQ0FBQztZQUVyRCw0QkFBNEI7WUFDNUIsTUFBTSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsQ0FBQyxxQkFBcUI7WUFDdEQsTUFBTSxjQUFjLEdBQUcsRUFBRSxHQUFDLEVBQUUsQ0FBQyxDQUFDLG1DQUFtQztZQUNqRSxNQUFNLGdCQUFnQixHQUFHLGdCQUFnQixHQUFHLGNBQWMsQ0FBQyxDQUFDLFNBQVM7WUFFckUsdUJBQXVCO1lBQ3ZCLE1BQU0sY0FBYyxHQUFHLEVBQUUsQ0FBQyxDQUFDLDJCQUEyQjtZQUN0RCxNQUFNLG9CQUFvQixHQUFHLGdCQUFnQixHQUFHLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsc0JBQXNCO1lBRTVGLHNCQUFzQjtZQUN0QixNQUFNLG9CQUFvQixHQUFHLEdBQUcsQ0FBQztZQUVqQyxzREFBc0Q7WUFDdEQsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM5QyxPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUM7WUFDakMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsU0FBUyxDQUFDO1lBQzlCLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQztZQUN6QixPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxvQkFBb0IsR0FBRyxJQUFJLENBQUM7WUFDbEQsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO1lBQ25ELE9BQU8sQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztZQUNsQyxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7WUFDNUIsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO1lBQzNCLE9BQU8sQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQztZQUN2QyxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsQ0FBQyxjQUFjO1lBQzlDLE9BQU8sQ0FBQyxLQUFLLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztZQUNwQyxPQUFPLENBQUMsS0FBSyxDQUFDLGNBQWMsR0FBRyxlQUFlLENBQUMsQ0FBQyx3QkFBd0I7WUFDeEUsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDO1lBRXBDLGdEQUFnRDtZQUNoRCxNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDM0QsTUFBTSxZQUFZLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUUxRCwwQ0FBMEM7WUFDMUMsTUFBTSxtQkFBbUIsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzFELG1CQUFtQixDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ3hDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1lBQzFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1lBQzNDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDO1lBQ2hELG1CQUFtQixDQUFDLEtBQUssQ0FBQyxjQUFjLEdBQUcsWUFBWSxDQUFDO1lBQ3hELG1CQUFtQixDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1lBQzFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFDO1lBRW5ELE1BQU0sb0JBQW9CLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMzRCxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUN6QyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztZQUMzQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztZQUM1QyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQztZQUNqRCxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsY0FBYyxHQUFHLFVBQVUsQ0FBQztZQUN2RCxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUMzQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQztZQUNwRCxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQztZQUUvQyx1Q0FBdUM7WUFDdkMsSUFBSSxXQUFXLEVBQUU7Z0JBQ2IsbUNBQW1DO2dCQUNuQyxNQUFNLE9BQU8sR0FBRyxXQUFXLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxJQUFJLE9BQU8sRUFBRTtvQkFDVCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUM3QyxNQUFNLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7b0JBQ3pCLE1BQU0sQ0FBQyxHQUFHLEdBQUcsT0FBTyxDQUFDLEdBQUcsSUFBSSxNQUFNLENBQUM7b0JBQ25DLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQztvQkFDakMsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDO29CQUMvQixNQUFNLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7b0JBQ25DLG1CQUFtQixDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztpQkFDM0M7cUJBQU07b0JBQ0gscUNBQXFDO29CQUNyQyxNQUFNLGtCQUFrQixHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ3pELGtCQUFrQixDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUMsV0FBVyxJQUFJLEVBQUUsQ0FBQztvQkFDL0Qsa0JBQWtCLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7b0JBQzNDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO29CQUM3QyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQztvQkFDNUMsbUJBQW1CLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUM7aUJBQ3ZEO2FBQ0o7WUFFRCx3Q0FBd0M7WUFDeEMsc0JBQXNCO1lBQ3RCLGlFQUFpRTtZQUNqRSx3REFBd0Q7WUFFeEQsaURBQWlEO1lBQ2pELGdDQUFnQztZQUNoQyxvRUFBb0U7WUFDcEUsb0VBQW9FO1lBQ3BFLCtFQUErRTtZQUUvRSxtQ0FBbUM7WUFDbkMsaURBQWlEO1lBQ2pELGlEQUFpRDtZQUVqRCwwQkFBMEI7WUFDMUIsK0RBQStEO1lBQy9ELGlDQUFpQztZQUNqQywrREFBK0Q7WUFDL0QsUUFBUTtZQUVSLHFEQUFxRDtZQUNyRCxpRUFBaUU7WUFDakUsbURBQW1EO1lBQ25ELG9EQUFvRDtZQUNwRCxxREFBcUQ7WUFFckQseUNBQXlDO1lBQ3pDLHdEQUF3RDtZQUN4RCxtREFBbUQ7WUFFbkQsNkRBQTZEO1lBQzdELElBQUk7WUFFSixJQUFJLFlBQVksRUFBRTtnQkFDZCx5Q0FBeUM7Z0JBQ3pDLE1BQU0sY0FBYyxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLElBQUksWUFBWSxDQUFDO2dCQUMzRSxJQUFJLFdBQVcsR0FBRyxjQUFjLENBQUMsU0FBUyxJQUFJLFlBQVksQ0FBQyxTQUFTLENBQUM7Z0JBRXJFLDJDQUEyQztnQkFDM0Msc0RBQXNEO2dCQUV0RCxtQ0FBbUM7Z0JBQ25DLFdBQVcsR0FBRyxXQUFXLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxVQUFVLENBQUMsQ0FBQztnQkFDOUQsV0FBVyxHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2dCQUNqRCxXQUFXLEdBQUcsV0FBVyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBRXZELHVEQUF1RDtnQkFFdkQscURBQXFEO2dCQUNyRCxNQUFNLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3ZELGdCQUFnQixDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDO2dCQUNoRCxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztnQkFDeEMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxRQUFRLENBQUM7Z0JBQzdDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUMsdUJBQXVCO2dCQUM5RCxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztnQkFDMUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7Z0JBQy9DLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsYUFBYSxDQUFDLENBQUMsbUNBQW1DO2dCQUN0RixnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDLG1CQUFtQjtnQkFDM0QsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsQ0FBQyw4QkFBOEI7Z0JBRXJFLHVCQUF1QjtnQkFDdkIsZ0JBQWdCLENBQUMsU0FBUyxHQUFHLFdBQVcsQ0FBQztnQkFFekMscURBQXFEO2dCQUNyRCxJQUFJLG9CQUFvQixFQUFFO29CQUN0QixvQkFBb0IsQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztvQkFDbkQsMkRBQTJEO2lCQUM5RDtxQkFBTTtvQkFDSCx5RUFBeUU7b0JBQ3pFLFlBQVksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO29CQUM1QixZQUFZLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLENBQUM7b0JBQzNDLG1EQUFtRDtpQkFDdEQ7Z0JBRUQsbUNBQW1DO2dCQUNuQyw4REFBOEQ7Z0JBQzlELGlHQUFpRzthQUNwRztZQUVELHlCQUF5QjtZQUN6QixPQUFPLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDekMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1lBRTFDLGFBQWE7WUFDYixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUVuQywyQkFBMkI7WUFDM0IsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQy9DLE1BQU0sYUFBYSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUMvQyxPQUFPLElBQUksT0FBTyxDQUFPLENBQUMsT0FBTyxFQUFFLEVBQUU7b0JBQ2pDLElBQUksR0FBRyxDQUFDLFFBQVEsRUFBRTt3QkFDZCxPQUFPLEVBQUUsQ0FBQztxQkFDYjt5QkFBTTt3QkFDSCxHQUFHLENBQUMsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO3dCQUM3QixHQUFHLENBQUMsT0FBTyxHQUFHLEdBQUcsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO3FCQUNqQztnQkFDTCxDQUFDLENBQUMsQ0FBQztZQUNQLENBQUMsQ0FBQyxDQUFDO1lBRUgsMkNBQTJDO1lBQzNDLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtnQkFDakMsK0NBQStDO2dCQUMvQyxVQUFVLENBQUMsR0FBRyxFQUFFO29CQUNaLFdBQVcsQ0FBQyxPQUFPLEVBQUU7d0JBQ2pCLEtBQUssRUFBRSxDQUFDO3dCQUNSLE9BQU8sRUFBRSxJQUFJO3dCQUNiLFVBQVUsRUFBRSxJQUFJO3dCQUNoQixPQUFPLEVBQUUsS0FBSzt3QkFDZCxlQUFlLEVBQUUsTUFBTTtxQkFDMUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTt3QkFDYixlQUFlO3dCQUNmLE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7d0JBRTlDLFdBQVc7d0JBQ1gsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7d0JBRW5DLHFDQUFxQzt3QkFDckMsT0FBTyxDQUFDOzRCQUNKLE9BQU87NEJBQ1AsS0FBSyxFQUFFLG9CQUFvQjs0QkFDM0IsTUFBTSxFQUFFLG9CQUFvQjt5QkFDL0IsQ0FBQyxDQUFDO29CQUNQLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRTt3QkFDYixvQkFBb0I7d0JBQ3BCLE9BQU8sQ0FBQyxLQUFLLENBQUMsc0JBQXNCLEVBQUUsS0FBSyxDQUFDLENBQUM7d0JBQzdDLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUU7NEJBQ2pDLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO3lCQUN0Qzt3QkFDRCxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ2xCLENBQUMsQ0FBQyxDQUFDO2dCQUNQLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLHlCQUF5QjtZQUN0QyxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUdELEtBQUssQ0FBQyxjQUFjLENBQUMsR0FBVTtRQUMzQixJQUFJO1lBRUosa0ZBQWtGO1lBQ2xGLHdIQUF3SDtZQUN4SCxtREFBbUQ7WUFFbkQsc0hBQXNIO1lBQ3RILHFEQUFxRDtZQUVyRCxxQ0FBcUM7WUFDckMsNkJBQTZCO1lBQzdCLCtCQUErQjtZQUMvQixzRUFBc0U7WUFDdEUsT0FBTztZQUVQLDhCQUE4QjtZQUM5QixnQ0FBZ0M7WUFDaEMsc0VBQXNFO1lBQ3RFLE9BQU87WUFFUCxNQUFNLFVBQVUsR0FBRyxFQUFFLENBQUM7WUFFdEIsTUFBTSxXQUFXLEdBQUMsRUFBRSxDQUFDO1lBRW5CLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUE7WUFDcEIsb0JBQW9CO1lBQ3BCLE1BQU0sUUFBUSxHQUFHLHVCQUF1QixDQUFDO1lBQ3pDLEdBQUcsQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQ3ZDLEdBQUcsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLFdBQVcsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUM3QyxHQUFHLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUVuQyxNQUFNLFNBQVMsR0FBRyxvQkFBb0IsQ0FBQztZQUN2QyxHQUFHLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FBQztZQUN6QyxHQUFHLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDNUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFFakMsT0FBTyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDMUI7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNkLE9BQU8sQ0FBQyxLQUFLLENBQUMscUJBQXFCLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDNUMsNEJBQTRCO1lBQzVCLEdBQUcsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDekIsT0FBTyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDMUI7SUFDSCxDQUFDO0lBRUQscUNBQXFDO0lBSW5DLEtBQUssQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUN6QixXQUE0QixFQUM1QixXQUFtQiwwQkFBMEIsRUFDN0MsY0FBdUIsSUFBSTtRQUdyQixJQUFJLE9BQU8sRUFBRSxPQUFPLENBQUM7UUFDckIsSUFBSSxLQUFLLENBQUMsbUJBQW1CLEVBQUU7WUFDM0IsT0FBTyxHQUFHLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxlQUFlLENBQUMsU0FBUztnQkFDbkQsS0FBSyxDQUFDLG1CQUFtQixDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUM7WUFDL0QsT0FBTyxHQUFHLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxlQUFlLENBQUMsU0FBUztnQkFDbkQsS0FBSyxDQUFDLG1CQUFtQixDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUM7U0FDbkU7UUFDVCx5Q0FBeUM7UUFDekMscUNBQXFDO1FBQ25DLElBQUksQ0FBQyxVQUFVLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztRQUVsRCxNQUFNLG1CQUFtQixHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsTUFBTSxXQUFXLEdBQUcsa0JBQWtCLFdBQVcsRUFBRSxDQUFDO1FBQ3BELElBQUksT0FBTyxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDbkQsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDM0IsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFDOUIsT0FBTyxHQUFHLElBQUksQ0FBQyxxQ0FBcUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNyRSx1RUFBdUU7UUFHckUsTUFBTSxRQUFRLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxZQUFZLENBQUMsQ0FBQztRQUVwRCxPQUFPLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBQ3pDLE1BQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLENBQUM7WUFDcEMsSUFBSSxJQUFJLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRTtnQkFDM0MsRUFBa0IsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLGFBQWEsQ0FBQzthQUNqRDtRQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLHFCQUFxQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRXBDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDWixPQUFPLENBQUMsS0FBSyxDQUFDLDRCQUE0QixDQUFDLENBQUM7WUFDNUMsT0FBTztTQUNSO1FBRUQsTUFBTSxPQUFPLEdBQUc7WUFDZCxNQUFNLEVBQUUsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7WUFDL0IsUUFBUTtZQUNSLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTtZQUN0QyxXQUFXLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUU7WUFDeEMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUU7WUFDNUQsU0FBUyxFQUFFO2dCQUNULElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDO2dCQUNwQyxLQUFLLEVBQUUsQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDO2FBQ3JDO1NBQ0YsQ0FBQztRQUVGLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLDZCQUE2QjtRQUdsRCxNQUFNLEdBQUcsR0FBRyxNQUFNLFFBQVEsRUFBRSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRXpFLE1BQU0sVUFBVSxHQUFHLEdBQUcsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUM3QyxNQUFNLGlCQUFpQixHQUFHLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxFQUFFLFdBQVcsRUFBRSxLQUFLLE1BQU0sQ0FBQztZQUN4RSxDQUFDLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyx5QkFBeUIsQ0FBQztZQUN0RSxDQUFDLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLHlCQUF5QixDQUFDLENBQUM7UUFDNUQsTUFBTSxpQkFBaUIsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsaUJBQWlCLENBQUMsSUFBSSxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3pHLE1BQU0sa0JBQWtCLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLGtCQUFrQjtRQUV2RCxNQUFNLFNBQVMsR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLHVCQUF1QjtRQUMzRSxNQUFNLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQyxZQUFZO1FBQ2hDLE1BQU0sVUFBVSxHQUFHLFNBQVMsR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsZ0NBQWdDO1FBQzNFLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxDQUFDLCtCQUErQjtRQUV0RCxJQUFJLENBQUMsK0JBQStCLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRTtZQUN4RixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksVUFBVSxHQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDeEMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDZixHQUFHLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxVQUFVLEVBQUUsa0JBQWtCLENBQUMsQ0FBQzthQUMzRTtZQUtMLHdCQUF3QjtZQUV0QixJQUFJLFdBQVcsRUFBRTtnQkFDZixNQUFNLE9BQU8sR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNsQyxPQUFlLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxDQUFDLHNDQUFzQztnQkFFeEUsdUJBQXVCO2dCQUN2QixJQUFJO29CQUNELElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7aUJBQ3hEO2dCQUFDLE9BQU8sR0FBRyxFQUFFO29CQUNaLE9BQU8sQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxDQUFDLENBQUM7b0JBQ3JDLElBQUksT0FBTzt3QkFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7aUJBQzNCO2FBQ0Y7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVMLE9BQU8sQ0FBQyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBR0QscUNBQXFDLENBQUMsT0FBb0I7UUFDeEQsTUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQWdCLENBQUM7UUFFN0QsMkJBQTJCO1FBQzVCLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDdkQsTUFBTSxJQUFJLEdBQUksS0FBMEIsQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFLENBQUM7WUFFN0QscUNBQXFDO1lBQ3JDLElBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUMxRixNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM5QyxPQUFPLENBQUMsV0FBVyxHQUFJLEtBQTBCLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQztnQkFDOUQsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDO2dCQUNwQyxPQUFPLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUM7Z0JBQ3ZDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztnQkFDN0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsY0FBYyxDQUFDO2dCQUN2QyxLQUFLLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO2FBQzVCO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCx5QkFBeUI7UUFDekIsYUFBYSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUM1RCxNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzlDLE9BQU8sQ0FBQyxXQUFXLEdBQUksUUFBZ0MsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDO1lBQ3BFLE9BQU8sQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQyxDQUFDLHdCQUF3QjtZQUMvRCxPQUFPLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUM7WUFDdkMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDO1lBQzdCLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQztZQUN2QyxRQUFRLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2hDLENBQUMsQ0FBQyxDQUFDO1FBR0gsSUFBSSxDQUFDLGdDQUFnQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRW5ELE9BQU8sYUFBYSxDQUFDO0lBQ3ZCLENBQUM7SUFLRyxlQUFlLENBQUMsS0FBSztRQUNqQixNQUFNLElBQUksR0FBRyxJQUFJLENBQUM7UUFDbEIsc0RBQXNEO1FBQ3RELG9EQUFvRDtRQUNwRCxJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFDM0QsTUFBTSxXQUFXLEdBQUcsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsa0JBQWtCLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUM1RixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUU5RCxNQUFNLFlBQVksR0FBRyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsRUFBRSxXQUFXLEVBQUUsS0FBSyxNQUFNLENBQUM7WUFDbkUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQztZQUNqRCxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVqQyxNQUFNLGlCQUFpQixHQUFHLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxFQUFFLFdBQVcsRUFBRSxLQUFLLE1BQU0sQ0FBQztZQUNoRSxDQUFDLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyx5QkFBeUIsQ0FBQztZQUN0RSxDQUFDLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLHlCQUF5QixDQUFDLENBQUM7UUFFNUQsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLEdBQUcsWUFBWSxDQUFDLENBQUM7UUFDNUMsTUFBTSxRQUFRLEdBQUcsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLHFCQUFxQixDQUFDLElBQUksZ0JBQWdCLENBQUM7UUFDdkYsMERBQTBEO1FBQzFELElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU87SUFHdkQsQ0FBQztJQUVELHFCQUFxQixDQUFDLGVBQXVCO1FBQ3pDLE1BQU0sbUJBQW1CLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNyRSxNQUFNLFdBQVcsR0FBRyxrQkFBa0IsZUFBZSxFQUFFLENBQUM7UUFDeEQsTUFBTSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQy9ELGlGQUFpRjtRQUVoRixJQUFJLENBQUMsbUJBQW1CO1lBQUUsT0FBTyxJQUFJLENBQUM7UUFDdEMsTUFBTSxrQkFBa0IsR0FBRyxtQkFBbUIsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFnQixDQUFDO1FBQzlFLE1BQU0saUJBQWlCLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN4RCxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUNsRCxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUNuRCwwQkFBMEI7UUFDMUIsc0ZBQXNGO1FBQ3RGLDZEQUE2RDtRQUM3RCxJQUFJO1FBQ00sSUFBSSxDQUFDLHFCQUFxQixDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDOUMsTUFBTSxJQUFJLEdBQUcsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsOEJBQThCLENBQUMsQ0FBQztRQUVoRixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBb0IsRUFBRSxFQUFFO1lBQ3BELHdCQUF3QjtRQUM1QixDQUFDLENBQUMsQ0FBQztRQUNLLElBQUksQ0FBQyxnQ0FBZ0MsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBRXpELElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFvQixFQUFFLEVBQUU7WUFDMUMsd0JBQXdCO1FBQzVCLENBQUMsQ0FBQyxDQUFDO1FBQ0ssTUFBTSxZQUFZLEdBQUcsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMseUJBQXlCLENBQUMsQ0FBQztRQUNuRixZQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBTyxFQUFFLEVBQUU7WUFDN0IsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUU7Z0JBQ3BCLE9BQU87YUFDVjtZQUVELElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztZQUNmLElBQUksY0FBYyxDQUFDO1lBQ25CLElBQUksRUFBRSxDQUFDLE9BQU8sS0FBSyxRQUFRLEVBQUU7Z0JBQ3pCLEtBQUssR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDO2dCQUVqRCxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDaEQsY0FBYyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7Z0JBQ2pDLGNBQWMsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUM7YUFDL0Q7aUJBQ0ksSUFBSSxFQUFFLENBQUMsT0FBTyxLQUFLLE9BQU8sSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEtBQUssVUFBVSxDQUFDLEVBQUU7Z0JBQ3pELG1DQUFtQztnQkFDbkMsTUFBTSxTQUFTLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQztnQkFDN0IsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFFdkMsNERBQTREO2dCQUM1RCxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDL0MsY0FBYyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsYUFBYSxDQUFDO2dCQUM3QyxjQUFjLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxRQUFRLENBQUM7Z0JBRTFDLHNEQUFzRDtnQkFDdkQsTUFBTSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUN4RCxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQztnQkFDakQscURBQXFEO2dCQUNyRCxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQztnQkFDOUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyw2QkFBNkIsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDNUUsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQywwQkFBMEIsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDekUsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUM7Z0JBQzlDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxhQUFhLEdBQUcsUUFBUSxDQUFDO2dCQUVqRCxzRUFBc0U7Z0JBQ3RFLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ2pELFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQztnQkFDekMsU0FBUyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDO2dCQUMvQixTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7Z0JBQ2hDLFNBQVMsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLGdCQUFnQixDQUFDO2dCQUMxQyxTQUFTLENBQUMsS0FBSyxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7Z0JBQ3BDLHdDQUF3QztnQkFFeEMsNkJBQTZCO2dCQUM3Qiw0Q0FBNEM7Z0JBQzVDLHVCQUF1QjtnQkFDdkIsK0NBQStDO2dCQUMvQyw4REFBOEQ7Z0JBQzlELFFBQVE7Z0JBQ1IsVUFBVTtnQkFDVCxJQUFHLEVBQUUsQ0FBQyxJQUFJLEtBQUssVUFBVSxFQUFFLEVBQUUsV0FBVztvQkFDckMsSUFBSSxTQUFTLEVBQUU7d0JBQ1gsU0FBUyxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDLENBQUMsa0JBQWtCO3dCQUM1RCxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxnQkFBZ0IsQ0FBQzt3QkFDMUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUMsQ0FBQyxtQkFBbUI7d0JBQzlDLFNBQVMsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxDQUFDLGtCQUFrQjt3QkFDbEQsU0FBUyxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO3dCQUNyQyxTQUFTLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7d0JBQ3BDLFNBQVMsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQzt3QkFDbEMsU0FBUyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO3FCQUN2QztpQkFDSjtnQkFFRCxxREFBcUQ7Z0JBQ3JELGNBQWMsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQ3RDLGlCQUFpQixDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQztnQkFFOUMsa0NBQWtDO2dCQUNsQyxNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNoRCxRQUFRLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztnQkFDeEIsUUFBUSxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDLENBQUUsNEJBQTRCO2dCQUNuRSxRQUFRLENBQUMsS0FBSyxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7Z0JBQ3BDLElBQUksU0FBUyxFQUFFO29CQUNYLFFBQVEsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztvQkFDbkMsd0NBQXdDO29CQUN4Qyx1Q0FBdUM7aUJBQzFDO2dCQUNELGNBQWMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDeEM7aUJBQ0k7Z0JBQ0QsbUNBQW1DO2dCQUMzQyxLQUFLLEdBQUcsRUFBRSxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUMsV0FBVyxJQUFJLEVBQUUsQ0FBQztnQkFFekMscUNBQXFDO2dCQUNyQyxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDaEQsY0FBYyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7YUFDNUI7WUFFRCxjQUFjLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxjQUFjLENBQUM7WUFDOUMsMkNBQTJDO1lBQzNDLGNBQWMsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztZQUM3QyxjQUFjLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7WUFDcEMsY0FBYyxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDO1lBQzlDLGNBQWMsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUN0RCw0Q0FBNEM7WUFDNUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1lBQzFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztZQUd4QyxvQ0FBb0M7WUFDN0MsSUFBSSxFQUFFLENBQUMsT0FBTyxLQUFLLE9BQU8sSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEtBQUssT0FBTyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEtBQUssVUFBVSxDQUFDLEVBQUU7Z0JBQzNFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUU7b0JBQ2YsY0FBYyxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsZ0JBQWdCLENBQUM7b0JBQ3JELHVDQUF1QztvQkFDdkMsY0FBYyxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO29CQUN4QyxpR0FBaUc7b0JBQ2pHLHlFQUF5RTtvQkFDekUsY0FBYyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsQ0FBQyx1Q0FBdUM7b0JBQ3pFLGNBQWMsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztvQkFDekMsY0FBYyxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO2lCQUU3QzthQUNKO1lBRUQsd0RBQXdEO1lBQ3hELEVBQUUsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFvQixFQUFFLEVBQUU7WUFDMUMsd0JBQXdCO1FBQzVCLENBQUMsQ0FBQyxDQUFDO1FBRUssTUFBTSxNQUFNLEdBQUcsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDekQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFO1lBQ25CLE1BQU0sUUFBUSxHQUFHLG1CQUFtQixDQUFDLGFBQWEsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO1lBQzVFLElBQUksUUFBUSxZQUFZLGdCQUFnQixFQUFFO2dCQUN0QyxNQUFNLGFBQWEsR0FBRyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDakQsR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsYUFBYSxDQUFDLEtBQUssQ0FBQztnQkFDdEMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsYUFBYSxDQUFDLE1BQU0sQ0FBQzthQUMzQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsaUJBQWlCLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsQ0FBQyxtRUFBbUU7UUFDNUcsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUM7UUFDM0MsaUJBQWlCLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7UUFDekMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUM7UUFDakQsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUM7UUFDakQsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7UUFDcEQsNENBQTRDO1FBSTVDLE1BQU0sZUFBZSxHQUFHLENBQUMsSUFBaUIsRUFBRSxFQUFFO1lBQzFDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBYyxHQUFHLENBQUMsQ0FBQztZQUM1RCxXQUFXLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO2dCQUN2QixNQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBRWxELCtEQUErRDtnQkFDL0Q7b0JBQ0UsYUFBYSxFQUFFLFdBQVcsRUFBRSxhQUFhLEVBQUUsWUFBWTtvQkFDdkQsYUFBYSxFQUFFLGdCQUFnQixFQUFFLE9BQU8sRUFBRSxrQkFBa0I7b0JBQzVELFlBQVksRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0I7b0JBQ2hELFNBQVMsRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsUUFBUTtvQkFDL0QsUUFBUSxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsZUFBZTtpQkFDMUQsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUU7b0JBQ2YsTUFBTSxLQUFLLEdBQUcsYUFBYSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO29CQUNuRCxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUM7b0JBQ2xDLElBQUksS0FBSyxFQUFFO3dCQUNULEVBQUUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztxQkFDbkM7Z0JBQ0gsQ0FBQyxDQUFDLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQztRQUVELGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBRXRDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFvQixFQUFFLEVBQUU7WUFDMUMsd0JBQXdCO1FBQzVCLENBQUMsQ0FBQyxDQUFDO1FBQ0ssNEJBQTRCO1FBQzVCLE1BQU0sY0FBYyxHQUFHLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLGlDQUFpQyxDQUFDLENBQUM7UUFDN0YsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQWUsRUFBRSxFQUFFO1lBQ3ZDLEVBQUUsQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7WUFDNUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDO1lBQ2xDLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQztZQUMvQixFQUFFLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7WUFDM0IsRUFBRSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDO1lBQy9CLEVBQUUsQ0FBQyxLQUFLLENBQUMsYUFBYSxHQUFHLE9BQU8sQ0FBQztZQUNqQyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7WUFDeEIsc0NBQXNDO1lBQ3RDLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQztRQUN0QyxDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sWUFBWSxHQUFHLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3JFLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFnQixFQUFFLEVBQUU7WUFDdEMsR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsYUFBYSxDQUFDO1lBQ2hDLEdBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztZQUM3QixHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7WUFDM0IsR0FBRyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDO1FBQ3BDLENBQUMsQ0FBQyxDQUFDO1FBR0gsTUFBTSxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFDO1FBQ3JHLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQWUsRUFBRSxFQUFFO1lBQzdDLElBQUksQ0FBQyxFQUFFLENBQUMsU0FBUyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFO2dCQUM3QyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUM7Z0JBQzNCLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztnQkFDN0IsRUFBRSxDQUFDLEtBQUssQ0FBQyxhQUFhLEdBQUcsR0FBRyxDQUFDO2dCQUM3Qiw2QkFBNkI7Z0JBQzdCLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLFdBQVcsQ0FBQzthQUNyQztpQkFBSTtnQkFDQSxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7Z0JBQ3hCLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztnQkFDekIsRUFBRSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO2dCQUM3QixFQUFFLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxhQUFhLENBQUM7YUFDN0M7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sU0FBUyxHQUFHLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDdkUsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQWUsRUFBRSxFQUFFO1lBQ2xDLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztZQUN4QixFQUFFLENBQUMsS0FBSyxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUM7WUFDN0IsNkJBQTZCO1lBQzdCLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLFdBQVcsQ0FBQztRQUN0QyxDQUFDLENBQUMsQ0FBQztRQUNFLHdCQUF3QixDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFHakQsZ0dBQWdHO1FBQ2hHLHNGQUFzRjtRQUN0RixNQUFNLHNCQUFzQixHQUFHLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLDZCQUE2QixDQUFDLENBQUM7UUFDakcsc0JBQXNCLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBaUIsRUFBRSxFQUFFO1lBQ2pELDZCQUE2QjtZQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUM7WUFDM0Isc0VBQXNFO1lBQ3RFLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQztRQUVILHdDQUF3QztRQUN4Qyw2RUFBNkU7UUFDN0UsK0NBQStDO1FBQy9DLHFDQUFxQztRQUNyQyxxQ0FBcUM7UUFDckMscUNBQXFDO1FBQ3JDLHlFQUF5RTtRQUN6RSwrRUFBK0U7UUFDL0UsT0FBTztRQUVQLE1BQU0sWUFBWSxHQUFHLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ3pFLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFlLEVBQUUsRUFBRTtZQUNyQyxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUMsQ0FBTSw2QkFBNkI7WUFDckUsRUFBRSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLENBQVksZ0RBQWdEO1lBQ3pGLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxDQUFhLCtCQUErQjtZQUN2RSxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBWSxrQkFBa0I7WUFDMUQsRUFBRSxDQUFDLEtBQUssQ0FBQyxhQUFhLEdBQUcsT0FBTyxDQUFDLENBQU8seUJBQXlCO1lBQ2pFLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztRQUM1QixDQUFDLENBQUMsQ0FBQztRQUVGLHVEQUF1RDtRQUN2RCxNQUFNLFdBQVcsR0FBRyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1FBQ2pGLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFlLEVBQUUsRUFBRTtZQUNyQyxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUMsQ0FBTSw2QkFBNkI7WUFDckUsRUFBRSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLENBQVksZ0RBQWdEO1lBQ3pGLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxDQUFhLCtCQUErQjtZQUN2RSxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBWSxrQkFBa0I7WUFDMUQsRUFBRSxDQUFDLEtBQUssQ0FBQyxhQUFhLEdBQUcsT0FBTyxDQUFDLENBQU8seUJBQXlCO1lBQ2pFLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztZQUN4QixFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsQ0FBWSwrQkFBK0I7WUFDdkUsRUFBRSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDLENBQVksd0NBQXdDO1FBQ25GLENBQUMsQ0FBQyxDQUFDO1FBR0osZUFBZTtRQUdmLDRGQUE0RjtRQUM1RixpQkFBaUI7UUFDakIsbUNBQW1DO1FBRW5DLGlGQUFpRjtRQUNqRixrRkFBa0Y7UUFFbEYsZ0RBQWdEO1FBQ2hELGtEQUFrRDtRQUNsRCxJQUFJO1FBRUosTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGlDQUFpQyxDQUFDLENBQUM7UUFFOUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUN2QixNQUFNLFNBQVMsR0FBRyxPQUFzQixDQUFDO1lBQ3pDLFNBQVMsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQztZQUNoQyxTQUFTLENBQUMsS0FBSyxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7WUFFckMsTUFBTSxPQUFPLEdBQUcsU0FBUyxDQUFDLGFBQWEsQ0FBQyxxQkFBcUIsQ0FBZ0IsQ0FBQztZQUM5RSxNQUFNLFFBQVEsR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLHFCQUFxQixDQUFnQixDQUFDO1lBRS9FLElBQUksT0FBTztnQkFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUM7WUFDM0MsSUFBSSxRQUFRO2dCQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQztRQUNqRCxDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO1FBRS9FLFNBQVMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDeEIsTUFBTSxTQUFTLEdBQUcsT0FBc0IsQ0FBQztZQUN6QyxTQUFTLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUM7WUFDaEMsU0FBUyxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1lBRXJDLE1BQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMscUJBQXFCLENBQWdCLENBQUM7WUFDOUUsTUFBTSxRQUFRLEdBQUcsU0FBUyxDQUFDLGFBQWEsQ0FBQyxxQkFBcUIsQ0FBZ0IsQ0FBQztZQUUvRSxJQUFJLE9BQU87Z0JBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDO1lBQzNDLElBQUksUUFBUTtnQkFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7UUFDSCxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsaUNBQWlDLENBQUMsQ0FBQztRQUUvRSxTQUFTLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ3hCLE1BQU0sU0FBUyxHQUFHLE9BQXNCLENBQUM7WUFDekMsU0FBUyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDO1lBQ2hDLFNBQVMsQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztZQUVyQyxNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLHFCQUFxQixDQUFnQixDQUFDO1lBQzlFLE1BQU0sUUFBUSxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMscUJBQXFCLENBQWdCLENBQUM7WUFFL0UsSUFBSSxPQUFPO2dCQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQztZQUMzQyxJQUFJLFFBQVE7Z0JBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDO1FBQ2pELENBQUMsQ0FBQyxDQUFDO1FBRUgsK0VBQStFO1FBRS9FLHVDQUF1QztRQUN2QyxtREFBbUQ7UUFDbkQsTUFBTTtRQUVOLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO1FBRTdFLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFXLEVBQUUsRUFBRTtZQUM5QixFQUFrQixDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxDQUFDO1FBRUgsZ0ZBQWdGO1FBRWhGLHdDQUF3QztRQUN4QyxtREFBbUQ7UUFDbkQsTUFBTTtRQUNOLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsOEJBQThCO1FBQy9FLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsZ0NBQWdDO1FBQ3BGLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsT0FBTztRQUV6RCxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBb0IsRUFBRSxFQUFFO1lBQzFDLHdCQUF3QjtRQUM1QixDQUFDLENBQUMsQ0FBQztRQUNLLDBDQUEwQztRQUMxQyxNQUFNLGVBQWUsR0FBRyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN0RSxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBb0IsRUFBRSxFQUFFO1lBQzdDLHVFQUF1RTtZQUN2RSw4REFBOEQ7WUFDOUQsT0FBTyxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDLENBQUMsaUNBQWlDO1FBQ3pFLENBQUMsQ0FBQyxDQUFDO1FBRUksMENBQTBDO1FBR2pELG1FQUFtRTtRQUNuRSxNQUFNLDRCQUE0QixHQUFHLENBQUMsT0FBb0IsRUFBRSxRQUFnQixFQUFXLEVBQUU7WUFDckYsTUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQztZQUMzQyxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsQ0FBQyxlQUFlO1lBQzFDLE9BQU8sQ0FBQyxRQUFRLEdBQUcsYUFBYSxHQUFHLFlBQVksQ0FBQyxDQUFDO1FBQ3JELENBQUMsQ0FBQztRQUVGLCtEQUErRDtRQUMvRCw4RkFBOEY7UUFDOUYsK0NBQStDO1FBQy9DLG9DQUFvQztRQUNwQyxNQUFNO1FBRU4sbURBQW1EO1FBQ25ELG9CQUFvQjtRQUNwQiw2Q0FBNkM7UUFDN0MsZ0RBQWdEO1FBRWhELCtDQUErQztRQUMvQyxxRUFBcUU7UUFDckUsb0RBQW9EO1FBQ3BELDBDQUEwQztRQUUxQyxvREFBb0Q7UUFDcEQscURBQXFEO1FBQ3JELCtEQUErRDtRQUMvRCwrQkFBK0I7UUFDL0IseUVBQXlFO1FBQ3pFLDZFQUE2RTtRQUM3RSx3RUFBd0U7UUFDeEUsMkVBQTJFO1FBQzNFLFlBQVk7UUFFWix3REFBd0Q7UUFDeEQsd0RBQXdEO1FBQ3hELGtFQUFrRTtRQUNsRSwwQ0FBMEM7UUFDMUMscURBQXFEO1FBRXJELGdDQUFnQztRQUNoQyx3QkFBd0I7UUFDeEIsZ0NBQWdDO1FBQ2hDLFFBQVE7UUFFUixnREFBZ0Q7UUFDaEQsNkJBQTZCO1FBQzdCLDJCQUEyQjtRQUUzQiwrQ0FBK0M7UUFDL0MsOERBQThEO1FBQzlELHlFQUF5RTtRQUN6RSxvRUFBb0U7UUFDcEUsdUVBQXVFO1FBQ3ZFLFFBQVE7UUFDUixNQUFNO1FBRU4sSUFBSSxDQUFDLHdCQUF3QixDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxPQUFPO1FBQ3pELElBQUksQ0FBQyxlQUFlLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUN4Qyx3RUFBd0U7UUFHNUUsd0VBQXdFO1FBRXhFLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FDckIsZ0NBQWdDO1lBQ2hDLGdDQUFnQztZQUNoQyxvRUFBb0U7WUFDcEUsZ0NBQWdDO1lBQ2hDLGdDQUFnQztZQUNoQyxnREFBZ0Q7WUFDaEQsK0JBQStCO1lBQy9CLCtCQUErQjtZQUMvQiwrQkFBK0I7WUFDL0IsK0JBQStCO1lBQy9CLCtCQUErQjtZQUMvQiwrQkFBK0I7WUFDL0IsK0JBQStCO1lBQy9CLCtCQUErQjtZQUMvQiwrQkFBK0I7WUFDL0IsK0JBQStCO1lBQy9CLCtCQUErQjtZQUMvQiwrQkFBK0I7WUFDL0IsK0JBQStCO1lBQy9CLCtCQUErQjtZQUMvQiwrQkFBK0I7WUFDL0IsK0JBQStCO1lBQy9CLCtCQUErQjtZQUMvQiwrQkFBK0I7WUFDL0IsK0JBQStCO1lBQy9CLCtCQUErQjtZQUMvQiwrQkFBK0I7WUFDL0IsK0JBQStCO1lBQy9CLCtCQUErQjtZQUMvQiwrQkFBK0I7WUFDL0IsK0JBQStCO1lBQy9CLCtCQUErQjtZQUMvQiwrQkFBK0I7WUFDL0IsK0JBQStCO1lBQy9CLCtCQUErQjtZQUMvQiwrQkFBK0I7WUFDL0IsK0JBQStCO1lBQy9CLDREQUE0RDtZQUM1RCw0REFBNEQ7WUFDNUQsdUNBQXVDO1lBQ3ZDLHVDQUF1QztZQUN2Qyx1Q0FBdUM7WUFDdkMsK0JBQStCO1lBQy9CLDhCQUE4QixDQUNqQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNYLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ2hDLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2xDLENBQUMsQ0FBQyxDQUFDO1FBR1AsUUFBUSxDQUFDLGdCQUFnQixDQUNqQiw4QkFBOEIsQ0FFakMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDWCxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNoQyxFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqQyxDQUFDLENBQUMsQ0FBQztRQUVQLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FDakIsK0JBQStCO1lBQy9CLDhCQUE4QixDQUVqQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUVYLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBS04sUUFBUSxDQUFDLGdCQUFnQixDQUFDLCtCQUErQixDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBQ3JFLG1EQUFtRDtZQUMzQyxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNoQyxFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqQyxDQUFDLENBQUMsQ0FBQztRQUVILFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUMzRSxtREFBbUQ7WUFDM0MsRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDaEMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDbEMsQ0FBQyxDQUFDLENBQUM7UUFFRixRQUFRLENBQUMsZ0JBQWdCLENBQUMsOEJBQThCLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDNUUsbURBQW1EO1lBQzNDLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ2hDLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBR0gsUUFBUSxDQUFDLGdCQUFnQixDQUFDLG9DQUFvQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBR3pFLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBRVYsUUFBUSxDQUFDLGdCQUFnQixDQUFDLDhCQUE4QixDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBRzVELEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBR0gsUUFBUSxDQUFDLGdCQUFnQixDQUFDLHVDQUF1QyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBQzVFLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ2hDLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2xDLENBQUMsQ0FBQyxDQUFDO1FBQ0gsUUFBUSxDQUFDLGdCQUFnQixDQUFDLDhCQUE4QixDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBQ25FLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ2hDLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2xDLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQW9CLEVBQUUsRUFBRTtZQUMxQyx3QkFBd0I7UUFDNUIsQ0FBQyxDQUFDLENBQUM7UUFDSyxJQUFJLENBQUMsbUJBQW1CLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUM1QyxJQUFJLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztRQUMvQixJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUMzQixJQUFJLENBQUMscUJBQXFCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUM5QyxJQUFJLENBQUMsaUNBQWlDLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUMxRCxJQUFJLENBQUMsNEJBQTRCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUNyRCxJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsOEJBQThCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUN2RCxJQUFJLENBQUMsMEJBQTBCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsdUJBQXVCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUNoRCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsc0JBQXNCLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUcvRSxRQUFRLENBQUMsZ0JBQWdCLENBQUMsOEJBQThCLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtZQUM1RSxNQUFNLFdBQVcsR0FBRyxFQUFFLENBQUM7WUFFdkIsMkJBQTJCO1lBQzNCLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO2dCQUN2RSxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxDQUFDO2dCQUV2QyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDMUQsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDeEI7WUFDSCxDQUFDLENBQUMsQ0FBQztZQUVILDZDQUE2QztZQUM3QyxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2hELFNBQVMsQ0FBQyxTQUFTLEdBQUcsc0JBQXNCLENBQUM7WUFFN0MsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsRUFBRSxFQUFFO2dCQUNoQyxNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUMvQyxRQUFRLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQztnQkFDakMsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDO2dCQUNqQyxzQ0FBc0M7Z0JBQ3RDLFFBQVEsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztnQkFDbkMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNsQyxDQUFDLENBQUMsQ0FBQztZQUVILDJCQUEyQjtZQUMzQixJQUFJLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUMxQixPQUFPLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQ2hDO2lCQUFNO2dCQUNMLHdEQUF3RDtnQkFDeEQsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO2FBQ2xCO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsb0JBQW9CLENBQUM7WUFDeEIscUNBQXFDO1lBQ3JDLHFDQUFxQztZQUNyQyxxQ0FBcUM7U0FDdEMsQ0FBQyxDQUFDO1FBRUssTUFBTSxFQUFFLEdBQUcsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDNUQsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQW9CLEVBQUUsRUFBRTtZQUNoQyxPQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7UUFDeEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLEdBQUcsR0FBRyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO1FBQ3BGLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFvQixFQUFFLEVBQUU7WUFDakMsT0FBTyxDQUFDLEtBQUssQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO1FBQ3hDLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxHQUFHLEdBQUcsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsK0JBQStCLENBQUMsQ0FBQztRQUNoRixHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBb0IsRUFBRSxFQUFFO1lBQ2pDLE9BQU8sQ0FBQyxLQUFLLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztRQUN4QyxDQUFDLENBQUMsQ0FBQztRQUVILHVDQUF1QztRQUN2QyxNQUFNLE9BQU8sR0FBRyxDQUFDLDhCQUE4QixFQUFFLDhCQUE4QixFQUFFLDhCQUE4QixDQUFDLENBQUM7UUFDakgsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGlCQUFpQixFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUU5RCxNQUFNLE9BQU8sR0FBRyxDQUFDLDhCQUE4QixFQUFFLDhCQUE4QixFQUFFLDhCQUE4QixFQUFFLDhCQUE4QixDQUFDLENBQUM7UUFDakosSUFBSSxDQUFDLG9CQUFvQixDQUFDLGlCQUFpQixFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUU5RCxNQUFNLE9BQU8sR0FBRyxDQUFDLCtCQUErQixFQUFFLCtCQUErQixDQUFDLENBQUM7UUFDbkYsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGlCQUFpQixFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUV0RSxJQUFJLENBQUMsb0JBQW9CLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUk3QyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBb0IsRUFBRSxFQUFFO1lBQ2xDLDBCQUEwQjtRQUM5QixDQUFDLENBQUMsQ0FBQztRQUVLLE9BQU8saUJBQWlCLENBQUM7SUFDN0IsQ0FBQztJQUVPLG9CQUFvQixDQUFDLGlCQUFpQixHQUFHLEVBQUU7UUFDckQsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUU7WUFDdEMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLElBQUksU0FBUyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtnQkFDN0QsTUFBTSxXQUFXLEdBQUcsRUFBRSxDQUFDO2dCQUV2Qix1QkFBdUI7Z0JBQ3ZCLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtvQkFDbEQsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQztvQkFFdkMsSUFDRSxJQUFJO3dCQUNKLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQzt3QkFDNUIsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQzt3QkFDckIsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFDckI7d0JBQ0EsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztxQkFDeEI7Z0JBQ0gsQ0FBQyxDQUFDLENBQUM7Z0JBRUgsSUFBSSxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtvQkFDMUIsK0JBQStCO29CQUMvQixNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUM3QyxNQUFNLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztvQkFFekIsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDN0MsTUFBTSxDQUFDLFNBQVMsR0FBRyxXQUFXLENBQUM7b0JBRS9CLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQzVDLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztvQkFDOUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDO29CQUUzQixXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUU7d0JBQ2hDLE1BQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQzFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQzt3QkFFaEMsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDM0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsWUFBWSxDQUFDO3dCQUNsQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUM7d0JBQzNCLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQzt3QkFDL0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO3dCQUM3QixJQUFJLENBQUMsV0FBVyxHQUFHLFNBQVMsQ0FBQzt3QkFFN0IsR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQzt3QkFDdEIsS0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDekIsQ0FBQyxDQUFDLENBQUM7b0JBRUgsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDMUIsTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztvQkFFM0IsT0FBTyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztpQkFDN0I7cUJBQU07b0JBQ0wsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsd0JBQXdCO2lCQUMzQztZQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsb0JBQW9CLENBQUMsU0FBc0I7UUFDdkMsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25ELE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDbkIsSUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFDO1lBQ3BCLEtBQUssQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUM1QixJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssSUFBSSxDQUFDLFlBQVksSUFBSyxJQUFnQixDQUFDLE9BQU8sS0FBSyxNQUFNLEVBQUU7b0JBQzdFLE9BQU8sR0FBRyxJQUFJLENBQUM7aUJBQ2xCO1lBQ0wsQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLE9BQU8sRUFBRTtnQkFDVCxpQ0FBaUM7Z0JBQ2pDLEtBQUssQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO29CQUM1QixJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxFQUFFO3dCQUM5RCw0QkFBNEI7d0JBQzVCLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7d0JBQzVDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQzt3QkFDcEMsS0FBSyxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7cUJBQ2xDO2dCQUNMLENBQUMsQ0FBQyxDQUFDO2FBQ047UUFDTCxDQUFDLENBQUMsQ0FBQztRQUNILDhFQUE4RTtJQUNsRixDQUFDO0lBR1csMEJBQTBCLENBQUMsUUFBcUI7UUFDMUQsTUFBTSxlQUFlLEdBQUc7WUFDdEIsK0JBQStCO2dCQUMvQix1Q0FBdUM7Z0JBQ3ZDLDhCQUE4QjtZQUM5QixlQUFlO1NBQ2hCLENBQUM7UUFFRixNQUFNLGVBQWUsR0FBRyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBRTdFLGVBQWUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDaEMsTUFBTSxlQUFlLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1lBQzdELElBQUksQ0FBQyxlQUFlO2dCQUFFLE9BQU87WUFFN0IsTUFBTSxJQUFJLEdBQUcsRUFBRSxDQUFDO1lBRWhCLE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBRW5FLGFBQWEsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ2hDLE1BQU0sR0FBRyxHQUFzQyxFQUFFLENBQUM7Z0JBRWxELE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUNwRCxFQUFFLENBQUMsUUFBUSxLQUFLLENBQUM7b0JBQ2pCLEVBQUUsQ0FBQyxTQUFTO29CQUNaLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FDaEUsQ0FBQztnQkFFRixNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUNyQixNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLENBQUM7b0JBQ3RELElBQUksQ0FBQyxLQUFLO3dCQUFFLE9BQU8sQ0FBQyxtREFBbUQ7b0JBRXZFLE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO29CQUU3QyxNQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksV0FBVyxDQUFDO29CQUNuRyxNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEdBQUcsQ0FBQztvQkFFdkUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO2dCQUM1QixDQUFDLENBQUMsQ0FBQztnQkFFSCxzRUFBc0U7Z0JBQ3RFLElBQUksR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDO29CQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDckMsQ0FBQyxDQUFDLENBQUM7WUFHQyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUNuQixNQUFNLEtBQUssR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQy9CLGVBQWUsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDcEM7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILFNBQVMsVUFBVSxDQUFDLElBQUk7WUFDdEIsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7WUFDaEMsTUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7WUFDbEQsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM3QyxJQUFJLFdBQVcsS0FBSyxJQUFJLElBQUksWUFBWSxLQUFLLElBQUksRUFBRTtnQkFDekMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO2FBQzVCO2lCQUFNLElBQUksV0FBVyxLQUFLLElBQUksSUFBSSxZQUFZLEtBQUssR0FBRyxFQUFFO2dCQUNyRCxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7YUFDN0I7aUJBQUk7Z0JBQ0QsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO2FBQzdCO1lBQ1QsS0FBSyxDQUFDLEtBQUssQ0FBQyxjQUFjLEdBQUcsVUFBVSxDQUFDO1lBQ3hDLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQztZQUM5QixLQUFLLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7WUFFOUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDakIsTUFBTSxFQUFFLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDeEMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDakIsTUFBTSxFQUFFLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDeEMsRUFBRSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQztvQkFDakMsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUM7b0JBQ2xDLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxDQUFDLE9BQU87b0JBQ3JDLDZDQUE2QztvQkFFN0MsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO29CQUN6QixFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNyQixDQUFDLENBQUMsQ0FBQztnQkFDSCxLQUFLLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3hCLENBQUMsQ0FBQyxDQUFDO1lBRUgsT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDO0lBQ0gsQ0FBQztJQUVXLHVCQUF1QixDQUFDLGlCQUFpQztRQUM3RCxNQUFNLFlBQVksR0FBRyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FDbkQsbUNBQW1DO1FBQ25DLDZEQUE2RDtTQUNoRSxDQUFDO1FBQ0YsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQWlCLEVBQUUsRUFBRTtZQUN2QyxxQ0FBcUM7WUFDckMsK0JBQStCO1lBQy9CLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxHQUFHLEdBQUcsQ0FBQztRQUNqQyxDQUFDLENBQUMsQ0FBQztRQUNILE1BQU0sSUFBSSxHQUFHLGlCQUFpQixDQUFDLGdCQUFnQixDQUMzQyxvQ0FBb0MsQ0FBQyxDQUFDO1FBQzFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFpQixFQUFFLEVBQUU7WUFDL0IsNkJBQTZCO1lBQzdCLCtCQUErQjtZQUMvQixJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsR0FBRyxZQUFZLENBQUM7UUFDNUMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBR0MsOEJBQThCLENBQUMsYUFBMEI7UUFDckQsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FDbEMseURBQXlELENBQzdDLENBQUM7UUFFakIsSUFBSSxPQUFPLEVBQUU7WUFDVCxPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBUyxTQUFTO1lBQ3BFLE9BQU8sQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLG1CQUFtQixFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUUsYUFBYTtZQUN4RSxPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FDakQ7SUFDWCxDQUFDO0lBRVcsb0JBQW9CLENBQUMsaUJBQWlDLEVBQUUsT0FBaUIsRUFBRSxNQUFjO1FBQzdGLE1BQU0sUUFBUSxHQUFHLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUN4RSxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBZSxFQUFFLEVBQUU7WUFDakMsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO1FBQ2hDLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUNPLGdDQUFnQyxDQUFDLGFBQTBCO1FBQy9ELE1BQU0sU0FBUyxHQUFHLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBRXRFLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDekIsb0RBQW9EO1lBQ3BELE1BQU0sY0FBYyxHQUFjLEVBQUUsQ0FBQztZQUNyQyxRQUFRLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDaEMsSUFDSSxLQUFLLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxZQUFZO29CQUNwQyxDQUFFLEtBQWlCLENBQUMsT0FBTyxDQUFDLGlDQUFpQyxDQUFDLEVBQ2hFO29CQUNFLGNBQWMsQ0FBQyxJQUFJLENBQUMsS0FBZ0IsQ0FBQyxDQUFDO2lCQUN6QztZQUNMLENBQUMsQ0FBQyxDQUFDO1lBRUgsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUMvRCxNQUFNLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUVyRSxJQUFJLFlBQVksR0FBMEIsSUFBSSxDQUFDO1lBRS9DLElBQUksY0FBYyxFQUFFO2dCQUNoQixpREFBaUQ7Z0JBQ2pELE1BQU0sV0FBVyxHQUFHLGNBQWMsQ0FBQyxhQUFhLENBQUMsbUJBQW1CLENBQUMsQ0FBQztnQkFDdEUsTUFBTSxZQUFZLEdBQUksV0FBa0MsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUM7Z0JBRTVFLE1BQU0sTUFBTSxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxxQkFBcUIsQ0FBaUMsQ0FBQztnQkFDdEcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNO29CQUFFLE9BQU87Z0JBRTNCLE1BQU0sT0FBTyxHQUF5RCxFQUFFLENBQUM7Z0JBQ3pFLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7b0JBQ25CLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUM7b0JBQ3pCLE1BQU0sWUFBWSxHQUFHLGNBQWMsQ0FBQyxhQUFhLENBQUMsY0FBYyxPQUFPLElBQUksQ0FBQyxDQUFDO29CQUM3RSxNQUFNLEtBQUssR0FBSSxZQUFtQyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDO29CQUNyRixPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztnQkFDeEUsQ0FBQyxDQUFDLENBQUM7Z0JBRUgsWUFBWSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzdDLFlBQVksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUV6QyxNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFO29CQUNsQyxNQUFNLE1BQU0sR0FBRyxHQUFHLENBQUM7b0JBQ25CLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRTt3QkFDYixPQUFPO2dFQUNpQyxNQUFNLHNCQUFzQixHQUFHLENBQUMsS0FBSzsyQkFDMUUsQ0FBQztxQkFDUDt5QkFBTTt3QkFDSCxPQUFPO2tDQUNHLE1BQU0sZUFBZSxHQUFHLENBQUMsS0FBSzsyQkFDckMsQ0FBQztxQkFDUDtnQkFDTCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBRVosTUFBTSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO2dCQUNyRixNQUFNLGNBQWMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFFbkUsd0VBQXdFO2dCQUN4RSxJQUFJLGtCQUFrQixHQUFHLEVBQUUsQ0FBQztnQkFDNUIsTUFBTSxxQkFBcUIsR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO29CQUNyRCx1RUFBdUU7b0JBQ3ZFLE9BQU8sQ0FDSCxJQUFJLENBQUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxLQUFLLE9BQU87d0JBQ3ZDLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUUsS0FBSyxZQUFZLENBQUMsQ0FDOUMsQ0FBQztnQkFDTixDQUFDLENBQUMsQ0FBQztnQkFDSCxJQUFJLFlBQVksSUFBSSxDQUFDLHFCQUFxQixFQUFFO29CQUN4QyxrQkFBa0IsR0FBRyxrQ0FBa0MsY0FBYyxhQUFhLFlBQVksaUJBQWlCLENBQUM7aUJBQ25IO2dCQUVELFlBQVksQ0FBQyxTQUFTLEdBQUc7a0JBQ3ZCLGtCQUFrQjs7c0JBRWQsV0FBVzs7YUFFcEIsQ0FBQztnQkFDRSxZQUFZLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUM7Z0JBQzdDLFlBQVksQ0FBQyxLQUFLLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQztnQkFFekMsTUFBTSxVQUFVLEdBQUc7b0JBQ2YsK0JBQStCO29CQUMvQiwrQkFBK0I7b0JBQy9CLCtCQUErQjtvQkFDL0IsK0JBQStCO29CQUMvQiwrQkFBK0I7b0JBQy9CLCtCQUErQjtpQkFDbEMsQ0FBQztnQkFFRixJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFO29CQUN0RSxNQUFNLFlBQVksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNuRCxZQUFZLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQztvQkFDcEMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztvQkFFdkMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztpQkFDdEM7YUFHSjtpQkFBTSxJQUFJLGlCQUFpQixFQUFFO2dCQUMxQixNQUFNLFVBQVUsR0FBRyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyx1QkFBdUIsQ0FBaUMsQ0FBQztnQkFDL0csTUFBTSxPQUFPLEdBQXlELEVBQUUsQ0FBQztnQkFDekUsVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtvQkFDMUIsTUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLEVBQUUsQ0FBQztvQkFDL0IsTUFBTSxTQUFTLEdBQUcsaUJBQWlCLENBQUMsYUFBYSxDQUFDLDhCQUE4QixVQUFVLFNBQVMsQ0FBQyxDQUFDO29CQUNyRyxNQUFNLEtBQUssR0FBRyxTQUFTLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxJQUFJLFFBQVEsQ0FBQyxLQUFLLENBQUM7b0JBQy9ELE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO2dCQUM5RSxDQUFDLENBQUMsQ0FBQztnQkFFSCxZQUFZLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDN0MsWUFBWSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQ3pDLE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUU7b0JBQ2xDLE1BQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO29CQUN2QyxPQUFPLGlFQUFpRSxNQUFNLGVBQWUsR0FBRyxDQUFDLEtBQUssaUJBQWlCLENBQUM7Z0JBQzVILENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFFWixZQUFZLENBQUMsU0FBUyxHQUFHOztzQkFFbkIsV0FBVzs7YUFFcEIsQ0FBQztnQkFDRSxZQUFZLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUM7Z0JBQzdDLFlBQVksQ0FBQyxLQUFLLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQzthQUM1QztZQUVELElBQUksWUFBWSxFQUFFO2dCQUNkLHNEQUFzRDtnQkFDdEQsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGVBQWUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO2dCQUMxRSx5REFBeUQ7Z0JBQ3pELFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO2dCQUU3RSx1RkFBdUY7Z0JBQ3ZGLGdFQUFnRTtnQkFDaEUsY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDMUIsWUFBWSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDN0UsQ0FBQyxDQUFDLENBQUM7Z0JBRUgsUUFBUSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQzthQUN0QztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNqRCxFQUFrQixDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDO1lBQ25ELEVBQWtCLENBQUMsS0FBSyxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUM7UUFDcEQsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBQ0wsNkVBQTZFO0lBQzdFLGlGQUFpRjtJQUVqRiwwQ0FBMEM7SUFDMUMsOEVBQThFO0lBQzlFLG9GQUFvRjtJQUdwRix3QkFBd0I7SUFDeEIsd0RBQXdEO0lBQ3hELDZFQUE2RTtJQUM3RSxtRkFBbUY7SUFFbkYsNkdBQTZHO0lBQzdHLGtDQUFrQztJQUVsQyxnRkFBZ0Y7SUFFaEYsZ0NBQWdDO0lBQ2hDLHFDQUFxQztJQUNyQyx5Q0FBeUM7SUFFekMsb0NBQW9DO0lBQ3BDLHdGQUF3RjtJQUN4RiwwRkFBMEY7SUFFMUYsbURBQW1EO0lBQ25ELFVBQVU7SUFFViwwREFBMEQ7SUFDMUQsZ0RBQWdEO0lBRWhELCtDQUErQztJQUMvQyw4QkFBOEI7SUFDOUIsNkJBQTZCO0lBQzdCLDZFQUE2RTtJQUM3RSwwR0FBMEc7SUFDMUcsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtJQUNuQiw2RUFBNkU7SUFDN0UscUVBQXFFO0lBQ3JFLHVCQUF1QjtJQUN2QixZQUFZO0lBQ1osbUJBQW1CO0lBRW5CLDRGQUE0RjtJQUM1RixrRkFBa0Y7SUFDbEYsb0VBQW9FO0lBRXBFLGdEQUFnRDtJQUNoRCw4Q0FBOEM7SUFDOUMsdUdBQXVHO0lBQ3ZHLGdCQUFnQjtJQUVoQixpQ0FBaUM7SUFDakMsZ0NBQWdDO0lBQ2hDLDJDQUEyQztJQUMzQyw2QkFBNkI7SUFDN0IsaUJBQWlCO0lBQ2pCLFNBQVM7SUFFVCxvREFBb0Q7SUFDcEQsZ0RBQWdEO0lBQ2hELDBDQUEwQztJQUMxQyxpQ0FBaUM7SUFDakMsZ0VBQWdFO0lBQ2hFLGtJQUFrSTtJQUVsSSx5RUFBeUU7SUFDekUsNEZBQTRGO0lBRTVGLG1EQUFtRDtJQUNuRCxvREFBb0Q7SUFDcEQsd0RBQXdEO0lBQ3hELHNEQUFzRDtJQUN0RCw0SEFBNEg7SUFDNUgsNkVBQTZFO0lBQzdFLCtEQUErRDtJQUMvRCxzQkFBc0I7SUFFdEIsNERBQTREO0lBQzVELHNFQUFzRTtJQUN0RSw0REFBNEQ7SUFFNUQsOERBQThEO0lBQzlELDRHQUE0RztJQUM1Ryw0UEFBNFA7SUFDNVAsa0NBQWtDO0lBRWxDLDJEQUEyRDtJQUMzRCwwREFBMEQ7SUFDMUQsMElBQTBJO0lBQzFJLDJCQUEyQjtJQUUzQiw2Q0FBNkM7SUFDN0MsdURBQXVEO0lBQ3ZELHFDQUFxQztJQUNyQyw2QkFBNkI7SUFDN0IscUJBQXFCO0lBQ3JCLGdFQUFnRTtJQUNoRSw0REFBNEQ7SUFDNUQsc0RBQXNEO0lBQ3RELGdCQUFnQjtJQUNoQixjQUFjO0lBRWQsbUVBQW1FO0lBQ25FLG1FQUFtRTtJQUNuRSwrREFBK0Q7SUFDL0QsY0FBYztJQUNkLFFBQVE7SUFJSSw0QkFBNEIsQ0FBQyxTQUFzQjtRQUM3RCxNQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUN4QyxNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUUxQyxJQUFJLFdBQVcsS0FBSyxJQUFJLElBQUksWUFBWSxLQUFLLElBQUksRUFBRTtZQUNqRCxnREFBZ0Q7WUFDaEQsZ0RBQWdEO1lBRWhELDRDQUE0QztTQUU3QzthQUFNLElBQUksV0FBVyxLQUFLLElBQUksSUFBSSxZQUFZLEtBQUssR0FBRyxFQUFFO1lBQ3ZELG1DQUFtQztZQUNuQywrQ0FBK0M7WUFFL0MsNENBQTRDO1NBRTdDO2FBQU07WUFDTCw0Q0FBNEM7WUFDNUMsNENBQTRDO1lBRTVDLDRCQUE0QjtTQUM3QjtJQUNILENBQUM7SUFHRCxrREFBa0Q7SUFDbEQsOEVBQThFO0lBRTlFLDBEQUEwRDtJQUMxRCx3REFBd0Q7SUFDeEQsZ0RBQWdEO0lBQ2hELGtEQUFrRDtJQUNsRCw0Q0FBNEM7SUFDNUMsd0NBQXdDO0lBQ3hDLHFDQUFxQztJQUVyQyxrREFBa0Q7SUFDbEQsa0RBQWtEO0lBQ2xELHdEQUF3RDtJQUN4RCwyQkFBMkI7SUFFM0IsNEJBQTRCO0lBQzVCLG1CQUFtQjtJQUNuQixzREFBc0Q7SUFDdEQsMEJBQTBCO0lBQzFCLDREQUE0RDtJQUM1RCwyREFBMkQ7SUFDM0QseURBQXlEO0lBQ3pELG9DQUFvQztJQUVwQyw2Q0FBNkM7SUFDN0Msd0RBQXdEO0lBQ3hELG1EQUFtRDtJQUNuRCxxREFBcUQ7SUFDckQsd0NBQXdDO0lBQ3hDLDZDQUE2QztJQUM3Qyw4Q0FBOEM7SUFDOUMseUNBQXlDO0lBQ3pDLDJDQUEyQztJQUMzQyx3REFBd0Q7SUFDeEQseUNBQXlDO0lBQ3pDLDJDQUEyQztJQUMzQyxjQUFjO0lBRWQsNENBQTRDO0lBQzVDLDBDQUEwQztJQUMxQyxVQUFVO0lBQ1YsUUFBUTtJQUVSLHNCQUFzQjtJQUN0QixtQkFBbUI7SUFDbkIsNEVBQTRFO0lBQzVFLG9GQUFvRjtJQUNwRixXQUFXO0lBRVgsMENBQTBDO0lBQzFDLHVEQUF1RDtJQUN2RCxrREFBa0Q7SUFFbEQsNkNBQTZDO0lBQzdDLHdEQUF3RDtJQUN4RCxtREFBbUQ7SUFDbkQseUNBQXlDO0lBQ3pDLDJDQUEyQztJQUMzQyw4Q0FBOEM7SUFDOUMsd0RBQXdEO0lBQ3hELHlDQUF5QztJQUN6Qyx1Q0FBdUM7SUFDdkMsY0FBYztJQUVkLHdDQUF3QztJQUV4QyxxQ0FBcUM7SUFDckMsNENBQTRDO0lBQzVDLDZEQUE2RDtJQUM3RCw0REFBNEQ7SUFDNUQsNkNBQTZDO0lBQzdDLDZEQUE2RDtJQUM3RCw0Q0FBNEM7SUFDNUMsMkNBQTJDO0lBQzNDLCtDQUErQztJQUMvQyw4Q0FBOEM7SUFDOUMsWUFBWTtJQUNaLFlBQVk7SUFDWixRQUFRO0lBRVIsb0RBQW9EO0lBQ3BELHFEQUFxRDtJQUNyRCwrREFBK0Q7SUFDL0QsMERBQTBEO0lBQzFELDRDQUE0QztJQUU1QyxpRUFBaUU7SUFDakUseUVBQXlFO0lBQ3pFLHlEQUF5RDtJQUN6RCxVQUFVO0lBQ1Ysc0RBQXNEO0lBQ3RELFFBQVE7SUFFUixpREFBaUQ7SUFDakQsMkNBQTJDO0lBQzNDLHlEQUF5RDtJQUN6RCxtREFBbUQ7SUFDbkQsMkRBQTJEO0lBQzNELG9DQUFvQztJQUNwQyxzQ0FBc0M7SUFDdEMseUNBQXlDO0lBQ3pDLG1EQUFtRDtJQUNuRCxvQ0FBb0M7SUFDcEMsb0NBQW9DO0lBQ3BDLDZCQUE2QjtJQUM3QixZQUFZO0lBRVosd0NBQXdDO0lBQ3hDLFFBQVE7SUFFUixzQ0FBc0M7SUFDdEMsdURBQXVEO0lBQ3ZELFFBQVE7SUFDUixJQUFJO0lBR0osaUNBQWlDLENBQUMsU0FBc0I7UUFDaEQsTUFBTSxjQUFjLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFFbEYsdUZBQXVGO1FBQ3ZGLDZFQUE2RTtRQUM3RSxxQkFBcUI7UUFDckIsK0NBQStDO1FBQy9DLCtDQUErQztRQUMvQyxRQUFRO1FBQ1IsT0FBTztRQUdDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUF1QixFQUFFLEVBQUU7WUFDL0MsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNqRCxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUM7WUFDekMsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7WUFDeEMsTUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7WUFFMUMsSUFBSSxXQUFXLEtBQUssSUFBSSxJQUFJLFlBQVksS0FBSyxJQUFJLEVBQUU7Z0JBQ2hELFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQzthQUMvQjtpQkFBTSxJQUFJLFdBQVcsS0FBSyxJQUFJLElBQUksWUFBWSxLQUFLLEdBQUcsRUFBRTtnQkFDckQsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO2FBQ2hDO2lCQUFJO2dCQUNELFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQzthQUNoQztZQUlELFFBQVEsQ0FBQyxLQUFLLENBQUMsY0FBYyxHQUFHLFVBQVUsQ0FBQztZQUMzQyxRQUFRLENBQUMsS0FBSyxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUM7WUFDckMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDO1lBRWpDLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDM0MsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUUzQyxlQUFlO1lBQ2YsSUFBSSxLQUFLLEVBQUU7Z0JBQ1AsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDakQsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDN0MsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsb0JBQW9CLENBQUM7Z0JBQzlDLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQztnQkFFaEIsSUFBSSxVQUFVLEVBQUU7b0JBQ1osTUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDaEQsT0FBTyxHQUFHLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUM7b0JBQ25ELFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFlLEVBQUUsRUFBRTt3QkFDMUQsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQzt3QkFDM0MsS0FBSyxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO3dCQUN0QyxLQUFLLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxTQUFTLENBQUM7d0JBQ3hDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQzt3QkFDOUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO3dCQUNoQyxLQUFLLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7d0JBQ2pDLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQzt3QkFDNUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDO3dCQUM5QixLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxHQUFHLEVBQUUsR0FBRyxPQUFPLEdBQUcsQ0FBQzt3QkFDdkMsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO3dCQUM1QixVQUFVLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNsQyxDQUFDLENBQUMsQ0FBQztvQkFDSCxRQUFRLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDO29CQUNqQyxRQUFRLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2lCQUNsQzthQUNKO1lBRUQsaUJBQWlCO1lBQ2pCLElBQUksS0FBSyxFQUFFO2dCQUNQLE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ2pELE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFO29CQUMvRCxtREFBbUQ7b0JBQ25ELE1BQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7b0JBQ25ELE9BQU8sR0FBRyxDQUFDLE1BQU0sSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO2dCQUNoRSxDQUFDLENBQUMsQ0FBQztnQkFFSCxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLFFBQVEsRUFBRSxFQUFFO29CQUMzQixNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUM1QyxNQUFNLE9BQU8sR0FBRyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDO29CQUVsRCxHQUFHLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBZSxFQUFFLEVBQUU7d0JBQ25ELE1BQU0sS0FBSyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7d0JBQ2xDLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7d0JBQzNDLEtBQUssQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO3dCQUN4QixLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7d0JBQzVCLEtBQUssQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQzt3QkFDOUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO3dCQUNqQyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxHQUFHLEVBQUUsR0FBRyxPQUFPLEdBQUcsQ0FBQzt3QkFDdkMsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO3dCQUM1QixNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUM5QixDQUFDLENBQUMsQ0FBQztvQkFFSCxRQUFRLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUU3QixtREFBbUQ7b0JBQ25ELElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO3dCQUM1QixNQUFNLFVBQVUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO3dCQUNoRCxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO3dCQUMvQyxTQUFTLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDO3dCQUMzRCxTQUFTLENBQUMsS0FBSyxDQUFDLFlBQVksR0FBRyxnQkFBZ0IsQ0FBQzt3QkFDaEQsU0FBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO3dCQUMvQixTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7d0JBQzlCLFVBQVUsQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLE9BQU8sQ0FBQzt3QkFDM0MsU0FBUyxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDO3dCQUMxQyxVQUFVLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDO3dCQUNsQyxRQUFRLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDO3FCQUNwQztnQkFDTCxDQUFDLENBQUMsQ0FBQztnQkFFSCw2Q0FBNkM7Z0JBQ3pELE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzlDLE1BQU0sWUFBWSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzFDLElBQUksV0FBVyxHQUFHLFlBQVksRUFBRSxrQkFBa0IsQ0FBQztnQkFDbkQsSUFBSSxZQUFZLEdBQWtCLEVBQUUsQ0FBQztnQkFFckMsT0FBTyxXQUFXLElBQUksWUFBWSxDQUFDLE1BQU0sR0FBRyxPQUFPLEVBQUU7b0JBQ25ELElBQUksV0FBVyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsS0FBSyxLQUFLLEVBQUU7d0JBQy9DLFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBMEIsQ0FBQyxDQUFDO3FCQUMvQztvQkFDRCxXQUFXLEdBQUcsV0FBVyxDQUFDLGtCQUFrQixDQUFDO2lCQUM5QztnQkFFRCxJQUFJLFlBQVksQ0FBQyxNQUFNLEtBQUssT0FBTyxFQUFFO29CQUNuQyxZQUFZLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO3dCQUM5QixNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO3dCQUM5QyxNQUFNLEVBQUUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO3dCQUN4QyxFQUFFLENBQUMsU0FBUyxHQUFHLEtBQUssRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO3dCQUNoRCxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7d0JBQ3pCLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQzt3QkFDM0IsRUFBRSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO3dCQUM3QixFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7d0JBQzlCLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsRUFBRSxHQUFHLE9BQU8sR0FBRyxDQUFDO3dCQUNwQyxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7d0JBQ3pCLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQ3pCLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztvQkFDcEIsQ0FBQyxDQUFDLENBQUM7b0JBRUgsUUFBUSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDaEM7Z0JBRVcsUUFBUSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUNsQztZQUtULEtBQUssQ0FBQyxVQUFVLEVBQUUsWUFBWSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUV4Qyx5QkFBeUI7WUFDMUIsbURBQW1EO1FBQ3RELENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FDekMseURBQXlELENBQzVELENBQUM7UUFFRixJQUFJLGNBQWMsRUFBRTtZQUNmLGNBQThCLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsQ0FBQywwQkFBMEI7U0FDdkY7UUFFRCxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUN6Qyx5REFBeUQsQ0FDNUQsQ0FBQztRQUVGLElBQUksY0FBYyxFQUFFO1lBQ2YsY0FBOEIsQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxDQUFDLDBCQUEwQjtTQUN2RjtJQUNMLENBQUM7SUFFRCxxQkFBcUIsQ0FBQyxTQUFzQjtRQUN4QywyRUFBMkU7UUFFbkYsTUFBTSxjQUFjLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUNsRix3RUFBd0U7YUFDdkUsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQ2QsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FDdEMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FDdkMsQ0FDRixDQUFDO1FBR0ksY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQXVCLEVBQUUsRUFBRTtZQUMvQyxNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2pELFFBQVEsQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLE9BQU8sQ0FBQztZQUN6QyxNQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztZQUN4QyxNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztZQUUxQyxJQUFJLFdBQVcsS0FBSyxJQUFJLElBQUksWUFBWSxLQUFLLElBQUksRUFBRTtnQkFDaEQsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO2FBQy9CO2lCQUFNLElBQUksV0FBVyxLQUFLLElBQUksSUFBSSxZQUFZLEtBQUssR0FBRyxFQUFFO2dCQUNyRCxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7YUFDaEM7aUJBQUk7Z0JBQ0QsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO2FBQ2hDO1lBSUQsUUFBUSxDQUFDLEtBQUssQ0FBQyxjQUFjLEdBQUcsVUFBVSxDQUFDO1lBQzNDLFFBQVEsQ0FBQyxLQUFLLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQztZQUNyQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUM7WUFFakMsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUMzQyxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRTNDLGVBQWU7WUFDZixJQUFJLEtBQUssRUFBRTtnQkFDUCxNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNqRCxNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUM3QyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxvQkFBb0IsQ0FBQztnQkFDOUMsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dCQUVoQixJQUFJLFVBQVUsRUFBRTtvQkFDWixNQUFNLFVBQVUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUNoRCxPQUFPLEdBQUcsVUFBVSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQztvQkFDbkQsVUFBVSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQWUsRUFBRSxFQUFFO3dCQUMxRCxNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO3dCQUMzQyxLQUFLLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7d0JBQ3RDLEtBQUssQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLFNBQVMsQ0FBQzt3QkFDeEMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDO3dCQUM5QixLQUFLLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7d0JBQ2hDLEtBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQzt3QkFDakMsS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO3dCQUM1QixLQUFLLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7d0JBQzlCLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsRUFBRSxHQUFHLE9BQU8sR0FBRyxDQUFDO3dCQUN2QyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7d0JBQzVCLFVBQVUsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ2xDLENBQUMsQ0FBQyxDQUFDO29CQUNILFFBQVEsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUM7b0JBQ2pDLFFBQVEsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQ2xDO2FBQ0o7WUFFRCxpQkFBaUI7WUFDakIsSUFBSSxLQUFLLEVBQUU7Z0JBQ1AsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDakQsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUU7b0JBQy9ELG1EQUFtRDtvQkFDbkQsTUFBTSxHQUFHLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztvQkFDbkQsT0FBTyxHQUFHLENBQUMsTUFBTSxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7Z0JBQ2hFLENBQUMsQ0FBQyxDQUFDO2dCQUVILElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsUUFBUSxFQUFFLEVBQUU7b0JBQzNCLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQzVDLE1BQU0sT0FBTyxHQUFHLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUM7b0JBRWxELEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFlLEVBQUUsRUFBRTt3QkFDbkQsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQzt3QkFDbEMsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQzt3QkFDM0MsS0FBSyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7d0JBQ3hCLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQzt3QkFDNUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDO3dCQUM5QixLQUFLLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7d0JBQ2pDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsRUFBRSxHQUFHLE9BQU8sR0FBRyxDQUFDO3dCQUN2QyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7d0JBQzVCLE1BQU0sQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQzlCLENBQUMsQ0FBQyxDQUFDO29CQUVILFFBQVEsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBRTdCLG1EQUFtRDtvQkFDbkQsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7d0JBQzVCLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7d0JBQ2hELE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7d0JBQy9DLFNBQVMsQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUM7d0JBQzNELFNBQVMsQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLGdCQUFnQixDQUFDO3dCQUNoRCxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7d0JBQy9CLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQzt3QkFDOUIsVUFBVSxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDO3dCQUMzQyxTQUFTLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUM7d0JBQzFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7d0JBQ2xDLFFBQVEsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUM7cUJBQ3BDO2dCQUNMLENBQUMsQ0FBQyxDQUFDO2dCQUVILDZDQUE2QztnQkFDekQsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDOUMsTUFBTSxZQUFZLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO2dCQUN4RCxJQUFJLFdBQVcsR0FBRyxZQUFZLEVBQUUsa0JBQWtCLENBQUM7Z0JBQ25ELElBQUksWUFBWSxHQUFrQixFQUFFLENBQUM7Z0JBRXJDLE9BQU8sV0FBVyxJQUFJLFlBQVksQ0FBQyxNQUFNLEdBQUcsT0FBTyxFQUFFO29CQUNuRCxJQUFJLFdBQVcsQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLEtBQUssbUJBQW1CLEVBQUU7d0JBQzdELFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBMEIsQ0FBQyxDQUFDO3FCQUMvQztvQkFDRCxXQUFXLEdBQUcsV0FBVyxDQUFDLGtCQUFrQixDQUFDO2lCQUM5QztnQkFFRCxJQUFJLFlBQVksQ0FBQyxNQUFNLEtBQUssT0FBTyxFQUFFO29CQUNuQyxZQUFZLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO3dCQUM5QixNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO3dCQUM5QyxNQUFNLEVBQUUsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO3dCQUN4QyxFQUFFLENBQUMsU0FBUyxHQUFHLEtBQUssRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO3dCQUNoRCxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7d0JBQ3pCLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQzt3QkFDM0IsRUFBRSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO3dCQUM3QixFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7d0JBQzlCLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsRUFBRSxHQUFHLE9BQU8sR0FBRyxDQUFDO3dCQUNwQyxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7d0JBQ3pCLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQ3pCLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztvQkFDcEIsQ0FBQyxDQUFDLENBQUM7b0JBRUgsUUFBUSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDaEM7Z0JBRVcsUUFBUSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUNsQztZQUtULEtBQUssQ0FBQyxVQUFVLEVBQUUsWUFBWSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUV4Qyx5QkFBeUI7WUFDMUIsbURBQW1EO1FBQ3RELENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FDekMseURBQXlELENBQzVELENBQUM7UUFFRixJQUFJLGNBQWMsRUFBRTtZQUNmLGNBQThCLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsQ0FBQywwQkFBMEI7U0FDdkY7UUFFRCxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUN6Qyx5REFBeUQsQ0FDNUQsQ0FBQztRQUVGLElBQUksY0FBYyxFQUFFO1lBQ2YsY0FBOEIsQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxDQUFDLDBCQUEwQjtTQUN2RjtJQUNMLENBQUM7SUFFVyx1QkFBdUI7UUFDL0IsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGlDQUFpQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFO1lBQ3RFLElBQUksRUFBRSxDQUFDLGFBQWEsQ0FBQyx3QkFBd0IsQ0FBQyxFQUFFO2dCQUM1QyxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQzthQUN4QztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVRLG1CQUFtQjtRQUN4QixRQUFRLENBQUMsZ0JBQWdCLENBQUMseUJBQXlCLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDckUsTUFBTSxXQUFXLEdBQUcsU0FBUyxDQUFDLGFBQWEsQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFDO1lBQzFGLE1BQU0sS0FBSyxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFL0MsSUFBSSxXQUFXLElBQUksV0FBVyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsS0FBSyxHQUFHLElBQUksS0FBSyxFQUFFO2dCQUNoRSx1Q0FBdUM7Z0JBQ3ZDLFdBQVcsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQztnQkFFdEQsMERBQTBEO2dCQUMxRCxJQUFJLFFBQVEsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxvQ0FBb0M7Z0JBQ3hGLElBQUksWUFBWSxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFFeEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsRUFBRTtvQkFDdEIsTUFBTSxTQUFTLEdBQUcsS0FBSyxZQUFZLENBQUMsY0FBYyxDQUFDLE9BQU8sRUFBRSxFQUFFLHFCQUFxQixFQUFFLENBQUMsRUFBRSxxQkFBcUIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7b0JBQ3RILEtBQUssQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDO2lCQUMzQjtxQkFBTTtvQkFDSCx3Q0FBd0M7b0JBQ3hDLEtBQUssQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDO2lCQUMxQjthQUNKO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBR08sc0JBQXNCO1FBQ2hDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUN2RSxNQUFNLFVBQVUsR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLDJDQUEyQyxDQUFDLENBQUM7WUFDeEYsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUUvQyxJQUFJLFVBQVUsSUFBSSxVQUFVLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUU7Z0JBQ2hFLDZDQUE2QztnQkFDN0MsTUFBTSxhQUFhLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO2dCQUNoRSxJQUFJLGFBQWE7b0JBQUUsYUFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUUxQywyQkFBMkI7Z0JBQzNCLElBQUksUUFBUSxHQUFHLEtBQUssQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO2dCQUNwRCxJQUFJLFNBQVMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFFakQsSUFBSSxZQUFZLEdBQUcsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUV6QyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxJQUFJLFFBQVEsQ0FBQyxZQUFZLENBQUMsRUFBRTtvQkFDbEQsTUFBTSxTQUFTLEdBQUcsR0FBRyxZQUFZLENBQUMsY0FBYyxDQUFDLE9BQU8sRUFBRTt3QkFDeEQscUJBQXFCLEVBQUUsQ0FBQzt3QkFDeEIscUJBQXFCLEVBQUUsQ0FBQztxQkFDekIsQ0FBQyxHQUFHLENBQUM7b0JBQ04sS0FBSyxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUM7aUJBQ3pCO3FCQUFNO29CQUNMLGtFQUFrRTtvQkFDbEUsS0FBSyxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7b0JBQ3JCLEtBQUssQ0FBQyxLQUFLLENBQUMsY0FBYyxHQUFHLFdBQVcsQ0FBQztpQkFDMUM7YUFDRjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUdhLG1CQUFtQixDQUFDLGlCQUFpQztRQUUzRCxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUN2RSxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUM1RCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFbEQsZ0dBQWdHO1lBQ2hHLE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsMkJBQTJCLENBQUMsQ0FBQztZQUNqRixNQUFNLFlBQVksR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1lBRW5FLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ3ZCLGdDQUFnQztnQkFDaEMsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzNDLElBQUksWUFBWTtvQkFBRSxPQUFPO2dCQUV6QixzSEFBc0g7Z0JBQ3RILE1BQU0sbUJBQW1CLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQztnQkFDekUsTUFBTSxhQUFhLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztnQkFDckQsTUFBTSxpQkFBaUIsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7Z0JBQzdELE1BQU0sYUFBYSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDO2dCQUM5RCxNQUFNLGNBQWMsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQztnQkFDaEUsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsQ0FBQztnQkFDbkUsTUFBTSxlQUFlLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLENBQUM7Z0JBQ2xFLGlGQUFpRjtnQkFDN0UsaUNBQWlDO2dCQUNyQyxNQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQTtnQkFDckQsSUFBSSxRQUFRLEVBQUU7b0JBQ1YsS0FBSyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO29CQUNoQyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUM7aUJBQ2pDO2dCQUNMLElBQ0ksbUJBQW1CO29CQUNuQixhQUFhO29CQUNiLGFBQWE7b0JBQ2IsY0FBYztvQkFDZCxVQUFVLEVBQ1o7b0JBQ0UsT0FBTztpQkFDVjtnQkFFRCxzREFBc0Q7Z0JBQ3RELElBQUksZUFBZSxFQUFFO29CQUNqQixLQUFLLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7b0JBQ2hDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQztpQkFDakM7Z0JBQ0Qsb0ZBQW9GO3FCQUMvRSxJQUFJLGtCQUFrQixJQUFJLFlBQVksRUFBRTtvQkFDekMsS0FBSyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO29CQUNoQyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUM7aUJBQ2pDO3FCQUFNLElBQUksTUFBTSxFQUFFO29CQUNmLEtBQUssQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztvQkFDaEMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDO2lCQUNqQztxQkFBTTtvQkFDSCxLQUFLLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7b0JBQ2hDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztvQkFDM0IsS0FBSyxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO2lCQUNqQztnQkFDRCxJQUFJLGlCQUFpQixFQUFFO29CQUNuQixLQUFLLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7b0JBQ2hDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQztpQkFDakM7WUFDRCxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxDQUFDO1FBQ0YsTUFBTSxzQkFBc0IsR0FBRyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBQ3hGLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQWlCLEVBQUUsRUFBRTtZQUNqRCxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLEtBQUssT0FBTyxFQUFFO2dCQUN4QyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUM7Z0JBQzNCLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQzthQUNsQztpQkFBTTtnQkFDSCxzQ0FBc0M7Z0JBQ3RDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDOUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtvQkFDbkIsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDO29CQUM1QixLQUFLLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7Z0JBQ3BDLENBQUMsQ0FBQyxDQUFDO2FBQ047UUFDTCxDQUFDLENBQUMsQ0FBQztRQUNILE1BQU0sU0FBUyxHQUFHLGlCQUFpQixDQUFDLGdCQUFnQixDQUNoRCxnQ0FBZ0M7WUFDaEMsZ0RBQWdEO1lBQ2hELGdDQUFnQztZQUNoQyxnQ0FBZ0M7WUFDaEMsZ0NBQWdDO1lBQ2hDLCtCQUErQjtZQUMvQixnREFBZ0Q7WUFDaEQsb0NBQW9DO1lBQ3BDLDJDQUEyQztZQUMzQyxvQ0FBb0M7WUFDcEMsMkNBQTJDO1lBQzNDLDhDQUE4QztZQUM5Qyw4Q0FBOEM7WUFDOUMsb0NBQW9DO1lBQ3BDLDRDQUE0QztZQUM1Qyx3QkFBd0I7WUFDeEIsd0JBQXdCO1lBQ3hCLG9DQUFvQztZQUNwQywwQ0FBMEM7WUFDMUMsdUNBQXVDO1lBQ3ZDLG9DQUFvQztZQUNwQyxvQ0FBb0M7WUFDcEMsMkNBQTJDO1lBQzNDLCtCQUErQjtZQUMvQiwyQ0FBMkM7WUFDM0Msb0NBQW9DO1lBQ3BDLG9DQUFvQztZQUNwQywwQ0FBMEM7WUFDMUMsOEJBQThCO1lBQzlCLGdEQUFnRDtZQUNoRCxrQ0FBa0M7WUFDbEMsb0NBQW9DO1lBQ3BDLHlDQUF5QztZQUN6QyxvQ0FBb0M7WUFDcEMsZ0NBQWdDO1lBQ2hDLCtDQUErQztZQUMvQyxvQ0FBb0M7WUFDcEMsb0NBQW9DO1lBQ3BDLHlCQUF5QjtZQUN6Qix5QkFBeUI7WUFDekIscUNBQXFDO1lBQ3JDLCtDQUErQztZQUMvQywyQ0FBMkM7WUFDM0MsMkNBQTJDO1lBQzNDLG9DQUFvQztZQUNwQywrQkFBK0I7WUFDL0IsK0NBQStDO1lBQy9DLCtDQUErQztZQUMvQyxtQ0FBbUMsQ0FDdEMsQ0FBQztRQUNGLHVDQUF1QztRQUN2QyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBaUIsRUFBRSxFQUFFO1lBQ3BDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQztRQUNsQyxDQUFDLENBQUMsQ0FBQztRQUNGLE1BQU0sMEJBQTBCLEdBQUcsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsd0NBQXdDLENBQUMsQ0FBQztRQUNqSCx5RUFBeUU7UUFDekUsMEJBQTBCLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBaUIsRUFBRSxFQUFFO1lBQ3JELElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztZQUMvQixJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7UUFDOUIsQ0FBQyxDQUFDLENBQUM7UUFDQSxNQUFNLG9CQUFvQixHQUFHLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLDJCQUEyQixDQUFDLENBQUM7UUFDaEcsNkRBQTZEO1FBQzdELG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQWlCLEVBQUUsRUFBRTtZQUMvQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7WUFDL0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBQ0YsTUFBTSxjQUFjLEdBQUcsaUJBQWlCLENBQUMsZ0JBQWdCLENBQ3RELCtCQUErQjtZQUMvQixvQ0FBb0M7WUFDcEMsb0NBQW9DO1lBQ3BDLHlCQUF5QjtZQUN6Qix5QkFBeUI7WUFDekIsZ0NBQWdDO1lBQ2hDLGtEQUFrRDtZQUNsRCxtQ0FBbUM7WUFDbkMsc0RBQXNEO1lBQ3RELG1DQUFtQztZQUNuQywrQkFBK0I7WUFDL0IsMENBQTBDO1lBQzFDLG1DQUFtQyxDQUN0QyxDQUFDO1FBQ0YsaURBQWlEO1FBQ2pELGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFpQixFQUFFLEVBQUU7WUFDekMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBQ0YsTUFBTSxvQkFBb0IsR0FBRyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1FBQzVGLGlEQUFpRDtRQUNqRCxvQkFBb0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFpQixFQUFFLEVBQUU7WUFDL0Msc0VBQXNFO1lBQ3RFLHlEQUF5RDtZQUN6RCxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxjQUFjLENBQUM7WUFDcEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ3pCLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQztZQUMvQixJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUM7WUFDakMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDO1FBQ2hDLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQywwQ0FBMEMsQ0FBQyxDQUFDO1FBQ3pHLHlEQUF5RDtRQUN6RCxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFpQixFQUFFLEVBQUU7WUFDNUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1lBQzVCLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLFlBQVksQ0FBQyxDQUFXLHVDQUF1QztZQUN2RixtQ0FBbUM7UUFDdkMsQ0FBQyxDQUFDLENBQUM7UUFDRixNQUFNLG9CQUFvQixHQUFHLGlCQUFpQixDQUFDLGdCQUFnQixDQUM1RCxvQ0FBb0M7WUFDcEMsb0NBQW9DO1lBQ3BDLG9DQUFvQztZQUNwQyxvQ0FBb0M7WUFDcEMsb0NBQW9DO1lBQ3BDLG9DQUFvQztZQUNwQyxvQ0FBb0M7WUFDcEMsb0NBQW9DO1lBQ3BDLCtCQUErQjtZQUMvQixrQ0FBa0M7WUFDbEMsb0NBQW9DO1lBQ3BDLG9DQUFvQztZQUNwQyxzQkFBc0I7WUFDdEIsc0JBQXNCLENBQ3pCLENBQUM7UUFFRiw2REFBNkQ7UUFDN0Qsb0JBQW9CLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBaUIsRUFBRSxFQUFFO1lBQy9DLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxDQUFBLE9BQU87UUFDekMsQ0FBQyxDQUFDLENBQUM7UUFFRCxNQUFNLGtCQUFrQixHQUFHLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBRXhGLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUM1QixNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzVDLElBQUksT0FBTyxFQUFFO2dCQUNULE9BQU8sQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQzthQUNwQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUVwRCxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDN0IsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM1QyxJQUFJLE9BQU8sRUFBRTtnQkFDVCxPQUFPLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7YUFDcEM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sc0JBQXNCLEdBQUcsaUJBQWlCLENBQUMsZ0JBQWdCLENBQzdELDJCQUEyQjtZQUMzQiwyQ0FBMkM7WUFDM0MsMkNBQTJDO1lBQzNDLDhCQUE4QixDQUNqQyxDQUFDO1FBRUYsNkRBQTZEO1FBQzdELHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQWlCLEVBQUUsRUFBRTtZQUNqRCxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsQ0FBQSxPQUFPO1FBQ3pDLENBQUMsQ0FBQyxDQUFDO1FBR0gsTUFBTSxrQkFBa0IsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBRTFELElBQUksa0JBQWtCLEVBQUU7WUFDdEIsa0VBQWtFO1lBQ2hFLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO1NBQy9DO0lBQ1gsQ0FBQztJQUVPLGVBQWUsQ0FBQyxTQUFzQjtRQUMxQywrREFBK0Q7UUFDL0QsTUFBTSxVQUFVLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLG1DQUFtQyxDQUFDLENBQUM7UUFFbkYsNEJBQTRCO1FBQzVCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3hDLE1BQU0sU0FBUyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQWdCLENBQUM7WUFDL0MsSUFBSSxTQUFTLEVBQUU7Z0JBQ1gsZ0RBQWdEO2dCQUNoRCxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7Z0JBQ2pDLFNBQVMsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQztnQkFDdEMsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDO2dCQUM5QixTQUFTLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUM7Z0JBQ3RDLFNBQVMsQ0FBQyxLQUFLLENBQUMsYUFBYSxHQUFHLE1BQU0sQ0FBQztnQkFFdkMsa0NBQWtDO2dCQUNsQyxTQUFTLENBQUMsVUFBVSxFQUFFLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQzthQUNoRDtTQUNKO1FBRUQsMENBQTBDO1FBQzFDLE1BQU0sa0JBQWtCLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLDZDQUE2QyxDQUFDLENBQUM7UUFDckcsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNoRCxNQUFNLEdBQUcsR0FBRyxrQkFBa0IsQ0FBQyxDQUFDLENBQWdCLENBQUM7WUFDakQsSUFBSSxHQUFHLEVBQUU7Z0JBQ0wsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO2dCQUMzQixHQUFHLENBQUMsVUFBVSxFQUFFLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUNwQztTQUNKO0lBQ0wsQ0FBQztJQUVPLHVCQUF1QixDQUFDLFNBQXNCO1FBRWxELE1BQU0sZUFBZSxHQUFHLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1FBRXRFLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFlLEVBQUUsRUFBRTtZQUN4Qyw4QkFBOEI7WUFDOUIsRUFBRSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDO1lBQ2xDLEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQyxDQUFDLG9EQUFvRDtRQUN2RixDQUFDLENBQUMsQ0FBQztJQUNYLENBQUM7SUFDRCxnREFBZ0Q7SUFDeEMsMEJBQTBCLENBQUMsU0FBc0I7UUFDckQsTUFBTSxlQUFlLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLG9CQUFvQixDQUFDLENBQUM7UUFFckUsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQWUsRUFBRSxFQUFFO1lBQ3hDLDhCQUE4QjtZQUM5QixFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUM7WUFDbEMsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDO1lBQ3hCLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQztZQUMzQixFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxvQ0FBb0M7WUFDakUsRUFBRSxDQUFDLEtBQUssQ0FBQyxhQUFhLEdBQUcsT0FBTyxDQUFDO1lBQ2pDLEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQyxDQUFDLGdCQUFnQjtZQUMvQyxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsQ0FBQyxvREFBb0Q7WUFFaEYsZ0RBQWdEO1lBQ2hELEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxDQUFDLG9EQUFvRDtRQUN4RixDQUFDLENBQUMsQ0FBQztJQUNYLENBQUM7SUFFTCxzREFBc0Q7SUFDOUMsd0JBQXdCLENBQUMsU0FBc0I7UUFDbkQsSUFBSTtZQUNBLGdGQUFnRjtZQUNoRixNQUFNLGFBQWEsR0FBRyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsNkNBQTZDLENBQUMsQ0FBQztZQUVoRyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBa0IsRUFBRSxFQUFFO2dCQUN6Qyw0QkFBNEI7Z0JBQzVCLE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO2dCQUVqRCxnRUFBZ0U7Z0JBQ2hFLE1BQU0saUJBQWlCLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDeEQsaUJBQWlCLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQztnQkFFekMsc0NBQXNDO2dCQUN0QyxNQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBRXJELHNDQUFzQztnQkFDdEMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUM7Z0JBQ2pELGlCQUFpQixDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsYUFBYSxDQUFDLFFBQVEsQ0FBQztnQkFDMUQsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztnQkFDeEcsaUJBQWlCLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7Z0JBQ3ZDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDO2dCQUMxQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQztnQkFDdEMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7Z0JBQzFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO2dCQUMzQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsYUFBYSxHQUFHLE9BQU8sQ0FBQztnQkFFaEQsK0RBQStEO2dCQUMvRCxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRTtvQkFDaEMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztnQkFDL0MsQ0FBQyxDQUFDLENBQUM7Z0JBRUgsbUVBQW1FO2dCQUNuRSxJQUFJLEtBQUssQ0FBQyxVQUFVLEVBQUU7b0JBQ2xCLEtBQUssQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLGlCQUFpQixFQUFFLEtBQUssQ0FBQyxDQUFDO2lCQUMzRDtZQUNMLENBQUMsQ0FBQyxDQUFDO1lBRUgsb0RBQW9EO1lBQ3BELE1BQU0sZUFBZSxHQUFHLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUNuRSxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBaUIsRUFBRSxFQUFFO2dCQUMxQyxJQUFJLElBQUksQ0FBQyxPQUFPLEtBQUssS0FBSyxFQUFFLEVBQUUsd0NBQXdDO29CQUNsRSw2QkFBNkI7b0JBQzdCLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQy9DLE1BQU0sTUFBTSxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUUxRCwwQ0FBMEM7b0JBQzFDLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxXQUFXLElBQUksRUFBRSxDQUFDO29CQUNyQyxJQUFJLE1BQU0sRUFBRTt3QkFDUixPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7cUJBQ3pDO29CQUVELDhCQUE4QjtvQkFDOUIsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDckQsY0FBYyxDQUFDLFdBQVcsR0FBRyxDQUFDLE1BQU0sSUFBSSxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUM7b0JBRXRELDBCQUEwQjtvQkFDMUIsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO29CQUNwRCxjQUFjLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUM7b0JBQzlDLGNBQWMsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLGFBQWEsQ0FBQyxRQUFRLENBQUM7b0JBQ3ZELGNBQWMsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO29CQUNwRyxjQUFjLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7b0JBQ3BDLGNBQWMsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQztvQkFDdEMsY0FBYyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDO29CQUNuQyxjQUFjLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7b0JBRXZDLGVBQWU7b0JBQ2YsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUU7d0JBQy9CLGNBQWMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO29CQUM1QyxDQUFDLENBQUMsQ0FBQztvQkFFSCx1QkFBdUI7b0JBQ3ZCLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTt3QkFDakIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDO3FCQUN0RDtpQkFDSjtZQUNMLENBQUMsQ0FBQyxDQUFDO1NBQ047UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNaLE9BQU8sQ0FBQyxLQUFLLENBQUMsdUNBQXVDLEVBQUUsS0FBSyxDQUFDLENBQUM7U0FDakU7SUFDTCxDQUFDO0lBR0csYUFBYSxDQUFDLFlBQThCO1FBQ3hDLDRFQUE0RTtRQUM1RSxJQUFJLFlBQVksQ0FBQyxFQUFFLEVBQUU7WUFDakIsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxjQUFjLFlBQVksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ3hFLElBQUksS0FBSztnQkFBRSxPQUFPLEtBQUssQ0FBQyxXQUFXLElBQUksRUFBRSxDQUFDO1NBQzdDO1FBRUQsNENBQTRDO1FBQzVDLElBQUksTUFBTSxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUM7UUFDeEMsT0FBTyxNQUFNLEVBQUU7WUFDWCxJQUFJLE1BQU0sQ0FBQyxPQUFPLEtBQUssT0FBTyxFQUFFO2dCQUM1QixpREFBaUQ7Z0JBQ2pELE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFnQixDQUFDO2dCQUNwRCxNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQy9DLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUM5RCxPQUFPLEtBQUssQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDO2FBQzFDO1lBQ0QsSUFBSSxNQUFNLEtBQUssUUFBUSxDQUFDLElBQUk7Z0JBQUUsTUFBTTtZQUNwQyxNQUFNLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQztTQUNqQztRQUVELHdFQUF3RTtRQUN4RSxJQUFJLE9BQU8sR0FBRyxZQUFZLENBQUMsV0FBVyxDQUFDO1FBQ3ZDLE9BQU8sT0FBTyxFQUFFO1lBQ1osSUFBSSxPQUFPLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxTQUFTLElBQUksT0FBTyxDQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUUsRUFBRTtnQkFDcEUsT0FBTyxPQUFPLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDO2FBQ3JDO1lBQ0QsSUFBSSxPQUFPLENBQUMsUUFBUSxLQUFLLElBQUksQ0FBQyxZQUFZO2dCQUNyQyxPQUFtQixDQUFDLE9BQU8sS0FBSyxPQUFPLEVBQUU7Z0JBQzFDLE9BQVEsT0FBbUIsQ0FBQyxXQUFXLElBQUksRUFBRSxDQUFDO2FBQ2pEO1lBQ0QsT0FBTyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7U0FDakM7UUFFRCwrREFBK0Q7UUFDL0QsT0FBTyxZQUFZLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQztJQUNuQyxDQUFDO0lBR0QsbUJBQW1CLENBQUMsTUFBYztRQUM5QixNQUFNLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3ZCLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUV6RCxNQUFNLFlBQVksR0FBOEI7WUFDOUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLEVBQUU7WUFDbEMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQzNCLEVBQUUsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ3RCLEVBQUUsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ3ZCLEVBQUUsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ3pCLEVBQUUsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDO1NBQzFCLENBQUM7UUFFRixzRUFBc0U7UUFDdEUsT0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDdkQsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ3ZDLFFBQVEsVUFBVSxFQUFFO2dCQUNsQixLQUFLLE1BQU0sQ0FBQyxDQUFDLE9BQU8sWUFBWSxDQUFDLElBQUksQ0FBQztnQkFDdEMsS0FBSyxJQUFJLENBQUMsQ0FBQyxPQUFPLFlBQVksQ0FBQyxFQUFFLENBQUM7Z0JBQ2xDLEtBQUssSUFBSSxDQUFDLENBQUMsT0FBTyxZQUFZLENBQUMsRUFBRSxDQUFDO2dCQUNsQyxLQUFLLElBQUksQ0FBQyxDQUFDLE9BQU8sWUFBWSxDQUFDLEVBQUUsQ0FBQztnQkFDbEMsS0FBSyxJQUFJLENBQUMsQ0FBQyxPQUFPLFlBQVksQ0FBQyxFQUFFLENBQUM7Z0JBQ2xDLEtBQUssSUFBSSxDQUFDLENBQUMsT0FBTyxZQUFZLENBQUMsRUFBRSxDQUFDO2dCQUNsQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEtBQUssQ0FBQzthQUV2QjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQU1ILHFEQUFxRDtJQUNyRCxzQkFBc0IsQ0FBQyxRQUFnQixFQUFFLE1BQWM7UUFDbkQsSUFBSSxDQUFDLE1BQU07WUFBRSxPQUFPLFFBQVEsQ0FBQztRQUU3QixNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbkQsTUFBTSxZQUFZLEdBQUcsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUUvQyxJQUFJLFlBQVksS0FBSyxDQUFDLENBQUMsRUFBRTtZQUN2QixPQUFPLEdBQUcsUUFBUSxJQUFJLFNBQVMsRUFBRSxDQUFDO1NBQ25DO1FBRUQsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDckQsTUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNuRCxPQUFPLEdBQUcsUUFBUSxJQUFJLFNBQVMsR0FBRyxTQUFTLEVBQUUsQ0FBQztJQUNoRCxDQUFDO0lBR0gsZ0JBQWdCLENBQUMsS0FBSztRQUNsQixNQUFNLElBQUksR0FBRyxJQUFJLENBQUM7UUFDbEIsSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1FBQzNELE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFBO1FBRXpJLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsbUJBQW1CO1FBQ2xGLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDL0QsTUFBTSxZQUFZLEdBQUcsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLElBQUksS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxLQUFLLE1BQU0sQ0FBQztZQUM1RixDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDLENBQUMsNEJBQTRCO1lBQzlFLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsK0JBQStCO1FBQ3pELE1BQU0saUJBQWlCLEdBQUcsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLElBQUksS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFBO1FBRW5PLCtDQUErQztRQUMvQyxNQUFNLGlCQUFpQixHQUFHLENBQUMsR0FBRyxZQUFZLENBQUMsQ0FBQztRQUU1QyxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDO1FBQ3hJLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDckksUUFBUSxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxRQUFRLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztRQUNwRSx5SUFBeUk7UUFFekksUUFBUSxXQUFXLEVBQUU7WUFDakIsS0FBSyxhQUFhO2dCQUNkLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzNCLE1BQU07WUFDVixLQUFLLEtBQUs7Z0JBRU4sTUFBTSxZQUFZLEdBQUcsWUFBWSxDQUFDO2dCQUNsQyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMscUJBQXFCLENBQUMsRUFBRSxFQUFFLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDO2dCQUVqTCwrQkFBK0I7Z0JBQy9CLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUM7b0JBQ3JELG9CQUFvQixFQUFFLElBQUksQ0FBQyxxQkFBcUI7b0JBQ2hELFdBQVcsRUFBRSxXQUFXO29CQUN4QixLQUFLLEVBQUUsS0FBSztpQkFDZixDQUFDLENBQUM7Z0JBRUgsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLHlCQUF5QixDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLEVBQUU7b0JBQzdGLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUNuRSxjQUFjLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ2hDLENBQUMsQ0FBQyxDQUFDO2dCQUNKLE1BQU07WUFDVixLQUFLLEtBQUs7Z0JBQ04sSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDNUYsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUNwRCw0Q0FBNEM7Z0JBQzVDLE1BQU0sUUFBUSxHQUFHLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxrREFBa0Q7Z0JBQ2hILGtEQUFrRDtnQkFDbEQsSUFBSSxnQkFBZ0IsR0FBRyxDQUFDLENBQUM7Z0JBQ3pCLElBQUksV0FBVyxJQUFJLFdBQVcsQ0FBQyxNQUFNLEVBQUU7b0JBQ25DLGdCQUFnQixHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxFQUFFO3dCQUN6RSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFOzRCQUM1RSxPQUFPLFlBQVksQ0FBQyxDQUFDLG9EQUFvRDt5QkFDNUU7d0JBQ0QsT0FBTyxRQUFRLENBQUMsQ0FBQywyQ0FBMkM7b0JBQ2hFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztpQkFDVDtnQkFDRCxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7Z0JBQzFELElBQUksR0FBRyxHQUFHLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDOUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQzlCLElBQUksUUFBUSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBRWhDLElBQUksSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQTtnQkFDckQsTUFBTSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztnQkFDdkIsTUFBTTtZQUNWLEtBQUssT0FBTyxDQUFDO1lBQ2IsS0FBSyxLQUFLLENBQUM7WUFDWCxLQUFLLE1BQU07Z0JBRUgsc0dBQXNHO2dCQUN0RyxtRUFBbUU7Z0JBQ25FLHFEQUFxRDtnQkFDckQsb0VBQW9FO2dCQUNwRSw4Q0FBOEM7Z0JBQzlDLG1FQUFtRTtnQkFDbkUsaURBQWlEO2dCQUNqRCwyRUFBMkU7Z0JBQzNFLHdCQUF3QjtnQkFDeEIsVUFBVTtnQkFDViw2Q0FBNkM7Z0JBQzdDLG9GQUFvRjtnQkFDcEYsVUFBVTtnQkFDVixnSkFBZ0o7Z0JBQ2hKLElBQUk7Z0JBRVIsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDcEcsSUFBSSxXQUFXLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO29CQUNwRSxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQztvQkFDdkUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLGNBQWMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ3hDLE9BQU8sR0FBRyxDQUFDO2dCQUNmLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDUCxNQUFNLFFBQVEsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO2dCQUM1QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUM3QyxNQUFNLElBQUksR0FBb0IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDN0QsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUU7b0JBQzdDLE9BQU8sRUFBRSxZQUFZLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQztnQkFDL0MsQ0FBQyxDQUFDLENBQUM7Z0JBRUgsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztnQkFDdkMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQzVDLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQztvQkFDZCxJQUFJLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQTJCLHNEQUFzRDt3QkFFckosOENBQThDO3dCQUM5QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFOzRCQUNsRSw2QkFBNkI7NEJBQzdCLGdGQUFnRjs0QkFDaEYsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzt5QkFFL0U7cUJBQ0o7eUJBQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxFQUFFO3dCQUM5RSxzREFBc0Q7d0JBQ3RELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7NEJBQ2xFLDZCQUE2Qjs0QkFDN0IsZ0ZBQWdGOzRCQUNoRixJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3lCQUUvRTtxQkFFSjtvQkFDRCxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO3dCQUNqQixNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDO3dCQUNqRyx5Q0FBeUM7d0JBQ3pDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFOzRCQUNqSixJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDO3lCQUNyRjt3QkFDRCxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRTs0QkFDckMsUUFBUSxFQUFFLFdBQVcsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTTs0QkFDbEQsSUFBSSxFQUFFLE9BQU87eUJBQ2hCLENBQUMsQ0FBQzt3QkFDSCwyREFBMkQ7d0JBQzNELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxFQUFFOzRCQUNuRCxJQUFJLEVBQUUsbUVBQW1FO3lCQUU1RSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7d0JBRTlCLElBQUksS0FBSyxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFOzRCQUN0RCxNQUFNLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxXQUFXLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7eUJBQzVJOzZCQUFNLElBQUksS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7NEJBQ3pCLE1BQU0sQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsR0FBRyxDQUFDLFdBQVcsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQzt5QkFDNUk7cUJBQ0o7aUJBRUo7Z0JBR0QsTUFBTTtZQUNWO2dCQUNJLE1BQU07U0FDYjtJQUNMLENBQUM7SUFFRDs7Ozs7O01BTUU7SUFDSyxXQUFXLENBQUMsWUFBb0IsRUFBRSxRQUFnQixFQUFFLEtBQWE7UUFDcEUsSUFBSSxNQUFNLEdBQUcsWUFBWSxDQUFDO1FBQzFCLE1BQU0sT0FBTyxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUN0RCxJQUFJLE9BQU8sRUFBRTtZQUNULEtBQUssTUFBTSxJQUFJLElBQUksT0FBTyxFQUFFO2dCQUN4QixJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7Z0JBQ2IsUUFBUSxJQUFJLENBQUMsV0FBVyxFQUFFLEVBQUU7b0JBQ3hCLEtBQUssWUFBWTt3QkFDYixHQUFHLEdBQUcsUUFBUSxDQUFDO3dCQUNmLE1BQU07b0JBQ1YsS0FBSyxrQkFBa0IsQ0FBQztvQkFDeEIsS0FBSyxhQUFhO3dCQUNkLEdBQUcsR0FBRyxNQUFNLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO3dCQUNuQyxNQUFNO29CQUNWO3dCQUNJLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRTs0QkFDckIsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDOzRCQUNqRCxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDOzRCQUN0QyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs0QkFDaEYsR0FBRyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO3lCQUNuRDs2QkFBTTs0QkFDSCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDOzRCQUM3RCxHQUFHLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7eUJBQ3RDO3dCQUNELE1BQU07aUJBQ2I7Z0JBQ0QsTUFBTSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ3pDO1NBQ0o7UUFDRCxPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBQ0QsYUFBYSxDQUFDLE9BQStCO1FBQ3pDLE1BQU0sTUFBTSxHQUFRLEVBQUUsQ0FBQztRQUV2QixLQUFLLE1BQU0sR0FBRyxJQUFJLE9BQU8sRUFBRTtZQUN2QixJQUFJLE9BQU8sQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQzdCLE1BQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzVCLElBQUksT0FBTyxHQUFHLE1BQU0sQ0FBQztnQkFFckIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQ2xDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDckIsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO29CQUVoRCxJQUFJLFVBQVUsRUFBRTt3QkFDWix3QkFBd0I7d0JBQ3hCLE1BQU0sUUFBUSxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDL0IsTUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUUzQyxPQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQzt3QkFFNUMsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7NEJBQ3ZCLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxVQUFVLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7eUJBQ2hEOzZCQUFNOzRCQUNILE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxVQUFVLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDOzRCQUNwRSxPQUFPLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDO3lCQUMzQztxQkFDSjt5QkFBTTt3QkFDSCx5QkFBeUI7d0JBQ3pCLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFOzRCQUN2QixPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO3lCQUNoQzs2QkFBTTs0QkFDSCxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQzs0QkFDcEMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQzt5QkFDM0I7cUJBQ0o7aUJBQ0o7YUFDSjtTQUNKO1FBRUQsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztJQUVELFdBQVcsQ0FBQyxVQUFVLEVBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxPQUFPO1FBQzdDLElBQUksQ0FBQyxVQUFVLENBQUMsK0JBQStCLENBQUMsQ0FBQztRQUNqRCxJQUFJLGVBQWUsR0FBUSxFQUFFLENBQUM7UUFDOUIsTUFBTSxhQUFhLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUN6RCxNQUFNLFVBQVUsR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztRQUNwRSxJQUFJLFVBQVUsSUFBSSxVQUFVLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFDekMsZUFBZSxHQUFHLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztTQUNuRztRQUNELElBQ0ksTUFBTSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksR0FBRztZQUNoRCxlQUFlLENBQUMsZ0JBQWdCLElBQUksSUFBSSxFQUFFO1lBQzFDLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxxQkFBcUIsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFDLEdBQUcsRUFBQyxFQUFFO2dCQUN6RixJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxVQUFVLEVBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDN0QsY0FBYyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ2pDLENBQUMsQ0FBQyxDQUFDO1NBQ047UUFFRCxJQUNJLE1BQU0sQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEdBQUc7WUFDaEQsZUFBZSxDQUFDLGdCQUFnQixJQUFJLElBQUksRUFBRTtZQUMxQyxlQUFlLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztZQUNqQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztTQUVuRTthQUFNO1lBQ0gsSUFBSSxDQUFDLFdBQVcsQ0FBQyxlQUFlLEVBQUUsVUFBVSxFQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FDNUU7UUFDRCxvQkFBb0I7SUFFeEIsQ0FBQztJQUVPLEtBQUssQ0FBQyxXQUFXLENBQUMsZUFBZSxFQUFFLFVBQVUsRUFBQyxRQUFRLEVBQUcsT0FBTyxFQUFFLE9BQU87UUFDN0UsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsZUFBZTtRQUM3QyxJQUFJLE9BQU8sR0FBRztZQUNWLElBQUksRUFBRSxpQkFBaUI7WUFDdkIsUUFBUSxFQUFFO2dCQUNOLE1BQU0sRUFBRSxFQUFFO2dCQUNWLElBQUksRUFBRSxjQUFjO2dCQUNwQixJQUFJLEVBQUUsaUJBQWlCO2dCQUN2QixjQUFjLEVBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRTtnQkFDbEMsR0FBRyxFQUFFLGNBQWM7Z0JBQ25CLGNBQWMsRUFBRSxFQUFFO2dCQUNsQixJQUFJLEVBQUUsVUFBVTtnQkFDaEIsUUFBUSxFQUFFLFVBQVUsQ0FBQyxNQUFNLENBQUM7Z0JBQzVCLElBQUksRUFBRSxVQUFVLENBQUMsTUFBTSxDQUFDO2dCQUN4QixHQUFHLEVBQUUsU0FBUyxDQUFDLFFBQVEsRUFBRTthQUM1QjtTQUNKLENBQUE7UUFDRCxNQUFNLFFBQVEsR0FDVixNQUFNLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxrQkFBa0IsQ0FDM0MsVUFBVSxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFDN0QsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsRUFBRTtZQUNyQyxpQ0FBaUM7WUFDakMsSUFBSSxRQUFRLENBQUMsSUFBSSxFQUFFO2dCQUNmLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsbUJBQW1CLENBQUMsYUFBYSxDQUFDLENBQUM7Z0JBQzFFLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQzNFO1lBQ0QsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLFFBQVEsQ0FBQyxVQUFVLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztZQUNsSCxJQUFJLGVBQWUsSUFBSSxPQUFPLEVBQUU7Z0JBQzVCLElBQUksQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUM7YUFDdEM7U0FDSjthQUFNO1lBQ0gsa0NBQWtDO1lBQ2xDLElBQUksUUFBUSxDQUFDLElBQUksRUFBRTtnQkFDZixJQUFJLENBQUMsb0JBQW9CLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUN0RTtZQUNELE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxRQUFRLENBQUMsVUFBVSxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDbEgsSUFBSSxlQUFlLElBQUksT0FBTyxFQUFFO2dCQUM1QixJQUFJLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxDQUFDO2FBQ3RDO1NBQ0o7UUFDRCxVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ2hCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixDQUFDLEVBQUMsR0FBRyxDQUFDLENBQUM7SUFDWCxDQUFDO0lBQ0QsU0FBUyxDQUFDLElBQVk7UUFDbEIsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM5QyxPQUFPLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUN6QixPQUFPLE9BQU8sQ0FBQyxXQUFXLElBQUksT0FBTyxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUM7SUFDMUQsQ0FBQztJQUNELFdBQVcsQ0FBQyxNQUFtQixFQUFFLE9BQVksRUFBRSxjQUFtQixFQUFFO1FBQ2hFLDJEQUEyRDtRQUMzRCxtQ0FBbUM7UUFDbkMscUNBQXFDO1FBQ3JDLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUN2QixNQUFNLE9BQU8sR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFDMUQsTUFBTSxPQUFPLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNuRCxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzdDLElBQUksTUFBTSxDQUFDLFlBQVksRUFBRTtZQUNyQixRQUFRLE1BQU0sQ0FBQyxZQUFZLEVBQUU7Z0JBQ3pCLEtBQUssV0FBVyxDQUFDO2dCQUNqQixLQUFLLGVBQWU7b0JBQ2hCLElBQUksT0FBTyxLQUFLLEdBQUcsRUFBRTt3QkFDakIsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUU7NEJBQ3BELElBQUksRUFBRTtnQ0FDRixPQUFPLEVBQUUsa0JBQWtCLFlBQVksR0FBRztnQ0FDMUMsS0FBSyxFQUFFLEdBQUc7Z0NBQ1YsS0FBSyxFQUFFLHlCQUF5Qjs2QkFDbkM7eUJBQ0osQ0FBQyxDQUFDO3dCQUVILFNBQVMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUU7NEJBQ3ZDLFlBQVksQ0FBQyxPQUFPLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxDQUFDLENBQUM7NEJBQy9DLElBQUksTUFBTSxFQUFFO2dDQUNSLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDOzZCQUMzQztpQ0FBTTtnQ0FDSCxNQUFNLFdBQVcsR0FBRztvQ0FDaEIsT0FBTyxFQUFFLE9BQU87b0NBQ2hCLFFBQVEsRUFBRSxFQUFFO29DQUNaLEdBQUcsRUFBRSxLQUFLO2lDQUNiLENBQUM7Z0NBQ0YsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGlDQUFpQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQzs2QkFDakY7d0JBQ0wsQ0FBQyxDQUFDLENBQUM7cUJBQ047eUJBQU07d0JBQ0gsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7cUJBQzNDO29CQUVELE1BQU07Z0JBQ1YsS0FBSyxnQkFBZ0I7b0JBQ2pCLElBQUksSUFBSSxDQUFDLE9BQU87d0JBQ1osSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRO3dCQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRTt3QkFDcEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7cUJBQ2xDO29CQUNELE1BQU07Z0JBQ1YsS0FBSyxrQkFBa0I7b0JBQ25CLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDL0IsTUFBTTtnQkFDVixLQUFLLGtCQUFrQjtvQkFDbkIsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztvQkFDekYsTUFBTTtnQkFDVixLQUFLLGdCQUFnQjtvQkFDakIsSUFBSSxDQUFDLHdCQUF3QixDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsb0JBQW9CLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztvQkFDaEcsTUFBTTtnQkFDVixLQUFLLGlCQUFpQjtvQkFDbEIsSUFBSSxDQUFDLHlCQUF5QixDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsZ0JBQWdCLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztvQkFDN0YsTUFBTTtnQkFDVixLQUFLLG9CQUFvQjtvQkFDckIsSUFBSSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLENBQUMsRUFBRSxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7b0JBQ3hHLE1BQU07Z0JBQ1YsS0FBSyxrQkFBa0IsQ0FBQztnQkFDeEIsS0FBSyxnQkFBZ0IsQ0FBQztnQkFDdEIsS0FBSyxpQkFBaUI7b0JBQ2xCLElBQUksaUJBQWlCLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksbUJBQW1CLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLE9BQU8sRUFBRSxDQUFDLGNBQWMsSUFBSSxtQkFBbUIsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7b0JBQ3ZVLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsT0FBTyxFQUFFLGVBQWUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxZQUFZLEVBQUMsaUJBQWlCLENBQUMsQ0FBQztvQkFDdEgsTUFBTTtnQkFDVixLQUFLLGlCQUFpQjtvQkFDbEIsSUFBSSxDQUFDLDJCQUEyQixDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUMxQyxNQUFNO2dCQUNWLEtBQUssY0FBYztvQkFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO29CQUN2QixJQUFJLENBQUMsVUFBVSxDQUFDLG1CQUFtQixFQUFFLENBQUM7b0JBQ3RDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFBO29CQUM3SCxNQUFNO2dCQUNWLEtBQUssZUFBZTtvQkFDaEIsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDM0IsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsVUFBVSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUE7b0JBQzdILE1BQU07Z0JBQ1YsS0FBSyxvQkFBb0I7b0JBQ3JCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDakMsTUFBTTtnQkFDVixLQUFLLGNBQWM7b0JBQ2YsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDM0IsTUFBTTtnQkFDVixLQUFLLFdBQVc7b0JBQ1osSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDeEIsTUFBTTtnQkFDVixLQUFLLFVBQVU7b0JBQ1gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDdkIsTUFBTTtnQkFDVixLQUFLLGlCQUFpQjtvQkFDbEIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDOUIsTUFBTTtnQkFDVixLQUFLLHVCQUF1QjtvQkFDeEIsVUFBVSxDQUFDLEdBQUcsRUFBRTt3QkFDWixJQUFJLENBQUMsb0JBQW9CLENBQUMsa0NBQWtDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUMvRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQ1AsTUFBTTtnQkFDVixLQUFLLHFCQUFxQjtvQkFDdEIsVUFBVSxDQUFDLEdBQUcsRUFBRTt3QkFDWixJQUFJLENBQUMsb0JBQW9CLENBQUMsNEJBQTRCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUN6RSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQ1AsTUFBTTtnQkFDVixLQUFLLE1BQU07b0JBQ1AsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUMsY0FBYyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO29CQUNqRyxJQUFJLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO3dCQUNyQixJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsRUFBRSxDQUFDO3dCQUNsQyxVQUFVLENBQUMsR0FBRyxFQUFFOzRCQUNaLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7d0JBQ2pFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztxQkFDVjtvQkFDRCxNQUFNO2dCQUNWLEtBQUssaUJBQWlCO29CQUNsQixPQUFPLENBQUMsYUFBYSxLQUFLLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsdUJBQXVCLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FBQztvQkFDdEosTUFBTTtnQkFDVixLQUFLLGFBQWE7b0JBQ2QsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO29CQUNuQixNQUFNO2dCQUNWLEtBQUssZUFBZTtvQkFDaEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDNUIsTUFBTTtnQkFDVixLQUFLLFdBQVc7b0JBQ1osSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztvQkFDNUMsTUFBTTtnQkFDVixLQUFLLGFBQWE7b0JBQ2QsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7b0JBQ2hELE1BQU07Z0JBQ1YsS0FBSyxVQUFVO29CQUNYLElBQUksV0FBVyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsTUFBTSxJQUFJLFdBQVcsQ0FBQyxJQUFJLEVBQUU7d0JBQ3BFLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDO3FCQUMxQztvQkFDRCxNQUFNO2dCQUNWLEtBQUssYUFBYTtvQkFDZCxNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxvQkFBb0IsQ0FBQztvQkFDeEUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRSxPQUFPLENBQUMsQ0FBQztvQkFDNUMsTUFBTTtnQkFDVixLQUFLLGFBQWE7b0JBQ2QsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksVUFBVSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksVUFBVSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7b0JBQy9RLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7b0JBQzNELE1BQU07Z0JBQ1YsS0FBSyxZQUFZO29CQUNiLElBQUksUUFBUSxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLFVBQVUsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLFVBQVUsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUNoUixJQUFJLENBQUMsb0JBQW9CLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUMzRCxNQUFNO2dCQUNWLEtBQUssYUFBYTtvQkFDZCxJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLE9BQU8sRUFBRSxDQUFDLGNBQWMsSUFBSSxVQUFVLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLE9BQU8sRUFBRSxDQUFDLGNBQWMsSUFBSSxVQUFVLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztvQkFDL1EsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDM0QsTUFBTTtnQkFDVixLQUFLLGNBQWM7b0JBQ2YsSUFBSSxPQUFPLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGlCQUFpQixDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksaUJBQWlCLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUN2UyxJQUFJLGlCQUFpQixHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGVBQWUsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGVBQWUsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUNuUyxJQUFJLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGFBQWEsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGFBQWEsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUNoUyxJQUFJLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGtCQUFrQixDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksa0JBQWtCLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztvQkFDeFMsSUFBSSxVQUFVLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksWUFBWSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksWUFBWSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQztvQkFDN1MsSUFBSSxtQkFBbUIsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLE9BQU8sRUFBRSxDQUFDLGNBQWMsSUFBSSxhQUFhLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGFBQWEsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztvQkFDN1UsSUFBSSx1QkFBdUIsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLE9BQU8sRUFBRSxDQUFDLGNBQWMsSUFBSSx5QkFBeUIsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLHlCQUF5QixDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7b0JBQ2hVLElBQUkseUJBQXlCLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksMkJBQTJCLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLE9BQU8sRUFBRSxDQUFDLGNBQWMsSUFBSSwyQkFBMkIsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO29CQUN6VSxJQUFJLHNCQUFzQixHQUFHLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7b0JBQzNILElBQUksV0FBVyxHQUFHLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztvQkFDOUUsSUFBSSxXQUFXLEdBQUcsRUFBRSxDQUFDO29CQUNyQixzQkFBc0IsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLEVBQUU7d0JBQzVDLElBQUksWUFBWSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsbUJBQW1CLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUMxRixXQUFXLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztvQkFDekQsQ0FBQyxDQUFDLENBQUM7b0JBQ0gsSUFBSSxVQUFVLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztvQkFDbEQsSUFBSSxPQUFPLEdBQUcsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxpQkFBaUIsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztvQkFDNUUsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsRUFBRTt3QkFDOUIsT0FBTyxHQUFHLE9BQU8sR0FBRyxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztvQkFDckYsQ0FBQyxDQUFDLENBQUM7b0JBQ0gsSUFBSSxPQUFPLElBQUksT0FBTyxJQUFJLEVBQUUsRUFBRTt3QkFDMUIsK0RBQStEO3dCQUMvRCxjQUFjO3dCQUNkLHlCQUF5Qjt3QkFDekIsMENBQTBDO3dCQUMxQywyQ0FBMkM7d0JBQzNDLFNBQVM7d0JBQ1QsaURBQWlEO3dCQUNqRCxxREFBcUQ7d0JBQ3JELDhCQUE4Qjt3QkFDOUIsZ0NBQWdDO3dCQUNoQyxNQUFNO3dCQUNOLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxVQUFVLENBQ2hDOzRCQUNJLElBQUksRUFBRSxPQUFPOzRCQUNiLGdCQUFnQixFQUFFLHVCQUF1Qjs0QkFDekMsa0JBQWtCLEVBQUUseUJBQXlCOzRCQUM3QyxVQUFVLEVBQUUsVUFBVTs0QkFDdEIsV0FBVyxFQUFFLG1CQUFtQjs0QkFDaEMsV0FBVyxFQUFFLGdCQUFnQixJQUFJLGdCQUFnQixJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLOzRCQUN0RSxRQUFRLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQzt5QkFDNUIsQ0FBQyxDQUFDO3FCQUNWO29CQUNELE1BQU07Z0JBQ1YsS0FBSyxlQUFlO29CQUNoQixJQUFJLENBQUMsb0JBQW9CLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO29CQUNoRCxxREFBcUQ7b0JBQ3JELE1BQU07Z0JBQ1YsS0FBSyxpQkFBaUI7b0JBQ2xCLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7b0JBQ2xELHFEQUFxRDtvQkFDckQsTUFBTTtnQkFDVixLQUFLLGlCQUFpQjtvQkFDbEIsSUFBSSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztvQkFDbEQsMkRBQTJEO29CQUMzRCxNQUFNO2dCQUNWLEtBQUssaUJBQWlCO29CQUNsQixJQUFJLG9CQUFvQixHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGVBQWUsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGVBQWUsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO29CQUMzUyxJQUFJLG9CQUFvQixDQUFDLFdBQVcsRUFBRSxJQUFJLE9BQU8sRUFBRTt3QkFDL0MsSUFBSSxDQUFDLFlBQVksQ0FBQyxvQkFBb0IsRUFBRSxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7cUJBQ2pFO3lCQUFNO3dCQUNILElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7cUJBQ3JEO29CQUNELE1BQU07Z0JBRVYsS0FBSyxhQUFhO29CQUNkLDJEQUEyRDtvQkFDM0QsZ0VBQWdFO29CQUNoRSxJQUFJO29CQUNKLFNBQVM7b0JBQ1QsMkNBQTJDO29CQUMzQyxJQUFJO29CQUNKLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7b0JBQ3pELE1BQU07Z0JBQ1YsS0FBSyxhQUFhO29CQUNkLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO29CQUN2QyxNQUFNO2dCQUNWLEtBQUssYUFBYTtvQkFDZCxxRUFBcUU7b0JBQ3JFLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGNBQWMsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGNBQWMsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO29CQUN2UiwrQ0FBK0M7b0JBQy9DLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyw4QkFBOEIsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7b0JBQ3ZFLE1BQU07Z0JBQ1YsS0FBSyxpQkFBaUI7b0JBQ2xCLElBQUksT0FBTyxLQUFLLEdBQUcsRUFBRTt3QkFDakIsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUU7NEJBQ3BELElBQUksRUFBRTtnQ0FDRixPQUFPLEVBQUUsa0JBQWtCLFlBQVksR0FBRztnQ0FDMUMsS0FBSyxFQUFFLEdBQUc7Z0NBQ1YsS0FBSyxFQUFFLHlCQUF5Qjs2QkFDbkM7eUJBQ0osQ0FBQyxDQUFDO3dCQUVILFNBQVMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUU7NEJBQ3ZDLFlBQVksQ0FBQyxPQUFPLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxDQUFDLENBQUM7NEJBQy9DLElBQUksTUFBTSxFQUFFO2dDQUNSLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUM7NkJBQ2pDO2lDQUFNO2dDQUNILE1BQU0sV0FBVyxHQUFHO29DQUNoQixPQUFPLEVBQUUsT0FBTztvQ0FDaEIsUUFBUSxFQUFFLEVBQUU7b0NBQ1osR0FBRyxFQUFFLEtBQUs7aUNBQ2IsQ0FBQztnQ0FDRixJQUFJLENBQUMsb0JBQW9CLENBQUMsaUNBQWlDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDOzZCQUNqRjt3QkFDTCxDQUFDLENBQUMsQ0FBQztxQkFDTjt5QkFBTTt3QkFDSCxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO3FCQUNqQztvQkFDRCxNQUFNO2dCQUNWLEtBQUssV0FBVztvQkFDWixJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUN4QixNQUFNO2dCQUNWLEtBQUssaUJBQWlCO29CQUNsQixJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUM5QixNQUFNO2dCQUVWLEtBQUssZ0JBQWdCO29CQUNqQixNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksUUFBUSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3hILElBQUksTUFBTSxFQUFFO3dCQUNSLFFBQVEsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLGNBQWMsQ0FBQzs0QkFDakQsUUFBUSxFQUFFLFFBQVE7NEJBQ2xCLEtBQUssRUFBRSxPQUFPLEVBQU0sMkNBQTJDO3lCQUNsRSxDQUFDLENBQUM7cUJBQ047b0JBQ0QsTUFBTTtnQkFDVixLQUFLLHdCQUF3QjtvQkFDekIsSUFBSSxDQUFDLG9CQUFvQixDQUFDLDZCQUE2QixDQUFDLElBQUksRUFBRSxDQUFDO29CQUMvRCxNQUFNO2dCQUNWO29CQUNJLElBQUksWUFBWSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7b0JBQ3ZDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7b0JBQ3ZCLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTt3QkFDeEYsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7d0JBQy9DLFlBQVksR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQzFCLElBQUksUUFBUSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTs0QkFDckMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQzt5QkFDNUU7NkJBQ0k7NEJBQ0QsWUFBWSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7eUJBQ3BEO3FCQUNKO29CQUNELElBQUksWUFBWSxFQUFFO3dCQUNkLElBQUkscUJBQXFCLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksUUFBUSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDO3dCQUN2SixJQUFJLHFCQUFxQixJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLHFCQUFxQixDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBRTs0QkFDcEcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQztnQ0FDakQsTUFBTSxFQUFFLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxvQkFBb0IsQ0FBQyxZQUFZLENBQUM7Z0NBQ3BFLE1BQU0sRUFBRSxxQkFBcUI7NkJBQ2hDLENBQUMsQ0FBQzt5QkFDTjs2QkFBTTs0QkFDSCxJQUFJLENBQUMsb0JBQW9CLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQVMsRUFBRSxFQUFFO2dDQUMzRSxJQUFJLENBQUMsc0JBQXNCLENBQUMsWUFBWSxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQzs0QkFDN0QsQ0FBQyxDQUFDLENBQUM7eUJBQ047cUJBQ0o7b0JBQ0QsTUFBTTthQUNiO1NBQ0o7SUFDTCxDQUFDO0lBRUQsdUJBQXVCLENBQUMsT0FBTztRQUMzQixJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsbUJBQW1CLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDbEQsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUN4RjtJQUNMLENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxJQUFJO1FBQ2pCLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQzlDLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxNQUFNLEtBQUssR0FBRywyQkFBMkIsQ0FBQztRQUMxQyxNQUFNLFlBQVksR0FBRyxFQUFFLENBQUM7UUFDeEIsa0NBQWtDO1FBQ2xDLEtBQUssTUFBTSxDQUFDLElBQUksSUFBSSxFQUFFO1lBQ2xCLElBQUksR0FBRyxHQUFHLFlBQVksQ0FBQztZQUN2QixJQUFJLElBQUksR0FBRyxFQUFFLENBQUM7WUFDZCxJQUFJLENBQUMsQ0FBQztZQUNOLE9BQU8sQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUN4QixHQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDaEQsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDdkI7WUFDRCxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3ZCO1FBQ0QsT0FBTyxZQUFZLENBQUMsRUFBRSxDQUFDLElBQUksWUFBWSxDQUFDO0lBQzVDLENBQUM7SUFFRCxlQUFlLENBQUMsT0FBTztRQUNuQixJQUFJLENBQUMsb0JBQW9CLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDO1FBQzlFLE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsY0FBYyxLQUFLLGtCQUFrQixDQUFDLENBQUM7UUFDeEgsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxjQUFjLEtBQUssUUFBUSxDQUFDLENBQUM7UUFDMUcsSUFBSSxVQUFVLEVBQUU7WUFDWixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFDOUQsTUFBTSxVQUFVLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxFQUFFO2dCQUNqRSxLQUFLLE1BQU0sSUFBSSxJQUFJLFlBQVksRUFBRTtvQkFDN0IsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLEVBQUUsRUFBRTt3QkFDaEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO3FCQUNyQjtpQkFDSjtZQUNMLENBQUMsQ0FBQyxDQUFDO1lBQ0gsSUFBSSxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1NBQ2pEO0lBQ0wsQ0FBQztJQUVELFVBQVUsQ0FBQyxJQUFTO1FBQ2hCLElBQUksY0FBYyxHQUFHLEtBQUssQ0FBQztRQUMzQixrS0FBa0s7UUFDbEssSUFBSSxJQUFJLEtBQUssU0FBUyxJQUFJLElBQUksQ0FBQyxhQUFhLEtBQUssQ0FBQyxFQUFFO1lBQ2hELGNBQWMsR0FBRyxJQUFJLENBQUM7U0FDekI7UUFDRCxJQUFJLENBQUMsb0JBQW9CLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxFQUFFLFlBQVksRUFBRSxjQUFjLEVBQUUsWUFBWSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxhQUFhLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxVQUFVLEVBQUUsYUFBYSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFBO0lBQzdOLENBQUM7SUFFTyxlQUFlO1FBQ25CLE1BQU0sT0FBTyxHQUFHLFlBQVksQ0FBQztRQUM3QixNQUFNLFNBQVMsR0FBUSxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztRQUN0RSxNQUFNLGVBQWUsR0FBUSxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFaEQsSUFBSSxDQUFDLGVBQWUsRUFBRTtZQUNsQiw4Q0FBOEM7WUFDOUMsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFFRCxNQUFNLEVBQ0YsV0FBVyxFQUNYLE9BQU8sRUFDUCxXQUFXLEVBQ1gsU0FBUyxFQUNULEdBQUcsRUFDSCxVQUFVLEVBQ1YsV0FBVyxFQUNYLEtBQUssRUFDTCxnQkFBZ0IsRUFDaEIsV0FBVyxFQUNYLE1BQU0sRUFDTixjQUFjLEVBQUUsR0FBRyxJQUFJLENBQUMsMkJBQTJCLENBQUMsaUJBQWlCLENBQUMsZUFBZSxDQUFDLENBQUM7UUFFM0YsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDO0lBRU8sS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPO1FBQzNCLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUM1QyxNQUFNLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGtCQUFrQixDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzVKLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGtCQUFrQixDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3pKLElBQUksWUFBWSxJQUFJLGdCQUFnQixDQUFDLE1BQU0sRUFBRTtZQUN6QyxNQUFNLGVBQWUsR0FBRyxFQUFFLENBQUM7WUFDM0IsS0FBSyxNQUFNLE1BQU0sSUFBSSxnQkFBZ0IsRUFBRTtnQkFDbkMsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ25GLElBQUksV0FBVyxFQUFFO29CQUNiLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsa0JBQWtCLENBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDakYsSUFBSSxPQUFPLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxPQUFPLENBQUMsTUFBTSxFQUFFO3dCQUNyRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTs0QkFDckMsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLEVBQUU7Z0NBQzVCLE1BQU0sUUFBUSxHQUFHLFlBQVksR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUM7Z0NBQzNELE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7Z0NBQzNELElBQUksUUFBUSxJQUFJLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRTtvQ0FDaEMsZUFBZSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztpQ0FDNUM7NkJBQ0o7eUJBQ0o7cUJBQ0o7aUJBQ0o7YUFDSjtZQUNELElBQUksQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1NBQ25EO0lBQ0wsQ0FBQztJQUVPLHNCQUFzQixDQUFDLFlBQVksRUFBRSxJQUFJLEVBQUUsT0FBTztRQUN0RCxJQUFJLElBQUksS0FBSyxTQUFTLEVBQUU7WUFDcEIsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGtCQUFrQixDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQztZQUNqRSxnSEFBZ0g7WUFDaEgsSUFBRyxZQUFZLElBQUksaUJBQWlCLEVBQUU7Z0JBQ2xDLE9BQU8sQ0FBQyxhQUFhLEdBQUcsa0JBQWtCLENBQUM7YUFDOUM7WUFDRCxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsS0FBSyxDQUFDLEVBQUU7Z0JBQzdCLDRCQUE0QjtnQkFDNUIsd0JBQXdCO2dCQUN4QixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUN0QixJQUFJLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxJQUFJLEVBQUU7b0JBQ2hDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQzdEO2FBQ0o7aUJBQU0sSUFBSSxPQUFPLENBQUMsYUFBYSxLQUFLLEVBQUUsRUFBRTtnQkFDckMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDOUM7aUJBQ0k7Z0JBQ0QsTUFBTSxnQkFBZ0IsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztnQkFDMUYsSUFBSSxDQUFDLG9CQUFvQixDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDMUQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7YUFFL0M7U0FDSjtJQUNMLENBQUM7SUFFTyxrQkFBa0IsQ0FBQyxPQUFPLEVBQUUsTUFBTTtRQUN0QyxJQUFJLE9BQU8sQ0FBQyxhQUFhLElBQUksa0JBQWtCLEVBQUM7WUFDNUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQztnQkFDakQsYUFBYSxFQUFFLE9BQU8sQ0FBQyxhQUFhO2FBQ3ZDLENBQUMsQ0FBQztZQUNILElBQUksQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDeEQ7YUFDSSxJQUFJLE9BQU8sQ0FBQyxhQUFhLElBQUksOEJBQThCLEVBQUU7WUFDOUQsSUFBSSxDQUFDLG9CQUFvQixDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQztnQkFDakQsYUFBYSxFQUFFLE9BQU8sQ0FBQyxhQUFhO2FBQ3ZDLENBQUMsQ0FBQztZQUNILElBQUksQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxVQUFVLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDM0Q7UUFFRCxNQUFNLFNBQVMsR0FBUSxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztRQUN0RSxJQUFJLENBQUMsU0FBUyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUNqRCxPQUFPO1NBQ1Y7UUFDRCxNQUFNLGVBQWUsR0FBUSxTQUFTLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzlELElBQUksRUFDQSxHQUFHLEVBQ0gsV0FBVyxFQUNYLFNBQVMsRUFDWixHQUFHLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxpQkFBaUIsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUN4RSxnQkFBZ0I7UUFDaEIsS0FBSyxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ3RDLElBQUksR0FBRyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUU7Z0JBQzFCLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUN4RTtTQUNKO1FBQ0Qsa0JBQWtCO1FBQ2xCLEtBQUssTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUN4QyxJQUFJLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFO2dCQUMxQixHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDMUU7U0FDSjtRQUNELElBQUksT0FBTyxHQUFHLFFBQVEsQ0FBQztRQUN2QixJQUFJLE9BQU8sSUFBSSxPQUFPLENBQUMsbUJBQW1CLElBQUksT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixFQUFFO1lBQzdGLEtBQUssTUFBTSxFQUFFLElBQUksT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixFQUFFO2dCQUNoRSxJQUFJLEVBQUUsQ0FBQyxjQUFjLEtBQUssUUFBUSxFQUFFO29CQUNoQyxRQUFRLEVBQUUsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLEVBQUU7d0JBQzVCLEtBQUssTUFBTTs0QkFDUCxPQUFPLEdBQUcsT0FBTyxDQUFDOzRCQUNsQixNQUFNO3dCQUNWLEtBQUssT0FBTzs0QkFDUixPQUFPLEdBQUcsUUFBUSxDQUFDOzRCQUNuQixNQUFNO3dCQUNWLEtBQUssS0FBSzs0QkFDTixPQUFPLEdBQUcsTUFBTSxDQUFDOzRCQUNqQixNQUFNO3dCQUNWOzRCQUNJLE1BQU07cUJBQ2I7aUJBQ0o7YUFDSjtTQUNKO1FBQ0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRUQsWUFBWSxDQUFDLG9CQUFvQixFQUFFLE9BQU8sRUFBRSxXQUFXO1FBQ25ELElBQUksb0JBQW9CLEVBQUU7WUFDdEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUN2QixNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsRUFBRTtnQkFDcEQsSUFBSSxFQUFFO29CQUNGLE9BQU8sRUFBRSxvQkFBb0I7b0JBQzdCLEtBQUssRUFBRSxHQUFHO2lCQUNiO2FBQ0osQ0FBQyxDQUFDO1lBQ0gsU0FBUyxDQUFDLFdBQVcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDdkMsSUFBSSxNQUFNLEVBQUU7b0JBQ1IsSUFBSSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztpQkFDckQ7WUFDTCxDQUFDLENBQUMsQ0FBQztTQUNOO2FBQU07WUFDSCxJQUFJLENBQUMsc0JBQXNCLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1NBQ3JEO0lBQ0wsQ0FBQztJQUVNLHNCQUFzQixDQUFDLE9BQU8sRUFBRSxXQUFXLEVBQUUsWUFBWSxHQUFHLEVBQUU7UUFDakUsSUFBSSxXQUFXLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksYUFBYSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksYUFBYSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQzNTLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGdCQUFnQixDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQ2xKLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLFdBQVcsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLFdBQVcsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ25SLElBQUksY0FBYyxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGFBQWEsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGFBQWEsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQzVSLElBQUksY0FBYyxHQUFHLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMvRyxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUYsSUFBSSxXQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ3JCLElBQUksZUFBZSxDQUFDO1FBQ3BCLElBQUksY0FBYyxDQUFDO1FBQ25CLElBQUksVUFBVSxHQUFHLGNBQWMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDM0MsSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksSUFBSSxXQUFXLElBQUksSUFBSSxJQUFJLFlBQVksRUFBRTtZQUNuRSxJQUFJLFNBQVMsS0FBSyxzQkFBc0IsSUFBSSxTQUFTLEtBQUsscUJBQXFCLEVBQUU7Z0JBQzdFLGVBQWUsR0FBRyxXQUFXLEVBQUUsS0FBSyxFQUFFLGNBQWMsQ0FBQztnQkFDckQsY0FBYyxHQUFHLFdBQVcsRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDO2FBQ2pEO2lCQUFNO2dCQUNILGVBQWUsR0FBRyxVQUFVLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDcEQsY0FBYyxHQUFHLFdBQVcsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLGNBQWMsQ0FBQzthQUM3RDtTQUNKO1FBQ0QsSUFBSSxXQUFXLElBQUksSUFBSSxFQUFFO1lBQ3JCLElBQUksY0FBYyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDMUMsSUFBSSxjQUFjLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtnQkFDNUIsV0FBVyxHQUFHLGNBQWMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3JEO2lCQUFNO2dCQUNILFdBQVcsR0FBRyxjQUFjLEVBQUUsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDN0Y7WUFDRCxJQUFJLENBQUMsY0FBYyxJQUFJLFNBQVMsS0FBSyxzQkFBc0IsSUFBSSxTQUFTLEtBQUsscUJBQXFCLEVBQUU7Z0JBQ2hHLGNBQWMsR0FBRyxXQUFXLENBQUMsZUFBZSxDQUFDLEVBQUUsY0FBYyxDQUFDO2FBQ2pFO1lBQ0QsSUFBSSxRQUFRLENBQUE7WUFDWixJQUFJLFNBQVMsS0FBSyxzQkFBc0IsSUFBSSxTQUFTLEtBQUsscUJBQXFCLEVBQUU7Z0JBQzdFLFFBQVEsR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLGNBQWMsQ0FBQyxDQUFDO2FBQ3pFO2lCQUFNO2dCQUNILFFBQVEsR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRTtvQkFDdEMsT0FBTyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksY0FBYyxDQUFDO2dCQUMzQyxDQUFDLENBQUMsQ0FBQzthQUNOO1lBQ0QsSUFBSSxjQUFjLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtnQkFDNUIsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQzthQUNoRDtpQkFBTTtnQkFDSCxjQUFjLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDO2FBQ3BGO1lBQ0QsSUFBSSxTQUFTLElBQUksT0FBTyxJQUFJLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUM1RCxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQztnQkFDdkUsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ3pKLGNBQWMsQ0FBQyxVQUFVLENBQUMsR0FBRyxzQkFBc0IsR0FBRyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsMEJBQTBCLEdBQUcsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFBO2FBQ2pLO1lBQ0QsSUFBSSxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtnQkFDckMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDMUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDeEMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxHQUFHLGdEQUFnRCxDQUFBO2FBQ2hGO1lBQ0QsSUFBSSxTQUFTLElBQUksYUFBYSxJQUFJLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUN4RSxjQUFjLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsTUFBTSxDQUFDO2dCQUNqRixjQUFjLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDOUosY0FBYyxDQUFDLGVBQWUsQ0FBQyxHQUFHLGdDQUFnQyxHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLCtCQUErQixHQUFHLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFBO2FBQzdMO1lBQ0QsSUFBSSxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtnQkFDM0MsY0FBYyxDQUFDLGdCQUFnQixDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUM5QyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzVDLGNBQWMsQ0FBQyxlQUFlLENBQUMsR0FBRywrREFBK0QsQ0FBQTthQUNwRztZQUNELElBQUksU0FBUyxJQUFJLDJCQUEyQixFQUFFO2dCQUMxQyxJQUFJLGNBQWMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUMxQyxJQUFJLFdBQVcsR0FBRyxjQUFjLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7Z0JBQ3ZGLElBQUksaUJBQWlCLEdBQUcsRUFBRSxDQUFDO2dCQUMzQixJQUFJLGNBQWMsR0FBRyxJQUFJLENBQUM7Z0JBQzFCLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUU7b0JBQ25DLElBQUksT0FBTyxDQUFDLGFBQWEsSUFBSSxPQUFPLENBQUMsYUFBYSxJQUFJLGNBQWMsRUFBRTt3QkFDbEUsdURBQXVEO3dCQUN2RCxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7d0JBQ2hDLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLENBQUM7cUJBQ25HO3lCQUFNLElBQUksQ0FBQyxjQUFjLEVBQUU7d0JBQ3hCLDREQUE0RDt3QkFDNUQsY0FBYyxHQUFHLE9BQU8sQ0FBQzt3QkFDekIsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLFlBQVksQ0FBQyxHQUFHLFNBQVMsQ0FBQztxQkFDMUc7eUJBQU07d0JBQ0gsOERBQThEO3dCQUM5RCxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7d0JBQ2hDLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLENBQUM7cUJBQ25HO2dCQUNMLENBQUMsQ0FBQyxDQUFDO2dCQUNILGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxZQUFZLENBQUMsR0FBRyxHQUFHLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxZQUFZLENBQUMsbUNBQW1DLGNBQWMsRUFBRSxPQUFPLElBQUksR0FBRyxFQUFFLENBQUE7Z0JBQzFOLElBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7b0JBQ3RGLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQztpQkFDN0U7Z0JBQ0QsSUFBSSxjQUFjLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLElBQUksY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7b0JBQzVILGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxHQUFHLGNBQWMsRUFBRSxDQUFBO29CQUM5RyxjQUFjLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLGlCQUFpQixDQUFDO2lCQUNqSDthQUNKO1lBQ0QsSUFBSSxTQUFTLElBQUksa0JBQWtCLEVBQUU7Z0JBQ2pDLElBQUksY0FBYyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtvQkFDdEYsT0FBTyxDQUFDLGVBQWUsQ0FBQyxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDbkUsQ0FBQyxDQUFDLENBQUM7Z0JBQ0gsSUFBSSxVQUFVLEdBQUcsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO2dCQUN0RixJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsc0JBQXNCLENBQUMsVUFBVSxFQUFFLGVBQWUsQ0FBQyxDQUFDLFdBQVcsQ0FBQztnQkFDdkYsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEdBQUcsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLFlBQVksQ0FBQywyREFBMkQsVUFBVSxFQUFFLE1BQU0sSUFBSSxDQUFDLHNCQUFzQixXQUFXLElBQUksQ0FBQyxtQkFBbUIsQ0FBQTthQUNwUztZQUNELElBQUksU0FBUyxJQUFJLFlBQVksRUFBRTtnQkFDM0IsSUFBSSxjQUFjLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDMUMsY0FBYyxDQUFDLGlCQUFpQixDQUFDLEdBQUcsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLGlCQUFpQixDQUFDLENBQUM7YUFDcEs7WUFDRCxJQUFJLENBQUMsc0JBQXNCLENBQUMsT0FBTyxFQUFFLGNBQWMsQ0FBQyxDQUFDO1NBQ3hEO2FBQU07WUFDSCxLQUFLLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUMxQyxJQUFJLFFBQVEsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLDhCQUE4QixDQUFDLENBQUM7Z0JBQ3pELElBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtnQkFDL0MsSUFBSSxRQUFRLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDakMsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO2dCQUNiLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxFQUFFO29CQUNaLElBQUksV0FBVyxDQUFDLEtBQUssQ0FBQyxFQUFFO3dCQUNwQixXQUFXLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztxQkFDckQ7eUJBQU07d0JBQ0gsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7d0JBQ2xDLFdBQVcsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUM7cUJBQzVCO2lCQUNKO2FBQ0o7WUFDRCxXQUFXLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRTtnQkFDM0IsT0FBTyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksV0FBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDOUQsQ0FBQyxDQUFDLENBQUM7WUFDSCxJQUFJLFNBQVMsSUFBSSxPQUFPLElBQUksY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQzVELGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDO2dCQUN2RSxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDekosY0FBYyxDQUFDLFVBQVUsQ0FBQyxHQUFHLHNCQUFzQixHQUFHLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRywwQkFBMEIsR0FBRyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUE7YUFDaks7WUFDRCxJQUFJLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO2dCQUNyQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUMxQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN4QyxjQUFjLENBQUMsVUFBVSxDQUFDLEdBQUcsZ0RBQWdELENBQUE7YUFDaEY7WUFDRCxJQUFJLFNBQVMsSUFBSSxhQUFhLElBQUksY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQ3hFLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxNQUFNLENBQUM7Z0JBQ2pGLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUM5SixjQUFjLENBQUMsZUFBZSxDQUFDLEdBQUcsZ0NBQWdDLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsK0JBQStCLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLENBQUMsS0FBSyxDQUFDLENBQUE7YUFDN0w7WUFDRCxJQUFJLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO2dCQUMzQyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzlDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDNUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxHQUFHLCtEQUErRCxDQUFBO2FBQ3BHO1lBQ0QsSUFBSSxTQUFTLElBQUksMkJBQTJCLEVBQUU7Z0JBQzFDLElBQUksY0FBYyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzFDLElBQUksV0FBVyxHQUFHLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtnQkFDdkYsSUFBSSxpQkFBaUIsR0FBRyxFQUFFLENBQUM7Z0JBQzNCLElBQUksY0FBYyxHQUFHLElBQUksQ0FBQztnQkFDMUIsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRTtvQkFDbkMsSUFBSSxPQUFPLENBQUMsYUFBYSxJQUFJLE9BQU8sQ0FBQyxhQUFhLElBQUksY0FBYyxFQUFFO3dCQUNsRSx1REFBdUQ7d0JBQ3ZELGlCQUFpQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQzt3QkFDaEMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsQ0FBQztxQkFDbkc7eUJBQU0sSUFBSSxDQUFDLGNBQWMsRUFBRTt3QkFDeEIsNERBQTREO3dCQUM1RCxjQUFjLEdBQUcsT0FBTyxDQUFDO3dCQUN6QixjQUFjLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsU0FBUyxDQUFDO3FCQUMxRzt5QkFBTTt3QkFDSCw4REFBOEQ7d0JBQzlELGlCQUFpQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQzt3QkFDaEMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsQ0FBQztxQkFDbkc7Z0JBQ0wsQ0FBQyxDQUFDLENBQUM7Z0JBQ0gsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxHQUFHLEdBQUcsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxtQ0FBbUMsY0FBYyxFQUFFLE9BQU8sSUFBSSxHQUFHLEVBQUUsQ0FBQTtnQkFDMU4sSUFBSSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtvQkFDdEYsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxDQUFDO2lCQUM3RTtnQkFDRCxJQUFJLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsSUFBSSxjQUFjLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtvQkFDNUgsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxFQUFFLEdBQUcsY0FBYyxFQUFFLENBQUE7b0JBQzlHLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsaUJBQWlCLENBQUM7aUJBQ2pIO2FBQ0o7WUFDRCxJQUFJLFNBQVMsSUFBSSxrQkFBa0IsRUFBRTtnQkFDakMsSUFBSSxjQUFjLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDMUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFO29CQUN0RixPQUFPLENBQUMsZUFBZSxDQUFDLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNuRSxDQUFDLENBQUMsQ0FBQztnQkFDSCxJQUFJLFVBQVUsR0FBRyxjQUFjLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7Z0JBQ3RGLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLEVBQUUsZUFBZSxDQUFDLENBQUMsV0FBVyxDQUFDO2dCQUN2RixjQUFjLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsV0FBVyxDQUFDLEdBQUcsR0FBRyxjQUFjLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsWUFBWSxDQUFDLDJEQUEyRCxVQUFVLEVBQUUsTUFBTSxJQUFJLENBQUMsc0JBQXNCLFdBQVcsSUFBSSxDQUFDLG1CQUFtQixDQUFBO2FBQ3BTO1lBQ0QsSUFBSSxTQUFTLElBQUksWUFBWSxFQUFFO2dCQUMzQixJQUFJLGNBQWMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUMxQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsR0FBRyxXQUFXLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsQ0FBQzthQUN4SjtZQUNELElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7U0FDckQ7SUFDTCxDQUFDO0lBQ00sc0JBQXNCLENBQUMsT0FBTyxFQUFFLFdBQVc7UUFDOUMsSUFBSSxjQUFjLEdBQUcsSUFBSSxDQUFDLHVCQUF1QixDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQy9HLElBQUksV0FBVyxDQUFDLEtBQUssRUFBRTtZQUNuQixjQUFjLENBQUMsV0FBVyxHQUFHO2dCQUN6QixRQUFRLEVBQUUsV0FBVyxDQUFDLEtBQUssQ0FBQyxRQUFRO2dCQUNwQyxhQUFhLEVBQUUsV0FBVyxDQUFDLEtBQUssQ0FBQyxhQUFhO2dCQUM5QyxvQkFBb0IsRUFBRSxXQUFXLENBQUMsS0FBSyxDQUFDLG9CQUFvQjtnQkFDNUQsU0FBUyxFQUFFLFdBQVcsQ0FBQyxLQUFLLENBQUMsU0FBUztnQkFDdEMsYUFBYSxFQUFFLE1BQU07YUFDeEIsQ0FBQTtTQUNKO1FBQ0QsSUFBSSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sRUFBRSxjQUFjLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRU0sb0JBQW9CLENBQUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxZQUFZLEdBQUcsRUFBRTtRQUMvRCxJQUFJLGNBQWMsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLE9BQU8sRUFBRSxDQUFDLGNBQWMsSUFBSSxnQkFBZ0IsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLGdCQUFnQixDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDbFMsSUFBSSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLE9BQU8sRUFBRSxDQUFDLGNBQWMsSUFBSSxtQkFBbUIsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksT0FBTyxFQUFFLENBQUMsY0FBYyxJQUFJLG1CQUFtQixDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUN2VSxJQUFJLFdBQVcsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLE9BQU8sRUFBRSxDQUFDLGNBQWMsSUFBSSxhQUFhLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLE9BQU8sRUFBRSxDQUFDLGNBQWMsSUFBSSxhQUFhLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDM1MsSUFBSSxjQUFjLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksYUFBYSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksYUFBYSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDNVIsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFPLEVBQUUsQ0FBQyxjQUFjLElBQUksV0FBVyxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsSUFBSSxPQUFP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QUFLLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQztZQUNqQyxRQUFRLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxRQUFRLENBQUM7U0FDeEM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUNDLGlFQUFpRTtJQUNqRSxNQUFNLFlBQVksR0FBRyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFDO0lBQ2pHLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFzQixFQUFFLEVBQUU7UUFDNUMsaURBQWlEO1FBQ2pELCtFQUErRTtRQUMvRSxTQUFTLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsQ0FBQyxZQUFZO1FBQy9DLHVDQUF1QztRQUN2QyxxQ0FBcUM7UUFDckMsd0NBQXdDO1FBQ3hDLCtEQUErRDtRQUMvRCxnRUFBZ0U7UUFDaEUsU0FBUyxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFDLENBQUMsNkJBQTZCO1FBQ3ZFLFNBQVMsQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxDQUFDLHVDQUF1QztRQUMzRSx3RUFBd0U7UUFDeEUsU0FBUyxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO0lBRXpDLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVTQlJlcXVlc3RCb2R5VXRpbCB9IGZyb20gJy4vZXNiLXJlcXVlc3QtYm9keS11dGlscyc7XHJcbmltcG9ydCB7IFdGRUNvbmRpdGlvbmFsRXhlY3V0ZXIgfSBmcm9tICcuL3dmZS1jb25kaXRpb25hbC1xdWVyeS1leGVjdXRlci11dGlsJztcclxuaW1wb3J0IHsgU2Vzc2lvbktleVV0aWwgfSBmcm9tICcuL3Nlc3Npb24ta2V5LXV0aWwnO1xyXG5pbXBvcnQgeyBDZWVBcGlTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvY2VlLWFwaS1zZXJ2aWNlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBTaGFyZWRFdmVudHNTZXJ2aWNlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3NoYXJlZC1ldmVudHMtc2VydmljZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgV2ZlU3RlcExvYWRlclNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy93ZmUtc3RlcC1sb2FkZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xyXG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQgeyBFdmVudExpc3QgfSBmcm9tICcuLi9tb2RlbHMvZXZlbnRzX21vZGVsL2V2ZW50X2xpc3QnO1xyXG5pbXBvcnQgeyBFdmVudFJlc3BvbnNlIH0gZnJvbSAnLi4vbW9kZWxzL2V2ZW50c19tb2RlbC9ldmVudF9yZXNwb25zZSc7XHJcbmltcG9ydCB7IEV2ZW50IH0gZnJvbSAnLi4vbW9kZWxzL2V2ZW50c19tb2RlbC9ldmVudCc7XHJcbmltcG9ydCB7IEV2ZW50Q29uZmlnIH0gZnJvbSAnLi4vbW9kZWxzL2V2ZW50c19tb2RlbC9ldmVudF9jb25maWcnO1xyXG5pbXBvcnQgeyBDb25kaXRpb24gfSBmcm9tICcuLi9tb2RlbHMvZXZlbnRzX21vZGVsL2V2ZW50X2NvbmRpdGlvbic7XHJcbmltcG9ydCB7IEludm9rZUV2ZW50QWRkaXRpb25hbFBhcmFtdGVycyB9IGZyb20gJy4uL21vZGVscy9ldmVudHNfbW9kZWwvaW52b2tlX2V2ZW50X2FkZGl0aW9uYWxfcGFyYW1zJztcclxuaW1wb3J0IHsgQXBwRGF0YVNlcnZpY2UgfSBmcm9tICcuLi9tb2RlbHMvYXBwLWRhdGEvYXBwLWRhdGEuc2VydmljZSc7XHJcbmltcG9ydCB7IEFwaURhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vbW9kZWxzL2FwaS1kYXRhL2FwaS1kYXRhLnNlcnZpY2UnO1xyXG5cclxuaW1wb3J0IHsgTWF0RGlhbG9nIGFzIE1hdERpYWxvZyB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RpYWxvZyc7XHJcbmltcG9ydCB7IE1hdFNuYWNrQmFyIGFzIE1hdFNuYWNrQmFyIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvc25hY2stYmFyJztcclxuaW1wb3J0IHsgTW9kYWxSZW5kZXJlckNvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvbW9kYWwtcmVuZGVyZXIvbW9kYWwtcmVuZGVyZXIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgdGFrZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgQ29tbW9uVXRpbCB9IGZyb20gJy4vY29tbW9uLXV0aWwnO1xyXG5pbXBvcnQgeyBSZXBlYXRhYmxlQmxvY2tEYXRhIH0gZnJvbSAnLi4vbW9kZWxzL3JlcGVhdGFibGUtYmxvY2stZGF0YS9yZXBldGFibGVCbG9ja0RhdGEudXRpbCc7XHJcbmltcG9ydCB7IEFsZXJ0TW9kYWxDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL2FsZXJ0LW1vZGFsL2FsZXJ0LW1vZGFsLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFVuZG9SZWRvIH0gZnJvbSAnLi91bmRvLXJlZG8udXRpbCc7XHJcbmltcG9ydCB7IEFzc29jaWF0ZWRNYXBVdGlsIH0gZnJvbSAnLi9hc3NvY2lhdGVkLW1hcC11dGlscyc7XHJcbmltcG9ydCBFeHRlcm5hbFJlcXVlc3RSZXNwb25zZVV0aWwsIHsgRXh0ZXJuYWxSZXNwb25zZSB9IGZyb20gJy4vZXh0ZXJuYWwtcmVxdWVzdC1yZXNwb25zZS51dGlsJztcclxuaW1wb3J0IEludGVybmFsUmVzcG9uc2VVdGlsIGZyb20gJy4vaW50ZXJuYWwtcmVzcG9uc2UudXRpbCc7XHJcbmltcG9ydCB7IEVtcHR5VXRpbCB9IGZyb20gJy4vZW1wdHktdXRpbCc7XHJcbmltcG9ydCB7IFJlZGlyZWN0aW9uVXRpbCB9IGZyb20gJy4vcmVkaXJlY3Rpb24tdXRpbCc7XHJcbmltcG9ydCB7IEFwcGxpY2F0aW9uU3RhdGVTdG9yZVV0aWwgfSBmcm9tICcuL2FwcGxpY2F0aW9uLXN0YXRlLXN0b3JlLXV0aWwnO1xyXG5pbXBvcnQgeyBBUElLZXlVdGlsIH0gZnJvbSAnLi9hcGkta2V5LXV0aWwnO1xyXG5pbXBvcnQgeyBBcHBEYXRhIH0gZnJvbSAnLi4vbW9kZWxzL2FwcC1kYXRhL2FwcC1kYXRhLm1vZGVsJztcclxuaW1wb3J0IHsgRmlsZVVwbG9hZFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9maWxlLXVwbG9hZC1zZXJ2aWNlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDRUVJbnRlcm5hbEVtaXR0ZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvaW50ZXJuYWwtY2VlLWVtaXR0ZXItc2VydmljZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUmVwZWF0YWJsZXdvcmtmbG93SGFuZGxlciB9IGZyb20gJy4uL3V0aWxzL3JlcGVhdGFibGV3b3JrZmxvdy11dGlsJztcclxuaW1wb3J0IHsgU25hY2tiYXJSZW5kZXJlckNvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvc25hY2tiYXItcmVuZGVyZXIvc25hY2tiYXItcmVuZGVyZXIuY29tcG9uZW50JztcclxuaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJ0BkYXRvcmFtYS9ha2l0YSc7XHJcbmltcG9ydCB7IEluamVjdGFibGUsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBJbkJ1aWxkRnVuY3Rpb25zVXRpbCB9IGZyb20gJy4vaW5idWlsZC1mdW5jdGlvbnMtdXRpbCc7XHJcbmltcG9ydCB7IGpzUERGIH0gZnJvbSBcImpzcGRmXCI7XHJcbmltcG9ydCB7IE1hdERpYWxvZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RpYWxvZyc7XHJcbmltcG9ydCB7IERyYXdlckNvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvZHJhd2VyLXJlbmRlcmVyL2RyYXdlci1yZW5kZXJlci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBTZXRBUElDYWxsYmFja0RhdGEgfSBmcm9tICcuL3NldC1hcGktY2FsbGJhY2stZGF0YS11dGlsJztcclxuaW1wb3J0IHsgQ29uc29sZSB9IGZyb20gJ2NvbnNvbGUnO1xyXG5pbXBvcnQgKiBhcyBYTFNYIGZyb20gJ3hsc3gnO1xyXG5pbXBvcnQgaHRtbDJjYW52YXMgZnJvbSAnaHRtbDJjYW52YXMnO1xyXG5pbXBvcnQgaHRtbDJwZGYgZnJvbSAnaHRtbDJwZGYuanMnO1xyXG5cclxuXHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgICBwcm92aWRlZEluOiAncm9vdCdcclxufSlcclxuZXhwb3J0IGNsYXNzIFdGRUV2ZW50TGlzdEhhbmRsZXIge1xyXG4gICAgZXZlbnRfbGlzdDogRXZlbnRMaXN0W10gPSBbXTtcclxuICAgIGlucHV0RGV0YWlsczogb2JqZWN0ID0ge307XHJcbiAgICBzdWNjZXNzOiBFdmVudFJlc3BvbnNlW10gPSBbXTtcclxuICAgIGZhaWx1cmU6IEV2ZW50UmVzcG9uc2VbXSA9IFtdO1xyXG4gICAgcmVzcG9uc2U6IEV2ZW50UmVzcG9uc2VbXSA9IFtdO1xyXG4gICAgZXhjZXB0aW9uOiBFdmVudFJlc3BvbnNlW10gPSBbXTtcclxuICAgIGNvbW1vblV0aWw6IENvbW1vblV0aWw7XHJcbiAgICB1bmRvUmVkb1V0aWw6IFVuZG9SZWRvO1xyXG4gICAgYXNzb2NpYXRlZE1hcHV0aWw6IEFzc29jaWF0ZWRNYXBVdGlsO1xyXG4gICAgZXh0ZXJuYWxSZXF1ZXN0UmVzcG9uc2VVdGlsOiBFeHRlcm5hbFJlcXVlc3RSZXNwb25zZVV0aWw7XHJcbiAgICBpbnRlcm5hbFJlc3BvbnNlVXRpbDogSW50ZXJuYWxSZXNwb25zZVV0aWw7XHJcbiAgICBhZGRpdGlvbmFsUGFyYW1ldGVyczogSW52b2tlRXZlbnRBZGRpdGlvbmFsUGFyYW10ZXJzW10gPSBbXTtcclxuICAgIHByaXZhdGUgZXNiUmVxdWVzdEJvZHlVdGlsOiBFU0JSZXF1ZXN0Qm9keVV0aWw7XHJcbiAgICBwcml2YXRlIHdmZUNvbmRpdGlvbmFsUXVlcnlFeGVjdXRlcjogV0ZFQ29uZGl0aW9uYWxFeGVjdXRlcjtcclxuICAgIHByaXZhdGUgc2Vzc2lvbktleVV0aWw6IFNlc3Npb25LZXlVdGlsO1xyXG4gICAgcHJpdmF0ZSByZXBlYXRhYmxlQmxvY2tVdGlsOiBSZXBlYXRhYmxlQmxvY2tEYXRhO1xyXG4gICAgcHJpdmF0ZSBlbXB0eVV0aWw6IEVtcHR5VXRpbDtcclxuICAgIHByaXZhdGUgcmVkaXJlY3Rpb25VdGlsOiBSZWRpcmVjdGlvblV0aWw7XHJcbiAgICBwcml2YXRlIGFwcGxpY2F0aW9uU3RhdGVTdG9yZTogQXBwbGljYXRpb25TdGF0ZVN0b3JlVXRpbDtcclxuICAgIHByaXZhdGUgYXBpS2V5VXRpbDogQVBJS2V5VXRpbDtcclxuICAgIHByaXZhdGUgZG93bmxvYWRUeXBlID0gJyc7XHJcbiAgICBwcml2YXRlIHdvcmtmbG93U2VydmljZTogUmVwZWF0YWJsZXdvcmtmbG93SGFuZGxlcjtcclxuICAgIFxyXG5cclxuICAgIC8vIGNlbGwgZGF0YSB0byBzdG9yZSBhIHNwZWNpZmljIGNlbGwgd2l0aGluIGxpc3Qgb3IgdGFibGVcclxuICAgIGNlbGxBcHBEYXRhOiBBcHBEYXRhID0ge1xyXG4gICAgICAgIGlkOiAnJyxcclxuICAgICAgICBzdGVwSWQ6ICcnLFxyXG4gICAgICAgIGFwaUtleTogJycsXHJcbiAgICAgICAgZmllbGRMYWJlbDogJycsXHJcbiAgICAgICAgbGlua2VkQmxvY2tJZDogJycsXHJcbiAgICAgICAgaXNSZXBlYXRlZEZpZWxkOiBmYWxzZSxcclxuICAgICAgICByZXBlYXRlZEJsb2NrRmllbGRJZDogJycsXHJcbiAgICAgICAgcmVxdWVzdEFwaUtleTogW10sXHJcbiAgICAgICAgcmVzcG9uc2VBcGlLZXk6IFtdLFxyXG4gICAgICAgIGRhdGFGb3JtYXRTZXBhcmF0b3I6ICcnLFxyXG4gICAgICAgIG1hbmRhdG9yeTogZmFsc2UsXHJcbiAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgIHZpc2libGU6IGZhbHNlLFxyXG4gICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICBpc1ZhbGlkOiB0cnVlXHJcbiAgICB9O1xyXG5cclxuICAgIGFwaUNvbmZpZ1BhdGggPSAnYXNzZXRzL2pzb25zL2FwaV9jb25maWcuanNvbic7XHJcbiAgICBldmVudDogYW55ID0ge307IC8vIGZvciBmaWxlIHNlcnZpY2UgY2FsbFxyXG4gICAgcGF5TG9hZDogYW55OyAvLyBmb3IgZmlsZSBzZXJ2aWNlIGNhbGwvc2V0dGluZyB0aGUgbGFuZ3VhZ2VcclxuICAgIG1vZGFsR2VuZXJpY0Nzc0NsYXNzID0gJyc7XHJcbiAgICBmaWxlRGF0YUFycmF5OiBhbnkgPSBbXTtcclxuICAgIGVuY3JpcHRlZEZpbGVBcnJheTogYW55ID0gW107XHJcbiAgICBmaWVsZERhdGE6IGFueSA9IHt9O1xyXG4gICAgdW5pcXVlRmllbGRzOiBhbnkgPSBbXTtcclxuICAgIGluQnVpbGRGdW5jdGlvbnNVdGlsOiBJbkJ1aWxkRnVuY3Rpb25zVXRpbDtcclxuICAgIG1vZGVsVmFsdWUgPSAtMTtcclxuICAgIGV2ZW50QWRkaXRpb25hbFBhcmFtczogYW55ID0gW107XHJcbiAgICBzZXRBUElLZXlVdGlsOiBTZXRBUElDYWxsYmFja0RhdGE7XHJcbiAgICBoYW5kbGVyU2F2ZURhdGE6IGFueSA9IHt9O1xyXG4gICAgaXNDbGVhcjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBjZWVBcGlTZXJ2aWNlOiBDZWVBcGlTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBzaGFyZWRFdmVudHNTZXJ2aWNlczogU2hhcmVkRXZlbnRzU2VydmljZVNlcnZpY2UsXHJcbiAgICAgICAgcHVibGljIGludGVybmFsQ0VFRW1pdHRlcjogQ0VFSW50ZXJuYWxFbWl0dGVyU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIHdmZVN0ZXBMb2FkZXJTZXJ2aWNlOiBXZmVTdGVwTG9hZGVyU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGFwcERhdGFTZXJ2aWNlOiBBcHBEYXRhU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGFwaURhdGFTZXJ2aWNlOiBBcGlEYXRhU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGRpYWxvZzogTWF0RGlhbG9nLFxyXG4gICAgICAgIHByaXZhdGUgc25hY2tCYXI6IE1hdFNuYWNrQmFyLFxyXG4gICAgICAgIHB1YmxpYyBodHRwOiBIdHRwQ2xpZW50LFxyXG4gICAgICAgIHByaXZhdGUgZmlsZVVwbG9hZFNlcnZpY2U/OiBGaWxlVXBsb2FkU2VydmljZVxyXG5cclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuZXNiUmVxdWVzdEJvZHlVdGlsID0gbmV3IEVTQlJlcXVlc3RCb2R5VXRpbChhcGlEYXRhU2VydmljZSk7XHJcbiAgICAgICAgdGhpcy53ZmVDb25kaXRpb25hbFF1ZXJ5RXhlY3V0ZXIgPSBuZXcgV0ZFQ29uZGl0aW9uYWxFeGVjdXRlcihhcHBEYXRhU2VydmljZSwgYXBpRGF0YVNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMuc2Vzc2lvbktleVV0aWwgPSBuZXcgU2Vzc2lvbktleVV0aWwoKTtcclxuICAgICAgICB0aGlzLmNvbW1vblV0aWwgPSBuZXcgQ29tbW9uVXRpbCgpO1xyXG4gICAgICAgIHRoaXMucmVwZWF0YWJsZUJsb2NrVXRpbCA9IG5ldyBSZXBlYXRhYmxlQmxvY2tEYXRhKCk7XHJcbiAgICAgICAgdGhpcy51bmRvUmVkb1V0aWwgPSBuZXcgVW5kb1JlZG8oKTtcclxuICAgICAgICB0aGlzLmFzc29jaWF0ZWRNYXB1dGlsID0gbmV3IEFzc29jaWF0ZWRNYXBVdGlsKCk7XHJcbiAgICAgICAgdGhpcy5leHRlcm5hbFJlcXVlc3RSZXNwb25zZVV0aWwgPSBuZXcgRXh0ZXJuYWxSZXF1ZXN0UmVzcG9uc2VVdGlsKGh0dHAsIGFwcERhdGFTZXJ2aWNlLCBhcGlEYXRhU2VydmljZSwgc2hhcmVkRXZlbnRzU2VydmljZXMpO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxSZXNwb25zZVV0aWwgPSBuZXcgSW50ZXJuYWxSZXNwb25zZVV0aWwoaHR0cCwgYXBwRGF0YVNlcnZpY2UsIGFwaURhdGFTZXJ2aWNlKTtcclxuICAgICAgICB0aGlzLmVtcHR5VXRpbCA9IG5ldyBFbXB0eVV0aWwoKTtcclxuICAgICAgICB0aGlzLnJlZGlyZWN0aW9uVXRpbCA9IG5ldyBSZWRpcmVjdGlvblV0aWwocm91dGVyKTtcclxuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uU3RhdGVTdG9yZSA9IG5ldyBBcHBsaWNhdGlvblN0YXRlU3RvcmVVdGlsKHRoaXMuYXBwRGF0YVNlcnZpY2UpO1xyXG4gICAgICAgIHRoaXMuYXBpS2V5VXRpbCA9IG5ldyBBUElLZXlVdGlsKCk7XHJcbiAgICAgICAgdGhpcy53b3JrZmxvd1NlcnZpY2UgPSBuZXcgUmVwZWF0YWJsZXdvcmtmbG93SGFuZGxlcigpO1xyXG4gICAgICAgIHRoaXMuaW5CdWlsZEZ1bmN0aW9uc1V0aWwgPSBuZXcgSW5CdWlsZEZ1bmN0aW9uc1V0aWwoKTtcclxuICAgICAgICB0aGlzLnNldEFQSUtleVV0aWwgPSBuZXcgU2V0QVBJQ2FsbGJhY2tEYXRhKGFwaURhdGFTZXJ2aWNlKTtcclxuICAgIH1cclxuXHJcbiAgICBzd2l0Y2hFdmVudERpc3BsYXlUeXBlKGV2ZW50OiBhbnksIGV2ZW50TGlzdDogRXZlbnRMaXN0W10sIHByaW1hcnlEYXRhID0ge30sIHBheUxvYWQ/OiBhbnkpIHtcclxuICAgICAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgdGhpcy5wYXlMb2FkID0gcGF5TG9hZDtcclxuICAgICAgICAvLyBTZXQgd2hvbGUgZXZlbnQgbGlzdCBkYXRhIGZvciBmdXR1cmUgdXNlXHJcbiAgICAgICAgdGhpcy5ldmVudF9saXN0ID0gZXZlbnRMaXN0O1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50KVxyXG4gICAgICAgIC8vIEZ1bmN0aW9uIHRvIHN3aXRjaCBiZXR3ZWVuIGRpc3BsYXkgdHlwZSBzdGVwLCBmcmFtZXdvcmsgYW5kIHdvcmtmbG93XHJcbiAgICAgICAgc3dpdGNoIChldmVudC5kaXNwbGF5X3R5cGUpIHtcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ1N0YXJ0UmVwZWF0YWJsZVdvcmtmbG93JzpcclxuICAgICAgICAgICAgICAgIHRoaXMub25TdGFydFJlcGVhdGFibGVXb3JrZmxvd0V2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdFeGl0UmVwZWF0YWJsZVdvcmtmbG93JzpcclxuICAgICAgICAgICAgICAgIHRoaXMub25FeGl0UmVwZWF0YWJsZVdvcmtmbG93RXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1dvcmtmbG93JzpcclxuICAgICAgICAgICAgICAgIHRoaXMub25Xb3JrZmxvd0V2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBEb3dubG9hZCBDU1YgZXZlbnQgaXMgc2FtZSBhcyB0aGUgRnJhbWV3b3JrIGp1c3QgdGhlIGRpZmZlcmVuY2UgaXNcclxuICAgICAgICAgICAgLy8gdGhhdCB3aGVuIHRoaXMgZXZlbnQgaXMgdHJpZ2dlcmVkIHVzZXIgd2lsbCBiZSBhYmxlIHRvIGRvd25sb2FkIHRoZSBmaWxlXHJcbiAgICAgICAgICAgIC8vIGFjY29yZGluZyB0byBEaXNwbGF5IFR5cGUgKG5vdyBvbmx5IHN1cHBvcnRlZCBEb3dubG9hZCBDU1YpXHJcbiAgICAgICAgICAgIGNhc2UgJ0Rvd25sb2FkIENTVic6XHJcbiAgICAgICAgICAgIGNhc2UgJ0ZyYW1ld29yayc6XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGlzcGxheV90eXBlID09PSAnRG93bmxvYWQgQ1NWJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG93bmxvYWRUeXBlID0gJ2Nzdic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRnJhbWV3b3JrRXZlbnQoZXZlbnQsIHByaW1hcnlEYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdGdW5jdGlvbnMnOlxyXG4gICAgICAgICAgICBjYXNlICdTdGVwJzpcclxuICAgICAgICAgICAgICAgIHRoaXMub25TdGVwRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ09uQmFjayc6XHJcbiAgICAgICAgICAgICAgICBoaXN0b3J5LmdvKC0yKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmb3JjZU9uQmFjaycsICd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnT25MZWF2ZSc6XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGFnZUxlYXZlSHJlZiAmJiAhdGhpcy5wYWdlTGVhdmVIcmVmVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9nZXQgYWxsIGZpZWxkSWRzXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkSWRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXBwU3RvcmVEYXRhOiBBcHBEYXRhW10gPSB0aGlzLmFwcERhdGFTZXJ2aWNlLmdldEFsbEFwcFN0b3JlRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YSBvZiBhcHBTdG9yZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RlcElkID09PSB3aW5kb3dbJ2N1cnJlbnRTdGVwSWQnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRJZHMucHVzaChkYXRhLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoQ2xlYXJlbmNlVHlwZSh7ICdmaWVsZCc6IGZpZWxkSWRzIH0sIHsgaW52b2tlX2V2ZW50X2NvbmZpZzogeyBjYWxsYmFja19jb25maWc6IFtdIH0gfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdtb2RhbF9vbl9wYWdlX2xlYXZlJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5jbG9zZUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFnZUxlYXZlU3RlcElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFRvKHRoaXMucGFnZUxlYXZlU3RlcElkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wYWdlTGVhdmVIcmVmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFRvSHJlZih0aGlzLnBhZ2VMZWF2ZUhyZWYsIG51bGwsIHRoaXMucGFnZUxlYXZlSHJlZlRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkuZ28oLTIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmb3JjZU9uQmFjaycsICd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnTGFzdEtub3duU3RlcCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZGlyZWN0VG9MYXN0U2F2ZWRTdGVwKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gT24gZmlsdGVyIGZ1bmN0aW9uIHRoYXQgd2lsbCBjaGVjayBpZiB0aGUgZGF0YSBpcyBmb3VuZFxyXG4gICAgICAgICAgICAvLyBwYXlsb2FkIHNob3VsZCByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAvLyBpZiB0cnVlIHRoZW4gdHJpZ2dlciBvblN1Y2Nlc3Mgb3IgdHJpZ2dlciBPbkZhaWx1cmVcclxuICAgICAgICAgICAgY2FzZSAnT25GaWx0ZXInOlxyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2tpbmcgcGF5bG9hZCBub3QgdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAvLyB3aWxsIHRyaWdnZXIgdGhlIE9uRmlsdGVyIG9ubHkgd2hlbiB0aGUgZmlsdGVyIGlzXHJcbiAgICAgICAgICAgICAgICAvLyBuZWVkZWRcclxuICAgICAgICAgICAgICAgIGlmIChwYXlMb2FkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRmlsdGVyKGV2ZW50LCBwYXlMb2FkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgIGNhc2UgJ1Njcm9sbFRvVG9wJzpcclxuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHsgdG9wOiAwLCBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XHJcbiAgICAgICAgICAgIGJyZWFrOyAqL1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXZlbnRbJ25leHRfZXZlbnRfaWQnXSkge1xyXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVFdmVudChldmVudFsnbmV4dF9ldmVudF9pZCddKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZnVuY3Rpb24gdGhhdCBvbmx5IHRyaWdnZXJzIG9uRmFpbHVyZSBvciBPblN1Y2Nlc3NcclxuICAgIC8vIGNoZWNrIHRoZSBjb25kaXRpb24gYXMgd2VsbCBpZiBjb25kaXRpb24gaXMgZ2l2ZW5cclxuICAgIHByaXZhdGUgb25GaWx0ZXIoZXZlbnQ6IEV2ZW50LCBmaWx0ZXJTdWNjZXNzKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBldmVudFBhcmFtIG9mIGV2ZW50LmV2ZW50X3BhcmFtcykge1xyXG4gICAgICAgICAgICAvLyBzdG9yZSB0aGUgZmFpbHVyZSBhbmQgc3VjY2VzcyByZXNwb25zZVxyXG4gICAgICAgICAgICBpZiAoZXZlbnRQYXJhbS5pbnZva2VfZXZlbnRfY29uZmlnICYmIGV2ZW50UGFyYW0uaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3VjY2VzcyA9IGV2ZW50UGFyYW0uaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcuT25TdWNjZXNzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mYWlsdXJlID0gZXZlbnRQYXJhbS5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vbkZhaWx1cmU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZGl0aW9uYWxQYXJhbWV0ZXJzID0gZXZlbnRQYXJhbS5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSBpcyBjb25kaXRpb24gaXQgb3Igbm90XHJcbiAgICAgICAgICAgIC8vIGFuZCBjaGVjayBpZiB0aGUgZmlsdGVyIHN1Y2Nlc3MgaXMgdHJ1ZVxyXG4gICAgICAgICAgICBsZXQgcGFzc2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmV2ZW50Q29uZGl0aW9uKGV2ZW50UGFyYW0uY29uZGl0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMud2ZlQ29uZGl0aW9uYWxRdWVyeUV4ZWN1dGVyLmV2YWx1YXRlQ29uZGl0aW9uUXVlcnkoZXZlbnRQYXJhbS5xdWVyeSwgZXZlbnRQYXJhbS5jb25kaXRpb24sICcnLCB7fSwgdGhpcy5maWVsZERhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBhc3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhc3NlZCAmJiBmaWx0ZXJTdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJTdWNjZXNzT3JGYWlsdXJlKHRoaXMuc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJTdWNjZXNzT3JGYWlsdXJlKHRoaXMuZmFpbHVyZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVkaXJlY3RUb0xhc3RTYXZlZFN0ZXAoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VxdWVuY2UgPSB0aGlzLmFwaURhdGFTZXJ2aWNlLmdldEFwaURhdGFCeUFwaUtleShcclxuICAgICAgICAgICAgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5hZGRpdGlvbmFsUGFyYW1ldGVyc1snU2VxdWVuY2VJRCddLnNwbGl0KCckJCcpWzFdKTtcclxuICAgICAgICBjb25zdCBzdGVwID0gdGhpcy5hcGlEYXRhU2VydmljZS5nZXRBcGlEYXRhQnlBcGlLZXkoXHJcbiAgICAgICAgICAgIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UuYWRkaXRpb25hbFBhcmFtZXRlcnNbJ1N0ZXBJRCddLnNwbGl0KCckJCcpWzFdKTtcclxuICAgICAgICBpZiAoc2VxdWVuY2UgJiYgc2VxdWVuY2UudmFsdWUgJiYgc3RlcCAmJiBzdGVwLnZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5wcm9ncmVzc0Jhck1hcFtzZXF1ZW5jZS52YWx1ZV07XHJcbiAgICAgICAgICAgIGlmIChwcm9ncmVzc0JhciAmJiBwcm9ncmVzc0JhclsncHJvZ3Jlc3MnXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBsaWNhdGlvblN0YXRlU3RvcmUuc2V0UHJvZ3Jlc3NTdGF0dXNPbkxhc3RTYXZlZFN0YXRlKFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQmFyWydwcm9ncmVzcyddLnByb2dyZXNzX2Jhcl9pZCwgc3RlcC52YWx1ZSwgcHJvZ3Jlc3NCYXIpO1xyXG4gICAgICAgICAgICAgICAgLy8gQWNjb3JkaW5nIHRvIHRoZSBkaXNjdXNzaW9uIG9uIDE2LzA5LzIwMjAgdXNlciB3aWxsIG5hdmlnYXRlIHRvIHRoZSBzdGVwIHRoYXQgY29tZXMgZnJvbSB0aGUgYmFja2VuZFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5yZWRpcmVjdFRvKHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UuZ2V0TmV4dFN0ZXBJbkN1cnJlbnRTZXF1ZW5jZShzdGVwLnZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZGlyZWN0VG8oc3RlcC52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uQ29tcG9uZW50RXZlbnRCYXRjaChmaWVsZERhdGE6IGFueSwgcHJlc2V0RGF0YTogYW55LCBzdGVwSWQ6IGFueSwgdHlwZTogc3RyaW5nLCBwcmltYXJ5RGF0YTogYW55ID0ge30sIGlzRGVmYXVsdDogYm9vbGVhbiA9IHRydWUsIHBheUxvYWQ/OiBhbnksIGRpc3BsYXlUeXBlOiBzdHJpbmcgPSAnJykge1xyXG4gICAgICAgIHRoaXMuaXNDbGVhciA9IHR5cGUgPT09ICdjbGVhcicgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ2xlYXIpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBldmVudCBvZiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZpZWxkRGF0YS5ldmVudF9saXN0KSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5pc0RlZmF1bHQgPT09IGlzRGVmYXVsdCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmV2ZW50X25hbWUudG9Mb3dlckNhc2UoKSA9PT0gdHlwZS50b0xvd2VyQ2FzZSgpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgKGRpc3BsYXlUeXBlID8gZXZlbnQuZGlzcGxheV90eXBlLnRvTG93ZXJDYXNlKCkgPT09IGRpc3BsYXlUeXBlLnRvTG93ZXJDYXNlKCkgOiB0cnVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TmV4dFN0ZXBJZChldmVudCwgc3RlcElkKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3dbJ2V2ZW50RWxlbWVudElkJ10gPSBmaWVsZERhdGEuaHRtbF9pZDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJlc2V0RGF0YSAmJiBwcmVzZXREYXRhLnJlcGVhdGVkQmxvY2tGaWVsZElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnlEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJpbWFyeURhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByaW1hcnlEYXRhLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtlZEJsb2NrSWQ6IHByZXNldERhdGEubGlua2VkQmxvY2tJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcHJlc2V0RGF0YS5wb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRQb3NpdGlvbjogcHJlc2V0RGF0YS5wYXJlbnRQb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVfaWQ6IHByZXNldERhdGEudW5pcXVlX2lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmVwZWF0YWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaEV2ZW50RGlzcGxheVR5cGUoZXZlbnQsIGZpZWxkRGF0YS5ldmVudF9saXN0LCBwcmltYXJ5RGF0YSwgcGF5TG9hZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TmV4dFN0ZXBJZChldmVudCwgc3RlcElkKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBldmVudFBhcmFtIG9mIGV2ZW50LmV2ZW50X3BhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnRQYXJhbS5pbnZva2VfZXZlbnRfY29uZmlnICYmIGV2ZW50UGFyYW0uaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcgJiYgZXZlbnRQYXJhbS5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG9uUmVzIG9mIGV2ZW50UGFyYW0uaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25SZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvblJlcy5OYXZpZ2F0ZXRvTmV4dFBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25SZXMuTmF2aWdhdGV0b05leHRQYWdlID0gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5nZXROZXh0U3RlcEluQ3VycmVudFNlcXVlbmNlKHN0ZXBJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvblN0YXJ0UmVwZWF0YWJsZVdvcmtmbG93RXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50UGFyYW1zIG9mIGV2ZW50LmV2ZW50X3BhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnRQYXJhbXMuaW52b2tlX2V2ZW50X2NvbmZpZykge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCByZWRpcmVjdFRvID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmV2ZW50Q29uZGl0aW9uKGV2ZW50UGFyYW1zLmNvbmRpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMud2ZlQ29uZGl0aW9uYWxRdWVyeUV4ZWN1dGVyLmV2YWx1YXRlQ29uZGl0aW9uUXVlcnkoZXZlbnRQYXJhbXMucXVlcnksIGV2ZW50UGFyYW1zLmNvbmRpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RUbyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocmVkaXJlY3RUbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGVhdGFibGVXb3JrZmxvd0lkID0gZXZlbnRQYXJhbXMuZXZlbnRfY29uZmlnLmRpc3BsYXlfc3RlcDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50d29ya2Zsb3dJZCA9IHdpbmRvd1snY3VycmVudFdvcmtmbG93SWQnXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZGl0aW9uYWxQYXJhbWV0ZXJzID0gZXZlbnRQYXJhbXMuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50V29ya2Zsb3dJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gZXZlbnRQYXJhbXMuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoaSA9PiBpLnBhcmFtZXRlcl90eXBlID09PSAnd29ya2Zsb3dfY3VycmVudF9pbmRleCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdvcmtmbG93X2N1cnJlbnRfaW5kZXggPSBhbHdheXMgc3RhcnQgZnJvbSAwLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFdvcmtmbG93SW5kZXggPSBjdXJyZW50SW5kZXgudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBlYXRDb3VudFN0YXRpYyA9IGV2ZW50UGFyYW1zLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKGkgPT4gaS5wYXJhbWV0ZXJfdHlwZSA9PT0gJ3JlcGVhdF9jb3VudF9zdGF0aWMnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVwZWF0Q291bnRTdGF0aWMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JrZmxvd1NlcnZpY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbml0Q29uZmlnKHJlcGVhdGFibGVXb3JrZmxvd0lkLCBjdXJyZW50V29ya2Zsb3dJbmRleCwgcmVwZWF0Q291bnRTdGF0aWMudmFsdWUsIGN1cnJlbnR3b3JrZmxvd0lkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBlYXRDb3VudEZpZWxkID0gZXZlbnRQYXJhbXMuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoaSA9PiBpLnBhcmFtZXRlcl90eXBlID09PSAncmVwZWF0X2NvdW50X2ZpZWxkX2lkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGVhdENvdW50RmllbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGREYXRhID0gdGhpcy5hcHBEYXRhU2VydmljZS5nZXRGaWVsZERhdGFCeUZpZWxkSWQocmVwZWF0Q291bnRGaWVsZC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29ya2Zsb3dTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5pdENvbmZpZyhyZXBlYXRhYmxlV29ya2Zsb3dJZCwgY3VycmVudFdvcmtmbG93SW5kZXgsIGZpZWxkRGF0YSwgY3VycmVudHdvcmtmbG93SWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVwZWF0Q291bnRBcGlLZXkgPSBldmVudFBhcmFtcy5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZChpID0+IGkucGFyYW1ldGVyX3R5cGUgPT09ICdyZXBlYXRfY291bnRfYXBpX2tleScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXBlYXRDb3VudEFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG1heC1saW5lLWxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcGlEYXRhQ291bnQgPSB0aGlzLmFwaURhdGFTZXJ2aWNlLmdldEFwaURhdGFCeUhhbmRsZXIodGhpcy5jb21tb25VdGlsLmdldEhhbmRsZXJOYW1lKHJlcGVhdENvdW50QXBpS2V5LnZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbWF4LWxpbmUtbGVuZ3RoXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtmbG93U2VydmljZS5pbml0Q29uZmlnKHJlcGVhdGFibGVXb3JrZmxvd0lkLCBjdXJyZW50V29ya2Zsb3dJbmRleCwgYXBpRGF0YUNvdW50LnZhbHVlW3JlcGVhdENvdW50QXBpS2V5LnZhbHVlXSwgY3VycmVudHdvcmtmbG93SWQpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLnNldFNlcXVlbmNlUHJvZ3Jlc3NJbml0KHJlcGVhdGFibGVXb3JrZmxvd0lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFRvKHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UuZ2V0Rmlyc3RTdGVwSW5TcXVlbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5nZXRTZXF1ZW5jZURlZmF1bHRTdGVwSWRCeVNlcXVlbmNlSWQocmVwZWF0YWJsZVdvcmtmbG93SWQpLnNlcXVlbmNlKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25FeGl0UmVwZWF0YWJsZVdvcmtmbG93RXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50UGFyYW1zIG9mIGV2ZW50LmV2ZW50X3BhcmFtcykge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnRQYXJhbXMuaW52b2tlX2V2ZW50X2NvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlZGlyZWN0VG8gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZXZlbnRDb25kaXRpb24oZXZlbnRQYXJhbXMuY29uZGl0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy53ZmVDb25kaXRpb25hbFF1ZXJ5RXhlY3V0ZXIuZXZhbHVhdGVDb25kaXRpb25RdWVyeShldmVudFBhcmFtcy5xdWVyeSwgZXZlbnRQYXJhbXMuY29uZGl0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdFRvID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnR3b3JrZmxvd0lkID0gd2luZG93WydjdXJyZW50V29ya2Zsb3dJZCddO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGF0YWJsZVdvcmtmbG93Q29uZmlnOiBhbnkgPSB0aGlzLndvcmtmbG93U2VydmljZS5nZXRDb25maWdCeVdvcmtmbG93SWQoY3VycmVudHdvcmtmbG93SWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcGF0YWJsZVdvcmtmbG93Q29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JrZmxvd1NlcnZpY2UuaW5jcmlzZUNvbmZpZ0NvdW50KGN1cnJlbnR3b3JrZmxvd0lkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVkaXJlY3RUbykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0U3RlcElkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChyZXBhdGFibGVXb3JrZmxvd0NvbmZpZy5sZW5ndGggLSAxKSA9PSByZXBhdGFibGVXb3JrZmxvd0NvbmZpZy5jb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRpdGlvbmFsUGFyYW1ldGVycyA9IGV2ZW50UGFyYW1zLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0U3RlcCA9IGV2ZW50UGFyYW1zLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoaSA9PiBpLnBhcmFtZXRlcl90eXBlID09PSAnc3RlcF9pZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFN0ZXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdGVwSWQgPSB0YXJnZXRTdGVwLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMud29ya2Zsb3dTZXJ2aWNlLnJlbW92ZVdvcmtmbG93RnJvbUNvbmZpZyh3b3JrZmxvd0RldGFpbHMuc2VxdWVuY2VfaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50d29ya2Zsb3dJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFN0ZXBJZCA9IHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UuZ2V0Rmlyc3RTdGVwSW5TcXVlbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0U2VxdWVuY2VEZWZhdWx0U3RlcElkQnlTZXF1ZW5jZUlkKGN1cnJlbnR3b3JrZmxvd0lkKS5zZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFN0ZXBJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29ya2Zsb3dEZXRhaWxzID0gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5nZXRXb3JrZmxvd0RldGFpbHModGFyZ2V0U3RlcElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3JrZmxvd0RldGFpbHMgJiYgd29ya2Zsb3dEZXRhaWxzLnNlcXVlbmNlICYmIHdvcmtmbG93RGV0YWlscy5zZXF1ZW5jZS5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZXhpdFdvcmtmbG93U2FtZVN0ZXBSZWRpcmVjdEVtbWl0ZXIuZW1pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFRvKHRhcmdldFN0ZXBJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25Xb3JrZmxvd0V2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBldmVudFBhcmFtcyBvZiBldmVudC5ldmVudF9wYXJhbXMpIHtcclxuICAgICAgICAgICAgbGV0IHJlZGlyZWN0VG8gPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ldmVudENvbmRpdGlvbihldmVudFBhcmFtcy5jb25kaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMud2ZlQ29uZGl0aW9uYWxRdWVyeUV4ZWN1dGVyLmV2YWx1YXRlQ29uZGl0aW9uUXVlcnkoZXZlbnRQYXJhbXMucXVlcnksIGV2ZW50UGFyYW1zLmNvbmRpdGlvbiwgJycsIHt9LCB0aGlzLmZpZWxkRGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdFRvID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJlZGlyZWN0VG8pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2Uuc2V0U2VxdWVuY2VQcm9ncmVzc0luaXQoZXZlbnRQYXJhbXMuZXZlbnRfY29uZmlnLmRpc3BsYXlfc3RlcCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZGlyZWN0VG8odGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5nZXRGaXJzdFN0ZXBJblNxdWVuY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5nZXRTZXF1ZW5jZURlZmF1bHRTdGVwSWRCeVNlcXVlbmNlSWQoZXZlbnRQYXJhbXMuZXZlbnRfY29uZmlnLmRpc3BsYXlfc3RlcCkuc2VxdWVuY2UpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uRnJhbWV3b3JrRXZlbnQoZXZlbnQ6IEV2ZW50LCBwcmltYXJ5RGF0YTogYW55ID0ge30pIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50UGFyYW0gb2YgZXZlbnQuZXZlbnRfcGFyYW1zKSB7XHJcbiAgICAgICAgICAgIC8vIHN0b3JlIHRoZSBmYWlsdXJlIGFuZCBzdWNjZXNzIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGlmIChldmVudFBhcmFtLmludm9rZV9ldmVudF9jb25maWcgJiYgZXZlbnRQYXJhbS5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdWNjZXNzID0gZXZlbnRQYXJhbS5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5PblN1Y2Nlc3M7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZhaWx1cmUgPSBldmVudFBhcmFtLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uRmFpbHVyZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2UgPSBldmVudFBhcmFtLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uUmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4Y2VwdGlvbiA9IGV2ZW50UGFyYW0uaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25FeGNlcHRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZGl0aW9uYWxQYXJhbWV0ZXJzID0gZXZlbnRQYXJhbS5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZXZlbnRDb25kaXRpb24oZXZlbnRQYXJhbS5jb25kaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy53ZmVDb25kaXRpb25hbFF1ZXJ5RXhlY3V0ZXIuZXZhbHVhdGVDb25kaXRpb25RdWVyeShldmVudFBhcmFtLnF1ZXJ5LCBldmVudFBhcmFtLmNvbmRpdGlvbiwgcHJpbWFyeURhdGEudmFsdWUgJiYgcHJpbWFyeURhdGEudmFsdWUudW5pcXVlX2lkID8gcHJpbWFyeURhdGEudmFsdWUudW5pcXVlX2lkIDogJycsIHt9LCB0aGlzLmZpZWxkRGF0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50Q29uZmlnKGV2ZW50UGFyYW0uZXZlbnRfY29uZmlnLCBldmVudFBhcmFtLCBwcmltYXJ5RGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLmV2ZW50Q29uZGl0aW9uYWxGYWlsdXJlU3Vic2NyaWJlci5lbWl0KGV2ZW50UGFyYW0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50Q29uZmlnKGV2ZW50UGFyYW0uZXZlbnRfY29uZmlnLCBldmVudFBhcmFtLCBwcmltYXJ5RGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uU3RlcEV2ZW50KGV2ZW50OiBFdmVudCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgZXZlbnRQYXJhbSBvZiBldmVudC5ldmVudF9wYXJhbXMpIHtcclxuICAgICAgICAgICAgLy8gc3RvcmUgdGhlIGZhaWx1cmUgYW5kIHN1Y2Nlc3MgcmVzcG9uc2VcclxuICAgICAgICAgICAgaWYgKGV2ZW50UGFyYW0uaW52b2tlX2V2ZW50X2NvbmZpZyAmJiBldmVudFBhcmFtLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1Y2Nlc3MgPSBldmVudFBhcmFtLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLk9uU3VjY2VzcztcclxuICAgICAgICAgICAgICAgIHRoaXMuZmFpbHVyZSA9IGV2ZW50UGFyYW0uaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25GYWlsdXJlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZSA9IGV2ZW50UGFyYW0uaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25SZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhjZXB0aW9uID0gZXZlbnRQYXJhbS5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vbkV4Y2VwdGlvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkaXRpb25hbFBhcmFtZXRlcnMgPSBldmVudFBhcmFtLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHNldCBhY3RpdmUgbWVudSBpZCBvbiBsb2NhbCBzdG9yYWdlXHJcbiAgICAgICAgICAgIGNvbnN0IGFjaXRpdmVIYW1idXJnZXIgPSB0aGlzLmFkZGl0aW9uYWxQYXJhbWV0ZXJzID8gdGhpcy5hZGRpdGlvbmFsUGFyYW1ldGVycy5maW5kKGkgPT4gaS5wYXJhbWV0ZXJfdHlwZSA9PSAnaXNIYW1idXJnZXJJdGVtQWN0aXZlJykgOiBbXTtcclxuICAgICAgICAgICAgaWYgKGFjaXRpdmVIYW1idXJnZXIgJiYgYWNpdGl2ZUhhbWJ1cmdlclsndmFsdWUnXSA9PSAndHJ1ZScgJiYgd2luZG93WydldmVudEVsZW1lbnRJZCddKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FjdGl2ZV9pdGVtJywgd2luZG93WydldmVudEVsZW1lbnRJZCddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAqKioqKiAvL1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ldmVudENvbmRpdGlvbihldmVudFBhcmFtLmNvbmRpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLndmZUNvbmRpdGlvbmFsUXVlcnlFeGVjdXRlci5ldmFsdWF0ZUNvbmRpdGlvblF1ZXJ5KGV2ZW50UGFyYW0ucXVlcnksIGV2ZW50UGFyYW0uY29uZGl0aW9uLCAnJywge30sIHRoaXMuZmllbGREYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRDb25maWcoZXZlbnRQYXJhbS5ldmVudF9jb25maWcsIGV2ZW50UGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5ldmVudENvbmRpdGlvbmFsRmFpbHVyZVN1YnNjcmliZXIuZW1pdChldmVudFBhcmFtKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudENvbmZpZyhldmVudFBhcmFtLmV2ZW50X2NvbmZpZywgZXZlbnRQYXJhbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXZlbnRDb25kaXRpb24oY29uZGl0aW9uQXJyYXk6IENvbmRpdGlvbltdKSB7XHJcbiAgICAgICAgLy8gZXhlY3V0ZSBvbiBjb25kaXRpb25cclxuICAgICAgICBpZiAoY29uZGl0aW9uQXJyYXkgJiYgY29uZGl0aW9uQXJyYXkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRvd25sb2FkRnJvbVMzKGV2ZW50KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSB0aGlzLmV2ZW50QWRkaXRpb25hbFBhcmFtc1snQ0VFX0ZJTEVfTkFNRSddID8gdGhpcy5ldmVudEFkZGl0aW9uYWxQYXJhbXNbJ0NFRV9GSUxFX05BTUUnXS50b0xvd2VyQ2FzZSgpIDogXCJcIlxyXG4gICAgICAgICAgICBjb25zdCBzM1VybCA9IHRoaXMuZmllbGREYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICAvL3RoaXMuYXBpRGF0YVNlcnZpY2UuZ2V0QXBpRGF0YUJ5QXBpS2V5KGZpbGVOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZG93bmxvYWQgbWV0aG9kXCIpO1xyXG4gICAgICAgICAgICAvLyBGZXRjaCB0aGUgUERGIGZpbGUgZnJvbSB0aGUgUzMgYnVja2V0XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goczNVcmwpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImRvd25sb2FkIHJlc3BvbnNlXCIpO1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcmVzcG9uc2UgaXMgc3VjY2Vzc2Z1bFxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBQREY6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ29udmVydCB0aGUgcmVzcG9uc2UgdG8gYSBCbG9iXHJcbiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBVUkwgZm9yIHRoZSBCbG9iXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgdGVtcG9yYXJ5IGFuY2hvciBlbGVtZW50XHJcbiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoXCJkb3dubG9hZFwiLCBmaWxlTmFtZSk7IC8vIFNldCB0aGUgZGVzaXJlZCBmaWxlIG5hbWVcclxuICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGxpbmspO1xyXG5cclxuICAgICAgICAgICAgLy8gQXBwZW5kIHRoZSBhbmNob3IgdG8gdGhlIGJvZHlcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFByb2dyYW1tYXRpY2FsbHkgY2xpY2sgdGhlIGFuY2hvciB0byB0cmlnZ2VyIHRoZSBkb3dubG9hZFxyXG4gICAgICAgICAgICBhLmNsaWNrKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBDbGVhbiB1cDogcmVtb3ZlIHRoZSBhbmNob3IgZWxlbWVudCBhbmQgcmV2b2tlIHRoZSBCbG9iIFVSTFxyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpO1xyXG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGxpbmspO1xyXG5cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJQREYgZG93bmxvYWRlZCBzdWNjZXNzZnVsbHkhXCIpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkb3dubG9hZGluZyBQREY6XCIsIGVycm9yKTsvL2Vycm9yIHByaW50aW5nXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgXHJcbiAgXHJcbmNvbnZlcnRIZWFkZXJUb0ltYWdlRml4ZWRIZWlnaHQoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHsgZGF0YVVybDogc3RyaW5nLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9PiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoJ0hlYWRlciBlbGVtZW50IG5vdCBmb3VuZCcpKTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgZGVlcCBjbG9uZSB0byBhdm9pZCBtb2RpZnlpbmcgdGhlIG9yaWdpbmFsXHJcbiAgICAgICAgY29uc3QgY2xvbmUgPSBlbGVtZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDYWxjdWxhdGUgUERGIGRpbWVuc2lvbnMgXHJcbiAgICAgICAgY29uc3QgcGRmV2lkdGhJblBvaW50cyA9IDU5NS4yODsgLy8gQTQgd2lkdGggaW4gcG9pbnRzXHJcbiAgICAgICAgY29uc3QgcGl4ZWxzUGVyUG9pbnQgPSA5Ni83MjsgLy8gQ29udmVyc2lvbiBmcm9tIHBvaW50cyB0byBwaXhlbHNcclxuICAgICAgICBjb25zdCBwZGZXaWR0aEluUGl4ZWxzID0gcGRmV2lkdGhJblBvaW50cyAqIHBpeGVsc1BlclBvaW50OyAvLyB+Nzk0cHhcclxuICAgICAgICBcclxuICAgICAgICAvLyBTZXQgbWFyZ2luIGluIHBpeGVsc1xyXG4gICAgICAgIGNvbnN0IG1hcmdpbkluUGl4ZWxzID0gMTA7IC8vIDUwcHggbWFyZ2luIG9uIGVhY2ggc2lkZVxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRXaWR0aEluUGl4ZWxzID0gcGRmV2lkdGhJblBpeGVscyAtIChtYXJnaW5JblBpeGVscyAqIDIpOyAvLyBXaWR0aCBhZnRlciBtYXJnaW5zXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRml4ZWQgaGVhZGVyIGhlaWdodFxyXG4gICAgICAgIGNvbnN0IGhlYWRlckhlaWdodEluUGl4ZWxzID0gMTIwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENyZWF0ZSBhIHdyYXBwZXIgd2l0aCBwcm9wZXIgZGltZW5zaW9ucyBhbmQgc3R5bGluZ1xyXG4gICAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB3cmFwcGVyLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICB3cmFwcGVyLnN0eWxlLnRvcCA9ICctOTk5OXB4JztcclxuICAgICAgICB3cmFwcGVyLnN0eWxlLmxlZnQgPSAnMCc7XHJcbiAgICAgICAgd3JhcHBlci5zdHlsZS53aWR0aCA9IGNvbnRlbnRXaWR0aEluUGl4ZWxzICsgJ3B4JztcclxuICAgICAgICB3cmFwcGVyLnN0eWxlLmhlaWdodCA9IGhlYWRlckhlaWdodEluUGl4ZWxzICsgJ3B4JztcclxuICAgICAgICB3cmFwcGVyLnN0eWxlLmJhY2tncm91bmQgPSAnI2ZmZic7XHJcbiAgICAgICAgd3JhcHBlci5zdHlsZS5wYWRkaW5nID0gJzAnO1xyXG4gICAgICAgIHdyYXBwZXIuc3R5bGUubWFyZ2luID0gJzAnO1xyXG4gICAgICAgIHdyYXBwZXIuc3R5bGUuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnO1xyXG4gICAgICAgIHdyYXBwZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgLy8gVXNlIGZsZXhib3hcclxuICAgICAgICB3cmFwcGVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JztcclxuICAgICAgICB3cmFwcGVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nOyAvLyBTcGFjZSBiZXR3ZWVuIGNvbHVtbnNcclxuICAgICAgICB3cmFwcGVyLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcclxuICAgICAgICBcclxuICAgICAgICAvLyBTZWxlY3QgZWxlbWVudHMgdXNpbmcgdGhlIGNvcnJlY3QgY2xhc3MgbmFtZXNcclxuICAgICAgICBjb25zdCBmaXJzdENvbHVtbiA9IGNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItdHdvLWxvZycpO1xyXG4gICAgICAgIGNvbnN0IHNlY29uZENvbHVtbiA9IGNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbGFiZWwnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDcmVhdGUgZnJlc2ggY29udGFpbmVycyBmb3Igb3VyIGNvbHVtbnNcclxuICAgICAgICBjb25zdCBsZWZ0Q29sdW1uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgbGVmdENvbHVtbkNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICc0OCUnO1xyXG4gICAgICAgIGxlZnRDb2x1bW5Db250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gICAgICAgIGxlZnRDb2x1bW5Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICBsZWZ0Q29sdW1uQ29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcclxuICAgICAgICBsZWZ0Q29sdW1uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtc3RhcnQnO1xyXG4gICAgICAgIGxlZnRDb2x1bW5Db250YWluZXIuc3R5bGUucGFkZGluZyA9ICc1cHgnO1xyXG4gICAgICAgIGxlZnRDb2x1bW5Db250YWluZXIuc3R5bGUuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJpZ2h0Q29sdW1uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgcmlnaHRDb2x1bW5Db250YWluZXIuc3R5bGUud2lkdGggPSAnNDglJztcclxuICAgICAgICByaWdodENvbHVtbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgICAgICAgcmlnaHRDb2x1bW5Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICByaWdodENvbHVtbkNvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XHJcbiAgICAgICAgcmlnaHRDb2x1bW5Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnZmxleC1lbmQnO1xyXG4gICAgICAgIHJpZ2h0Q29sdW1uQ29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnNXB4JztcclxuICAgICAgICByaWdodENvbHVtbkNvbnRhaW5lci5zdHlsZS5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCc7XHJcbiAgICAgICAgcmlnaHRDb2x1bW5Db250YWluZXIuc3R5bGUudGV4dEFsaWduID0gJ3JpZ2h0JztcclxuICAgICAgICBcclxuICAgICAgICAvLyBQcm9jZXNzIGFuZCBhZGQgZmlyc3QgY29sdW1uIGNvbnRlbnRcclxuICAgICAgICBpZiAoZmlyc3RDb2x1bW4pIHtcclxuICAgICAgICAgICAgLy8gRXh0cmFjdCBhbmQgY2xlYW4gdGhlIGxvZ28gaW1hZ2VcclxuICAgICAgICAgICAgY29uc3QgbG9nb0ltZyA9IGZpcnN0Q29sdW1uLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xyXG4gICAgICAgICAgICBpZiAobG9nb0ltZykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgICAgICAgICBuZXdJbWcuc3JjID0gbG9nb0ltZy5zcmM7XHJcbiAgICAgICAgICAgICAgICBuZXdJbWcuYWx0ID0gbG9nb0ltZy5hbHQgfHwgJ0xvZ28nO1xyXG4gICAgICAgICAgICAgICAgbmV3SW1nLnN0eWxlLm1heEhlaWdodCA9ICcxMDBweCc7XHJcbiAgICAgICAgICAgICAgICBuZXdJbWcuc3R5bGUubWF4V2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgICAgICAgICBuZXdJbWcuc3R5bGUub2JqZWN0Rml0ID0gJ2NvbnRhaW4nO1xyXG4gICAgICAgICAgICAgICAgbGVmdENvbHVtbkNvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdJbWcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgbm8gaW1hZ2UsIGNvcHkgdGhlIHRleHQgY29udGVudFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RDb2x1bW5Db250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBmaXJzdENvbHVtbkNvbnRlbnQudGV4dENvbnRlbnQgPSBmaXJzdENvbHVtbi50ZXh0Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgICAgIGZpcnN0Q29sdW1uQ29udGVudC5zdHlsZS5mb250U2l6ZSA9ICcxMHB4JztcclxuICAgICAgICAgICAgICAgIGZpcnN0Q29sdW1uQ29udGVudC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgICAgICAgICAgZmlyc3RDb2x1bW5Db250ZW50LnN0eWxlLnRleHRBbGlnbiA9ICdsZWZ0JztcclxuICAgICAgICAgICAgICAgIGxlZnRDb2x1bW5Db250YWluZXIuYXBwZW5kQ2hpbGQoZmlyc3RDb2x1bW5Db250ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBQcm9jZXNzIGFuZCBhZGQgc2Vjb25kIGNvbHVtbiBjb250ZW50XHJcbiAgICAgICAgLy8gaWYgKHNlY29uZENvbHVtbikge1xyXG4gICAgICAgIC8vICAgICAvLyBFeHRyYWN0IHRleHQgY29udGVudCwgY2xlYW4gaXQgYW5kIHRydW5jYXRlIGFmdGVyIEFNL1BNXHJcbiAgICAgICAgLy8gICAgIGxldCB0ZXh0Q29udGVudCA9IHNlY29uZENvbHVtbi50ZXh0Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgIC8vIENsZWFuIHRoZSB0ZXh0IGFuZCB0cnVuY2F0ZSBhZnRlciBBTS9QTVxyXG4gICAgICAgIC8vICAgICB0ZXh0Q29udGVudCA9IHRleHRDb250ZW50XHJcbiAgICAgICAgLy8gICAgICAgICAucmVwbGFjZSgvXFx7XFx7W159XSpcXH1cXH0vZywgJycpIC8vIFJlbW92ZSBBbmd1bGFyIGJpbmRpbmdzXHJcbiAgICAgICAgLy8gICAgICAgICAucmVwbGFjZSgvY2xhc3M9XCJbXlwiXSpcIi9nLCAnJykgLy8gUmVtb3ZlIGNsYXNzIGF0dHJpYnV0ZXNcclxuICAgICAgICAvLyAgICAgICAgIC5yZXBsYWNlKC9cXFtjbGFzc1xcXT1cIlteXCJdKlwiL2csICcnKTsgLy8gUmVtb3ZlIEFuZ3VsYXIgY2xhc3MgYmluZGluZ3NcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgIC8vIFRydW5jYXRlIHRleHQgYWZ0ZXIgQU0vUE1cclxuICAgICAgICAvLyAgICAgY29uc3QgYW1JbmRleCA9IHRleHRDb250ZW50LmluZGV4T2YoJ0FNJyk7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IHBtSW5kZXggPSB0ZXh0Q29udGVudC5pbmRleE9mKCdQTScpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAvLyAgICAgaWYgKGFtSW5kZXggPiAtMSkge1xyXG4gICAgICAgIC8vICAgICAgICAgdGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudC5zdWJzdHJpbmcoMCwgYW1JbmRleCArIDIpO1xyXG4gICAgICAgIC8vICAgICB9IGVsc2UgaWYgKHBtSW5kZXggPiAtMSkge1xyXG4gICAgICAgIC8vICAgICAgICAgdGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudC5zdWJzdHJpbmcoMCwgcG1JbmRleCArIDIpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIC8vICAgICAvLyBDcmVhdGUgYSB0ZXh0IGVsZW1lbnQgZm9yIHRoZSBzZWNvbmQgY29sdW1uXHJcbiAgICAgICAgLy8gICAgIGNvbnN0IHNlY29uZENvbHVtbkNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAvLyAgICAgc2Vjb25kQ29sdW1uQ29udGVudC5zdHlsZS5mb250U2l6ZSA9ICcxMHB4JztcclxuICAgICAgICAvLyAgICAgc2Vjb25kQ29sdW1uQ29udGVudC5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuMyc7XHJcbiAgICAgICAgLy8gICAgIHNlY29uZENvbHVtbkNvbnRlbnQuc3R5bGUudGV4dEFsaWduID0gJ3JpZ2h0JztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgIC8vIFJlcGxhY2UgbmV3bGluZXMgd2l0aCA8YnI+IHRhZ3NcclxuICAgICAgICAvLyAgICAgdGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcclxuICAgICAgICAvLyAgICAgc2Vjb25kQ29sdW1uQ29udGVudC5pbm5lckhUTUwgPSB0ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgIHJpZ2h0Q29sdW1uQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlY29uZENvbHVtbkNvbnRlbnQpO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgaWYgKHNlY29uZENvbHVtbikge1xyXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGNvbnRlbnQgZnJvbSB0aGUgc2Vjb25kIGNvbHVtblxyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50RWxlbWVudCA9IHNlY29uZENvbHVtbi5xdWVyeVNlbGVjdG9yKCcuTmFtZScpIHx8IHNlY29uZENvbHVtbjtcclxuICAgICAgICAgICAgbGV0IGh0bWxDb250ZW50ID0gY29udGVudEVsZW1lbnQuaW5uZXJIVE1MIHx8IHNlY29uZENvbHVtbi5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBMb2cgdGhlIGNvbnRlbnQgdG8gdmVyaWZ5IGl0J3Mgbm90IGVtcHR5XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiT3JpZ2luYWwgSFRNTCBjb250ZW50OlwiLCBodG1sQ29udGVudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBFbnN1cmUgbGluZSBicmVha3MgYXJlIHByZXNlcnZlZFxyXG4gICAgICAgICAgICBodG1sQ29udGVudCA9IGh0bWxDb250ZW50LnJlcGxhY2UoLzxiclxccypcXC8/Pi9naSwgJyMjI0JSIyMjJyk7XHJcbiAgICAgICAgICAgIGh0bWxDb250ZW50ID0gaHRtbENvbnRlbnQucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XHJcbiAgICAgICAgICAgIGh0bWxDb250ZW50ID0gaHRtbENvbnRlbnQucmVwbGFjZSgvIyMjQlIjIyMvZywgJzxicj4nKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiRm9ybWF0dGVkIEhUTUwgY29udGVudDpcIiwgaHRtbENvbnRlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGVsZW1lbnQgdG8gaG9sZCB0aGUgZm9ybWF0dGVkIGNvbnRlbnRcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWRDb250ZW50LnN0eWxlLmZvbnRGYW1pbHkgPSAnUXVpY2tzYW5kJztcclxuICAgICAgICAgICAgZm9ybWF0dGVkQ29udGVudC5zdHlsZS5mb250U2l6ZSA9ICc4cHgnO1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWRDb250ZW50LnN0eWxlLmZvbnRXZWlnaHQgPSAnbm9ybWFsJztcclxuICAgICAgICAgICAgZm9ybWF0dGVkQ29udGVudC5zdHlsZS5jb2xvciA9ICcjMDAwJzsgLy8gRW5zdXJlIHRleHQgaXMgYmxhY2tcclxuICAgICAgICAgICAgZm9ybWF0dGVkQ29udGVudC5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuMic7XHJcbiAgICAgICAgICAgIGZvcm1hdHRlZENvbnRlbnQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XHJcbiAgICAgICAgICAgIGZvcm1hdHRlZENvbnRlbnQuc3R5bGUuYmFja2dyb3VuZCA9ICd0cmFuc3BhcmVudCc7IC8vIEVuc3VyZSBiYWNrZ3JvdW5kIGlzIHRyYW5zcGFyZW50XHJcbiAgICAgICAgICAgIGZvcm1hdHRlZENvbnRlbnQuc3R5bGUucGFkZGluZyA9ICc1cHgnOyAvLyBBZGQgc29tZSBwYWRkaW5nXHJcbiAgICAgICAgICAgIGZvcm1hdHRlZENvbnRlbnQuc3R5bGUud2lkdGggPSAnMTAwJSc7IC8vIEVuc3VyZXMgaXQgdGFrZXMgZnVsbCB3aWR0aFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2V0IHRoZSBIVE1MIGNvbnRlbnRcclxuICAgICAgICAgICAgZm9ybWF0dGVkQ29udGVudC5pbm5lckhUTUwgPSBodG1sQ29udGVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENSSVRJQ0FMOiBNYWtlIHN1cmUgdG8gYXBwZW5kIHRoaXMgdG8gdGhlIGRvY3VtZW50XHJcbiAgICAgICAgICAgIGlmIChyaWdodENvbHVtbkNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgcmlnaHRDb2x1bW5Db250YWluZXIuYXBwZW5kQ2hpbGQoZm9ybWF0dGVkQ29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkNvbnRlbnQgYXBwZW5kZWQgdG8gcmlnaHRDb2x1bW5Db250YWluZXJcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiByaWdodENvbHVtbkNvbnRhaW5lciBkb2Vzbid0IGV4aXN0LCBhcHBlbmQgZGlyZWN0bHkgdG8gc2Vjb25kQ29sdW1uXHJcbiAgICAgICAgICAgICAgICBzZWNvbmRDb2x1bW4uaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgICAgICBzZWNvbmRDb2x1bW4uYXBwZW5kQ2hpbGQoZm9ybWF0dGVkQ29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkNvbnRlbnQgYXBwZW5kZWQgdG8gc2Vjb25kQ29sdW1uXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhlIGNvbnRlbnQgaXMgaW4gdGhlIERPTVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkFmdGVyIGFwcGVuZGluZywgcmlnaHRDb2x1bW5Db250YWluZXIgSFRNTDpcIiwgXHJcbiAgICAgICAgICAgIC8vICAgICByaWdodENvbHVtbkNvbnRhaW5lciA/IHJpZ2h0Q29sdW1uQ29udGFpbmVyLmlubmVySFRNTCA6IFwicmlnaHRDb2x1bW5Db250YWluZXIgbm90IGZvdW5kXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBBZGQgY29sdW1ucyB0byB3cmFwcGVyXHJcbiAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChsZWZ0Q29sdW1uQ29udGFpbmVyKTtcclxuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHJpZ2h0Q29sdW1uQ29udGFpbmVyKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBBZGQgdG8gRE9NXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBFbnN1cmUgaW1hZ2VzIGFyZSBsb2FkZWRcclxuICAgICAgICBjb25zdCBpbWFnZXMgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpO1xyXG4gICAgICAgIGNvbnN0IGltYWdlUHJvbWlzZXMgPSBBcnJheS5mcm9tKGltYWdlcykubWFwKGltZyA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGltZy5jb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gV2FpdCBmb3IgaW1hZ2VzIHRvIGxvYWQgYmVmb3JlIHJlbmRlcmluZ1xyXG4gICAgICAgIFByb21pc2UuYWxsKGltYWdlUHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBTbWFsbCBkZWxheSB0byBlbnN1cmUgYWxsIHN0eWxpbmcgaXMgYXBwbGllZFxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGh0bWwyY2FudmFzKHdyYXBwZXIsIHtcclxuICAgICAgICAgICAgICAgICAgICBzY2FsZTogMiwgLy8gSGlnaGVyIHNjYWxlIGZvciBiZXR0ZXIgcXVhbGl0eVxyXG4gICAgICAgICAgICAgICAgICAgIHVzZUNPUlM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dUYWludDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBsb2dnaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmJ1xyXG4gICAgICAgICAgICAgICAgfSkudGhlbihjYW52YXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCBkYXRhIFVSTFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFVcmwgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cFxyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQod3JhcHBlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBkYXRhIFVSTCBhbmQgZGltZW5zaW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogY29udGVudFdpZHRoSW5QaXhlbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogaGVhZGVySGVpZ2h0SW5QaXhlbHNcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCBvbiBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yIFByb21pc2UgbG9hZCA6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHdyYXBwZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQod3JhcHBlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwgMTAwKTsgLy8gU21hbGwgZGVsYXkgZm9yIHN0eWxlc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5hc3luYyBsb2FkRm9udEZvclBERihkb2M6IGpzUERGKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIFxyXG4gICAgLy8gICAvLyBGZXRjaCB0aGUgZm9udCBmaWxlIGZyb20gdGhlIHJvb3QgcGF0aCB3aGVyZSBpdCdzIGF2YWlsYWJsZSBpbiB0aGUgYnJvd3NlclxyXG4gICAgLy8gICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcuLi8uLi9hc3NldHMvZm9udHMvUXVpY2tzYW5kL3N0YXRpYy9RdWlja3NhbmQtUmVndWxhci50dGYnKTsgLy8gQWRqdXN0IHBhdGggYXMgbmVlZGVkXHJcbiAgICAvLyAgIGNvbnN0IGZvbnREYXRhID0gYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcclxuXHJcbiAgICAvLyAgIGNvbnN0IHJlc3BvbnNlMSA9IGF3YWl0IGZldGNoKCcuLi8uLi9hc3NldHMvZm9udHMvUXVpY2tzYW5kL3N0YXRpYy9RdWlja3NhbmQtQm9sZC50dGYnKTsgLy8gQWRqdXN0IHBhdGggYXMgbmVlZGVkXHJcbiAgICAvLyAgIGNvbnN0IGZvbnREYXRhMSA9IGF3YWl0IHJlc3BvbnNlMS5hcnJheUJ1ZmZlcigpO1xyXG4gICAgICBcclxuICAgIC8vICAgLy8gQ29udmVydCBBcnJheUJ1ZmZlciB0byBiYXNlNjRcclxuICAgIC8vICAgY29uc3QgYmFzZTY0Rm9udCA9IGJ0b2EoXHJcbiAgICAvLyAgICAgbmV3IFVpbnQ4QXJyYXkoZm9udERhdGEpXHJcbiAgICAvLyAgICAgICAucmVkdWNlKChkYXRhLCBieXRlKSA9PiBkYXRhICsgU3RyaW5nLmZyb21DaGFyQ29kZShieXRlKSwgJycpXHJcbiAgICAvLyAgICk7XHJcblxyXG4gICAgLy8gICBjb25zdCBiYXNlNjRGb250MSA9IGJ0b2EoXHJcbiAgICAvLyAgICAgbmV3IFVpbnQ4QXJyYXkoZm9udERhdGExKVxyXG4gICAgLy8gICAgICAgLnJlZHVjZSgoZGF0YSwgYnl0ZSkgPT4gZGF0YSArIFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZSksICcnKVxyXG4gICAgLy8gICApO1xyXG5cclxuICAgIGNvbnN0IGJhc2U2NEZvbnQgPSAnJztcclxuXHJcbiAgICBjb25zdCBiYXNlNjRGb250MT0nJztcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiZmlyc3RcIilcclxuICAgICAgLy8gQWRkIGZvbnQgdG8ganNQREZcclxuICAgICAgY29uc3QgZm9udFBhdGggPSAnUXVpY2tzYW5kLVJlZ3VsYXIudHRmJztcclxuICAgICAgZG9jLmFkZEZpbGVUb1ZGUyhmb250UGF0aCwgYmFzZTY0Rm9udCk7XHJcbiAgICAgIGRvYy5hZGRGb250KGZvbnRQYXRoLCAnUXVpY2tzYW5kJywgJ25vcm1hbCcpO1xyXG4gICAgICBkb2Muc2V0Rm9udCgnUXVpY2tzYW5kJywgJ25vcm1hbCcpO1xyXG5cclxuICAgICAgY29uc3QgZm9udFBhdGgxID0gJ1F1aWNrc2FuZC1Cb2xkLnR0Zic7XHJcbiAgICAgIGRvYy5hZGRGaWxlVG9WRlMoZm9udFBhdGgxLCBiYXNlNjRGb250MSk7XHJcbiAgICAgIGRvYy5hZGRGb250KGZvbnRQYXRoMSwgJ1F1aWNrc2FuZCcsICdib2xkJyk7XHJcbiAgICAgIGRvYy5zZXRGb250KCdRdWlja3NhbmQnLCAnYm9sZCcpO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBmb250OicsIGVycm9yKTtcclxuICAgICAgLy8gRmFsbGJhY2sgdG8gc3RhbmRhcmQgZm9udFxyXG4gICAgICBkb2Muc2V0Rm9udCgnaGVsdmV0aWNhJyk7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLy8gVGhlbiBpbiB5b3VyIFBERiBnZW5lcmF0aW9uIG1ldGhvZFxyXG4gIFxyXG5cclxuICAgIFxyXG4gICAgYXN5bmMgZ2VuZXJhdGVQREYoZXZlbnQsXHJcbiAgZWxlbWVudE9ySWQ6IHN0cmluZyB8IHN0cmluZyxcclxuICBmaWxlbmFtZTogc3RyaW5nID0gJ21vcnRnYWdlX2FwcGxpY2F0aW9uLnBkZicsXHJcbiAgcHJpbnRVcGxvYWQ6IGJvb2xlYW4gPSB0cnVlXHJcbikge1xyXG5cclxuICAgICAgICBsZXQgc3VjY2VzcywgZmFpbHVyZTtcclxuICAgICAgICBpZiAoZXZlbnQuaW52b2tlX2V2ZW50X2NvbmZpZykge1xyXG4gICAgICAgICAgICBzdWNjZXNzID0gZXZlbnQuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcuT25TdWNjZXNzIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICBldmVudC5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vblJlc3BvbnNlO1xyXG4gICAgICAgICAgICBmYWlsdXJlID0gZXZlbnQuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25GYWlsdXJlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICBldmVudC5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vbkV4Y2VwdGlvbjtcclxuICAgICAgICB9XHJcbi8vICAgY29uc29sZS5sb2coXCJnZW5lcmF0ZVBERiBzdGFydGVkOlwiKTtcclxuLy8gICBjb25zb2xlLnRpbWUoJ1BERiBSZW5kZXIgVGltZScpO1xyXG4gIHRoaXMuc2hvd0xvYWRlcihcIkdlbmVyYXRpbmcgUERGLi4uIFBsZWFzZSB3YWl0LlwiKTtcclxuXHJcbiAgY29uc3Qgc291cmNlRWxlbWVudFBhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRPcklkKTtcclxuICAgICAgICBjb25zdCBnZW5lcmF0ZWRJZCA9IGBzZWN0aW9uLW5lc3RlZC0ke2VsZW1lbnRPcklkfWA7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChnZW5lcmF0ZWRJZCk7XHJcbiAgICAgICAgdGhpcy5hZGp1c3REb2xsZXJQcmVwZW5kKCk7ICAgICAgICBcclxuICAgICAgICB0aGlzLmFkanVzdFBlcmNlbnRhZ2VTdWZmaXgoKTtcclxuICAgICAgICBlbGVtZW50ID0gdGhpcy50cmFuc2Zvcm1JbnB1dHNUb0xhYmVsc0FuZFdyYXBDb250ZW50KGVsZW1lbnQpO1xyXG4gLy8gY29uc3QgZWxlbWVudCA9IC8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tc2VjdGlvbi1lbGVtZW50cycpOyBcclxuXHJcbiBcclxuICAgY29uc3QgcGF0dGVybnMgPSBbL15BcHBsaWNhbnRfXFxkKyQvLCAvXkRhdGVfXFxkKyQvXTtcclxuXHJcbiAgZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcqJykuZm9yRWFjaChlbCA9PiB7XHJcbiAgICBjb25zdCB0ZXh0ID0gZWwudGV4dENvbnRlbnQ/LnRyaW0oKTtcclxuICAgIGlmICh0ZXh0ICYmIHBhdHRlcm5zLnNvbWUocCA9PiBwLnRlc3QodGV4dCkpKSB7XHJcbiAgICAgIChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuY29sb3IgPSAndHJhbnNwYXJlbnQnO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHRoaXMuY2xlYW5VcE1hdGVyaWFsRmllbGRzKGVsZW1lbnQpO1xyXG5cclxuICBpZiAoIWVsZW1lbnQpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0VsZW1lbnQgbm90IGZvdW5kIGZvciBQREYuJyk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgbWFyZ2luOiBbMS41NjI1LCAwLjUsIDAuNSwgMC41XSxcclxuICAgIGZpbGVuYW1lLFxyXG4gICAgaW1hZ2U6IHsgdHlwZTogJ2pwZWcnLCBxdWFsaXR5OiAwLjk4IH0sXHJcbiAgICBodG1sMmNhbnZhczogeyBzY2FsZTogMiwgdXNlQ09SUzogdHJ1ZSB9LFxyXG4gICAganNQREY6IHsgdW5pdDogJ2luJywgZm9ybWF0OiAnYTQnLCBvcmllbnRhdGlvbjogJ3BvcnRyYWl0JyB9LFxyXG4gICAgcGFnZWJyZWFrOiB7XHJcbiAgICAgIG1vZGU6IFsnYXZvaWQtYWxsJywgJ2NzcycsICdsZWdhY3knXSxcclxuICAgICAgYXZvaWQ6IFsnLm5vLWJyZWFrJywgJy5hdm9pZC1icmVhayddXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2VsZiA9IHRoaXM7IC8vIHByZXNlcnZlIGNvbnRleHQgaWYgbmVlZGVkXHJcblxyXG5cclxuY29uc3QgZG9jID0gYXdhaXQgaHRtbDJwZGYoKS5zZXQob3B0aW9ucykuZnJvbShlbGVtZW50KS50b1BkZigpLmdldCgncGRmJyk7XHJcblxyXG4gIGNvbnN0IHRvdGFsUGFnZXMgPSBkb2MuaW50ZXJuYWwuZ2V0TnVtYmVyT2ZQYWdlcygpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lcklkSGVhZGVyID0gKGV2ZW50WydldmVudF9oYW5kbGVyJ10/LnRvTG93ZXJDYXNlKCkgPT09ICdzdGVwJylcclxuICAgICAgICAgICAgPyAnc3RlcGJsb2NrLScgKyB0aGlzLmV2ZW50QWRkaXRpb25hbFBhcmFtc1snQ0VFX1BSSU5UX1NPVVJDRV9IRUFERVInXVxyXG4gICAgICAgICAgICA6IHRoaXMuZXZlbnRBZGRpdGlvbmFsUGFyYW1zWydDRUVfUFJJTlRfU09VUkNFX0hFQURFUiddO1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZUh0bWxfaGVhZGVyID0gdGhpcy5hZGp1c3RUZXh0YXJlYXNGb3JQREYoY29udGFpbmVySWRIZWFkZXIpIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckhlaWdodEluY2hlcyA9IDEwMCAvIDk2OyAvLyDiiYggMS4wNDE3IGluY2hlc1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHBhZ2VXaWR0aCA9IGRvYy5pbnRlcm5hbC5wYWdlU2l6ZS5nZXRXaWR0aCgpOyAvLyBmdWxsIHdpZHRoIGluIGluY2hlc1xyXG4gICAgICAgIGNvbnN0IG1hcmdpbiA9IDAuNTsgLy8gaW4gaW5jaGVzXHJcbiAgICAgICAgY29uc3QgaW1hZ2VXaWR0aCA9IHBhZ2VXaWR0aCAtIDIgKiBtYXJnaW47IC8vIHN1YnRyYWN0IGxlZnQgKyByaWdodCBtYXJnaW5zXHJcbiAgICAgICAgY29uc3QgaW1hZ2VYID0gbWFyZ2luOyAvLyBzdGFydCBkcmF3aW5nIGF0IGxlZnQgbWFyZ2luXHJcblxyXG4gICAgICAgIHRoaXMuY29udmVydEhlYWRlclRvSW1hZ2VGaXhlZEhlaWdodChzb3VyY2VIdG1sX2hlYWRlcikudGhlbigoeyBkYXRhVXJsLCB3aWR0aCwgaGVpZ2h0IH0pID0+IHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gdG90YWxQYWdlcy0xOyBpKyspIHtcclxuICAgICAgICAgICAgZG9jLnNldFBhZ2UoaSk7XHJcbiAgICAgICAgICAgIGRvYy5hZGRJbWFnZShkYXRhVXJsLCAnUE5HJywgaW1hZ2VYLCAwLCBpbWFnZVdpZHRoLCBoZWFkZXJIZWlnaHRJbmNoZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBcclxuXHJcblxyXG4gICAgLy8gICBkb2Muc2F2ZShmaWxlbmFtZSk7XHJcblxyXG4gICAgICBpZiAocHJpbnRVcGxvYWQpIHtcclxuICAgICAgICBjb25zdCBibG9iT2JqID0gZG9jLm91dHB1dCgnYmxvYicpO1xyXG4gICAgICAgIChibG9iT2JqIGFzIGFueSkubmFtZSA9IGZpbGVuYW1lOyAvLyBvcHRpb25hbDogbmFtZSB0aGUgYmxvYiBmb3IgYmFja2VuZFxyXG5cclxuICAgICAgICAvLyBDYWxsIHVwbG9hZCBmdW5jdGlvblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgc2VsZi5wcmludFVwbG9hZChibG9iT2JqLCBmaWxlbmFtZSwgc3VjY2VzcywgZmFpbHVyZSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVcGxvYWQgZmFpbGVkOicsIGVycik7XHJcbiAgICAgICAgICBpZiAoZmFpbHVyZSkgZmFpbHVyZShlcnIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gIGNvbnNvbGUudGltZUVuZCgnUERGIFJlbmRlciBUaW1lJyk7XHJcbn1cclxuXHJcblxyXG50cmFuc2Zvcm1JbnB1dHNUb0xhYmVsc0FuZFdyYXBDb250ZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQge1xyXG4gIGNvbnN0IGNsb25lZEVsZW1lbnQgPSBlbGVtZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgLy8gQ29udmVydCA8aW5wdXQ+IGVsZW1lbnRzXHJcbiBjbG9uZWRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgY29uc3QgdHlwZSA9IChpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS50eXBlPy50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAvLyBPbmx5IHJlcGxhY2UgdGV4dC1saWtlIGlucHV0IHR5cGVzXHJcbiAgaWYgKFsndGV4dCcsICdlbWFpbCcsICdudW1iZXInLCAndGVsJywgJ3VybCcsICdzZWFyY2gnLCAncGFzc3dvcmQnLCAnZGF0ZSddLmluY2x1ZGVzKHR5cGUpKSB7XHJcbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB3cmFwcGVyLnRleHRDb250ZW50ID0gKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlIHx8ICcnO1xyXG4gICAgd3JhcHBlci5zdHlsZS53aGl0ZVNwYWNlID0gJ25vcm1hbCc7XHJcbiAgICB3cmFwcGVyLnN0eWxlLndvcmRCcmVhayA9ICdicmVhay13b3JkJztcclxuICAgIHdyYXBwZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICB3cmFwcGVyLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcclxuICAgIGlucHV0LnJlcGxhY2VXaXRoKHdyYXBwZXIpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBSZXBsYWNlIG9ubHkgdGV4dGFyZWFzXHJcbmNsb25lZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKS5mb3JFYWNoKHRleHRhcmVhID0+IHtcclxuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgd3JhcHBlci50ZXh0Q29udGVudCA9ICh0ZXh0YXJlYSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50KS52YWx1ZSB8fCAnJztcclxuICB3cmFwcGVyLnN0eWxlLndoaXRlU3BhY2UgPSAncHJlLXdyYXAnOyAvLyBwcmVzZXJ2ZXMgbGluZSBicmVha3NcclxuICB3cmFwcGVyLnN0eWxlLndvcmRCcmVhayA9ICdicmVhay13b3JkJztcclxuICB3cmFwcGVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gIHdyYXBwZXIuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xyXG4gIHRleHRhcmVhLnJlcGxhY2VXaXRoKHdyYXBwZXIpO1xyXG59KTtcclxuXHJcblxyXG50aGlzLnJlcGxhY2VPbmx5UmFkaW9BcHBWaWV3UmVuZGVyZXJzKGNsb25lZEVsZW1lbnQpO1xyXG5cclxuICByZXR1cm4gY2xvbmVkRWxlbWVudDtcclxufVxyXG5cclxuXHJcbiAgICBcclxuICAgIFxyXG4gICAgY2FzZVBkZkdlbmVyYXRlKGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJHZW5lcmF0aW5nIFBERiBmb3IgZXZlbnQ6XCIpOy8vIGNvbW1lbnRcclxuICAgICAgICAvL3RoaXMuc2hvd0xvYWRlcihcIkdlbmVyYXRpbmcgUERGLi4uIFBsZWFzZSB3YWl0LlwiKTtcclxuICAgICAgICB0aGlzLmV2ZW50QWRkaXRpb25hbFBhcmFtcyA9IHRoaXMuZ2V0QWRkaXRpb25hbFBhcmFtZXRlcigpO1xyXG4gICAgICAgIGNvbnN0IHByaW50Rm9ybWF0ID0gKHRoaXMuZXZlbnRBZGRpdGlvbmFsUGFyYW1zWydDRUVfUFJJTlRfRk9STUFUJ10gfHwgJ3BkZicpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5ldmVudEFkZGl0aW9uYWxQYXJhbXNbJ0NFRV9QUklOVF9TT1VSQ0UnXTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lcklkcyA9IChldmVudFsnZXZlbnRfaGFuZGxlciddPy50b0xvd2VyQ2FzZSgpID09PSAnc3RlcCcpXHJcbiAgICAgICAgICAgID8gc291cmNlLnNwbGl0KCd8fCcpLm1hcChpZCA9PiAnc3RlcGJsb2NrLScgKyBpZClcclxuICAgICAgICAgICAgOiBzb3VyY2Uuc3BsaXQoJ3x8Jyk7XHJcblxyXG5jb25zdCBjb250YWluZXJJZEhlYWRlciA9IChldmVudFsnZXZlbnRfaGFuZGxlciddPy50b0xvd2VyQ2FzZSgpID09PSAnc3RlcCcpXHJcbiAgICAgICAgICAgID8gJ3N0ZXBibG9jay0nICsgdGhpcy5ldmVudEFkZGl0aW9uYWxQYXJhbXNbJ0NFRV9QUklOVF9TT1VSQ0VfSEVBREVSJ11cclxuICAgICAgICAgICAgOiB0aGlzLmV2ZW50QWRkaXRpb25hbFBhcmFtc1snQ0VFX1BSSU5UX1NPVVJDRV9IRUFERVInXTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3BsaXRDb250YWluZXJJZHMgPSBbLi4uY29udGFpbmVySWRzXTtcclxuICAgICAgICBjb25zdCBzb3VyY2VJZCA9IHNwbGl0Q29udGFpbmVySWRzWzBdO1xyXG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gdGhpcy5ldmVudEFkZGl0aW9uYWxQYXJhbXNbJ0NFRV9QUklOVF9GSUxFX05BTUUnXSB8fCBcInJlcG9ydF9wZGYucGRmXCI7XHJcbiAgICAgICAgLy9jb25zdCBzb3VyY2VIdG1sID0gdGhpcy5hZGp1c3RUZXh0YXJlYXNGb3JQREYoc291cmNlSWQpO1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVQREYoZXZlbnQsc291cmNlSWQsIGZpbGVuYW1lKTsgLy8gdGVzdFxyXG4gICAgICAgIFxyXG5cclxuICAgIH1cclxuICAgIFxyXG4gICAgYWRqdXN0VGV4dGFyZWFzRm9yUERGKHNvdXJjZUVsZW1lbnRJZDogc3RyaW5nKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcclxuICAgICAgICBjb25zdCBzb3VyY2VFbGVtZW50UGFyZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc291cmNlRWxlbWVudElkKTtcclxuICAgICAgICBjb25zdCBnZW5lcmF0ZWRJZCA9IGBzZWN0aW9uLW5lc3RlZC0ke3NvdXJjZUVsZW1lbnRJZH1gO1xyXG4gICAgICAgIGNvbnN0IGdlbmVyYXRlZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChnZW5lcmF0ZWRJZCk7XHJcbiAgICAgICAvLyBjb25zdCBzb3VyY2VFbGVtZW50UGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tc2VjdGlvbi1lbGVtZW50cycpOyBcclxuICAgIFxyXG4gICAgICAgIGlmICghc291cmNlRWxlbWVudFBhcmVudCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3QgY2xvbmVkU291cmNlUGFyZW50ID0gc291cmNlRWxlbWVudFBhcmVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgY29tYmluZWRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjb21iaW5lZENvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9uZWRTb3VyY2VQYXJlbnQpO1xyXG4gICAgICAgIGNvbWJpbmVkQ29udGFpbmVyLmFwcGVuZENoaWxkKHNvdXJjZUVsZW1lbnRQYXJlbnQpO1xyXG4gICAgICAgIC8vIGlmIChnZW5lcmF0ZWRFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gICAgIGNvbnN0IGNsb25lZEdlbmVyYXRlZEVsZW1lbnQgPSBnZW5lcmF0ZWRFbGVtZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAvLyAgICAgY29tYmluZWRDb250YWluZXIuYXBwZW5kQ2hpbGQoY2xvbmVkR2VuZXJhdGVkRWxlbWVudCk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICB0aGlzLmNsZWFuVXBNYXRlcmlhbEZpZWxkcyhjb21iaW5lZENvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRlc3QgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYmxvY2tfZmllbGRfMjUxNDU3Ml93cmFwcGVyJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICB0ZXN0LmZvckVhY2goKHdyYXBwZXI6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhcInRlc3QxXCIpO1xyXG59KTtcclxuICAgICAgICB0aGlzLnJlcGxhY2VPbmx5UmFkaW9BcHBWaWV3UmVuZGVyZXJzKGNvbWJpbmVkQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgdGVzdC5mb3JFYWNoKCh3cmFwcGVyOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgLy8gY29uc29sZS5sb2coXCJ0ZXN0MlwiKTtcclxufSk7XHJcbiAgICAgICAgY29uc3QgZm9ybUVsZW1lbnRzID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnKTtcclxuICAgICAgICBmb3JtRWxlbWVudHMuZm9yRWFjaCgoZWw6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWVsIHx8ICFlbC50YWdOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9ICcnO1xyXG4gICAgICAgICAgICBsZXQgZGlzcGxheUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChlbC50YWdOYW1lID09PSAnU0VMRUNUJykge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBlbC5vcHRpb25zW2VsLnNlbGVjdGVkSW5kZXhdPy50ZXh0IHx8ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIGRpc3BsYXlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheUVsZW1lbnQuaW5uZXJUZXh0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5RWxlbWVudC5zdHlsZS5mb250V2VpZ2h0ID0gdmFsdWUgPyAnYm9sZCcgOiAnbm9ybWFsJztcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgZWxzZSBpZiAoZWwudGFnTmFtZSA9PT0gJ0lOUFVUJyAmJiAoZWwudHlwZSA9PT0gJ2NoZWNrYm94JykpIHtcclxuICAgICAgICAgICAgICAgIC8vIEZvciByYWRpbyBidXR0b25zIGFuZCBjaGVja2JveGVzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0NoZWNrZWQgPSBlbC5jaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsVGV4dCA9IHRoaXMuZmluZExhYmVsVGV4dChlbCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGN1c3RvbSBlbGVtZW50IHRvIHJlcHJlc2VudCB0aGUgc2VsZWN0aW9uIHN0YXRlc1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWZsZXgnO1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheUVsZW1lbnQuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG5cclxuICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IGluZGljYXRvciBmcm9tIGJlaW5nIHNwbGl0IGFjcm9zcyBQREYgcGFnZXNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF2b2lkQnJlYWtXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBhdm9pZEJyZWFrV3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XHJcbiAgICAgICAgICAgICAgICAvLyBhdm9pZEJyZWFrV3JhcHBlci5zdHlsZS5wYWdlQnJlYWtJbnNpZGUgPSAnYXZvaWQnO1xyXG4gICAgICAgICAgICAgICAgYXZvaWRCcmVha1dyYXBwZXIuc3R5bGUuYnJlYWtJbnNpZGUgPSAnYXZvaWQnO1xyXG4gICAgICAgICAgICAgICAgYXZvaWRCcmVha1dyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy13ZWJraXQtY29sdW1uLWJyZWFrLWluc2lkZScsICdhdm9pZCcpO1xyXG4gICAgICAgICAgICAgICAgYXZvaWRCcmVha1dyYXBwZXIuc3R5bGUuc2V0UHJvcGVydHkoJy1tb3otY29sdW1uLWJyZWFrLWluc2lkZScsICdhdm9pZCcpO1xyXG4gICAgICAgICAgICAgICAgYXZvaWRCcmVha1dyYXBwZXIuc3R5bGUuYnJlYWtJbnNpZGUgPSAnYXZvaWQnO1xyXG4gICAgICAgICAgICAgICAgYXZvaWRCcmVha1dyYXBwZXIuc3R5bGUudmVydGljYWxBbGlnbiA9ICdtaWRkbGUnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHZpc3VhbCBpbmRpY2F0b3IgKGNpcmNsZSBmb3IgcmFkaW8sIHNxdWFyZSBmb3IgY2hlY2tib3gpXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLnN0eWxlLndpZHRoID0gJzEycHgnO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmhlaWdodCA9ICcxMnB4JztcclxuICAgICAgICAgICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkICMwMDAnO1xyXG4gICAgICAgICAgICAgICAgaW5kaWNhdG9yLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzZweCc7XHJcbiAgICAgICAgICAgICAgICAvLyBpbmRpY2F0b3Iuc3R5bGUubWFyZ2luQm90dG9tID0gJzJweCc7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYgKGVsLnR5cGUgPT09ICdyYWRpbycpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzUwJSc7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgaWYgKGlzQ2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYmFja2dyb3VuZCA9ICcjMDAwJztcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJveFNoYWRvdyA9ICdpbnNldCAwIDAgMCAycHggIzAwMCc7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gfSBlbHNlIFxyXG4gICAgICAgICAgICAgICAgIGlmKGVsLnR5cGUgPT09ICdjaGVja2JveCcpIHsgLy8gY2hlY2tib3hcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljYXRvci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzAwMCc7IC8vIEZpbGwgd2l0aCBibGFja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjMDAwJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNhdG9yLmlubmVySFRNTCA9ICfinJMnOyAvLyBDaGVja21hcmsgc3ltYm9sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljYXRvci5zdHlsZS5jb2xvciA9ICcjZmZmJzsgLy8gV2hpdGUgY2hlY2ttYXJrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljYXRvci5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmxpbmVIZWlnaHQgPSAnMTBweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljYXRvci5zdHlsZS5mb250U2l6ZSA9ICcxMHB4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGluZGljYXRvciBhbmQgbGFiZWwgdG8gb3VyIGRpc3BsYXkgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgZGlzcGxheUVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5kaWNhdG9yKTtcclxuICAgICAgICAgICAgICAgIGF2b2lkQnJlYWtXcmFwcGVyLmFwcGVuZENoaWxkKGRpc3BsYXlFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGxhYmVsIHRleHQgaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0U3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICAgICAgICAgIHRleHRTcGFuLmlubmVyVGV4dCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdGV4dFNwYW4uc3R5bGUuYm9yZGVyQm90dG9tID0gJ25vbmUnOyAgLy8g4pyFIEFsd2F5cyByZW1vdmUgdW5kZXJsaW5lXHJcbiAgICAgICAgICAgICAgICB0ZXh0U3Bhbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMnB4JztcclxuICAgICAgICAgICAgICAgIGlmIChpc0NoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0U3Bhbi5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRleHRTcGFuLnN0eWxlLmJvcmRlckJvdHRvbSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICAvLyB0ZXh0U3Bhbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMnB4JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRpc3BsYXlFbGVtZW50LmFwcGVuZENoaWxkKHRleHRTcGFuKTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGb3IgdGV4dCBpbnB1dHMsIHRleHRhcmVhcywgZXRjLlxyXG4gICAgICAgIHZhbHVlID0gZWwudmFsdWUgfHwgZWwudGV4dENvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgc3BhbiB0byBkaXNwbGF5IHRoZSB2YWx1ZVxyXG4gICAgICAgIGRpc3BsYXlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIGRpc3BsYXlFbGVtZW50LmlubmVyVGV4dCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkaXNwbGF5RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XHJcbiAgICAgICAgICAgIC8vIGRpc3BsYXlFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9ICcyMHB4JztcclxuICAgICAgICAgICAgZGlzcGxheUVsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XHJcbiAgICAgICAgICAgIGRpc3BsYXlFbGVtZW50LnN0eWxlLmNvbG9yID0gJyMwMDAnO1xyXG4gICAgICAgICAgICBkaXNwbGF5RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmZic7XHJcbiAgICAgICAgICAgIGRpc3BsYXlFbGVtZW50LnN0eWxlLmZvbnQgPSBnZXRDb21wdXRlZFN0eWxlKGVsKS5mb250O1xyXG4gICAgICAgICAgICAvLyBkaXNwbGF5RWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzRweCA2cHgnO1xyXG4gICAgICAgICAgICBkaXNwbGF5RWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnNnB4JztcclxuICAgICAgICAgICAgZGlzcGxheUVsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgIFxyXG5cclxuICAgICAgICAgICAgIC8vIElmIGVtcHR5IHZhbHVlLCBzaG93IGFuIHVuZGVybGluZVxyXG4gICAgaWYgKGVsLnRhZ05hbWUgIT09ICdJTlBVVCcgfHwgKGVsLnR5cGUgIT09ICdyYWRpbycgJiYgZWwudHlwZSAhPT0gJ2NoZWNrYm94JykpIHtcclxuICAgICAgICBpZiAoIXZhbHVlLnRyaW0oKSkge1xyXG4gICAgICAgICAgICBkaXNwbGF5RWxlbWVudC5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMnB4IHNvbGlkICNjY2MnO1xyXG4gICAgICAgICAgICAvL2Rpc3BsYXlFbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMHB4JztcclxuICAgICAgICAgICAgZGlzcGxheUVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gJzI0cHgnO1xyXG4gICAgICAgICAgICAvL2Rpc3BsYXlFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjZmZmJzsgLy8gTGlnaHQgZ3JheSBiYWNrZ3JvdW5kIHRvIGluZGljYXRlIGl0J3MgZmlsbGVkXHJcbiAgICAgICAgICAgIC8vZGlzcGxheUVsZW1lbnQuc3R5bGUuY29sb3IgPSAnIzAwMCc7IC8vIEJsYWNrIHRleHQgY29sb3IgZm9yIHZpc2liaWxpdHlcclxuICAgICAgICAgICAgZGlzcGxheUVsZW1lbnQuaW5uZXJUZXh0ID0gJ04vQSc7IC8vIERlZmF1bHQgdGV4dCB0byBpbmRpY2F0ZSBpdCdzIGZpbGxlZFxyXG4gICAgICAgICAgICBkaXNwbGF5RWxlbWVudC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgICAgICBkaXNwbGF5RWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnNHB4JztcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBSZXBsYWNlIHRoZSBvcmlnaW5hbCBlbGVtZW50IHdpdGggb3VyIGRpc3BsYXkgZWxlbWVudFxyXG4gICAgZWwucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZGlzcGxheUVsZW1lbnQsIGVsKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdC5mb3JFYWNoKCh3cmFwcGVyOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgLy8gY29uc29sZS5sb2coXCJ0ZXN0M1wiKTtcclxufSk7XHJcbiAgICBcclxuICAgICAgICBjb25zdCBpbWFnZXMgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTtcclxuICAgICAgICBpbWFnZXMuZm9yRWFjaCgoaW1nKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gc291cmNlRWxlbWVudFBhcmVudC5xdWVyeVNlbGVjdG9yKGBpbWdbc3JjPVwiJHtpbWcuc3JjfVwiXWApO1xyXG4gICAgICAgICAgICBpZiAob3JpZ2luYWwgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShvcmlnaW5hbCk7XHJcbiAgICAgICAgICAgICAgICBpbWcuc3R5bGUud2lkdGggPSBjb21wdXRlZFN0eWxlLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgaW1nLnN0eWxlLmhlaWdodCA9IGNvbXB1dGVkU3R5bGUuaGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbWJpbmVkQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzc1MHB4JzsgLy8gT3Igd2hhdGV2ZXIgeW91ciB0YXJnZXQgd2lkdGggaXMgKHNsaWdodGx5IGxlc3MgdGhhbiBwYWdlIHdpZHRoKVxyXG4gICAgICAgIGNvbWJpbmVkQ29udGFpbmVyLnN0eWxlLm1heFdpZHRoID0gJzc1MHB4JztcclxuICAgICAgICBjb21iaW5lZENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzIwcHgnO1xyXG4gICAgICAgIGNvbWJpbmVkQ29udGFpbmVyLnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94JztcclxuICAgICAgICBjb21iaW5lZENvbnRhaW5lci5zdHlsZS53b3JkQnJlYWsgPSAnYnJlYWstd29yZCc7XHJcbiAgICAgICAgY29tYmluZWRDb250YWluZXIuc3R5bGUub3ZlcmZsb3dXcmFwID0gJ2JyZWFrLXdvcmQnO1xyXG4gICAgICAgIC8vY29tYmluZWRDb250YWluZXIuc3R5bGUuZm9udFNpemUgPSAnOHB4JzsgXHJcblxyXG4gICAgICAgIFxyXG4gICAgXHJcbiAgICAgICAgY29uc3QgaW5saW5lQWxsU3R5bGVzID0gKHJvb3Q6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbEVsZW1lbnRzID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxFbGVtZW50PignKicpO1xyXG4gICAgICAgICAgICBhbGxFbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAgICAgLy8gT25seSBrZWVwIHRoZSBtb3N0IGltcG9ydGFudCBzdHlsZXMgZm9yIGFjY3VyYXRlIHRleHQgbGF5b3V0XHJcbiAgICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5JywgJ2ZvbnQtc2l6ZScsICdmb250LXdlaWdodCcsICdmb250LXN0eWxlJyxcclxuICAgICAgICAgICAgICAgICdsaW5lLWhlaWdodCcsICdsZXR0ZXItc3BhY2luZycsICdjb2xvcicsICdiYWNrZ3JvdW5kLWNvbG9yJyxcclxuICAgICAgICAgICAgICAgICd0ZXh0LWFsaWduJywgJ3ZlcnRpY2FsLWFsaWduJywgJ3RleHQtdHJhbnNmb3JtJyxcclxuICAgICAgICAgICAgICAgICdwYWRkaW5nJywgJ21hcmdpbicsICdib3gtc2l6aW5nJywgJ2Rpc3BsYXknLCAnd2lkdGgnLCAnaGVpZ2h0JyxcclxuICAgICAgICAgICAgICAgICdib3JkZXInLCAnYm9yZGVyLXJhZGl1cycsICd3aGl0ZS1zcGFjZScsICdvdmVyZmxvdy13cmFwJ1xyXG4gICAgICAgICAgICAgIF0uZm9yRWFjaChwcm9wID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHByb3ApO1xyXG4gICAgICAgICAgICAgICAgZWwuc3R5bGUuZm9udEZhbWlseSA9ICdRdWlja3NhbmQnO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KHByb3AsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICBpbmxpbmVBbGxTdHlsZXMoY29tYmluZWRDb250YWluZXIpO1xyXG5cclxuICAgICAgICB0ZXN0LmZvckVhY2goKHdyYXBwZXI6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhcInRlc3Q0XCIpO1xyXG59KTtcclxuICAgICAgICAvLyBGaXggbGFiZWwgcmVuZGVyaW5nIGlzc3VlXHJcbiAgICAgICAgY29uc3QgaW5pdGlhbHNMYWJlbHMgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuY29sLW1kLTIgLnNoYXJpbmdpbmZvcm1hdGlvbmZvJyk7XHJcbiAgICAgICAgaW5pdGlhbHNMYWJlbHMuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IGVsLnRleHRDb250ZW50Py50cmltKCkgfHwgJyc7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmZvbnRGYW1pbHkgPSAnUXVpY2tzYW5kJztcclxuICAgICAgICAgICAgZWwuc3R5bGUuZm9udFdlaWdodCA9ICdub3JtYWwnO1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5mb250U2l6ZSA9ICcxMnB4JztcclxuICAgICAgICAgICAgZWwuc3R5bGUud2hpdGVTcGFjZSA9ICdub3dyYXAnO1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gJzAuM3B4JztcclxuICAgICAgICAgICAgZWwuc3R5bGUuY29sb3IgPSAnIzAwMCc7XHJcbiAgICAgICAgICAgIC8vZWwuc3R5bGUuYmFja2dyb3VuZCA9ICd0cmFuc3BhcmVudCc7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbGFiZWxDb2x1bW5zID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmNvbC1tZC0yJyk7XHJcbiAgICAgICAgbGFiZWxDb2x1bW5zLmZvckVhY2goKGNvbDogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgY29sLnN0eWxlLndpZHRoID0gJ2ZpdC1jb250ZW50JztcclxuICAgICAgICAgICAgY29sLnN0eWxlLm1pbldpZHRoID0gJzE1MHB4JztcclxuICAgICAgICAgICAgY29sLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgICAgIGNvbC5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICBjb25zdCBpbnB1dEhlYWRpbmdMYWJlbCA9IGNvbWJpbmVkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2wtZm9ybS1sYWJlbCwuY2YtbGFiZWwtYm9yZGVyLXRvcCcpO1xyXG4gICAgICAgIGlucHV0SGVhZGluZ0xhYmVsLmZvckVhY2goKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICBpZiAoIWVsLmlubmVyVGV4dCB8fCAhKGVsLmlubmVyVGV4dC50cmltKCkgPT09ICcnKSkge1xyXG4gICAgICAgICAgICAgICAgZWwuc3R5bGUuY29sb3IgPSAnIzgwODA4MCc7XHJcbiAgICAgICAgICAgICAgICBlbC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgICAgICAgICAgZWwuc3R5bGUubGV0dGVyU3BhY2luZyA9ICcxJztcclxuICAgICAgICAgICAgICAgIC8vZWwuc3R5bGUubWFyZ2luID0gJzE2cHggMCc7XHJcbiAgICAgICAgICAgICAgICBlbC5zdHlsZS5mb250RmFtaWx5ID0gJ1F1aWNrc2FuZCc7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9ICcwcHgnO1xyXG4gICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJvcmRlciA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgaW5wdXRUZXh0ID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmNmLWxhYmVsLWJvbGQnKTtcclxuICAgICAgICBpbnB1dFRleHQuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmNvbG9yID0gJyMzMzMnO1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gJzEnO1xyXG4gICAgICAgICAgICAvL2VsLnN0eWxlLm1hcmdpbiA9ICcxNnB4IDAnO1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5mb250RmFtaWx5ID0gJ1F1aWNrc2FuZCc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICBib2xkRm9ybWF0aW5nT25Tb21lRm9ybXMoY29tYmluZWRDb250YWluZXIpO1xyXG5cclxuXHJcbiAgICAgICAgLy8gSWYgYWN0dWFsIHNpZ25hdHVyZSBpcyBub3QgYXZhaWxhYmxlLCByZXBsYWNlIHdpdGggYSBwbGFjZWhvbGRlciBhbmQgbmVlZCB0byBtb2RpZnkgdGhpcyBjb2RlXHJcbiAgICAgICAgLy8gRmluZCBhbGwgZWxlbWVudHMgd2l0aCB0aGUgY2xhc3MgXCJ2aXNpYmxlX2RvY19zaWduXCIgYW5kIG1ha2UgdGhlaXIgdGV4dCBjb2xvciB3aGl0ZVxyXG4gICAgICAgIGNvbnN0IHZpc2libGVEb2NTaWduRWxlbWVudHMgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdbY2xhc3MqPVwidmlzaWJsZV9kb2Nfc2lnblwiXScpO1xyXG4gICAgICAgIHZpc2libGVEb2NTaWduRWxlbWVudHMuZm9yRWFjaCgobm9kZTogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgLy8gQ2hhbmdlIHRleHQgY29sb3IgdG8gd2hpdGVcclxuICAgICAgICAgICAgbm9kZS5zdHlsZS5jb2xvciA9IFwid2hpdGVcIjtcclxuICAgICAgICAgICAgLy8gT3B0aW9uYWw6IElmIHlvdSB3YW50IHRvIGVuc3VyZSBpdCdzIG5vdCB2aXNpYmxlIGV2ZW4gd2hlbiBzZWxlY3RlZFxyXG4gICAgICAgICAgICBub2RlLnN0eWxlLnVzZXJTZWxlY3QgPSBcIm5vbmVcIjtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gIC8vIEFwcGx5IG1hbnVhbCBzdHlsaW5nIGZvciBoZWFkaW5nc1xyXG4gICAgICAgIC8vICBjb25zdCBtYWluSGVhZGluZ3MgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubWFpbi1oZWFkaW5nJyk7XHJcbiAgICAgICAgLy8gIG1haW5IZWFkaW5ncy5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAvLyAgICAgIC8vZWwuc3R5bGUuZm9udFNpemUgPSAnMjJweCc7XHJcbiAgICAgICAgLy8gICAgICBlbC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgIC8vICAgICAgLy9lbC5zdHlsZS5tYXJnaW4gPSAnMTZweCAwJztcclxuICAgICAgICAvLyAgICAgIGVsLnN0eWxlLmNvbG9yID0gJyMwMDAnOyAvLyBPcHRpb25hbDogc2V0IGEgc3Ryb25nIGNvbnRyYXN0IGNvbG9yXHJcbiAgICAgICAgLy8gICAgICBlbC5zdHlsZS5mb250RmFtaWx5ID0gJ1F1aWNrc2FuZC1Cb2xkJzsgLy8gRW5zdXJlIGl0J3Mgc3VwcG9ydGVkIGluIFBERlxyXG4gICAgICAgIC8vICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbWFpbkhlYWRpbmdzID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm1haW4taGVhZGluZycpO1xyXG4gICAgICAgIG1haW5IZWFkaW5ncy5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgZWwuc3R5bGUuZm9udEZhbWlseSA9ICdRdWlja3NhbmQnOyAgICAgIC8vIOKchSBVc2UgdGhlIGJhc2UgZmFtaWx5IG9ubHlcclxuICAgICAgICAgICAgZWwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJzsgICAgICAgICAgICAvLyDinIUgVXNlIG51bWVyaWMgYm9sZCB3ZWlnaHQgKG5vdCAnYm9sZCcgc3RyaW5nKVxyXG4gICAgICAgICAgICBlbC5zdHlsZS5mb250U2l6ZSA9ICcyNHB4JzsgICAgICAgICAgICAgLy8gT3B0aW9uYWw6IGFkanVzdCBmb3IgY2xhcml0eVxyXG4gICAgICAgICAgICBlbC5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuMic7ICAgICAgICAgICAgLy8g4pyFIEhlbHBzIHNwYWNpbmdcclxuICAgICAgICAgICAgZWwuc3R5bGUubGV0dGVyU3BhY2luZyA9ICcwLjRweCc7ICAgICAgIC8vIOKchSBQcmV2ZW50cyBvdmVybGFwcGluZ1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5jb2xvciA9ICcjMDAwJztcclxuICAgICAgICB9KTtcclxuIFxyXG4gICAgICAgICAvLyBBcHBseSBzdHlsaW5nIGZvciBzdWJoZWFkaW5ncyBvciBvdGhlciBrbm93biBjbGFzc2VzXHJcbiAgICAgICAgIGNvbnN0IHN1YkhlYWRpbmdzID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2NsYXNzKj1cInN1Yi1oZWFkaW5nXCJdJyk7XHJcbiAgICAgICAgIHN1YkhlYWRpbmdzLmZvckVhY2goKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5mb250RmFtaWx5ID0gJ1F1aWNrc2FuZCc7ICAgICAgLy8g4pyFIFVzZSB0aGUgYmFzZSBmYW1pbHkgb25seVxyXG4gICAgICAgICAgICBlbC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnOyAgICAgICAgICAgIC8vIOKchSBVc2UgbnVtZXJpYyBib2xkIHdlaWdodCAobm90ICdib2xkJyBzdHJpbmcpXHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmZvbnRTaXplID0gJzE4cHgnOyAgICAgICAgICAgICAvLyBPcHRpb25hbDogYWRqdXN0IGZvciBjbGFyaXR5XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmxpbmVIZWlnaHQgPSAnMS4yJzsgICAgICAgICAgICAvLyDinIUgSGVscHMgc3BhY2luZ1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gJzAuNHB4JzsgICAgICAgLy8g4pyFIFByZXZlbnRzIG92ZXJsYXBwaW5nXHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmNvbG9yID0gJyMwMDAnO1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5tYXJnaW5Ub3AgPSAnMjdweCc7ICAgICAgICAgICAgLy8gQWRkIHNwYWNlIGFib3ZlIHN1Yi1oZWFkaW5nc1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5wYWRkaW5nVG9wID0gJzVweCc7ICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBwYWRkaW5nIGZvciBiZXR0ZXIgc3BhY2luZ1xyXG4gICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8vIGhlYWRlciBpc3N1ZVxyXG5cclxuICAgICAgICBcclxuICAgICAgICAvLyBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmJsb2NrX2ZpZWxkXzEwNTc2Mzdfd3JhcHBlcicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIC8vIGlmICh3cmFwcGVyKSB7XHJcbiAgICAgICAgLy8gICB3cmFwcGVyLnN0eWxlLndpZHRoID0gJzYwMHB4JztcclxuICAgICAgICBcclxuICAgICAgICAvLyAgIGNvbnN0IGxlZnRDb2wgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5jb2wtbWQtNi5maWVsZC0wLTAnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAvLyAgIGNvbnN0IHJpZ2h0Q29sID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuY29sLW1kLTYuZmllbGQtMC0xJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gICBpZiAobGVmdENvbCkgbGVmdENvbC5zdHlsZS53aWR0aCA9ICczMDBweCc7XHJcbiAgICAgICAgLy8gICBpZiAocmlnaHRDb2wpIHJpZ2h0Q29sLnN0eWxlLndpZHRoID0gJzMwMHB4JztcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIGNvbnN0IHdyYXBwZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGl2LmJsb2NrX2ZpZWxkXzEwNTc2Mzdfd3JhcHBlcicpO1xyXG5cclxuICAgICAgICB3cmFwcGVycy5mb3JFYWNoKHdyYXBwZXIgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB3cmFwcGVyRWwgPSB3cmFwcGVyIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICB3cmFwcGVyRWwuc3R5bGUud2lkdGggPSAnNjAwcHgnO1xyXG4gICAgICAgICAgICB3cmFwcGVyRWwuc3R5bGUubWFyZ2luQm90dG9tID0gXCI1cHhcIjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxlZnRDb2wgPSB3cmFwcGVyRWwucXVlcnlTZWxlY3RvcignLmNvbC1tZC02LmZpZWxkLTAtMCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCByaWdodENvbCA9IHdyYXBwZXJFbC5xdWVyeVNlbGVjdG9yKCcuY29sLW1kLTYuZmllbGQtMC0xJykgYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAobGVmdENvbCkgbGVmdENvbC5zdHlsZS53aWR0aCA9ICczMDBweCc7XHJcbiAgICAgICAgICAgIGlmIChyaWdodENvbCkgcmlnaHRDb2wuc3R5bGUud2lkdGggPSAnMzAwcHgnO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB3cmFwcGVyczEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXYuYmxvY2tfZmllbGRfMTEyNzA2NV93cmFwcGVyJyk7XHJcblxyXG4gICAgICAgIHdyYXBwZXJzMS5mb3JFYWNoKHdyYXBwZXIgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB3cmFwcGVyRWwgPSB3cmFwcGVyIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICB3cmFwcGVyRWwuc3R5bGUud2lkdGggPSAnNjAwcHgnO1xyXG4gICAgICAgICAgICB3cmFwcGVyRWwuc3R5bGUubWFyZ2luQm90dG9tID0gXCI1cHhcIjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxlZnRDb2wgPSB3cmFwcGVyRWwucXVlcnlTZWxlY3RvcignLmNvbC1tZC02LmZpZWxkLTAtMCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBjb25zdCByaWdodENvbCA9IHdyYXBwZXJFbC5xdWVyeVNlbGVjdG9yKCcuY29sLW1kLTYuZmllbGQtMC0xJykgYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAobGVmdENvbCkgbGVmdENvbC5zdHlsZS53aWR0aCA9ICczMDBweCc7XHJcbiAgICAgICAgICAgIGlmIChyaWdodENvbCkgcmlnaHRDb2wuc3R5bGUud2lkdGggPSAnMzAwcHgnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHdyYXBwZXJzMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5ibG9ja19maWVsZF8xNjAyODM2X3dyYXBwZXInKTtcclxuXHJcbiAgICAgICAgd3JhcHBlcnMyLmZvckVhY2god3JhcHBlciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXJFbCA9IHdyYXBwZXIgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHdyYXBwZXJFbC5zdHlsZS53aWR0aCA9ICc2MDBweCc7XHJcbiAgICAgICAgICAgIHdyYXBwZXJFbC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjVweFwiO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbGVmdENvbCA9IHdyYXBwZXJFbC5xdWVyeVNlbGVjdG9yKCcuY29sLW1kLTYuZmllbGQtMC0wJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0Q29sID0gd3JhcHBlckVsLnF1ZXJ5U2VsZWN0b3IoJy5jb2wtbWQtNi5maWVsZC0wLTEnKSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIGlmIChsZWZ0Q29sKSBsZWZ0Q29sLnN0eWxlLndpZHRoID0gJzMwMHB4JztcclxuICAgICAgICAgICAgaWYgKHJpZ2h0Q29sKSByaWdodENvbC5zdHlsZS53aWR0aCA9ICczMDBweCc7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGNvbnN0IHJlbmRlcmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hcHAtdmlldy1yZW5kZXJlci03XzQ1NDIzLTUnKTtcclxuXHJcbiAgICAgICAgLy8gcmVuZGVyZXJzLmZvckVhY2goKGVsOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgLy8gICAgIChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUubWFyZ2luVG9wID0gJzVweCc7XHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlbmRlcmVyczEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYXBwLXZpZXctcmVuZGVyZXItNV80NTQ1My0zJyk7XHJcblxyXG4gICAgICAgIHJlbmRlcmVyczEuZm9yRWFjaCgoZWw6IEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgKGVsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5tYXJnaW5Ub3AgPSAnNXB4JztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gY29uc3QgcmVuZGVyZXJzMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hcHAtdmlldy1yZW5kZXJlci03XzQ1NDIzLTYnKTtcclxuXHJcbiAgICAgICAgLy8gcmVuZGVyZXJzMi5mb3JFYWNoKChlbDogRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIC8vICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLm1hcmdpblRvcCA9ICc1cHgnO1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgIHRoaXMuZml4U3RlcExhYmVsT3ZlcmxhcHBpbmcoY29tYmluZWRDb250YWluZXIpOyAvLyBGaXggb3ZlcmxhcHBpbmcgc3RlcCBsYWJlbHNcclxuICAgICAgICB0aGlzLmZpeE92ZXJsYXBwaW5nQnVsbGV0UG9pbnRzKGNvbWJpbmVkQ29udGFpbmVyKTsgLy8gRml4IG92ZXJsYXBwaW5nIGJ1bGxldCBwb2ludHNcclxuICAgICAgICB0aGlzLmZpeE5lc3RlZExhYmVsU3RydWN0dXJlcyhjb21iaW5lZENvbnRhaW5lcik7IC8vIHRlc3RcclxuICAgICAgICBcclxuICAgICAgICB0ZXN0LmZvckVhY2goKHdyYXBwZXI6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhcInRlc3Q1XCIpO1xyXG59KTtcclxuICAgICAgICAvLyBBZGQgc3BhY2luZyBiZWZvcmUgZWFjaCBzZWN0aW9uIGVsZW1lbnRcclxuICAgICAgICBjb25zdCBzZWN0aW9uRWxlbWVudHMgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdzZWN0aW9uJyk7XHJcbiAgICAgICAgc2VjdGlvbkVsZW1lbnRzLmZvckVhY2goKHNlY3Rpb246IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHNlY3Rpb24uc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnOyAvLyBBZGQgc3BhY2luZyBiZWZvcmUgZWFjaCBzZWN0aW9uXHJcbiAgICAgICAgICAgIC8vIHNlY3Rpb24uc3R5bGUucGFkZGluZ1RvcCA9ICc1cHgnOyAvLyBBZGQgYWRkaXRpb25hbCBwYWRkaW5nXHJcbiAgICAgICAgICAgIHNlY3Rpb24uc3R5bGUubWFyZ2luQm90dG9tID0gJzVweCc7IC8vIEFkZCBzcGFjaW5nIGFmdGVyIGVhY2ggc2VjdGlvblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgLy90YWJsZUhlYWRlcnNFbGVtZW50cyhjb21iaW5lZENvbnRhaW5lcik7XHJcblxyXG5cclxuICAgICAgICAvLyBGdW5jdGlvbiB0byBkZXRlY3QgaWYgYW4gZWxlbWVudCB3b3VsZCBvdmVyZmxvdyB0aGUgY3VycmVudCBwYWdlXHJcbiAgICAgICAgY29uc3QgZGV0ZWN0SWZFbGVtZW50T3ZlcmZsb3dzUGFnZSA9IChlbGVtZW50OiBIVE1MRWxlbWVudCwgY3VycmVudFk6IG51bWJlcik6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50SGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VIZWlnaHRQeCA9IDExMjI7IC8vIEE0IGF0IDk2IERQSVxyXG4gICAgICAgICAgICByZXR1cm4gKGN1cnJlbnRZICsgZWxlbWVudEhlaWdodCA+IHBhZ2VIZWlnaHRQeCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQWRkIFBERi1yb3cgY2xhc3MgdG8gYWxsIHRhYmxlIHJvd3MgZm9yIHBhZ2UgYnJlYWsgZGV0ZWN0aW9uXHJcbiAgICAgICAgLy8gY29uc3QgYWxsVGFibGVSb3dzID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgndGFibGUgdHIsIG1hdC1tZGMtdGFibGUgbWF0LXJvdycpO1xyXG4gICAgICAgIC8vIGFsbFRhYmxlUm93cy5mb3JFYWNoKChyb3c6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdwZGYtcm93Jyk7XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gUHJvY2VzcyBwYWdlIGJyZWFrcyBmb3IgYWxsIHJvd3MgaW4gdGhlIGRvY3VtZW50XHJcbiAgICAgICAgLy8gbGV0IGN1cnJlbnRZID0gMDtcclxuICAgICAgICAvLyBjb25zdCBwYWdlSGVpZ2h0UHggPSAxMTIyOyAvLyBBNCBhdCA5NiBEUElcclxuICAgICAgICAvLyBsZXQgbGFzdFJvd09mUGFnZTogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBHZXQgYWxsIFBERiByb3dzIGluIHRoZSBkb2N1bWVudCBpbiBzZXF1ZW5jZVxyXG4gICAgICAgIC8vIGNvbnN0IGFsbFBkZlJvd3MgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucGRmLXJvdycpO1xyXG4gICAgICAgIC8vIGFsbFBkZlJvd3MuZm9yRWFjaCgocm93OiBIVE1MRWxlbWVudCwgaW5kZXgpID0+IHtcclxuICAgICAgICAvLyAgICAgY29uc3Qgcm93SGVpZ2h0ID0gcm93Lm9mZnNldEhlaWdodDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgIC8vIElmIGFkZGluZyB0aGlzIHJvdyB3b3VsZCBvdmVyZmxvdyB0aGUgcGFnZVxyXG4gICAgICAgIC8vICAgICBpZiAoY3VycmVudFkgKyByb3dIZWlnaHQgPiBwYWdlSGVpZ2h0UHggKyA1KSB7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBNYXJrIHRoZSBwcmV2aW91cyByb3cgYXMgdGhlIGxhc3Qgcm93IG9mIHRoZSBwYWdlXHJcbiAgICAgICAgLy8gICAgICAgICBpZiAobGFzdFJvd09mUGFnZSkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIC8vIEFwcGx5IHBhZ2UgYnJlYWsgcHJvcGVydGllcyB0byB0aGUgbGFzdCByb3cgb2YgdGhlIHBhZ2VcclxuICAgICAgICAvLyAgICAgICAgICAgICBsYXN0Um93T2ZQYWdlLnN0eWxlLnNldFByb3BlcnR5KCdwYWdlLWJyZWFrLWluc2lkZScsICdhdm9pZCcpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGxhc3RSb3dPZlBhZ2Uuc3R5bGUuc2V0UHJvcGVydHkoJ2JyZWFrLWluc2lkZScsICdhdm9pZCcpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGxhc3RSb3dPZlBhZ2Uuc3R5bGUuc2V0UHJvcGVydHkoJ3BhZ2UtYnJlYWstYWZ0ZXInLCAnYXV0bycpO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgICAgICAvLyBDcmVhdGUgc3BhY2VyIHRvIHB1c2ggY29udGVudCB0byBuZXh0IHBhZ2VcclxuICAgICAgICAvLyAgICAgICAgIGNvbnN0IHNwYWNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIC8vICAgICAgICAgc3BhY2VyLnN0eWxlLmhlaWdodCA9IChwYWdlSGVpZ2h0UHggLSBjdXJyZW50WSkgKyAncHgnO1xyXG4gICAgICAgIC8vICAgICAgICAgc3BhY2VyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIC8vICAgICAgICAgcm93LnBhcmVudE5vZGU/Lmluc2VydEJlZm9yZShzcGFjZXIsIHJvdyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAvLyAgICAgICAgIC8vIFJlc2V0IGZvciBuZXcgcGFnZVxyXG4gICAgICAgIC8vICAgICAgICAgY3VycmVudFkgPSAwO1xyXG4gICAgICAgIC8vICAgICAgICAgbGFzdFJvd09mUGFnZSA9IG51bGw7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgIC8vIFVwZGF0ZSBwb3NpdGlvbiBhbmQgbGFzdCByb3cgcmVmZXJlbmNlXHJcbiAgICAgICAgLy8gICAgIGN1cnJlbnRZICs9IHJvd0hlaWdodDtcclxuICAgICAgICAvLyAgICAgbGFzdFJvd09mUGFnZSA9IHJvdztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgIC8vIEZvciB0aGUgdmVyeSBsYXN0IHJvdyBpbiB0aGUgZG9jdW1lbnRcclxuICAgICAgICAvLyAgICAgaWYgKGluZGV4ID09PSBhbGxQZGZSb3dzLmxlbmd0aCAtIDEgJiYgbGFzdFJvd09mUGFnZSkge1xyXG4gICAgICAgIC8vICAgICAgICAgbGFzdFJvd09mUGFnZS5zdHlsZS5zZXRQcm9wZXJ0eSgncGFnZS1icmVhay1pbnNpZGUnLCAnYXZvaWQnKTtcclxuICAgICAgICAvLyAgICAgICAgIGxhc3RSb3dPZlBhZ2Uuc3R5bGUuc2V0UHJvcGVydHkoJ2JyZWFrLWluc2lkZScsICdhdm9pZCcpO1xyXG4gICAgICAgIC8vICAgICAgICAgbGFzdFJvd09mUGFnZS5zdHlsZS5zZXRQcm9wZXJ0eSgncGFnZS1icmVhay1hZnRlcicsICdhdXRvJyk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5maXhOZXN0ZWRMYWJlbFN0cnVjdHVyZXMoY29tYmluZWRDb250YWluZXIpOyAvLyB0ZXN0XHJcbiAgICAgICAgdGhpcy5yZW1vdmVBZGRCdXR0b24oY29tYmluZWRDb250YWluZXIpO1xyXG4gICAgICAgIC8vIFRhcmdldCBlbGVtZW50cyB3aXRoaW4gdGhlIGNvbWJpbmVkQ29udGFpbmVyLCBub3QgdGhlIGVudGlyZSBkb2N1bWVudFxyXG5cclxuXHJcbiAgICAvLyBUYXJnZXQgZWxlbWVudHMgd2l0aGluIHRoZSBjb21iaW5lZENvbnRhaW5lciwgbm90IHRoZSBlbnRpcmUgZG9jdW1lbnRcclxuICAgIFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgICAnLnNlY3Rpb24tMC0wLTEtMy0wLnN0ZXAtNDUyMzcsJyArXHJcbiAgICAgICAgJy5zZWN0aW9uLTAtMC0xLTQtMC5zdGVwLTQ1NTIxLCcgK1xyXG4gICAgICAgICcuYXBwLXZpZXctcmVuZGVyZXItMThfNDY0NTAtMS5ibG9ja19maWVsZF8xNTE4NTEwNTAzMzMzMzJfd3JhcHBlciwnICtcclxuICAgICAgICAnLmFwcC12aWV3LXJlbmRlcmVyLTE0XzQ1MzIwLTIsJytcclxuICAgICAgICAnLmFwcC12aWV3LXJlbmRlcmVyLTEwXzQ1MzIwLTIsJytcclxuICAgICAgICAnLmNlZS1zZWN0aW9uLnJvdy5zZWN0aW9uLTAtMC0xLTEtMC5zdGVwLTQ1MDQzLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF8xMTM1NjcwX3dyYXBwZXIsJytcclxuICAgICAgICAnLmJsb2NrX2ZpZWxkXzI1NTM1Nzhfd3JhcHBlciwnK1xyXG4gICAgICAgICcuYmxvY2tfZmllbGRfMjY0NzY5MV93cmFwcGVyLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF8xOTkzMjE1X3dyYXBwZXIsJytcclxuICAgICAgICAnLmJsb2NrX2ZpZWxkXzIzNTYyMTlfd3JhcHBlciwnK1xyXG4gICAgICAgICcuYmxvY2tfZmllbGRfNTYyMjg4Ml93cmFwcGVyLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF82MjE1MjAyX3dyYXBwZXIsJytcclxuICAgICAgICAnLmJsb2NrX2ZpZWxkXzMyMTQ4MzFfd3JhcHBlciwnK1xyXG4gICAgICAgICcuYmxvY2tfZmllbGRfMjAyNTEyOV93cmFwcGVyLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF80NzU2NjAwX3dyYXBwZXIsJytcclxuICAgICAgICAnLmJsb2NrX2ZpZWxkXzI4NzExOTZfd3JhcHBlciwnK1xyXG4gICAgICAgICcuYmxvY2tfZmllbGRfMTk4MTMxOV93cmFwcGVyLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF8yOTYzNzE2X3dyYXBwZXIsJytcclxuICAgICAgICAnLmJsb2NrX2ZpZWxkXzEyOTc1ODRfd3JhcHBlciwnK1xyXG4gICAgICAgICcuYmxvY2tfZmllbGRfNTIyNzAxMV93cmFwcGVyLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF8zODAyOTYwX3dyYXBwZXIsJytcclxuICAgICAgICAnLmJsb2NrX2ZpZWxkXzU1Nzc0Njhfd3JhcHBlciwnK1xyXG4gICAgICAgICcuYmxvY2tfZmllbGRfMzI0NTI1OF93cmFwcGVyLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF8yNTIzMzU0X3dyYXBwZXIsJytcclxuICAgICAgICAnLmJsb2NrX2ZpZWxkXzMyNDUyNThfd3JhcHBlciwnK1xyXG4gICAgICAgICcuYmxvY2tfZmllbGRfMjMwMTcwMV93cmFwcGVyLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF8zMDc4NzUxX3dyYXBwZXIsJytcclxuICAgICAgICAnLmJsb2NrX2ZpZWxkXzM5OTE2MzRfd3JhcHBlciwnK1xyXG4gICAgICAgICcuYmxvY2tfZmllbGRfMjQyNjQ4N193cmFwcGVyLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF8zMDc4NzUxX3dyYXBwZXIsJytcclxuICAgICAgICAnLmJsb2NrX2ZpZWxkXzIyMzE5ODZfd3JhcHBlciwnK1xyXG4gICAgICAgICcuYmxvY2tfZmllbGRfMzA1OTQyNl93cmFwcGVyLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF8yNzgyMzYyX3dyYXBwZXIsJytcclxuICAgICAgICAnLmJsb2NrX2ZpZWxkXzM1MDQ3NzBfd3JhcHBlciwnK1xyXG4gICAgICAgICcuYmxvY2tfZmllbGRfMjIzNTY4M193cmFwcGVyLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF80MDMxNzEwX3dyYXBwZXIsJytcclxuICAgICAgICAnLmFwcC12aWV3LXJlbmRlcmVyLTEwXzQ1MzIwLTIgYmxvY2tfZmllbGRfMjEyMTc4N193cmFwcGVyLCcrXHJcbiAgICAgICAgJy5hcHAtdmlldy1yZW5kZXJlci0xNF80NTMyMC0yIGJsb2NrX2ZpZWxkXzQwMzE3MTBfd3JhcHBlciwnK1xyXG4gICAgICAgICcuYmxvY2tfZmllbGRfMTUxODUxMDkwODUxNDU0X3dyYXBwZXIsJytcclxuICAgICAgICAnLmJsb2NrX2ZpZWxkXzE1MTg1MTA5MDY3NzQ1OF93cmFwcGVyLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF8xNTE4NTEwOTA4NDI0NjJfd3JhcHBlciwnK1xyXG4gICAgICAgICcuYmxvY2tfZmllbGRfNTE4ODIzOF93cmFwcGVyLCcrXHJcbiAgICAgICAgJy5ibG9ja19maWVsZF8yNTE0NTcyX3dyYXBwZXInXHJcbiAgICApLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbC1hdXRvJyk7XHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnY29sLW1kLTEyJyk7XHJcbiAgICB9KTtcclxuXHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICAgICcuYXBwLXZpZXctcmVuZGVyZXItNl80NTA2OC0xJyBcclxuICAgICAgICBcclxuICAgICkuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnY29sLWF1dG8nKTtcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdjb2wtbWQtNicpO1xyXG4gICAgfSk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICAgICcuYXBwLXZpZXctcmVuZGVyZXItNl80NTA2OC0xLCcrXHJcbiAgICAgICAgJy5hcHAtdmlldy1yZW5kZXJlci01XzQ1MDY4LTInIFxyXG4gICAgICAgIFxyXG4gICAgKS5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICBcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdjb2wtbWQtNicpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFwcC12aWV3LXJlbmRlcmVyLTE0XzQ1MzIwLTMnKS5mb3JFYWNoKGVsID0+IHtcclxuICAgIC8vIGNvbnNvbGUubG9nKFwiYXBwLXZpZXctcmVuZGVyZXItMTRfNDUzMjAtM1wiLCBlbCk7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbC1tZC00Jyk7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2NvbC1tZC0zJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hcHAtdmlldy1yZW5kZXJlci05XzQ2NDA2LTknKS5mb3JFYWNoKGVsID0+IHtcclxuICAgIC8vIGNvbnNvbGUubG9nKFwiYXBwLXZpZXctcmVuZGVyZXItMTRfNDUzMjAtM1wiLCBlbCk7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbC1tZC00Jyk7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2NvbC1tZC0xMicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFwcC12aWV3LXJlbmRlcmVyLTlfNDY0MDYtOScpLmZvckVhY2goZWwgPT4ge1xyXG4gICAgLy8gY29uc29sZS5sb2coXCJhcHAtdmlldy1yZW5kZXJlci0xNF80NTMyMC0zXCIsIGVsKTtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnY29sLW1kLTQnKTtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnY29sLW1kLTMnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlZS1zZWN0aW9uIHJvdyBzZWN0aW9uLTAtMC0xLTAtMScpLmZvckVhY2goZWwgPT4ge1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnY29sLW1kLTYnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYXBwLXZpZXctcmVuZGVyZXItNl80NTA2OC0xJykuZm9yRWFjaChlbCA9PiB7XHJcbiAgICBcclxuICAgIFxyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdjb2wtbWQtNicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hcHAtdmlldy1yZW5kZXJlci01XzQ1MjgwLTYuY29sLW1kLTQnKS5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnY29sLW1kLTQnKTtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnY29sLW1kLTEyJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJsb2NrX2ZpZWxkXzk3MjgwMjNfd3JhcHBlcicpLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdjb2wtYXV0bycpO1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdjb2wtbWQtMTInKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGVzdC5mb3JFYWNoKCh3cmFwcGVyOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgLy8gY29uc29sZS5sb2coXCJ0ZXN0N1wiKTtcclxufSk7XHJcbiAgICAgICAgdGhpcy5ib2xkQW5kQ29sb3JJbkxhYmVsKGNvbWJpbmVkQ29udGFpbmVyKTtcclxuICAgICAgICB0aGlzLnJlbW92ZUNoZWNrYm94VW5kZXJsaW5lKCk7XHJcbiAgICAgICAgdGhpcy5hZGp1c3REb2xsZXJQcmVwZW5kKCk7XHJcbiAgICAgICAgdGhpcy5yZWJ1aWxkTWF0ZXJpYWxUYWJsZXMoY29tYmluZWRDb250YWluZXIpO1xyXG4gICAgICAgIHRoaXMucmVidWlsZE1hdGVyaWFsVGFibGVzSW5SZXBlYXRhYmxlKGNvbWJpbmVkQ29udGFpbmVyKTtcclxuICAgICAgICB0aGlzLmFwcGx5UmVzb2x1dGlvblNwZWNpZmljRml4ZXMoY29tYmluZWRDb250YWluZXIpO1xyXG4gICAgICAgIHRoaXMuYWRqdXN0UGVyY2VudGFnZVN1ZmZpeCgpO1xyXG4gICAgICAgIHRoaXMuYXBwbHlQYWdlQnJlYWtTdHlsZXNBZnRlclRhYmxlKGNvbWJpbmVkQ29udGFpbmVyKTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybVNpZ25hdHVyZXNUb1RhYmxlKGNvbWJpbmVkQ29udGFpbmVyKTtcclxuICAgICAgICB0aGlzLm1haW5Cb3Jyb3dlckxpc3RQYWRkaW5nKGNvbWJpbmVkQ29udGFpbmVyKTtcclxuICAgICAgICBjb25zdCBsYWJlbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhY2tub3dsZWRnZW1lbnRhbmRzaScpO1xyXG5cclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ibG9ja19maWVsZF80MDMxNzEwX3dyYXBwZXInKS5mb3JFYWNoKCh3cmFwcGVyKSA9PiB7XHJcbiAgY29uc3QgdmFsaWRMYWJlbHMgPSBbXTtcclxuXHJcbiAgLy8gRXh0cmFjdCB2YWxpZCBsYWJlbCB0ZXh0XHJcbiAgd3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCdsYWJlbC5hY2tub3dsZWRnZW1lbnRhbmRzaScpLmZvckVhY2goKGxhYmVsKSA9PiB7XHJcbiAgICBjb25zdCB0ZXh0ID0gbGFiZWwudGV4dENvbnRlbnQ/LnRyaW0oKTtcclxuXHJcbiAgICBpZiAodGV4dCAmJiAhdGV4dC5pbmNsdWRlcygnTmFOJykgJiYgL1thLXpBLVpdLy50ZXN0KHRleHQpKSB7XHJcbiAgICAgIHZhbGlkTGFiZWxzLnB1c2godGV4dCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIENyZWF0ZSBhIGNvbnRhaW5lciB3aXRoIHRoZSBuZXcgbGFiZWwgZGl2c1xyXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnY3VzdG9tLWxhYmVsLXdyYXBwZXInO1xyXG5cclxuICB2YWxpZExhYmVscy5mb3JFYWNoKChsYWJlbFRleHQpID0+IHtcclxuICAgIGNvbnN0IGxhYmVsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBsYWJlbERpdi50ZXh0Q29udGVudCA9IGxhYmVsVGV4dDtcclxuICAgIGxhYmVsRGl2LnN0eWxlLmNvbG9yID0gJyM4MDgwODAnO1xyXG4gICAgLy9sYWJlbERpdi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnOHB4JztcclxuICAgIGxhYmVsRGl2LnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWxEaXYpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBSZXBsYWNlIHdyYXBwZXIgaW4tcGxhY2VcclxuICBpZiAodmFsaWRMYWJlbHMubGVuZ3RoID4gMCkge1xyXG4gICAgd3JhcHBlci5yZXBsYWNlV2l0aChjb250YWluZXIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBJZiBubyB2YWxpZCBsYWJlbHMsIGp1c3QgcmVtb3ZlIHRoZSBhcHAtdmlldy1yZW5kZXJlclxyXG4gICAgd3JhcHBlci5yZW1vdmUoKTtcclxuICB9XHJcbn0pO1xyXG5cclxudGhpcy5wcm9jZXNzTGFiZWxXcmFwcGVycyhbXHJcbiAgJ2Jsb2NrX2ZpZWxkXzE1MTg1MTA5MDg1MTQ1NF93cmFwcGVyJyxcclxuICAnYmxvY2tfZmllbGRfMTUxODUxMDkwNjc3NDU4X3dyYXBwZXInLFxyXG4gICdibG9ja19maWVsZF8xNTE4NTEwOTA4NDI0NjJfd3JhcHBlcidcclxuXSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJmID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRhdGEtbGlzdCcpO1xyXG4gICAgICAgIGJmLmZvckVhY2goKHNlY3Rpb246IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHNlY3Rpb24uc3R5bGUucGFkZGluZ0JvdHRvbSA9ICcxcHgnO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBiZjIgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZmllbGQtd3JhcHBlciwgLm5nLXN0YXItaW5zZXJ0ZWQnKTtcclxuICAgICAgICBiZjIuZm9yRWFjaCgoc2VjdGlvbjogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgc2VjdGlvbi5zdHlsZS5wYWRkaW5nQm90dG9tID0gJzJweCc7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJmMyA9IGNvbWJpbmVkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hcHAtdmlldy1yZW5kZXJlci0xNV80NjQ4OS0yJyk7XHJcbiAgICAgICAgYmYzLmZvckVhY2goKHNlY3Rpb246IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHNlY3Rpb24uc3R5bGUucGFkZGluZ0JvdHRvbSA9ICc1cHgnO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBcHBseSBtYXJnaW5Ub3AgdG8gZGlmZmVyZW50IGNsYXNzZXNcclxuICAgICAgICBjb25zdCBmaWVsZHMxID0gWycuYXBwLXZpZXctcmVuZGVyZXItOV80NTI4MC0xJywgJy5hcHAtdmlldy1yZW5kZXJlci05XzQ1MjgwLTMnLCAnLmFwcC12aWV3LXJlbmRlcmVyLTlfNDUyODAtNSddO1xyXG4gICAgICAgIHRoaXMuc2V0TWFyZ2luRm9yRWxlbWVudHMoY29tYmluZWRDb250YWluZXIsIGZpZWxkczEsICczMHB4Jyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpZWxkczIgPSBbJy5hcHAtdmlldy1yZW5kZXJlci04XzQ2NTc4LTAnLCAnLmFwcC12aWV3LXJlbmRlcmVyLThfNDY1NzgtMScsICcuYXBwLXZpZXctcmVuZGVyZXItOF80NjU3OC0zJywgJy5hcHAtdmlldy1yZW5kZXJlci04XzQ2NTc4LTUnXTtcclxuICAgICAgICB0aGlzLnNldE1hcmdpbkZvckVsZW1lbnRzKGNvbWJpbmVkQ29udGFpbmVyLCBmaWVsZHMyLCAnNDBweCcpO1xyXG5cclxuICAgICAgICBjb25zdCBmaWVsZHMzID0gWycuYXBwLXZpZXctcmVuZGVyZXItMTJfNDUyODAtMCcsICcuYXBwLXZpZXctcmVuZGVyZXItMTJfNDUyODAtMSddO1xyXG4gICAgICAgIHRoaXMuc2V0TWFyZ2luRm9yRWxlbWVudHMoY29tYmluZWRDb250YWluZXIsIGZpZWxkczMsICc1MHB4Jyk7XHJcblxyXG50aGlzLndyYXBQYXJ0aWFsTGFiZWxUZXh0KGNvbWJpbmVkQ29udGFpbmVyKTtcclxuXHJcblxyXG5cclxudGVzdC5mb3JFYWNoKCh3cmFwcGVyOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgLy8gY29uc29sZS5sb2coXCJ0ZXN0ZW5kXCIpO1xyXG59KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVkQ29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHJvY2Vzc0xhYmVsV3JhcHBlcnMod3JhcHBlckNsYXNzTmFtZXMgPSBbXSkge1xyXG4gIHdyYXBwZXJDbGFzc05hbWVzLmZvckVhY2goKGNsYXNzTmFtZSkgPT4ge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7Y2xhc3NOYW1lfWApLmZvckVhY2goKHdyYXBwZXIpID0+IHtcclxuICAgICAgY29uc3QgdmFsaWRMYWJlbHMgPSBbXTtcclxuXHJcbiAgICAgIC8vIEV4dHJhY3QgdmFsaWQgbGFiZWxzXHJcbiAgICAgIHdyYXBwZXIucXVlcnlTZWxlY3RvckFsbCgnbGFiZWwnKS5mb3JFYWNoKChsYWJlbCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSBsYWJlbC50ZXh0Q29udGVudD8udHJpbSgpO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0ZXh0ICYmXHJcbiAgICAgICAgICAhL0FwcGxpY2FudF9cXGQrL2kudGVzdCh0ZXh0KSAmJlxyXG4gICAgICAgICAgIXRleHQuaW5jbHVkZXMoJ05hTicpICYmXHJcbiAgICAgICAgICAvW2EtekEtWl0vLnRlc3QodGV4dClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHZhbGlkTGFiZWxzLnB1c2godGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICh2YWxpZExhYmVscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIHJlcGxhY2VtZW50IHN0cnVjdHVyZVxyXG4gICAgICAgIGNvbnN0IHJvd0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHJvd0Rpdi5jbGFzc05hbWUgPSAncm93JztcclxuXHJcbiAgICAgICAgY29uc3QgY29sRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY29sRGl2LmNsYXNzTmFtZSA9ICdjb2wtbWQtMTInO1xyXG5cclxuICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRhYmxlLnN0eWxlLmRpc3BsYXkgPSAndGFibGUnO1xyXG4gICAgICAgIHRhYmxlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG5cclxuICAgICAgICB2YWxpZExhYmVscy5mb3JFYWNoKChsYWJlbFRleHQpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgcm93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcclxuXHJcbiAgICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICBjZWxsLnN0eWxlLmRpc3BsYXkgPSAndGFibGUtY2VsbCc7XHJcbiAgICAgICAgICBjZWxsLnN0eWxlLmNvbG9yID0gJ2JsYWNrJztcclxuICAgICAgICAgIGNlbGwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgICAgICAgIGNlbGwuc3R5bGUucGFkZGluZyA9ICc0cHggMCc7XHJcbiAgICAgICAgICBjZWxsLnRleHRDb250ZW50ID0gbGFiZWxUZXh0O1xyXG5cclxuICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTtcclxuICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbERpdi5hcHBlbmRDaGlsZCh0YWJsZSk7XHJcbiAgICAgICAgcm93RGl2LmFwcGVuZENoaWxkKGNvbERpdik7XHJcblxyXG4gICAgICAgIHdyYXBwZXIucmVwbGFjZVdpdGgocm93RGl2KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB3cmFwcGVyLnJlbW92ZSgpOyAvLyBObyB2YWxpZCBsYWJlbHMgZm91bmRcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbndyYXBQYXJ0aWFsTGFiZWxUZXh0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGxhYmVscyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdsYWJlbCcpO1xyXG4gICAgbGFiZWxzLmZvckVhY2gobGFiZWwgPT4ge1xyXG4gICAgICAgIGxldCBoYXNTcGFuID0gZmFsc2U7XHJcbiAgICAgICAgbGFiZWwuY2hpbGROb2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgKG5vZGUgYXMgRWxlbWVudCkudGFnTmFtZSA9PT0gJ1NQQU4nKSB7XHJcbiAgICAgICAgICAgICAgICBoYXNTcGFuID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gXHJcbiAgICAgICAgaWYgKGhhc1NwYW4pIHtcclxuICAgICAgICAgICAgLy8gT25seSB3cmFwIHVud3JhcHBlZCB0ZXh0IG5vZGVzXHJcbiAgICAgICAgICAgIGxhYmVsLmNoaWxkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSAmJiBub2RlLnRleHRDb250ZW50Py50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXcmFwIHBsYWluIHRleHQgaW4gYSBzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICAgICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gbm9kZS50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbC5yZXBsYWNlQ2hpbGQoc3Bhbiwgbm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy9jb25zb2xlLmxvZyhcIldyYXBwZWQgcGFydGlhbCBsYWJlbCB0ZXh0IGluIHNwYW5zIHdoZXJlIGFwcGxpY2FibGUuXCIsbGFiZWxzKTtcclxufVxyXG4gXHJcblxyXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1TaWduYXR1cmVzVG9UYWJsZSh0ZW1wUm9vdDogSFRNTEVsZW1lbnQpIHtcclxuICBjb25zdCB0YXJnZXRTZWxlY3RvcnMgPSBbXHJcbiAgICAnLmJsb2NrX2ZpZWxkXzkyOTY0ODZfd3JhcHBlciwnK1xyXG4gICAgJy5ibG9ja19maWVsZF8xNTE4NTEwOTA4NTE0NTRfd3JhcHBlciwnK1xyXG4gICAgJy5ibG9ja19maWVsZF81MTg4MjM4X3dyYXBwZXInXHJcbiAgICAvLyBBZGQgbW9yZSBhcyBcclxuICBdO1xyXG5cclxuICBjb25zdCBzaWduYXR1cmVCbG9ja3MgPSB0ZW1wUm9vdC5xdWVyeVNlbGVjdG9yQWxsKHRhcmdldFNlbGVjdG9ycy5qb2luKCcsJykpO1xyXG5cclxuICBzaWduYXR1cmVCbG9ja3MuZm9yRWFjaCh3cmFwcGVyID0+IHtcclxuICAgIGNvbnN0IGFwcFZpZXdSZW5kZXJlciA9IHdyYXBwZXIuY2xvc2VzdCgnYXBwLXZpZXctcmVuZGVyZXInKTtcclxuICAgIGlmICghYXBwVmlld1JlbmRlcmVyKSByZXR1cm47XHJcblxyXG4gICAgY29uc3Qgcm93cyA9IFtdO1xyXG5cclxuICAgIGNvbnN0IHNpZ25hdHVyZVJvd3MgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb3cuc2hvdy1pbi1yb3cnKTtcclxuXHJcbiAgICBzaWduYXR1cmVSb3dzLmZvckVhY2gocm93RWwgPT4ge1xyXG4gIGNvbnN0IHJvdzogeyB0ZXh0OiBzdHJpbmcsIHdpZHRoOiBudW1iZXIgfVtdID0gW107XHJcblxyXG4gIGNvbnN0IGNvbEVscyA9IEFycmF5LmZyb20ocm93RWwuY2hpbGRyZW4pLmZpbHRlcihlbCA9PlxyXG4gICAgZWwubm9kZVR5cGUgPT09IDEgJiZcclxuICAgIGVsLmNsYXNzTGlzdCAmJlxyXG4gICAgQXJyYXkuZnJvbShlbC5jbGFzc0xpc3QpLnNvbWUoY2xzID0+IGNscy5zdGFydHNXaXRoKCdjb2wtbWQtJykpXHJcbiAgKTtcclxuXHJcbiAgY29sRWxzLmZvckVhY2goY29sRWwgPT4ge1xyXG4gICAgY29uc3QgbGFiZWwgPSBjb2xFbC5xdWVyeVNlbGVjdG9yKCdsYWJlbC5zaWduYXR1cmVzJyk7XHJcbiAgICBpZiAoIWxhYmVsKSByZXR1cm47IC8vIFNraXAgY29sdW1ucyB3aXRob3V0IHRoZSBhY3R1YWwgc2lnbmVkIG5hbWUvZGF0ZVxyXG5cclxuICAgIGNvbnN0IHRleHQgPSBsYWJlbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG5cclxuICAgIGNvbnN0IGNvbENsYXNzID0gQXJyYXkuZnJvbShjb2xFbC5jbGFzc0xpc3QpLmZpbmQoY2xzID0+IGNscy5zdGFydHNXaXRoKCdjb2wtbWQtJykpIHx8ICdjb2wtbWQtMTInO1xyXG4gICAgY29uc3Qgd2lkdGggPSBwYXJzZUludChjb2xDbGFzcy5yZXBsYWNlKCdjb2wtbWQtJywgJycpLCAxMCkgLyAxMiAqIDEwMDtcclxuXHJcbiAgICByb3cucHVzaCh7IHRleHQsIHdpZHRoIH0pO1xyXG4gIH0pO1xyXG5cclxuICAvLyBPbmx5IHB1c2ggcm93cyB0aGF0IGNvbnRhaW4gbWVhbmluZ2Z1bCBkYXRhIChlLmcuIEJ1bnR5IFRlc3QsIERhdGUpXHJcbiAgaWYgKHJvdy5sZW5ndGggPiAwKSByb3dzLnB1c2gocm93KTtcclxufSk7XHJcblxyXG5cclxuICAgIGlmIChyb3dzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgdGFibGUgPSBidWlsZFRhYmxlKHJvd3MpO1xyXG4gICAgICBhcHBWaWV3UmVuZGVyZXIucmVwbGFjZVdpdGgodGFibGUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBidWlsZFRhYmxlKHJvd3MpIHtcclxuICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LnNjcmVlbi53aWR0aDtcclxuICAgICAgICAgICAgY29uc3Qgc2NyZWVuSGVpZ2h0ID0gd2luZG93LnNjcmVlbi5oZWlnaHQ7XHJcbiAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XHJcbiAgICAgaWYgKHNjcmVlbldpZHRoID09PSAxOTIwICYmIHNjcmVlbkhlaWdodCA9PT0gMTA4MCkge1xyXG4gICAgICAgICAgICAgICB0YWJsZS5zdHlsZS53aWR0aCA9ICc5MiUnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNjcmVlbldpZHRoID09PSAxMzY2ICYmIHNjcmVlbkhlaWdodCA9PT0gNzY4KSB7XHJcbiAgICAgICAgICAgICAgICB0YWJsZS5zdHlsZS53aWR0aCA9ICc5OCUnO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHRhYmxlLnN0eWxlLndpZHRoID0gJzkwJSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgIHRhYmxlLnN0eWxlLmJvcmRlckNvbGxhcHNlID0gJ2NvbGxhcHNlJztcclxuICAgIHRhYmxlLnN0eWxlLm1hcmdpbiA9ICc0MHB4IDAnO1xyXG4gICAgdGFibGUuc3R5bGUuZm9udFNpemUgPSAnMTRweCc7XHJcblxyXG4gICAgcm93cy5mb3JFYWNoKHJvdyA9PiB7XHJcbiAgICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgICAgcm93LmZvckVhY2goY2VsbCA9PiB7XHJcbiAgICAgICAgY29uc3QgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgIHRkLnRleHRDb250ZW50ID0gY2VsbC50ZXh0IHx8ICcnO1xyXG4gICAgICAgIHRkLnN0eWxlLndpZHRoID0gY2VsbC53aWR0aCArICclJztcclxuICAgICAgICB0ZC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnOyAvLyB0ZXN0XHJcbiAgICAgICAgLy90ZC5zdHlsZS5jb2xvciA9ICdncmV5JzsgLy8gY29sb3IgZm9yIGxhYmVsXHJcbiAgICAgICAgXHJcbiAgICAgICAgdGQuc3R5bGUucGFkZGluZyA9ICc4cHgnO1xyXG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB0YWJsZTtcclxuICB9XHJcbn1cclxuXHJcbiAgICBwcml2YXRlIG1haW5Cb3Jyb3dlckxpc3RQYWRkaW5nKGNvbWJpbmVkQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IG1haW5Cb3Jyb3dlciA9IGNvbWJpbmVkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgICAgICAgICcuYmJvcnJvd2VyZ3VhcmFudG9yY28uY29tcC01NzQ2NDcnXHJcbiAgICAgICAgICAgIC8vICcuYXBwLXZpZXctcmVuZGVyZXItN180NTQyMy00LmJsb2NrX2ZpZWxkXzExMzU2NzBfd3JhcHBlcidcclxuICAgICAgICApO1xyXG4gICAgICAgIG1haW5Cb3Jyb3dlci5mb3JFYWNoKChub2RlOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIm1haW5Cb3Jyb3dlclwiLCBub2RlKTtcclxuICAgICAgICAgICAgLy8gbm9kZS5zdHlsZS5tYXJnaW5MZWZ0ID0gJzAnO1xyXG4gICAgICAgICAgICBub2RlLnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzAnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHRlc3QgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICAgICAgICAnLmNmLXRleHRmaWVsZCBsYWJlbC5jb2wtZm9ybS1sYWJlbCcpO1xyXG4gICAgICAgIHRlc3QuZm9yRWFjaCgobm9kZTogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0ZXN0XCIsIG5vZGUpO1xyXG4gICAgICAgICAgICAvLyBub2RlLnN0eWxlLm1hcmdpbkxlZnQgPSAnMCc7XHJcbiAgICAgICAgICAgIG5vZGUuc3R5bGUudGV4dFRyYW5zZm9ybSA9ICdjYXBpdGFsaXplJztcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgICBhcHBseVBhZ2VCcmVha1N0eWxlc0FmdGVyVGFibGUoY29udGFpbmVyTWFpbjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgICAgICcuY2VlLXNlY3Rpb24ucm93LnNlY3Rpb24tMC0wLTEtMC00LnN0ZXAtNDQ4OTcudGVtcGxhdGUtJ1xyXG4gICAgICAgICAgKSBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgICBpZiAoc2VjdGlvbikge1xyXG4gICAgICAgICAgICAgIHNlY3Rpb24uc3R5bGUuc2V0UHJvcGVydHkoJ2JyZWFrLWJlZm9yZScsICdwYWdlJyk7ICAgICAgICAgLy8gbW9kZXJuXHJcbiAgICAgICAgICAgICAgc2VjdGlvbi5zdHlsZS5zZXRQcm9wZXJ0eSgncGFnZS1icmVhay1iZWZvcmUnLCAnYWx3YXlzJyk7ICAvLyBsZWdhY3kgQ1NTXHJcbiAgICAgICAgICAgICAgc2VjdGlvbi5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdibG9jaycpO1xyXG4gICAgICAgICAgfVxyXG59XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRNYXJnaW5Gb3JFbGVtZW50cyhjb21iaW5lZENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQsIGNsYXNzZXM6IHN0cmluZ1tdLCBtYXJnaW46IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChjbGFzc2VzLmpvaW4oJywgJykpO1xyXG4gICAgICAgIGVsZW1lbnRzLmZvckVhY2goKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5tYXJnaW5Ub3AgPSBtYXJnaW47XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHJlcGxhY2VPbmx5UmFkaW9BcHBWaWV3UmVuZGVyZXJzKGNvbnRhaW5lck1haW46IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgcmVuZGVyZXJzID0gY29udGFpbmVyTWFpbi5xdWVyeVNlbGVjdG9yQWxsKCdhcHAtdmlldy1yZW5kZXJlcicpO1xyXG5cclxuICAgICAgICByZW5kZXJlcnMuZm9yRWFjaChyZW5kZXJlciA9PiB7XHJcbiAgICAgICAgICAgIC8vIFNhdmUgbm9uLXJhZGlvL2NoZWNrYm94IGNoaWxkcmVuIGJlZm9yZSByZXBsYWNpbmdcclxuICAgICAgICAgICAgY29uc3QgcHJlc2VydmVkTm9kZXM6IEVsZW1lbnRbXSA9IFtdO1xyXG4gICAgICAgICAgICByZW5kZXJlci5jaGlsZE5vZGVzLmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICEoY2hpbGQgYXMgRWxlbWVudCkubWF0Y2hlcygnYXBwLWNlZS1yYWRpbywgYXBwLWNlZS1jaGVja2JveCcpXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVzZXJ2ZWROb2Rlcy5wdXNoKGNoaWxkIGFzIEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJhZGlvQ29tcG9uZW50ID0gcmVuZGVyZXIucXVlcnlTZWxlY3RvcignYXBwLWNlZS1yYWRpbycpO1xyXG4gICAgICAgICAgICBjb25zdCBjaGVja2JveENvbXBvbmVudCA9IHJlbmRlcmVyLnF1ZXJ5U2VsZWN0b3IoJ2FwcC1jZWUtY2hlY2tib3gnKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb250YWluZXJTdWI6IEhUTUxEaXZFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBpZiAocmFkaW9Db21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGEgZ3JvdXAtbGV2ZWwgbGFiZWwgaW5zaWRlIGZvcm0tbGFiZWxcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1MYWJlbEVsID0gcmFkaW9Db21wb25lbnQucXVlcnlTZWxlY3RvcignLmZvcm0tbGFiZWwgbGFiZWwnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXN0aW9uVGV4dCA9IChmb3JtTGFiZWxFbCBhcyBIVE1MRWxlbWVudCB8IG51bGwpPy5pbm5lclRleHQ/LnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByYWRpb3MgPSByYWRpb0NvbXBvbmVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKSBhcyBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyYWRpb3MubGVuZ3RoKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uczogeyB2YWx1ZTogc3RyaW5nOyBsYWJlbDogc3RyaW5nOyBjaGVja2VkOiBib29sZWFuIH1bXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgcmFkaW9zLmZvckVhY2gocmFkaW8gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhZGlvSWQgPSByYWRpby5pZDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbEVsZW1lbnQgPSByYWRpb0NvbXBvbmVudC5xdWVyeVNlbGVjdG9yKGBsYWJlbFtmb3I9XCIke3JhZGlvSWR9XCJdYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSAobGFiZWxFbGVtZW50IGFzIEhUTUxFbGVtZW50IHwgbnVsbCk/LmlubmVyVGV4dD8udHJpbSgpIHx8IHJhZGlvLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHVzaCh7IHZhbHVlOiByYWRpby52YWx1ZSwgbGFiZWwsIGNoZWNrZWQ6IHJhZGlvLmNoZWNrZWQgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJTdWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lclN1Yi5jbGFzc0xpc3QuYWRkKCdmb3JtLWdyb3VwJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uc0h0bWwgPSBvcHRpb25zLm1hcChvcHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1bGxldCA9ICdPJztcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDogMHB4OyBmb250LWZhbWlseTogUXVpY2tzYW5kO1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPjxzcGFuIHN0eWxlPVwiY29sb3I6ICM0Mjg3ZjU7XCI+JHtidWxsZXR9PC9zcGFuPiZuYnNwOyZuYnNwOyR7b3B0LmxhYmVsfTwvc3Ryb25nPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDogMHB4OyBmb250LWZhbWlseTogUXVpY2tzYW5kO1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPiR7YnVsbGV0fSZuYnNwOyZuYnNwOyR7b3B0LmxhYmVsfTwvc3Ryb25nPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkuam9pbignJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzU3BlY2lmaWNDbGFzcyA9IHJlbmRlcmVyLmNsYXNzTGlzdC5jb250YWlucygnYXBwLXZpZXctcmVuZGVyZXItMTVfNDU0MjMtMicpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFyZ2luVG9wU3R5bGUgPSBoYXNTcGVjaWZpY0NsYXNzID8gJ21hcmdpbi10b3A6IDM1cHg7JyA6ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgYWRkIHF1ZXN0aW9uIHRleHQgaWYgaXQgaXMgTk9UIGFscmVhZHkgcHJlc2VydmVkIGluIGEgbGFiZWwgbm9kZVxyXG4gICAgICAgICAgICAgICAgbGV0IHF1ZXN0aW9uSGVhZGVySHRtbCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWxBbHJlYWR5UHJlc2VydmVkID0gcHJlc2VydmVkTm9kZXMuc29tZShub2RlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhbnkgcHJlc2VydmVkIG5vZGUgaXMgYSBsYWJlbCBvciBjb250YWlucyB0aGUgcXVlc3Rpb24gdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUudGFnTmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gJ2xhYmVsJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAobm9kZS50ZXh0Q29udGVudD8udHJpbSgpID09PSBxdWVzdGlvblRleHQpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHF1ZXN0aW9uVGV4dCAmJiAhbGFiZWxBbHJlYWR5UHJlc2VydmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25IZWFkZXJIdG1sID0gYDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAycHg7JHttYXJnaW5Ub3BTdHlsZX1cIj48c3Ryb25nPiR7cXVlc3Rpb25UZXh0fTwvc3Ryb25nPjwvZGl2PmA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyU3ViLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgICR7cXVlc3Rpb25IZWFkZXJIdG1sfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAxMHB4O1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICR7b3B0aW9uc0h0bWx9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lclN1Yi5zdHlsZS5wYWdlQnJlYWtJbnNpZGUgPSAnYXZvaWQnO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyU3ViLnN0eWxlLmJyZWFrSW5zaWRlID0gJ2F2b2lkJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xhc3NBcnJheSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAnYXBwLXZpZXctcmVuZGVyZXItMTdfNDU1MjEtNTEnLFxyXG4gICAgICAgICAgICAgICAgICAgICdhcHAtdmlldy1yZW5kZXJlci0xN180NTUyMS01MicsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2FwcC12aWV3LXJlbmRlcmVyLTE3XzQ1NTIxLTUzJyxcclxuICAgICAgICAgICAgICAgICAgICAnYXBwLXZpZXctcmVuZGVyZXItMTJfNDUyMzctNTAnLFxyXG4gICAgICAgICAgICAgICAgICAgICdhcHAtdmlldy1yZW5kZXJlci0xMl80NTIzNy01MScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2FwcC12aWV3LXJlbmRlcmVyLTEyXzQ1MjM3LTUyJyxcclxuICAgICAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNsYXNzQXJyYXkuc29tZShjbGFzc05hbWUgPT4gcmVuZGVyZXIuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0ZXJXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0ZXJXcmFwcGVyLmNsYXNzTmFtZSA9ICdjb2wtbWQtNCc7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0ZXJXcmFwcGVyLmFwcGVuZENoaWxkKGNvbnRhaW5lclN1Yik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnJlcGxhY2VXaXRoKG91dGVyV3JhcHBlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGVja2JveENvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tib3hlcyA9IGNoZWNrYm94Q29tcG9uZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jdXN0b20tY29udHJvbC1pbnB1dCcpIGFzIE5vZGVMaXN0T2Y8SFRNTElucHV0RWxlbWVudD47XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zOiB7IHZhbHVlOiBzdHJpbmc7IGxhYmVsOiBzdHJpbmc7IGNoZWNrZWQ6IGJvb2xlYW4gfVtdID0gW107XHJcbiAgICAgICAgICAgICAgICBjaGVja2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94SWQgPSBjaGVja2JveC5pZDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbFNwYW4gPSBjaGVja2JveENvbXBvbmVudC5xdWVyeVNlbGVjdG9yKGAuY3VzdG9tLWNvbnRyb2wtbGFiZWxbZm9yPVwiJHtjaGVja2JveElkfVwiXSBzcGFuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBsYWJlbFNwYW4/LnRleHRDb250ZW50Py50cmltKCkgfHwgY2hlY2tib3gudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHsgdmFsdWU6IGNoZWNrYm94LnZhbHVlLCBsYWJlbCwgY2hlY2tlZDogY2hlY2tib3guY2hlY2tlZCB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lclN1YiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyU3ViLmNsYXNzTGlzdC5hZGQoJ2Zvcm0tZ3JvdXAnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnNIdG1sID0gb3B0aW9ucy5tYXAob3B0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidWxsZXQgPSBvcHQuY2hlY2tlZCA/ICdYJyA6ICdPJztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxkaXYgc3R5bGU9XCJtYXJnaW4tdG9wOiAwcHg7IGZvbnQtZmFtaWx5OiBRdWlja3NhbmQ7XCI+PHN0cm9uZz4ke2J1bGxldH0mbmJzcDsmbmJzcDske29wdC5sYWJlbH08L3N0cm9uZz48L2Rpdj5gO1xyXG4gICAgICAgICAgICAgICAgfSkuam9pbignJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyU3ViLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tbGVmdDogMTBweDtcIj5cclxuICAgICAgICAgICAgICAgICAgICAke29wdGlvbnNIdG1sfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJTdWIuc3R5bGUucGFnZUJyZWFrSW5zaWRlID0gJ2F2b2lkJztcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lclN1Yi5zdHlsZS5icmVha0luc2lkZSA9ICdhdm9pZCc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjb250YWluZXJTdWIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgYXBwLWNlZS1yYWRpbyBlbGVtZW50cyBmcm9tIGNvbnRhaW5lclN1YlxyXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIucXVlcnlTZWxlY3RvckFsbCgnYXBwLWNlZS1yYWRpbycpLmZvckVhY2gobm9kZSA9PiBub2RlLnJlbW92ZSgpKTtcclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgYXBwLWNlZS1jaGVja2JveCBlbGVtZW50cyBmcm9tIGNvbnRhaW5lclN1YlxyXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIucXVlcnlTZWxlY3RvckFsbCgnYXBwLWNlZS1jaGVja2JveCcpLmZvckVhY2gobm9kZSA9PiBub2RlLnJlbW92ZSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZS1hZGQgcHJlc2VydmVkIG5vZGVzIChsaWtlIGxhYmVscywgaW1hZ2VzLCBldGMuKSBiZWZvcmUgdGhlIHJhZGlvL2NoZWNrYm94IHN1bW1hcnlcclxuICAgICAgICAgICAgICAgIC8vIEJ1dCBmaWx0ZXIgb3V0IGFueSBhcHAtY2VlLXJhZGlvIG9yIGFwcC1jZWUtY2hlY2tib3ggZWxlbWVudHNcclxuICAgICAgICAgICAgICAgIHByZXNlcnZlZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyU3ViLmluc2VydEJlZm9yZShub2RlLmNsb25lTm9kZSh0cnVlKSwgY29udGFpbmVyU3ViLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIucmVwbGFjZVdpdGgoY29udGFpbmVyU3ViKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1ncm91cCcpLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLnBhZ2VCcmVha0luc2lkZSA9ICdhdm9pZCc7XHJcbiAgICAgICAgICAgIChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuYnJlYWtJbnNpZGUgPSAnYXZvaWQnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4vLyAgICAgcHJpdmF0ZSByZXBsYWNlT25seVJhZGlvQXBwVmlld1JlbmRlcmVycyhjb250YWluZXJNYWluOiBIVE1MRWxlbWVudCkge1xyXG4vLyAgICAgICAgIGNvbnN0IHJlbmRlcmVycyA9IGNvbnRhaW5lck1haW4ucXVlcnlTZWxlY3RvckFsbCgnYXBwLXZpZXctcmVuZGVyZXInKTtcclxuIFxyXG4vLyAgICAgICAgIHJlbmRlcmVycy5mb3JFYWNoKHJlbmRlcmVyID0+IHtcclxuLy8gICAgICAgICAgICAgY29uc3QgcmFkaW9Db21wb25lbnQgPSByZW5kZXJlci5xdWVyeVNlbGVjdG9yKCdhcHAtY2VlLXJhZGlvJyk7XHJcbi8vICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94Q29tcG9uZW50ID0gcmVuZGVyZXIucXVlcnlTZWxlY3RvcignYXBwLWNlZS1jaGVja2JveCcpO1xyXG4gXHJcblxyXG4vLyBpZiAocmFkaW9Db21wb25lbnQpIHtcclxuLy8gICAgIC8vIExvb2sgZm9yIGEgZ3JvdXAtbGV2ZWwgbGFiZWwgaW5zaWRlIGZvcm0tbGFiZWxcclxuLy8gICAgIGNvbnN0IGZvcm1MYWJlbEVsID0gcmFkaW9Db21wb25lbnQucXVlcnlTZWxlY3RvcignLmZvcm0tbGFiZWwgbGFiZWwnKTtcclxuLy8gICAgIGNvbnN0IHF1ZXN0aW9uVGV4dCA9IChmb3JtTGFiZWxFbCBhcyBIVE1MRWxlbWVudCB8IG51bGwpPy5pbm5lclRleHQ/LnRyaW0oKTtcclxuXHJcbi8vICAgICBjb25zdCByYWRpb3MgPSByYWRpb0NvbXBvbmVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKSBhcyBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xyXG4vLyAgICAgaWYgKCFyYWRpb3MubGVuZ3RoKSByZXR1cm47XHJcblxyXG4vLyAgICAgY29uc3Qgb3B0aW9uczogeyB2YWx1ZTogc3RyaW5nOyBsYWJlbDogc3RyaW5nOyBjaGVja2VkOiBib29sZWFuIH1bXSA9IFtdO1xyXG5cclxuLy8gICAgIHJhZGlvcy5mb3JFYWNoKHJhZGlvID0+IHtcclxuLy8gICAgICAgICBjb25zdCB2YWx1ZSA9IHJhZGlvLnZhbHVlO1xyXG4vLyAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSByYWRpby5jaGVja2VkO1xyXG5cclxuLy8gICAgICAgICBjb25zdCByYWRpb0lkID0gcmFkaW8uaWQ7XHJcbi8vICAgICAgICAgY29uc3QgbGFiZWxFbGVtZW50ID0gcmFkaW9Db21wb25lbnQucXVlcnlTZWxlY3RvcihgbGFiZWxbZm9yPVwiJHtyYWRpb0lkfVwiXWApO1xyXG4vLyAgICAgICAgIGNvbnN0IGxhYmVsID0gKGxhYmVsRWxlbWVudCBhcyBIVE1MRWxlbWVudCB8IG51bGwpPy5pbm5lclRleHQ/LnRyaW0oKSB8fCB2YWx1ZTtcclxuXHJcbi8vICAgICAgICAgb3B0aW9ucy5wdXNoKHsgdmFsdWUsIGxhYmVsLCBjaGVja2VkIH0pO1xyXG4vLyAgICAgfSk7XHJcblxyXG4vLyAgICAgY29uc3QgY29udGFpbmVyU3ViID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbi8vICAgICBjb250YWluZXJTdWIuY2xhc3NMaXN0LmFkZCgnZm9ybS1ncm91cCcpO1xyXG5cclxuLy8gICAgIGNvbnN0IG9wdGlvbnNIdG1sID0gb3B0aW9ucy5tYXAob3B0ID0+IHtcclxuLy8gICAgICAgICBjb25zdCBidWxsZXQgPSAnTyc7XHJcbi8vICAgICAgICAgaWYgKG9wdC5jaGVja2VkKSB7XHJcbi8vICAgICAgICAgICAgIHJldHVybiBgPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6IDBweDsgZm9udC1mYW1pbHk6IFF1aWNrc2FuZDtcIj5cclxuLy8gICAgICAgICAgICAgICAgIDxzdHJvbmc+PHNwYW4gc3R5bGU9XCJjb2xvcjogIzQyODdmNTtcIj4ke2J1bGxldH08L3NwYW4+Jm5ic3A7Jm5ic3A7JHtvcHQubGFiZWx9PC9zdHJvbmc+XHJcbi8vICAgICAgICAgICAgIDwvZGl2PmA7XHJcbi8vICAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICAgcmV0dXJuIGA8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDogMHB4OyBmb250LWZhbWlseTogUXVpY2tzYW5kO1wiPlxyXG4vLyAgICAgICAgICAgICAgICAgPHN0cm9uZz4ke2J1bGxldH0mbmJzcDsmbmJzcDske29wdC5sYWJlbH08L3N0cm9uZz5cclxuLy8gICAgICAgICAgICAgPC9kaXY+YDtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9KS5qb2luKCcnKTtcclxuXHJcbi8vICAgICBjb25zdCBoYXNTcGVjaWZpY0NsYXNzID0gcmVuZGVyZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhcHAtdmlldy1yZW5kZXJlci0xNV80NTQyMy0yJyk7XHJcbi8vICAgICAgICAgICAgIGNvbnN0IG1hcmdpblRvcFN0eWxlID0gaGFzU3BlY2lmaWNDbGFzcyA/ICdtYXJnaW4tdG9wOiAzNXB4OycgOiAnJztcclxuLy8gICAgICAgICAgICAgLy88ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMnB4OyAke21hcmdpblRvcFN0eWxlfVwiPlxyXG5cclxuLy8gICAgIC8vIFJlbmRlciBxdWVzdGlvbiB0ZXh0IG9ubHkgaWYgaXQgZXhpc3RzXHJcbi8vICAgICBjb25zdCBxdWVzdGlvbkhlYWRlckh0bWwgPSBxdWVzdGlvblRleHRcclxuLy8gICAgICAgICA/IGA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMnB4OyR7bWFyZ2luVG9wU3R5bGV9XCI+PHN0cm9uZz4ke3F1ZXN0aW9uVGV4dH08L3N0cm9uZz48L2Rpdj5gXHJcbi8vICAgICAgICAgOiAnJztcclxuXHJcbi8vICAgICBjb250YWluZXJTdWIuaW5uZXJIVE1MID0gYFxyXG4vLyAgICAgICAgICR7cXVlc3Rpb25IZWFkZXJIdG1sfVxyXG4vLyAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tbGVmdDogMTBweDtcIj5cclxuLy8gICAgICAgICAgICAgJHtvcHRpb25zSHRtbH1cclxuLy8gICAgICAgICA8L2Rpdj5cclxuLy8gICAgIGA7XHJcblxyXG4vLyAgICAgY29udGFpbmVyU3ViLnN0eWxlLnBhZ2VCcmVha0luc2lkZSA9ICdhdm9pZCc7XHJcbi8vICAgICBjb250YWluZXJTdWIuc3R5bGUuYnJlYWtJbnNpZGUgPSAnYXZvaWQnO1xyXG4vLyAgICAgcmVuZGVyZXIucmVwbGFjZVdpdGgoY29udGFpbmVyU3ViKTtcclxuLy8gfWVsc2UgaWYgKGNoZWNrYm94Q29tcG9uZW50KSB7XHJcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyBjaGVja2JveCBjb21wb25lbnQnKTtcclxuLy8gICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBjaGVja2JveENvbXBvbmVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3VzdG9tLWNvbnRyb2wtaW5wdXQnKSBhcyBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xyXG4gXHJcbi8vICAgICAgICAgICAgICAgICAvLyBHZXQgYWxsIGNoZWNrYm94IHZhbHVlcyBhbmQgdGhlaXIgYXNzb2NpYXRlZCBsYWJlbHNcclxuLy8gICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnM6IHsgdmFsdWU6IHN0cmluZzsgbGFiZWw6IHN0cmluZzsgY2hlY2tlZDogYm9vbGVhbiB9W10gPSBbXTtcclxuIFxyXG4vLyAgICAgICAgICAgICAgICAgY2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcclxuLy8gICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNoZWNrYm94LnZhbHVlO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBjaGVja2JveC5jaGVja2VkO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94SWQgPSBjaGVja2JveC5pZDtcclxuLy8gICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbFNwYW4gPSBjaGVja2JveENvbXBvbmVudC5xdWVyeVNlbGVjdG9yKGAuY3VzdG9tLWNvbnRyb2wtbGFiZWxbZm9yPVwiJHtjaGVja2JveElkfVwiXSBzcGFuYCk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBsYWJlbFNwYW4/LnRleHRDb250ZW50Py50cmltKCkgfHwgdmFsdWU7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHsgdmFsdWUsIGxhYmVsLCBjaGVja2VkIH0pO1xyXG4vLyAgICAgICAgICAgICAgICAgfSk7XHJcbiBcclxuLy8gICAgICAgICAgICAgICAgIC8vIEJ1aWxkIHRoZSBzaW1wbGlmaWVkIEhUTUwgZm9yIGNoZWNrYm94XHJcbi8vICAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXJTdWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuLy8gICAgICAgICAgICAgICAgIGNvbnRhaW5lclN1Yi5jbGFzc0xpc3QuYWRkKCdmb3JtLWdyb3VwJyk7XHJcbiBcclxuLy8gICAgICAgICAgICAgICAgIC8vIGNvbnN0IG9wdGlvbnNIdG1sID0gb3B0aW9ucy5tYXAob3B0ID0+IHtcclxuLy8gICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCBtYXJrID0gb3B0LmNoZWNrZWQgPyAnW1hdJyA6ICdbIF0nOyAvLyBVc2luZyBmaWxsZWQgYW5kIGVtcHR5IHNxdWFyZSBzeW1ib2xzXHJcbi8vICAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIGA8ZGl2IHN0eWxlPVwiZGlzcGxheTogaW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsgY29sb3I6ICMwMDA7IGJhY2tncm91bmQtY29sb3I6ICNmZmY7IGZvbnQtZmFtaWx5OiBRdWlja3NhbmQ7IG1hcmdpbi1ib3R0b206IDZweDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI+JHttYXJrfSZuYnNwOyZuYnNwOyR7b3B0LmxhYmVsfTwvZGl2PmA7XHJcbi8vICAgICAgICAgICAgICAgICAvLyB9KS5qb2luKCcnKTtcclxuXHJcbi8vICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zSHRtbCA9IG9wdGlvbnMubWFwKG9wdCA9PiB7XHJcbi8vICAgICAgICAgICAgICAgICBjb25zdCBidWxsZXQgPSBvcHQuY2hlY2tlZCA/ICdYJyA6ICdPJztcclxuLy8gICAgICAgICAgICAgICAgIHJldHVybiBgPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6IDBweDtmb250LWZhbWlseTogUXVpY2tzYW5kO1wiPjxzdHJvbmc+JHtidWxsZXR9Jm5ic3A7Jm5ic3A7JHtvcHQubGFiZWx9PC9zdHJvbmc+PC9kaXY+YDtcclxuLy8gICAgICAgICAgICAgfSkuam9pbignJyk7XHJcbiBcclxuLy8gICAgICAgICAgICAgICAgIGNvbnRhaW5lclN1Yi5pbm5lckhUTUwgPSBgXHJcbi8vICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAxMHB4O1wiPlxyXG4vLyAgICAgICAgICAgICAgICAgICAgICR7b3B0aW9uc0h0bWx9XHJcbi8vICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbi8vICAgICAgICAgICAgICAgICBgO1xyXG4vLyAgICAgICAgICAgICAgICAgY29udGFpbmVyU3ViLnN0eWxlLnBhZ2VCcmVha0luc2lkZSA9ICdhdm9pZCc7XHJcbi8vICAgICAgICAgICAgICAgICBjb250YWluZXJTdWIuc3R5bGUuYnJlYWtJbnNpZGUgPSAnYXZvaWQnO1xyXG4vLyAgICAgICAgICAgICAgICAgcmVuZGVyZXIucmVwbGFjZVdpdGgoY29udGFpbmVyU3ViKTtcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgIH0pO1xyXG5cclxuLy8gICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1ncm91cCcpLmZvckVhY2goZWwgPT4ge1xyXG4vLyAgICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLnBhZ2VCcmVha0luc2lkZSA9ICdhdm9pZCc7XHJcbi8vICAgICAgICAgICAgIChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuYnJlYWtJbnNpZGUgPSAnYXZvaWQnO1xyXG4vLyAgICAgICAgIH0pO1xyXG4vLyAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBhcHBseVJlc29sdXRpb25TcGVjaWZpY0ZpeGVzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICBjb25zdCBzY3JlZW5XaWR0aCA9IHdpbmRvdy5zY3JlZW4ud2lkdGg7XHJcbiAgY29uc3Qgc2NyZWVuSGVpZ2h0ID0gd2luZG93LnNjcmVlbi5oZWlnaHQ7XHJcblxyXG4gIGlmIChzY3JlZW5XaWR0aCA9PT0gMTkyMCAmJiBzY3JlZW5IZWlnaHQgPT09IDEwODApIHtcclxuICAgIC8vIPCfkYkgTG9naWMgZm9yIDE5MjB4MTA4MCByZXNvbHV0aW9uIGltcGxlbWVudGVkXHJcbiAgICAvLyBjb25zb2xlLmxvZygnMTkyMHgxMDgwIHJlc29sdXRpb24gZGV0ZWN0ZWQnKTtcclxuICAgIFxyXG4gICAgLy8gV3JpdGUgeW91ciByZXNvbHV0aW9uLXNwZWNpZmljIGZpeGVzIGhlcmVcclxuXHJcbiAgfSBlbHNlIGlmIChzY3JlZW5XaWR0aCA9PT0gMTM2NiAmJiBzY3JlZW5IZWlnaHQgPT09IDc2OCkge1xyXG4gICAgLy8g8J+RiSBMb2dpYyBmb3IgMTM2Nng3NjggcmVzb2x1dGlvblxyXG4gICAgLy8gY29uc29sZS5sb2coJzEzNjZ4NzY4IHJlc29sdXRpb24gZGV0ZWN0ZWQnKTtcclxuXHJcbiAgICAvLyBXcml0ZSB5b3VyIHJlc29sdXRpb24tc3BlY2lmaWMgZml4ZXMgaGVyZVxyXG5cclxuICB9IGVsc2Uge1xyXG4gICAgLy8g8J+RiSBEZWZhdWx0IGxvZ2ljIGZvciBhbnkgb3RoZXIgcmVzb2x1dGlvblxyXG4gICAgLy8gY29uc29sZS5sb2coJ090aGVyIHJlc29sdXRpb24gZGV0ZWN0ZWQnKTtcclxuXHJcbiAgICAvLyBXcml0ZSBmYWxsYmFjayBsb2dpYyBoZXJlXHJcbiAgfVxyXG59XHJcblxyXG5cclxuLy8gcmVidWlsZE1hdGVyaWFsVGFibGVzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuLy8gICBjb25zdCBtYXRlcmlhbFRhYmxlcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZS5tYXQtbWRjLXRhYmxlJyk7XHJcblxyXG4vLyAgIG1hdGVyaWFsVGFibGVzLmZvckVhY2goKHRhYmxlOiBIVE1MVGFibGVFbGVtZW50KSA9PiB7XHJcbi8vICAgICBjb25zdCBuZXdUYWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XHJcbi8vICAgICBuZXdUYWJsZS5zdHlsZS5wYWdlQnJlYWtJbnNpZGUgPSAnYXZvaWQnO1xyXG4vLyAgICAgbmV3VGFibGUuc3R5bGUuYm9yZGVyQ29sbGFwc2UgPSAnY29sbGFwc2UnO1xyXG4vLyAgICAgbmV3VGFibGUuc3R5bGUudGFibGVMYXlvdXQgPSAnZml4ZWQnO1xyXG4vLyAgICAgbmV3VGFibGUuc3R5bGUubWFyZ2luID0gJzEycHggMCc7XHJcbi8vICAgICBuZXdUYWJsZS5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuXHJcbi8vICAgICBjb25zdCB0aGVhZCA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RoZWFkJyk7XHJcbi8vICAgICBjb25zdCB0Ym9keSA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XHJcbi8vICAgICBjb25zdCBuZXdUYm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XHJcbi8vICAgICBsZXQgY29sdW1uQ291bnQgPSAwO1xyXG5cclxuLy8gICAgIC8vIFJlYnVpbGQgdGhlIGhlYWRlclxyXG4vLyAgICAgaWYgKHRoZWFkKSB7XHJcbi8vICAgICAgIGNvbnN0IG9sZEhlYWRSb3cgPSB0aGVhZC5xdWVyeVNlbGVjdG9yKCd0cicpO1xyXG4vLyAgICAgICBpZiAob2xkSGVhZFJvdykge1xyXG4vLyAgICAgICAgIGNvbnN0IG5ld1RoZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGhlYWQnKTtcclxuLy8gICAgICAgICBjb25zdCBuZXdIZWFkUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuLy8gICAgICAgICBjb25zdCB0aHMgPSBvbGRIZWFkUm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJyk7XHJcbi8vICAgICAgICAgY29sdW1uQ291bnQgPSB0aHMubGVuZ3RoO1xyXG5cclxuLy8gICAgICAgICB0aHMuZm9yRWFjaCgodGg6IEhUTUxFbGVtZW50KSA9PiB7XHJcbi8vICAgICAgICAgICBjb25zdCBuZXdUaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7XHJcbi8vICAgICAgICAgICBuZXdUaC5pbm5lclRleHQgPSB0aC5pbm5lclRleHQudHJpbSgpO1xyXG4vLyAgICAgICAgICAgbmV3VGguc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM2NTY3NzInO1xyXG4vLyAgICAgICAgICAgbmV3VGguc3R5bGUuY29sb3IgPSAnI2ZmZic7XHJcbi8vICAgICAgICAgICBuZXdUaC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4vLyAgICAgICAgICAgbmV3VGguc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbi8vICAgICAgICAgICBuZXdUaC5zdHlsZS5wYWRkaW5nID0gJzhweCc7XHJcbi8vICAgICAgICAgICBuZXdUaC5zdHlsZS5mb250U2l6ZSA9ICcxMnB4JztcclxuLy8gICAgICAgICAgIG5ld1RoLnN0eWxlLndpZHRoID0gYCR7OTUgLyBjb2x1bW5Db3VudH0lYDtcclxuLy8gICAgICAgICAgIG5ld1RoLnN0eWxlLmJvcmRlciA9ICdub25lJztcclxuLy8gICAgICAgICAgIG5ld0hlYWRSb3cuYXBwZW5kQ2hpbGQobmV3VGgpO1xyXG4vLyAgICAgICAgIH0pO1xyXG5cclxuLy8gICAgICAgICBuZXdUaGVhZC5hcHBlbmRDaGlsZChuZXdIZWFkUm93KTtcclxuLy8gICAgICAgICBuZXdUYWJsZS5hcHBlbmRDaGlsZChuZXdUaGVhZCk7XHJcbi8vICAgICAgIH1cclxuLy8gICAgIH1cclxuXHJcbi8vICAgICAvLyBSZWJ1aWxkIHJvd3NcclxuLy8gICAgIGlmICh0Ym9keSkge1xyXG4vLyAgICAgICBjb25zdCByb3dzID0gQXJyYXkuZnJvbSh0Ym9keS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpKS5maWx0ZXIocm93ID0+XHJcbi8vICAgICAgICAgQXJyYXkuZnJvbShyb3cucXVlcnlTZWxlY3RvckFsbCgndGQnKSkuc29tZSh0ZCA9PiB0ZC50ZXh0Q29udGVudD8udHJpbSgpKVxyXG4vLyAgICAgICApO1xyXG5cclxuLy8gICAgICAgcm93cy5mb3JFYWNoKChyb3csIHJvd0luZGV4KSA9PiB7XHJcbi8vICAgICAgICAgY29uc3QgbmV3Um93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuLy8gICAgICAgICBjb25zdCB0ZHMgPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGQnKTtcclxuXHJcbi8vICAgICAgICAgdGRzLmZvckVhY2goKHRkOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4vLyAgICAgICAgICAgY29uc3QgbmV3VGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4vLyAgICAgICAgICAgbmV3VGQuaW5uZXJUZXh0ID0gdGQuaW5uZXJUZXh0LnRyaW0oKTtcclxuLy8gICAgICAgICAgIG5ld1RkLnN0eWxlLnBhZGRpbmcgPSAnNnB4JztcclxuLy8gICAgICAgICAgIG5ld1RkLnN0eWxlLmZvbnRTaXplID0gJzEycHgnO1xyXG4vLyAgICAgICAgICAgbmV3VGQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbi8vICAgICAgICAgICBuZXdUZC5zdHlsZS53aWR0aCA9IGAkezk1IC8gY29sdW1uQ291bnR9JWA7XHJcbi8vICAgICAgICAgICBuZXdUZC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XHJcbi8vICAgICAgICAgICBuZXdSb3cuYXBwZW5kQ2hpbGQobmV3VGQpO1xyXG4vLyAgICAgICAgIH0pO1xyXG5cclxuLy8gICAgICAgICBuZXdUYm9keS5hcHBlbmRDaGlsZChuZXdSb3cpO1xyXG5cclxuLy8gICAgICAgICAvLyBSb3cgZGl2aWRlciBleGNlcHQgbGFzdFxyXG4vLyAgICAgICAgIGlmIChyb3dJbmRleCA8IHJvd3MubGVuZ3RoIC0gMSkge1xyXG4vLyAgICAgICAgICAgY29uc3QgZGl2aWRlclJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcbi8vICAgICAgICAgICBjb25zdCBkaXZpZGVyVGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4vLyAgICAgICAgICAgZGl2aWRlclRkLmNvbFNwYW4gPSBjb2x1bW5Db3VudDtcclxuLy8gICAgICAgICAgIGRpdmlkZXJUZC5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMXB4IHNvbGlkICNjY2MnO1xyXG4vLyAgICAgICAgICAgZGl2aWRlclRkLnN0eWxlLmhlaWdodCA9ICcxcHgnO1xyXG4vLyAgICAgICAgICAgZGl2aWRlclRkLnN0eWxlLnBhZGRpbmcgPSAnMCc7XHJcbi8vICAgICAgICAgICBkaXZpZGVyUm93LmFwcGVuZENoaWxkKGRpdmlkZXJUZCk7XHJcbi8vICAgICAgICAgICBuZXdUYm9keS5hcHBlbmRDaGlsZChkaXZpZGVyUm93KTtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICAgIH0pO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIC8vIEFkZCBsYWJlbCByb3cgZnJvbSBuZXh0IGFwcC12aWV3LXJlbmRlcmVyc1xyXG4vLyAgICAgY29uc3QgbGFiZWxSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4vLyAgICAgY29uc3QgdGFibGVXcmFwcGVyID0gdGFibGUuY2xvc2VzdCgnYXBwLXZpZXctcmVuZGVyZXInKTtcclxuLy8gICAgIGxldCBuZXh0U2libGluZyA9IHRhYmxlV3JhcHBlcj8ubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4vLyAgICAgbGV0IGFwcFJlbmRlcmVyczogSFRNTEVsZW1lbnRbXSA9IFtdO1xyXG5cclxuLy8gICAgIHdoaWxlIChuZXh0U2libGluZyAmJiBhcHBSZW5kZXJlcnMubGVuZ3RoIDwgY29sdW1uQ291bnQpIHtcclxuLy8gICAgICAgaWYgKG5leHRTaWJsaW5nLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2FwcC12aWV3LXJlbmRlcmVyJykge1xyXG4vLyAgICAgICAgIGFwcFJlbmRlcmVycy5wdXNoKG5leHRTaWJsaW5nIGFzIEhUTUxFbGVtZW50KTtcclxuLy8gICAgICAgfVxyXG4vLyAgICAgICBuZXh0U2libGluZyA9IG5leHRTaWJsaW5nLm5leHRFbGVtZW50U2libGluZztcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBpZiAoYXBwUmVuZGVyZXJzLmxlbmd0aCA9PT0gY29sdW1uQ291bnQpIHtcclxuLy8gICAgICAgYXBwUmVuZGVyZXJzLmZvckVhY2gocmVuZGVyZXIgPT4ge1xyXG4vLyAgICAgICAgIGNvbnN0IGxhYmVsID0gcmVuZGVyZXIucXVlcnlTZWxlY3RvcignbGFiZWwnKTtcclxuLy8gICAgICAgICBjb25zdCB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbi8vICAgICAgICAgdGQuaW5uZXJUZXh0ID0gbGFiZWw/LnRleHRDb250ZW50Py50cmltKCkgfHwgJyc7XHJcbi8vICAgICAgICAgdGQuc3R5bGUucGFkZGluZyA9ICc2cHgnO1xyXG4vLyAgICAgICAgIHRkLnN0eWxlLmZvbnRTaXplID0gJzEycHgnO1xyXG4vLyAgICAgICAgIHRkLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4vLyAgICAgICAgIHRkLnN0eWxlLndpZHRoID0gYCR7OTUgLyBjb2x1bW5Db3VudH0lYDtcclxuLy8gICAgICAgICB0ZC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XHJcbi8vICAgICAgICAgbGFiZWxSb3cuYXBwZW5kQ2hpbGQodGQpO1xyXG4vLyAgICAgICAgIHJlbmRlcmVyLnJlbW92ZSgpO1xyXG4vLyAgICAgICB9KTtcclxuXHJcbi8vICAgICAgIG5ld1Rib2R5LmFwcGVuZENoaWxkKGxhYmVsUm93KTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBuZXdUYWJsZS5hcHBlbmRDaGlsZChuZXdUYm9keSk7XHJcbi8vICAgICB0YWJsZS5wYXJlbnROb2RlPy5yZXBsYWNlQ2hpbGQobmV3VGFibGUsIHRhYmxlKTtcclxuLy8gICB9KTtcclxuLy8gfVxyXG5cclxuXHJcbnJlYnVpbGRNYXRlcmlhbFRhYmxlc0luUmVwZWF0YWJsZShjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWxUYWJsZXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnYmxvY2tfZmllbGRfNDIxMzczMDEnKTtcclxuXHJcbi8vIGNvbnN0IG1hdGVyaWFsVGFibGVzID0gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgndGFibGUubWF0LW1kYy10YWJsZScpKVxyXG4vLyAgIC8vIFNraXAgdGFibGVzIHRoYXQgaGF2ZSBjbGFzcyBjb21wLTIyMyBvciBjb21wLTU2NyAoYWRkIG1vcmUgYXMgbmVlZGVkKVxyXG4vLyAgIC5maWx0ZXIodGFibGUgPT5cclxuLy8gICAgICFBcnJheS5mcm9tKHRhYmxlLmNsYXNzTGlzdCkuc29tZShjbHMgPT5cclxuLy8gICAgICAgWydibG9ja19maWVsZF80MjEzNzMwMSddLmluY2x1ZGVzKGNscylcclxuLy8gICAgIClcclxuLy8gICApO1xyXG5cclxuXHJcbiAgICAgICAgbWF0ZXJpYWxUYWJsZXMuZm9yRWFjaCgodGFibGU6IEhUTUxUYWJsZUVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmV3VGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xyXG4gICAgICAgICAgICBuZXdUYWJsZS5zdHlsZS5wYWdlQnJlYWtJbnNpZGUgPSAnYXZvaWQnO1xyXG4gICAgICAgICAgICBjb25zdCBzY3JlZW5XaWR0aCA9IHdpbmRvdy5zY3JlZW4ud2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjcmVlbkhlaWdodCA9IHdpbmRvdy5zY3JlZW4uaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgaWYgKHNjcmVlbldpZHRoID09PSAxOTIwICYmIHNjcmVlbkhlaWdodCA9PT0gMTA4MCkge1xyXG4gICAgICAgICAgICAgICBuZXdUYWJsZS5zdHlsZS53aWR0aCA9ICc5MiUnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNjcmVlbldpZHRoID09PSAxMzY2ICYmIHNjcmVlbkhlaWdodCA9PT0gNzY4KSB7XHJcbiAgICAgICAgICAgICAgICBuZXdUYWJsZS5zdHlsZS53aWR0aCA9ICc5OCUnO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIG5ld1RhYmxlLnN0eWxlLndpZHRoID0gJzkwJSc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbmV3VGFibGUuc3R5bGUuYm9yZGVyQ29sbGFwc2UgPSAnY29sbGFwc2UnO1xyXG4gICAgICAgICAgICBuZXdUYWJsZS5zdHlsZS50YWJsZUxheW91dCA9ICdmaXhlZCc7XHJcbiAgICAgICAgICAgIG5ld1RhYmxlLnN0eWxlLm1hcmdpbiA9ICcxMnB4IDAnO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGhlYWQgPSB0YWJsZS5xdWVyeVNlbGVjdG9yKCd0aGVhZCcpO1xyXG4gICAgICAgICAgICBjb25zdCB0Ym9keSA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XHJcblxyXG4gICAgICAgICAgICAvLyBDb3B5IGhlYWRlcnNcclxuICAgICAgICAgICAgaWYgKHRoZWFkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUaGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRIZWFkUm93ID0gdGhlYWQucXVlcnlTZWxlY3RvcigndHInKTtcclxuICAgICAgICAgICAgICAgIG5ld1RoZWFkLnN0eWxlLmRpc3BsYXkgPSAndGFibGUtaGVhZGVyLWdyb3VwJztcclxuICAgICAgICAgICAgICAgIHZhciBjb2x1bW5zID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob2xkSGVhZFJvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0hlYWRSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnMgPSBvbGRIZWFkUm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJykubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIG9sZEhlYWRSb3cucXVlcnlTZWxlY3RvckFsbCgndGgnKS5mb3JFYWNoKCh0aDogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUaC5pbm5lclRleHQgPSB0aC5pbm5lclRleHQudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUaC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzY1Njc3Mic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RoLnN0eWxlLmNvbG9yID0gJyNmZmZmZmYnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUaC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUaC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGguc3R5bGUucGFkZGluZyA9ICc4cHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUaC5zdHlsZS5mb250U2l6ZSA9ICcxMnB4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGguc3R5bGUud2lkdGggPSBgJHs5NSAvIGNvbHVtbnN9JWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RoLnN0eWxlLmJvcmRlciA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SGVhZFJvdy5hcHBlbmRDaGlsZChuZXdUaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VGhlYWQuYXBwZW5kQ2hpbGQobmV3SGVhZFJvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFibGUuYXBwZW5kQ2hpbGQobmV3VGhlYWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDb3B5IGJvZHkgcm93c1xyXG4gICAgICAgICAgICBpZiAodGJvZHkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Rib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvd3MgPSBBcnJheS5mcm9tKHRib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJykpLmZpbHRlcihyb3cgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNraXAgZW1wdHkgcm93czogYWxsIDx0ZD4gYXJlIGVtcHR5IG9yIGludmlzaWJsZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRkcyA9IEFycmF5LmZyb20ocm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZHMubGVuZ3RoICYmIHRkcy5zb21lKHRkID0+IHRkLnRleHRDb250ZW50Py50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcm93cy5mb3JFYWNoKChyb3csIHJvd0luZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Um93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2x1bW5zID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJykubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByb3cucXVlcnlTZWxlY3RvckFsbCgndGQnKS5mb3JFYWNoKCh0ZDogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0ZC5pbm5lclRleHQudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdUZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RkLmlubmVyVGV4dCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUZC5zdHlsZS5wYWRkaW5nID0gJzZweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RkLnN0eWxlLmZvbnRTaXplID0gJzEycHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUZC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGQuc3R5bGUud2lkdGggPSBgJHs5NSAvIGNvbHVtbnN9JWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RkLnN0eWxlLmJvcmRlciA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Um93LmFwcGVuZENoaWxkKG5ld1RkKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VGJvZHkuYXBwZW5kQ2hpbGQobmV3Um93KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGdyYXkgbGluZSBhZnRlciBlYWNoIHJvdyBleGNlcHQgdGhlIGxhc3Qgb25lXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvd0luZGV4IDwgcm93cy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpdmlkZXJSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXZpZGVyVGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXZpZGVyVGQuY29sU3BhbiA9IHJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpLmxlbmd0aCB8fCAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXZpZGVyVGQuc3R5bGUuYm9yZGVyQm90dG9tID0gJzFweCBzb2xpZCAjY2NjJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2aWRlclRkLnN0eWxlLmhlaWdodCA9ICcxcHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXZpZGVyVGQuc3R5bGUucGFkZGluZyA9ICcwJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2aWRlclJvdy5zdHlsZS5wYWdlQnJlYWtJbnNpZGUgPSAnYXZvaWQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXZpZGVyVGQuc3R5bGUucGFnZUJyZWFrSW5zaWRlID0gJ2F2b2lkJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2aWRlclJvdy5hcHBlbmRDaGlsZChkaXZpZGVyVGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYm9keS5hcHBlbmRDaGlsZChkaXZpZGVyUm93KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgbGFiZWwgcm93IGZyb20gbmV4dCBhcHAtdmlldy1yZW5kZXJlcnNcclxuICAgIGNvbnN0IGxhYmVsUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgIGNvbnN0IHRhYmxlV3JhcHBlciA9IHRhYmxlLmNsb3Nlc3QoJ2RpdicpO1xyXG4gICAgbGV0IG5leHRTaWJsaW5nID0gdGFibGVXcmFwcGVyPy5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICBsZXQgYXBwUmVuZGVyZXJzOiBIVE1MRWxlbWVudFtdID0gW107XHJcblxyXG4gICAgd2hpbGUgKG5leHRTaWJsaW5nICYmIGFwcFJlbmRlcmVycy5sZW5ndGggPCBjb2x1bW5zKSB7XHJcbiAgICAgIGlmIChuZXh0U2libGluZy50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdkaXYnKSB7XHJcbiAgICAgICAgYXBwUmVuZGVyZXJzLnB1c2gobmV4dFNpYmxpbmcgYXMgSFRNTEVsZW1lbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIG5leHRTaWJsaW5nID0gbmV4dFNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChhcHBSZW5kZXJlcnMubGVuZ3RoID09PSBjb2x1bW5zKSB7XHJcbiAgICAgIGFwcFJlbmRlcmVycy5mb3JFYWNoKHJlbmRlcmVyID0+IHtcclxuICAgICAgICBjb25zdCBsYWJlbCA9IHJlbmRlcmVyLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJyk7XHJcbiAgICAgICAgY29uc3QgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgIHRkLmlubmVyVGV4dCA9IGxhYmVsPy50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgIHRkLnN0eWxlLnBhZGRpbmcgPSAnNnB4JztcclxuICAgICAgICB0ZC5zdHlsZS5mb250U2l6ZSA9ICcxNHB4JztcclxuICAgICAgICB0ZC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgIHRkLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgIHRkLnN0eWxlLndpZHRoID0gYCR7OTUgLyBjb2x1bW5zfSVgO1xyXG4gICAgICAgIHRkLnN0eWxlLmJvcmRlciA9ICdub25lJztcclxuICAgICAgICBsYWJlbFJvdy5hcHBlbmRDaGlsZCh0ZCk7XHJcbiAgICAgICAgcmVuZGVyZXIucmVtb3ZlKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgbmV3VGJvZHkuYXBwZW5kQ2hpbGQobGFiZWxSb3cpO1xyXG4gICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG5ld1RhYmxlLmFwcGVuZENoaWxkKG5ld1Rib2R5KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIFxyXG5cclxuICAgIFxyXG4gICAgdGFibGUucGFyZW50Tm9kZT8ucmVwbGFjZUNoaWxkKG5ld1RhYmxlLCB0YWJsZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZXBsYWNlIG9yaWdpbmFsIHRhYmxlXHJcbiAgICAgICAgICAgLy8gdGFibGUucGFyZW50Tm9kZT8ucmVwbGFjZUNoaWxkKG5ld1RhYmxlLCB0YWJsZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRhcmdldFNlY3Rpb24xID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgJy5jZWUtc2VjdGlvbi5yb3cuc2VjdGlvbi0wLTAtMS0wLTQuc3RlcC00NDk3NC50ZW1wbGF0ZS0nXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKHRhcmdldFNlY3Rpb24xKSB7XHJcbiAgICAgICAgICAgICh0YXJnZXRTZWN0aW9uMSBhcyBIVE1MRWxlbWVudCkuc3R5bGUubWFyZ2luVG9wID0gJzI0cHgnOyAvLyBvciBhbnkgdmFsdWUgeW91IHByZWZlclxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGFyZ2V0U2VjdGlvbjIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgICAnLmNlZS1zZWN0aW9uLnJvdy5zZWN0aW9uLTAtMC0xLTQtMC5zdGVwLTQ1MjM3LnRlbXBsYXRlLSdcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAodGFyZ2V0U2VjdGlvbjIpIHtcclxuICAgICAgICAgICAgKHRhcmdldFNlY3Rpb24yIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5tYXJnaW5Ub3AgPSAnNTBweCc7IC8vIG9yIGFueSB2YWx1ZSB5b3UgcHJlZmVyXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlYnVpbGRNYXRlcmlhbFRhYmxlcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgLy9jb25zdCBtYXRlcmlhbFRhYmxlcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZS5tYXQtbWRjLXRhYmxlJyk7XHJcblxyXG5jb25zdCBtYXRlcmlhbFRhYmxlcyA9IEFycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlLm1hdC1tZGMtdGFibGUnKSlcclxuICAvLyBTa2lwIHRhYmxlcyB0aGF0IGhhdmUgY2xhc3MgY29tcC0yMjMgb3IgY29tcC01NjcgKGFkZCBtb3JlIGFzIG5lZWRlZClcclxuICAuZmlsdGVyKHRhYmxlID0+XHJcbiAgICAhQXJyYXkuZnJvbSh0YWJsZS5jbGFzc0xpc3QpLnNvbWUoY2xzID0+XHJcbiAgICAgIFsnYmxvY2tfZmllbGRfNDIxMzczMDEnXS5pbmNsdWRlcyhjbHMpXHJcbiAgICApXHJcbiAgKTtcclxuXHJcblxyXG4gICAgICAgIG1hdGVyaWFsVGFibGVzLmZvckVhY2goKHRhYmxlOiBIVE1MVGFibGVFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1RhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcclxuICAgICAgICAgICAgbmV3VGFibGUuc3R5bGUucGFnZUJyZWFrSW5zaWRlID0gJ2F2b2lkJztcclxuICAgICAgICAgICAgY29uc3Qgc2NyZWVuV2lkdGggPSB3aW5kb3cuc2NyZWVuLndpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBzY3JlZW5IZWlnaHQgPSB3aW5kb3cuc2NyZWVuLmhlaWdodDtcclxuXHJcbiAgICAgICAgICAgIGlmIChzY3JlZW5XaWR0aCA9PT0gMTkyMCAmJiBzY3JlZW5IZWlnaHQgPT09IDEwODApIHtcclxuICAgICAgICAgICAgICAgbmV3VGFibGUuc3R5bGUud2lkdGggPSAnOTIlJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzY3JlZW5XaWR0aCA9PT0gMTM2NiAmJiBzY3JlZW5IZWlnaHQgPT09IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgbmV3VGFibGUuc3R5bGUud2lkdGggPSAnOTglJztcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBuZXdUYWJsZS5zdHlsZS53aWR0aCA9ICc5MCUnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG5ld1RhYmxlLnN0eWxlLmJvcmRlckNvbGxhcHNlID0gJ2NvbGxhcHNlJztcclxuICAgICAgICAgICAgbmV3VGFibGUuc3R5bGUudGFibGVMYXlvdXQgPSAnZml4ZWQnO1xyXG4gICAgICAgICAgICBuZXdUYWJsZS5zdHlsZS5tYXJnaW4gPSAnMTJweCAwJztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRoZWFkID0gdGFibGUucXVlcnlTZWxlY3RvcigndGhlYWQnKTtcclxuICAgICAgICAgICAgY29uc3QgdGJvZHkgPSB0YWJsZS5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ29weSBoZWFkZXJzXHJcbiAgICAgICAgICAgIGlmICh0aGVhZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGhlYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aGVhZCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkSGVhZFJvdyA9IHRoZWFkLnF1ZXJ5U2VsZWN0b3IoJ3RyJyk7XHJcbiAgICAgICAgICAgICAgICBuZXdUaGVhZC5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLWhlYWRlci1ncm91cCc7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1ucyA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9sZEhlYWRSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdIZWFkUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zID0gb2xkSGVhZFJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBvbGRIZWFkUm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJykuZm9yRWFjaCgodGg6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGguaW5uZXJUZXh0ID0gdGguaW5uZXJUZXh0LnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGguc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM2NTY3NzInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUaC5zdHlsZS5jb2xvciA9ICcjZmZmZmZmJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGguc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGguc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RoLnN0eWxlLnBhZGRpbmcgPSAnOHB4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGguc3R5bGUuZm9udFNpemUgPSAnMTJweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RoLnN0eWxlLndpZHRoID0gYCR7OTUgLyBjb2x1bW5zfSVgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUaC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0hlYWRSb3cuYXBwZW5kQ2hpbGQobmV3VGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1RoZWFkLmFwcGVuZENoaWxkKG5ld0hlYWRSb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1RhYmxlLmFwcGVuZENoaWxkKG5ld1RoZWFkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ29weSBib2R5IHJvd3NcclxuICAgICAgICAgICAgaWYgKHRib2R5KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUYm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dzID0gQXJyYXkuZnJvbSh0Ym9keS5xdWVyeVNlbGVjdG9yQWxsKCd0cicpKS5maWx0ZXIocm93ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGVtcHR5IHJvd3M6IGFsbCA8dGQ+IGFyZSBlbXB0eSBvciBpbnZpc2libGVcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZHMgPSBBcnJheS5mcm9tKHJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGRzLmxlbmd0aCAmJiB0ZHMuc29tZSh0ZCA9PiB0ZC50ZXh0Q29udGVudD8udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJvd3MuZm9yRWFjaCgocm93LCByb3dJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sdW1ucyA9IHJvdy5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJykuZm9yRWFjaCgodGQ6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGQuaW5uZXJUZXh0LnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUZC5pbm5lclRleHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGQuc3R5bGUucGFkZGluZyA9ICc2cHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUZC5zdHlsZS5mb250U2l6ZSA9ICcxMnB4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RkLnN0eWxlLndpZHRoID0gYCR7OTUgLyBjb2x1bW5zfSVgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUZC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Jvdy5hcHBlbmRDaGlsZChuZXdUZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1Rib2R5LmFwcGVuZENoaWxkKG5ld1Jvdyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBncmF5IGxpbmUgYWZ0ZXIgZWFjaCByb3cgZXhjZXB0IHRoZSBsYXN0IG9uZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyb3dJbmRleCA8IHJvd3MubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXZpZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGl2aWRlclRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2aWRlclRkLmNvbFNwYW4gPSByb3cucXVlcnlTZWxlY3RvckFsbCgndGQnKS5sZW5ndGggfHwgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2aWRlclRkLnN0eWxlLmJvcmRlckJvdHRvbSA9ICcxcHggc29saWQgI2NjYyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZXJUZC5zdHlsZS5oZWlnaHQgPSAnMXB4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2aWRlclRkLnN0eWxlLnBhZGRpbmcgPSAnMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZXJSb3cuc3R5bGUucGFnZUJyZWFrSW5zaWRlID0gJ2F2b2lkJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2aWRlclRkLnN0eWxlLnBhZ2VCcmVha0luc2lkZSA9ICdhdm9pZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZXJSb3cuYXBwZW5kQ2hpbGQoZGl2aWRlclRkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGJvZHkuYXBwZW5kQ2hpbGQoZGl2aWRlclJvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGxhYmVsIHJvdyBmcm9tIG5leHQgYXBwLXZpZXctcmVuZGVyZXJzXHJcbiAgICBjb25zdCBsYWJlbFJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICBjb25zdCB0YWJsZVdyYXBwZXIgPSB0YWJsZS5jbG9zZXN0KCdhcHAtdmlldy1yZW5kZXJlcicpO1xyXG4gICAgbGV0IG5leHRTaWJsaW5nID0gdGFibGVXcmFwcGVyPy5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICBsZXQgYXBwUmVuZGVyZXJzOiBIVE1MRWxlbWVudFtdID0gW107XHJcblxyXG4gICAgd2hpbGUgKG5leHRTaWJsaW5nICYmIGFwcFJlbmRlcmVycy5sZW5ndGggPCBjb2x1bW5zKSB7XHJcbiAgICAgIGlmIChuZXh0U2libGluZy50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhcHAtdmlldy1yZW5kZXJlcicpIHtcclxuICAgICAgICBhcHBSZW5kZXJlcnMucHVzaChuZXh0U2libGluZyBhcyBIVE1MRWxlbWVudCk7XHJcbiAgICAgIH1cclxuICAgICAgbmV4dFNpYmxpbmcgPSBuZXh0U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFwcFJlbmRlcmVycy5sZW5ndGggPT09IGNvbHVtbnMpIHtcclxuICAgICAgYXBwUmVuZGVyZXJzLmZvckVhY2gocmVuZGVyZXIgPT4ge1xyXG4gICAgICAgIGNvbnN0IGxhYmVsID0gcmVuZGVyZXIucXVlcnlTZWxlY3RvcignbGFiZWwnKTtcclxuICAgICAgICBjb25zdCB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgdGQuaW5uZXJUZXh0ID0gbGFiZWw/LnRleHRDb250ZW50Py50cmltKCkgfHwgJyc7XHJcbiAgICAgICAgdGQuc3R5bGUucGFkZGluZyA9ICc2cHgnO1xyXG4gICAgICAgIHRkLnN0eWxlLmZvbnRTaXplID0gJzE0cHgnO1xyXG4gICAgICAgIHRkLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICAgICAgdGQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgdGQuc3R5bGUud2lkdGggPSBgJHs5NSAvIGNvbHVtbnN9JWA7XHJcbiAgICAgICAgdGQuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xyXG4gICAgICAgIGxhYmVsUm93LmFwcGVuZENoaWxkKHRkKTtcclxuICAgICAgICByZW5kZXJlci5yZW1vdmUoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBuZXdUYm9keS5hcHBlbmRDaGlsZChsYWJlbFJvdyk7XHJcbiAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbmV3VGFibGUuYXBwZW5kQ2hpbGQobmV3VGJvZHkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgXHJcblxyXG4gICAgXHJcbiAgICB0YWJsZS5wYXJlbnROb2RlPy5yZXBsYWNlQ2hpbGQobmV3VGFibGUsIHRhYmxlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlcGxhY2Ugb3JpZ2luYWwgdGFibGVcclxuICAgICAgICAgICAvLyB0YWJsZS5wYXJlbnROb2RlPy5yZXBsYWNlQ2hpbGQobmV3VGFibGUsIHRhYmxlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgdGFyZ2V0U2VjdGlvbjEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgICAnLmNlZS1zZWN0aW9uLnJvdy5zZWN0aW9uLTAtMC0xLTAtNC5zdGVwLTQ0OTc0LnRlbXBsYXRlLSdcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAodGFyZ2V0U2VjdGlvbjEpIHtcclxuICAgICAgICAgICAgKHRhcmdldFNlY3Rpb24xIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5tYXJnaW5Ub3AgPSAnMjRweCc7IC8vIG9yIGFueSB2YWx1ZSB5b3UgcHJlZmVyXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0YXJnZXRTZWN0aW9uMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAgICcuY2VlLXNlY3Rpb24ucm93LnNlY3Rpb24tMC0wLTEtNC0wLnN0ZXAtNDUyMzcudGVtcGxhdGUtJ1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICh0YXJnZXRTZWN0aW9uMikge1xyXG4gICAgICAgICAgICAodGFyZ2V0U2VjdGlvbjIgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLm1hcmdpblRvcCA9ICc1MHB4JzsgLy8gb3IgYW55IHZhbHVlIHlvdSBwcmVmZXJcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVtb3ZlQ2hlY2tib3hVbmRlcmxpbmUoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYXBwLXZpZXctcmVuZGVyZXIuYm9yZGVyLWJvdHRvbScpLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykpIHtcclxuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1ib3R0b20nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICBwcml2YXRlIGFkanVzdERvbGxlclByZXBlbmQoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tZmllbGQuaW5wdXQtZ3JvdXAnKS5mb3JFYWNoKGNvbnRhaW5lciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXBlbmRTcGFuID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC1ncm91cC1wcmVwZW5kIHNwYW4uaW5wdXQtZ3JvdXAtdGV4dCcpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByZXBlbmRTcGFuICYmIHByZXBlbmRTcGFuLnRleHRDb250ZW50LnRyaW0oKSA9PT0gJyQnICYmIGlucHV0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHByZXBlbmQgc3BhbidzIHBhcmVudCBkaXZcclxuICAgICAgICAgICAgICAgIHByZXBlbmRTcGFuLmNsb3Nlc3QoJy5pbnB1dC1ncm91cC1wcmVwZW5kJyk/LnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEZvcm1hdCB0aGUgaW5wdXQgdmFsdWUgd2l0aCBjb21tYXMgYW5kIDIgZGVjaW1hbCBwbGFjZXNcclxuICAgICAgICAgICAgICAgIGxldCByYXdWYWx1ZSA9IGlucHV0LnZhbHVlLnJlcGxhY2UoL1teXFxkLi1dL2csICcnKTsgLy8gUmVtb3ZlIG5vbi1udW1lcmljIGV4Y2VwdCAuIGFuZCAtXHJcbiAgICAgICAgICAgICAgICBsZXQgbnVtZXJpY1ZhbHVlID0gcGFyc2VGbG9hdChyYXdWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTihudW1lcmljVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkID0gYCQgJHtudW1lcmljVmFsdWUudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIsIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMiB9KX1gO1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gZm9ybWF0dGVkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBmYWxsYmFjayBpZiB2YWx1ZSBpcyBlbXB0eSBvciBpbnZhbGlkXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBgJCAwLjAwYDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICBcclxuICAgIHByaXZhdGUgYWRqdXN0UGVyY2VudGFnZVN1ZmZpeCgpOiB2b2lkIHtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1maWVsZC5pbnB1dC1ncm91cCcpLmZvckVhY2goY29udGFpbmVyID0+IHtcclxuICAgIGNvbnN0IGFwcGVuZFNwYW4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmlucHV0LWdyb3VwLWFwcGVuZCBzcGFuLmlucHV0LWdyb3VwLXRleHQnKTtcclxuICAgIGNvbnN0IGlucHV0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XHJcblxyXG4gICAgaWYgKGFwcGVuZFNwYW4gJiYgYXBwZW5kU3Bhbi50ZXh0Q29udGVudC50cmltKCkgPT09ICclJyAmJiBpbnB1dCkge1xyXG4gICAgICAvLyBSZW1vdmUgdGhlICUgc3BhbidzIHBhcmVudCBkaXYgKGlmIGV4aXN0cylcclxuICAgICAgY29uc3QgYXBwZW5kV3JhcHBlciA9IGFwcGVuZFNwYW4uY2xvc2VzdCgnLmlucHV0LWdyb3VwLWFwcGVuZCcpO1xyXG4gICAgICBpZiAoYXBwZW5kV3JhcHBlcikgYXBwZW5kV3JhcHBlci5yZW1vdmUoKTtcclxuXHJcbiAgICAgIC8vIENsZWFuIGFuZCB2YWxpZGF0ZSB2YWx1ZVxyXG4gICAgICBsZXQgcmF3VmFsdWUgPSBpbnB1dC52YWx1ZT8udG9TdHJpbmcoKS50cmltKCkgPz8gJyc7XHJcbiAgICAgIGxldCBzYW5pdGl6ZWQgPSByYXdWYWx1ZS5yZXBsYWNlKC9bXlxcZC4tXS9nLCAnJyk7XHJcblxyXG4gICAgICBsZXQgbnVtZXJpY1ZhbHVlID0gcGFyc2VGbG9hdChzYW5pdGl6ZWQpO1xyXG5cclxuICAgICAgaWYgKCFpc05hTihudW1lcmljVmFsdWUpICYmIGlzRmluaXRlKG51bWVyaWNWYWx1ZSkpIHtcclxuICAgICAgICBjb25zdCBmb3JtYXR0ZWQgPSBgJHtudW1lcmljVmFsdWUudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywge1xyXG4gICAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyLFxyXG4gICAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAyXHJcbiAgICAgICAgfSl9JWA7XHJcbiAgICAgICAgaW5wdXQudmFsdWUgPSBmb3JtYXR0ZWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gSWYgbm8gdmFsaWQgdmFsdWUgKGVtcHR5L251bGwvSW5maW5pdHkpLCBzaG93IFwiTi9BJVwiIHVuZGVybGluZWRcclxuICAgICAgICBpbnB1dC52YWx1ZSA9ICdOL0ElJztcclxuICAgICAgICBpbnB1dC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG4gICAgICBwcml2YXRlIGJvbGRBbmRDb2xvckluTGFiZWwoY29tYmluZWRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAgICAgICBcclxuICAgICAgICBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdhcHAtdmlldy1yZW5kZXJlcicpLmZvckVhY2gocmVuZGVyZXIgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpc0dyYXkgPSByZW5kZXJlci5jbGFzc0xpc3QuY29udGFpbnMoJ2NmLWxhYmVsLWdyYXknKTtcclxuICAgICAgICAgICAgY29uc3QgbGFiZWxzID0gcmVuZGVyZXIucXVlcnlTZWxlY3RvckFsbCgnbGFiZWwnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoaXMgcmVuZGVyZXIgY29udGFpbnMgcmVwZWF0YWJsZS1ibG9jay1yZW5kZXJlciBhbmQgYXBwLWNlZS10ZXh0ZmllbGQsIGNoYW5nZSBsYWJlbCBjb2xvclxyXG4gICAgICAgICAgICBjb25zdCBoYXNSZXBlYXRhYmxlQmxvY2sgPSAhIXJlbmRlcmVyLnF1ZXJ5U2VsZWN0b3IoJ3JlcGVhdGFibGUtYmxvY2stcmVuZGVyZXInKTtcclxuICAgICAgICAgICAgY29uc3QgaGFzVGV4dGZpZWxkID0gISFyZW5kZXJlci5xdWVyeVNlbGVjdG9yKCdhcHAtY2VlLXRleHRmaWVsZCcpO1xyXG5cclxuICAgICAgICAgICAgbGFiZWxzLmZvckVhY2gobGFiZWwgPT4ge1xyXG4gICAgICAgICAgICAvLyBTa2lwIGxhYmVscyBpbnNpZGUgdGFibGUgcm93c1xyXG4gICAgICAgICAgICBjb25zdCBpc0luVGFibGVSb3cgPSAhIWxhYmVsLmNsb3Nlc3QoJ3RyJyk7XHJcbiAgICAgICAgICAgIGlmIChpc0luVGFibGVSb3cpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIGxhYmVsIGlzIGluc2lkZSByZXBlYXRhYmxlLWJsb2NrLXJlbmRlcmVyIGFuZCBpcyBhbiBhcHAtY2VlLWxhYmVsIHdpdGggYm90aCBzdWItaGVhZGluZyBhbmQgbWFpbi1oZWFkaW5nLCBpZ25vcmVcclxuICAgICAgICAgICAgY29uc3QgaXNJblJlcGVhdGFibGVCbG9jayA9ICEhbGFiZWwuY2xvc2VzdCgncmVwZWF0YWJsZS1ibG9jay1yZW5kZXJlcicpO1xyXG4gICAgICAgICAgICBjb25zdCBpc0FwcENlZUxhYmVsID0gbGFiZWwuY2xvc2VzdCgnYXBwLWNlZS1sYWJlbCcpO1xyXG4gICAgICAgICAgICBjb25zdCBpc0FwcENlZVRleHRmaWVsZCA9IGxhYmVsLmNsb3Nlc3QoJ2FwcC1jZWUtdGV4dGZpZWxkJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc1N1YkhlYWRpbmcgPSBsYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3N1Yi1oZWFkaW5nJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc01haW5IZWFkaW5nID0gbGFiZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdtYWluLWhlYWRpbmcnKTtcclxuICAgICAgICAgICAgY29uc3Qgc2lnbmF0dXJlcyA9IGxhYmVsLmNsYXNzTGlzdC5jb250YWlucygnY2YtbGFiZWwtYm9yZGVyLXRvcCcpO1xyXG4gICAgICAgICAgICBjb25zdCBpc05vblJlcGVhdGFibGUgPSBsYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25vbnJlcGVhdGFibGUnKTtcclxuICAgICAgICAgICAgLy8gY29uc3QgYm9ycm93ZXJhY2tub3dsZWRnZW0gPSBsYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2JvcnJvd2VyYWNrbm93bGVkZ2VtJyk7XHJcbiAgICAgICAgICAgICAgICAvL2ZvciBiYyBsZXR0ZXIgb2YgZGlyZWN0aW9uIHNpZ25cclxuICAgICAgICAgICAgY29uc3QgdGV4dGdyYXkgPSBsYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2NmLXRleHQtZ3JheScpXHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dGdyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsLnN0eWxlLmNvbG9yID0gJyM4MDgwODAnO1xyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgaXNJblJlcGVhdGFibGVCbG9jayAmJlxyXG4gICAgICAgICAgICAgICAgaXNBcHBDZWVMYWJlbCAmJlxyXG4gICAgICAgICAgICAgICAgaGFzU3ViSGVhZGluZyB8fFxyXG4gICAgICAgICAgICAgICAgaGFzTWFpbkhlYWRpbmcgfHxcclxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZXNcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIGxhYmVsIGhhcyBub25yZXBlYXRhYmxlIGNsYXNzLCBzZXQgY29sb3IgdG8gZ3JleVxyXG4gICAgICAgICAgICBpZiAoaXNOb25SZXBlYXRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgICAgICAgICAgbGFiZWwuc3R5bGUuY29sb3IgPSAnIzgwODA4MCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gU3BlY2lhbCBjb2xvciBpZiBib3RoIHJlcGVhdGFibGUtYmxvY2stcmVuZGVyZXIgYW5kIGFwcC1jZWUtdGV4dGZpZWxkIGFyZSBwcmVzZW50XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGhhc1JlcGVhdGFibGVCbG9jayAmJiBoYXNUZXh0ZmllbGQpIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICAgICAgICAgICAgICBsYWJlbC5zdHlsZS5jb2xvciA9ICcjODA4MDgwJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0dyYXkpIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICAgICAgICAgICAgICBsYWJlbC5zdHlsZS5jb2xvciA9ICcjODA4MDgwJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICAgICAgICAgICAgICBsYWJlbC5zdHlsZS5jb2xvciA9ICcjMDAwJztcclxuICAgICAgICAgICAgICAgIGxhYmVsLnN0eWxlLm1hcmdpblRvcCA9ICcycHgnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpc0FwcENlZVRleHRmaWVsZCkge1xyXG4gICAgICAgICAgICAgICAgbGFiZWwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgICAgICAgICAgICAgIGxhYmVsLnN0eWxlLmNvbG9yID0gJyM4MDgwODAnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICBjb25zdCB2aXNpYmxlRG9jU2lnbkVsZW1lbnRzID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnZpc2libGVfZG9jX3NpZ24nKTtcclxuICAgICAgICB2aXNpYmxlRG9jU2lnbkVsZW1lbnRzLmZvckVhY2goKG5vZGU6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2xhYmVsJykge1xyXG4gICAgICAgICAgICAgICAgbm9kZS5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICBub2RlLnN0eWxlLnVzZXJTZWxlY3QgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGaW5kIGFsbCBsYWJlbHMgaW5zaWRlIHRoaXMgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWxzID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgbGFiZWxzLmZvckVhY2gobGFiZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsLnN0eWxlLmNvbG9yID0gJ3doaXRlJztcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbC5zdHlsZS51c2VyU2VsZWN0ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBwYXJ0ZGZlZXMgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICAgICAgICAnLmFwcC12aWV3LXJlbmRlcmVyLTEzXzQ1NDUzLTUsJytcclxuICAgICAgICAgICAgJy5jb21wLTc2NzY5MC5kaXNjbG9zdXJldG9ib3Jyb3dlci5zdWItaGVhZGluZywnK1xyXG4gICAgICAgICAgICAnLmFwcC12aWV3LXJlbmRlcmVyLTE2XzQ1MjY0LTUsJytcclxuICAgICAgICAgICAgJy5hcHAtdmlldy1yZW5kZXJlci0xMV80NTI0OC0xLCcrXHJcbiAgICAgICAgICAgICcuYXBwLXZpZXctcmVuZGVyZXItMTNfNDUyNDgtOCwnK1xyXG4gICAgICAgICAgICAnLmFwcC12aWV3LXJlbmRlcmVyLTZfNDUwNjgtNSwnK1xyXG4gICAgICAgICAgICAnLmNvbXAtMDQ3OTk4Lm1vcnRnYWdldGVybXNhbmRkZXRhLnN1Yi1oZWFkaW5nLCcrXHJcbiAgICAgICAgICAgICcuYm9ycm93ZXJhY2tub3dsZWRnZW0uY29tcC0zMTUzODAsJytcclxuICAgICAgICAgICAgJy5jb21wLTI3MjAzMC5wcm9wZXJ0eWRldGFpbHMuc3ViLWhlYWRpbmcsJytcclxuICAgICAgICAgICAgJy5ib3Jyb3dlcmFja25vd2xlZGdlbS5jb21wLTI3MDU3NSwnK1xyXG4gICAgICAgICAgICAnLmNvbXAtNTIyMDI0LnByb3BlcnR5ZGV0YWlscy5zdWItaGVhZGluZywnK1xyXG4gICAgICAgICAgICAnLmNvbXAtMDgwNTU2Lm1vcnRnYWdlZGlzY2xvc3VyZS5zdWItaGVhZGluZywnK1xyXG4gICAgICAgICAgICAnLmNvbXAtNjIyNTgyLm1vcnRnYWdlZGlzY2xvc3VyZS5zdWItaGVhZGluZywnK1xyXG4gICAgICAgICAgICAnLmJvcnJvd2VyYWNrbm93bGVkZ2VtLmNvbXAtNjUzMjkwLCcrXHJcbiAgICAgICAgICAgICcuY29tcC03MjUzNjMucGFydGN0aGVib3Jyb3dlci5zdWItaGVhZGluZywnK1xyXG4gICAgICAgICAgICAnLmNvbXAtNzY0MzQ5LmluaXRpYWxzLCcrXHJcbiAgICAgICAgICAgICcuY29tcC0yNTA5MjAuaW5pdGlhbHMsJytcclxuICAgICAgICAgICAgJy5jb21wLTY0NTc2OC5wYXJ0Ym1vcnRnYWdlcGFydGljdSwnK1xyXG4gICAgICAgICAgICAnLmFwcGxpY2FibGVmZWVzLmNvbXAtMDQ1ODgyLnN1Yi1oZWFkaW5nLCcrXHJcbiAgICAgICAgICAgICcuY29tcC0zMTA4MDMuZGlzY2xvc3VyZXMuc3ViLWhlYWRpbmcsJytcclxuICAgICAgICAgICAgJy5ib3Jyb3dlcmFja25vd2xlZGdlbS5jb21wLTE4MTQ5OCwnK1xyXG4gICAgICAgICAgICAnLmJvcnJvd2VyYWNrbm93bGVkZ2VtLmNvbXAtMzM0MzY2LCcrXHJcbiAgICAgICAgICAgICcuY29tcC02NjgwNjMucHJvcGVydHlkZXRhaWxzLnN1Yi1oZWFkaW5nLCcrXHJcbiAgICAgICAgICAgICcuY29tcC05Mzg2NTcubW9ydGdhZ2VkZXRhaWxzLCcrXHJcbiAgICAgICAgICAgICcuY29tcC00Mzg2NTMucHJvcGVydHlkZXRhaWxzLnN1Yi1oZWFkaW5nLCcrXHJcbiAgICAgICAgICAgICcuY29tcC03OTg5MzEubW9ydGdhZ2VwYXltZW50aW5mb3IsJytcclxuICAgICAgICAgICAgJy5jb21wLTI0NjkyNS5tb3J0Z2FnZXBheW1lbnRpbmZvciwnK1xyXG4gICAgICAgICAgICAnLmNvbXAtMTQ0MzQ3LnJhbmtvZm1vcnRnYWdlLnN1Yi1oZWFkaW5nLCcrXHJcbiAgICAgICAgICAgICcuY29tcC04MzM3MjMuaWNlcnRpZmljYXRpb24sJyArXHJcbiAgICAgICAgICAgICcuY29tcC00OTc1NzgubG9hbnRvdmFsdWVyYXRpb2FjY28uc3ViLWhlYWRpbmcsJyArXHJcbiAgICAgICAgICAgICcuY29tcC0zMDcwMjQuaGF0dGFjaGVkZG9jdW1lbnRzLCcgK1xyXG4gICAgICAgICAgICAnLmNvbXAtOTk5MzkxLmxvYW50b3ZhbHVlcmF0aW9hY2NvLCcgK1xyXG4gICAgICAgICAgICAvLyAnLmJvcnJvd2VyYWNrbm93bGVkZ2VtLmNvbXAtNzIzMDYxLCcgK1xyXG4gICAgICAgICAgICAnLmNvbXAtODA3NDk4LnBhcnRibW9ydGdhZ2VwYXJ0aWN1LCcgK1xyXG4gICAgICAgICAgICAnLmNvbXAtMjI0NTQ0LnBhcnRjdGhlYm9ycm93ZXIsJyArXHJcbiAgICAgICAgICAgICcuY29tcC0zNDMyNTUubGVmdC1zcGFjZS5wYXJ0Ym1vcnRnYWdlcGFydGljdSwnICtcclxuICAgICAgICAgICAgJy5jb21wLTUyOTk5Mi5sZWZ0LXNwYWNlLnBhcnRkZmVlcywnICtcclxuICAgICAgICAgICAgJy5jb21wLTczNjE4NC5pbXBvcnRhbnR0aGVtb3J0Z2FnZSwnICtcclxuICAgICAgICAgICAgJy5jb21wLTExNDc3OC5wYXJ0ZGZlZXMsJyArXHJcbiAgICAgICAgICAgICcuY29tcC0wNzA3MDMucGFydGRmZWVzLCcgK1xyXG4gICAgICAgICAgICAnLmNvbXAtODE5ODYxLnBhcnRkZmVlcy5zdWItaGVhZGluZywnICtcclxuICAgICAgICAgICAgJy5jb21wLTQxNzEyNS5sZWZ0LXNwYWNlLnBhcnRibW9ydGdhZ2VwYXJ0aWN1LCcgK1xyXG4gICAgICAgICAgICAnLmNvbXAtMDYxODE3Lm1vcnRnYWdlZGV0YWlscy5zdWItaGVhZGluZywnICtcclxuICAgICAgICAgICAgJy5jb21wLTE0NDk2Mi5wcm9wZXJ0eWRldGFpbHMuc3ViLWhlYWRpbmcsJyArXHJcbiAgICAgICAgICAgICcuY29tcC04NTM2NzIuc2VjdGlvbmRlY2xhcmF0aW9uYnksJyArXHJcbiAgICAgICAgICAgICcuYWNrbm93bGVkZ2VtZW50LmNvbXAtODk2MjQ0LCcgK1xyXG4gICAgICAgICAgICAnLmNvbXAtMjIxNjM0LmxlZnQtc3BhY2UucGFydGJtb3J0Z2FnZXBhcnRpY3UsJyArXHJcbiAgICAgICAgICAgICcuY29tcC00MTUwOTMubGVmdC1zcGFjZS5wYXJ0Ym1vcnRnYWdlcGFydGljdSwnICtcclxuICAgICAgICAgICAgJy5jb21wLTc1MjIzOC5pbnRlcmVzdGlucmVjb21tZW5kZSdcclxuICAgICAgICApO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwicGFydGRmZWVzXCIsIHBhcnRkZmVlcyk7XHJcbiAgICAgICAgcGFydGRmZWVzLmZvckVhY2goKG5vZGU6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG5vZGUuc3R5bGUubWFyZ2luVG9wID0gJzU1cHgnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICBjb25zdCBibGFja0NvbG9yRm9yTm9ucmVwZWF0YWJsZSA9IGNvbWJpbmVkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21wLTk5NzQxMiwuY29tcC0yMjYwNTUsLm51bWJlcl9saXN0Jyk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJibGFja0NvbG9yRm9yTm9ucmVwZWF0YWJsZVwiLCBibGFja0NvbG9yRm9yTm9ucmVwZWF0YWJsZSk7XHJcbiAgICAgICAgYmxhY2tDb2xvckZvck5vbnJlcGVhdGFibGUuZm9yRWFjaCgobm9kZTogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgbm9kZS5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgICAgICBub2RlLnN0eWxlLmNvbG9yID0gJyMwMDAnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICAgIGNvbnN0IHBlcnNvbmFsYW5kY29uZmlkZW50ID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmNvbXAtNjMxODcwLC5jb21wLTA1NDc1NScpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwicGVyc29uYWxhbmRjb25maWRlbnRcIiwgcGVyc29uYWxhbmRjb25maWRlbnQpO1xyXG4gICAgICAgIHBlcnNvbmFsYW5kY29uZmlkZW50LmZvckVhY2goKG5vZGU6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG5vZGUuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgICAgICAgICAgbm9kZS5zdHlsZS5jb2xvciA9ICcjODA4MDgwJztcclxuICAgICAgICB9KTsgXHJcbiAgICAgICAgIGNvbnN0IHJhbmtvZm1vcnRnYWdlID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgICAgICAgJy5jb21wLTcwOTM2OC5tb3J0Z2FnZWRldGFpbHMsJytcclxuICAgICAgICAgICAgJy5ib3Jyb3dlcmFja25vd2xlZGdlbS5jb21wLTcxNTQ5MywnK1xyXG4gICAgICAgICAgICAnLmJvcnJvd2VyYWNrbm93bGVkZ2VtLmNvbXAtNzk1NTEyLCcrXHJcbiAgICAgICAgICAgICcuY29tcC0wNjEwMjYucGFydGRmZWVzLCcrXHJcbiAgICAgICAgICAgICcuY29tcC03OTAxMzQucGFydGRmZWVzLCcrXHJcbiAgICAgICAgICAgICcuYXBwLXZpZXctcmVuZGVyZXItN180NTI4MC0yMSwnK1xyXG4gICAgICAgICAgICAvLyAnLmNvbXAtNjU5NzUxLmRvd25wYXltZW50c291cmNlcy5zdWItaGVhZGluZywnK1xyXG4gICAgICAgICAgICAvLyAnLmZpZWxkLXdyYXBwZXIuY29tcC0wMDkzNTkzMywnK1xyXG4gICAgICAgICAgICAvLyAnLmZpZWxkLXdyYXBwZXIuY29tcC03NDgzNzIuZGlzY2xvc3VyZWFuZGNyZWRpdGEsJytcclxuICAgICAgICAgICAgLy8gJy5hcHAtdmlldy1yZW5kZXJlci01XzQ1MjgwLTQsJytcclxuICAgICAgICAgICAgJy5jb21wLTEwMzgyMi5tb3J0Z2FnZWRldGFpbHMsJytcclxuICAgICAgICAgICAgJy5jb21wLTE0NDM0Ny5yYW5rb2Ztb3J0Z2FnZS5zdWItaGVhZGluZywnK1xyXG4gICAgICAgICAgICAnLmJvcnJvd2VyYWNrbm93bGVkZ2VtLmNvbXAtOTExODI2JyBcclxuICAgICAgICApO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwicmFua29mbW9ydGdhZ2VcIiwgcmFua29mbW9ydGdhZ2UpO1xyXG4gICAgICAgIHJhbmtvZm1vcnRnYWdlLmZvckVhY2goKG5vZGU6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG5vZGUuc3R5bGUubWFyZ2luVG9wID0gJzVweCc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgIGNvbnN0IGVhcmx5ZW5kdG90aGlzYWdyZWVtID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm51bWJlcl9saXN0X2lubmVyIHNwYW4nKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImxhYmVscy0tXCIsIGVhcmx5ZW5kdG90aGlzYWdyZWVtKTtcclxuICAgICAgICBlYXJseWVuZHRvdGhpc2FncmVlbS5mb3JFYWNoKChzcGFuOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBBZGQgbWFyZ2luLXJpZ2h0IHRvIHRoZSBzcGFuIGZvciBzcGFjaW5nIGFmdGVyIHRoZSBcImQpXCIsIFwiYilcIiwgZXRjLlxyXG4gICAgICAgICAgICAvLyBzcGFuLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzRweCc7IC8vIGFkanVzdCBweCBhcyBuZWVkZWRcclxuICAgICAgICAgICAgc3Bhbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XHJcbiAgICAgICAgICAgIHNwYW4uc3R5bGUud2lkdGggPSAnMmVtJztcclxuICAgICAgICAgICAgc3Bhbi5zdHlsZS50ZXh0QWxpZ24gPSAncmlnaHQnO1xyXG4gICAgICAgICAgICBzcGFuLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNWVtJztcclxuICAgICAgICAgICAgc3Bhbi5zdHlsZS5mbGV4U2hyaW5rID0gJzAnO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBudW1iZXJfbGlzdF9pbm5lciA9IGNvbWJpbmVkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lYXJseWVuZHRvdGhpc2FncmVlbSwubnVtYmVyX2xpc3RfaW5uZXInKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIm51bWJlcl9saXN0X2lubmVyLS1cIiwgbnVtYmVyX2xpc3RfaW5uZXIpO1xyXG4gICAgICAgIG51bWJlcl9saXN0X2lubmVyLmZvckVhY2goKHNwYW46IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHNwYW4uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgICAgc3Bhbi5zdHlsZS5hbGlnbkl0ZW1zID0gJ2ZsZXgtc3RhcnQnOyAgICAgICAgICAgLyogQWxpZ25zIHRoZSB0ZXh0IG5pY2VseSBhdCB0aGUgdG9wICovXHJcbiAgICAgICAgICAgIC8vIHNwYW4uc3R5bGUubWFyZ2luQm90dG9tID0gJzhweCc7XHJcbiAgICAgICAgfSk7IFxyXG4gICAgICAgICBjb25zdCBib3Jyb3dlcmFja25vd2xlZGdlbSA9IGNvbWJpbmVkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgICAgICAgICcuYm9ycm93ZXJhY2tub3dsZWRnZW0uY29tcC03MjMwNjEsJytcclxuICAgICAgICAgICAgJy5ib3Jyb3dlcmFja25vd2xlZGdlbS5jb21wLTkxMTgyNiwnK1xyXG4gICAgICAgICAgICAnLmJvcnJvd2VyYWNrbm93bGVkZ2VtLmNvbXAtNjUzMjkwLCcrXHJcbiAgICAgICAgICAgICcuYm9ycm93ZXJhY2tub3dsZWRnZW0uY29tcC04ODI2MzYsJytcclxuICAgICAgICAgICAgJy5ib3Jyb3dlcmFja25vd2xlZGdlbS5jb21wLTE4MTQ5OCwnK1xyXG4gICAgICAgICAgICAnLmJvcnJvd2VyYWNrbm93bGVkZ2VtLmNvbXAtMzM0MzY2LCcrXHJcbiAgICAgICAgICAgICcuYm9ycm93ZXJhY2tub3dsZWRnZW0uY29tcC0yMjkwNTksJytcclxuICAgICAgICAgICAgJy5ib3Jyb3dlcmFja25vd2xlZGdlbS5jb21wLTg2MDU2NywnK1xyXG4gICAgICAgICAgICAnLmNvbXAtODQ5OTg1Lm1vcnRnYWdlZGV0YWlscywnK1xyXG4gICAgICAgICAgICAnLmNvbXAtODk4ODI4LnBhcnRmY2VydGlmaWNhdGlvbiwnK1xyXG4gICAgICAgICAgICAnLmJvcnJvd2VyYWNrbm93bGVkZ2VtLmNvbXAtNzIzMDYxLCcrXHJcbiAgICAgICAgICAgICcuYm9ycm93ZXJhY2tub3dsZWRnZW0uY29tcC0yMjkwNTksJytcclxuICAgICAgICAgICAgJ3VuaXF1ZV9maWVsZF8wNTI0ODcsJytcclxuICAgICAgICAgICAgJy51bmlxdWVfZmllbGRfNjgzNjQ1J1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJib3Jyb3dlcmFja25vd2xlZGdlbVwiLCBib3Jyb3dlcmFja25vd2xlZGdlbSk7XHJcbiAgICAgICAgYm9ycm93ZXJhY2tub3dsZWRnZW0uZm9yRWFjaCgobm9kZTogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgbm9kZS5zdHlsZS5tYXJnaW5Ub3AgPSAnNjVweCc7Ly8gdGVzdFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHNlY3Rpb25JZHNUb09mZnNldCA9IFsnMTZfNDU0MjMnLCAnMTdfNDU0MjMnLCAnMThfNDU0MjMnLCAnMjBfNDU0MjMnLCAnMjFfNDU0MjMnXTtcclxuXHJcbiAgICAgICAgICBzZWN0aW9uSWRzVG9PZmZzZXQuZm9yRWFjaChpZCA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgICAgICAgICAgICBpZiAoc2VjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICBzZWN0aW9uLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBjb25zdCBzZWN0aW9uSWRzVG9PZmZzZXQxID0gWyc2XzQ1MjE5JywgJzExXzQ1MDMyJ107XHJcblxyXG4gICAgICAgICAgc2VjdGlvbklkc1RvT2Zmc2V0MS5mb3JFYWNoKGlkID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgICAgICAgIGlmIChzZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgIHNlY3Rpb24uc3R5bGUubWFyZ2luVG9wID0gJzUwcHgnO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHN1YmplY3RQcm9wZXJ0eUhlYWRpbmcgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICAgICAgICAgICcuY29tcC0wOTAxNzEuc3ViLWhlYWRpbmcsJyArXHJcbiAgICAgICAgICAgICAgJy5jb21wLTM5MTEwNS5tb3J0Z2FnZXN1bW1hcnkuc3ViLWhlYWRpbmcsJyArXHJcbiAgICAgICAgICAgICAgJy5jb21wLTIyODIxMy5tb3J0Z2FnZXN1bW1hcnkuc3ViLWhlYWRpbmcsJyArXHJcbiAgICAgICAgICAgICAgJy5hcHAtdmlldy1yZW5kZXJlci03XzQ2NTc4LTAnXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiYm9ycm93ZXJhY2tub3dsZWRnZW1cIiwgYm9ycm93ZXJhY2tub3dsZWRnZW0pO1xyXG4gICAgICAgICAgc3ViamVjdFByb3BlcnR5SGVhZGluZy5mb3JFYWNoKChub2RlOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgIG5vZGUuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnOy8vIHRlc3RcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zdCB0YWJsZUhlYWRlclNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnN180NjU3OCcpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAgICAgaWYgKHRhYmxlSGVhZGVyU2VjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gIGNvbnNvbGUubG9nKFwidGFibGVIZWFkZXJTZWN0aW9uIGZvdW5kOiBcIiwgdGFibGVIZWFkZXJTZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgdGFibGVIZWFkZXJTZWN0aW9uLnN0eWxlLm1hcmdpblRvcCA9ICc1MHB4JztcclxuICAgICAgICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW1vdmVBZGRCdXR0b24oY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIC8vIFNlYXJjaCB3aXRoaW4gdGhlIGNvbnRhaW5lciBlbGVtZW50LCBub3QgdGhlIGVudGlyZSBkb2N1bWVudFxyXG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbnMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW2FyaWEtbGFiZWw9XCJDbGljayBvbiBBZGRcIl0nKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBIaWRlIGFsbCBtYXRjaGluZyBidXR0b25zXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRCdXR0b25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGFkZEJ1dHRvbnNbaV0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChhZGRCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgIC8vIFRyeSBtdWx0aXBsZSBhcHByb2FjaGVzIHRvIGVuc3VyZSBpdCdzIGhpZGRlblxyXG4gICAgICAgICAgICAgICAgYWRkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICBhZGRCdXR0b24uc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgICAgICAgICAgICAgYWRkQnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMCc7XHJcbiAgICAgICAgICAgICAgICBhZGRCdXR0b24uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICAgICAgICAgICAgYWRkQnV0dG9uLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIEFsc28gdHJ5IHJlbW92aW5nIGl0IGNvbXBsZXRlbHlcclxuICAgICAgICAgICAgICAgIGFkZEJ1dHRvbi5wYXJlbnROb2RlPy5yZW1vdmVDaGlsZChhZGRCdXR0b24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFsc28gdHJ5IHdpdGggb3RoZXIgcG90ZW50aWFsIHNlbGVjdG9yc1xyXG4gICAgICAgIGNvbnN0IGFsdGVybmF0aXZlQnV0dG9ucyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYWRkLWJ1dHRvbiwgYnV0dG9uLmFkZCwgW2NsYXNzKj1cImFkZC1idG5cIl0nKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsdGVybmF0aXZlQnV0dG9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBidG4gPSBhbHRlcm5hdGl2ZUJ1dHRvbnNbaV0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChidG4pIHtcclxuICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgYnRuLnBhcmVudE5vZGU/LnJlbW92ZUNoaWxkKGJ0bik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaXhTdGVwTGFiZWxPdmVybGFwcGluZyhjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaW5uZXJOdW1iZXJsaXN0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZi1mb3JtLXN0ZXAgbGFiZWwnKTtcclxuXHJcbiAgICAgICAgICAgIGlubmVyTnVtYmVybGlzdC5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEFwcGx5IGZvbnQgYW5kIGJhc2ljIHN0eWxlc1xyXG4gICAgICAgICAgICAgICAgZWwuc3R5bGUuZm9udEZhbWlseSA9IFwiUXVpY2tzYW5kXCI7XHJcbiAgICAgICAgICAgICAgICBlbC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjRweFwiOyAvLyBTcGFjZSBiZXR3ZWVuIGxpbmVzIGlmIHRoZXkncmUgc3RhY2tlZCB2ZXJ0aWNhbGx5XHJcbiAgICAgICAgICAgIH0pOyAgICAgICAgXHJcbiAgICB9XHJcbiAgICAvLyBIYW5kbGVyIGlubmVyIGJ1bGxldCBwb2ludHMgb3ZlcmxhcHBpbmcgZml4ZWRcclxuICAgIHByaXZhdGUgZml4T3ZlcmxhcHBpbmdCdWxsZXRQb2ludHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGlubmVyTnVtYmVybGlzdCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubnVtYmVyX2xpc3RfaW5uZXInKTtcclxuXHJcbiAgICAgICAgICAgIGlubmVyTnVtYmVybGlzdC5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEFwcGx5IGZvbnQgYW5kIGJhc2ljIHN0eWxlc1xyXG4gICAgICAgICAgICAgICAgZWwuc3R5bGUuZm9udEZhbWlseSA9IFwiUXVpY2tzYW5kXCI7XHJcbiAgICAgICAgICAgICAgICBlbC5zdHlsZS5jb2xvciA9IFwiIzAwMFwiO1xyXG4gICAgICAgICAgICAgICAgZWwuc3R5bGUuZm9udFNpemUgPSBcIjE0cHhcIjtcclxuICAgICAgICAgICAgICAgIGVsLnN0eWxlLmxpbmVIZWlnaHQgPSBcIjEuNFwiOyAvLyBJbmNyZWFzZWQgZm9yIGJldHRlciBsaW5lIHNwYWNpbmdcclxuICAgICAgICAgICAgICAgIGVsLnN0eWxlLmxldHRlclNwYWNpbmcgPSAnMC4zcHgnO1xyXG4gICAgICAgICAgICAgICAgZWwuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCIwcHhcIjsgLy8gUmVzZXQgcGFkZGluZ1xyXG4gICAgICAgICAgICAgICAgZWwuc3R5bGUubWFyZ2luVG9wID0gXCI0cHhcIjsgLy8gU3BhY2UgYmV0d2VlbiBsaW5lcyBpZiB0aGV5J3JlIHN0YWNrZWQgdmVydGljYWxseVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIE9wdGlvbmFsOiBBZGp1c3QgdmVydGljYWwgc3BhY2luZyB3aXRoIG1hcmdpblxyXG4gICAgICAgICAgICAgICAgZWwuc3R5bGUubWFyZ2luQm90dG9tID0gXCIxMHB4XCI7IC8vIFNwYWNlIGJldHdlZW4gbGluZXMgaWYgdGhleSdyZSBzdGFja2VkIHZlcnRpY2FsbHlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4vLyBBZGQgdGhpcyBmdW5jdGlvbiB0byBoYW5kbGUgbmVzdGVkIGxhYmVsIHN0cnVjdHVyZXNcclxucHJpdmF0ZSBmaXhOZXN0ZWRMYWJlbFN0cnVjdHVyZXMoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBUYXJnZXQgbGFiZWxzIHdpdGggc3BhbnMgaW5zaWRlIHRoZW0sIGVzcGVjaWFsbHkgdGhlIHRlcm1vZnRoZWFncmVlbWVudCBjbGFzc1xyXG4gICAgICAgIGNvbnN0IGNvbXBsZXhMYWJlbHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnbGFiZWwudGVybW9mdGhlYWdyZWVtZW50LCBsYWJlbC5udW1iZXJfbGlzdCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbXBsZXhMYWJlbHMuZm9yRWFjaCgobGFiZWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEdldCB0aGUgZnVsbCB0ZXh0IGNvbnRlbnRcclxuICAgICAgICAgICAgY29uc3QgZnVsbFRleHQgPSBsYWJlbC50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHNpbXBsZXIgZWxlbWVudCB0byByZXBsYWNlIHRoZSBjb21wbGV4IHN0cnVjdHVyZVxyXG4gICAgICAgICAgICBjb25zdCBzaW1wbGlmaWVkRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBzaW1wbGlmaWVkRWxlbWVudC50ZXh0Q29udGVudCA9IGZ1bGxUZXh0O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ29weSBzdHlsZXMgZnJvbSB0aGUgb3JpZ2luYWwgbGFiZWxcclxuICAgICAgICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGxhYmVsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFwcGx5IGtleSBzdHlsZXMgdG8gdGhlIG5ldyBlbGVtZW50XHJcbiAgICAgICAgICAgIHNpbXBsaWZpZWRFbGVtZW50LnN0eWxlLmZvbnRGYW1pbHkgPSAnUXVpY2tzYW5kJztcclxuICAgICAgICAgICAgc2ltcGxpZmllZEVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBjb21wdXRlZFN0eWxlLmZvbnRTaXplO1xyXG4gICAgICAgICAgICBzaW1wbGlmaWVkRWxlbWVudC5zdHlsZS5mb250V2VpZ2h0ID0gbGFiZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd0ZXJtb2Z0aGVhZ3JlZW1lbnQnKSA/ICdib2xkJyA6ICdub3JtYWwnO1xyXG4gICAgICAgICAgICBzaW1wbGlmaWVkRWxlbWVudC5zdHlsZS5jb2xvciA9ICcjMDAwJztcclxuICAgICAgICAgICAgc2ltcGxpZmllZEVsZW1lbnQuc3R5bGUubWFyZ2luID0gJzEwcHggMCc7XHJcbiAgICAgICAgICAgIHNpbXBsaWZpZWRFbGVtZW50LnN0eWxlLnBhZGRpbmcgPSAnMCc7XHJcbiAgICAgICAgICAgIHNpbXBsaWZpZWRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgICBzaW1wbGlmaWVkRWxlbWVudC5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuNSc7XHJcbiAgICAgICAgICAgIHNpbXBsaWZpZWRFbGVtZW50LnN0eWxlLmxldHRlclNwYWNpbmcgPSAnMC40cHgnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQWRkIGNsYXNzZXMgZm9yIGlkZW50aWZpY2F0aW9uIGJ1dCByZW1vdmUgQW5ndWxhciBhdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgIGxhYmVsLmNsYXNzTGlzdC5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzaW1wbGlmaWVkRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgb3JpZ2luYWwgY29tcGxleCBlbGVtZW50IHdpdGggb3VyIHNpbXBsaWZpZWQgdmVyc2lvblxyXG4gICAgICAgICAgICBpZiAobGFiZWwucGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgbGFiZWwucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoc2ltcGxpZmllZEVsZW1lbnQsIGxhYmVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFsc28gbG9vayBmb3IgYW55IGVsZW1lbnRzIHdpdGggbnVtYmVyX2xpc3QgY2xhc3NcclxuICAgICAgICBjb25zdCBudW1iZXJMaXN0SXRlbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm51bWJlcl9saXN0Jyk7XHJcbiAgICAgICAgbnVtYmVyTGlzdEl0ZW1zLmZvckVhY2goKGl0ZW06IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtLnRhZ05hbWUgIT09ICdESVYnKSB7IC8vIFNraXAgaWYgd2UgYWxyZWFkeSBwcm9jZXNzZWQgaXQgYWJvdmVcclxuICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgbnVtYmVyIGFuZCBjb250ZW50XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcGFuRWxlbWVudCA9IGl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbnVtYmVyID0gc3BhbkVsZW1lbnQgPyBzcGFuRWxlbWVudC50ZXh0Q29udGVudCA6ICcnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHNwYW4gdG8gZ2V0IGp1c3QgdGhlIGNvbnRlbnRcclxuICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gaXRlbS50ZXh0Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgICAgIGlmIChudW1iZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG51bWJlciwgJycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBzaW1wbGlmaWVkIHZlcnNpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbXBsaWZpZWRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBzaW1wbGlmaWVkSXRlbS50ZXh0Q29udGVudCA9IChudW1iZXIgfHwgJycpICsgY29udGVudDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ29weSBzdHlsZXMgYW5kIGNsYXNzZXNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShpdGVtKTtcclxuICAgICAgICAgICAgICAgIHNpbXBsaWZpZWRJdGVtLnN0eWxlLmZvbnRGYW1pbHkgPSAnUXVpY2tzYW5kJztcclxuICAgICAgICAgICAgICAgIHNpbXBsaWZpZWRJdGVtLnN0eWxlLmZvbnRTaXplID0gY29tcHV0ZWRTdHlsZS5mb250U2l6ZTtcclxuICAgICAgICAgICAgICAgIHNpbXBsaWZpZWRJdGVtLnN0eWxlLmZvbnRXZWlnaHQgPSBpdGVtLmNsYXNzTGlzdC5jb250YWlucygndGVybW9mdGhlYWdyZWVtZW50JykgPyAnYm9sZCcgOiAnbm9ybWFsJztcclxuICAgICAgICAgICAgICAgIHNpbXBsaWZpZWRJdGVtLnN0eWxlLmNvbG9yID0gJyMwMDAnO1xyXG4gICAgICAgICAgICAgICAgc2ltcGxpZmllZEl0ZW0uc3R5bGUubWFyZ2luID0gJzhweCAwJztcclxuICAgICAgICAgICAgICAgIHNpbXBsaWZpZWRJdGVtLnN0eWxlLnBhZGRpbmcgPSAnMCc7XHJcbiAgICAgICAgICAgICAgICBzaW1wbGlmaWVkSXRlbS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ29weSBjbGFzc2VzXHJcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2ltcGxpZmllZEl0ZW0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIG9yaWdpbmFsXHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5wYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChzaW1wbGlmaWVkSXRlbSwgaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZml4aW5nIG5lc3RlZCBsYWJlbCBzdHJ1Y3R1cmVzOicsIGVycm9yKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbiAgICBmaW5kTGFiZWxUZXh0KGlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudCk6IHN0cmluZyB7XHJcbiAgICAgICAgLy8gRmlyc3QgdHJ5IHRvIGZpbmQgYSBsYWJlbCB3aXRoIGEgJ2ZvcicgYXR0cmlidXRlIG1hdGNoaW5nIHRoaXMgaW5wdXQncyBpZFxyXG4gICAgICAgIGlmIChpbnB1dEVsZW1lbnQuaWQpIHtcclxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBsYWJlbFtmb3I9XCIke2lucHV0RWxlbWVudC5pZH1cIl1gKTtcclxuICAgICAgICAgICAgaWYgKGxhYmVsKSByZXR1cm4gbGFiZWwudGV4dENvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE5leHQgY2hlY2sgaWYgdGhlIGlucHV0IGlzIGluc2lkZSBhIGxhYmVsXHJcbiAgICAgICAgbGV0IHBhcmVudCA9IGlucHV0RWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIHdoaWxlIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgaWYgKHBhcmVudC50YWdOYW1lID09PSAnTEFCRUwnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGV4dCBjb250ZW50IGJ1dCBleGNsdWRlIHRoZSBpbnB1dCdzIHZhbHVlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9uZSA9IHBhcmVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBjbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gaW5wdXQucGFyZW50Tm9kZT8ucmVtb3ZlQ2hpbGQoaW5wdXQpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjbG9uZS50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnQgPT09IGRvY3VtZW50LmJvZHkpIGJyZWFrO1xyXG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSWYgbm8gbGFiZWwgZm91bmQsIHRyeSBsb29raW5nIGZvciBzaWJsaW5nIHRleHQgb3IgbmVpZ2hib3JpbmcgbGFiZWxzXHJcbiAgICAgICAgbGV0IHNpYmxpbmcgPSBpbnB1dEVsZW1lbnQubmV4dFNpYmxpbmc7XHJcbiAgICAgICAgd2hpbGUgKHNpYmxpbmcpIHtcclxuICAgICAgICAgICAgaWYgKHNpYmxpbmcubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmIHNpYmxpbmcudGV4dENvbnRlbnQ/LnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpYmxpbmcudGV4dENvbnRlbnQudHJpbSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzaWJsaW5nLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSAmJiBcclxuICAgICAgICAgICAgICAgIChzaWJsaW5nIGFzIEVsZW1lbnQpLnRhZ05hbWUgPT09ICdMQUJFTCcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoc2libGluZyBhcyBFbGVtZW50KS50ZXh0Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzaWJsaW5nID0gc2libGluZy5uZXh0U2libGluZztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSWYgYWxsIGVsc2UgZmFpbHMsIHJldHVybiBlbXB0eSBzdHJpbmcgb3IgdGhlIG5hbWUgYXR0cmlidXRlXHJcbiAgICAgICAgcmV0dXJuIGlucHV0RWxlbWVudC5uYW1lIHx8ICcnO1xyXG4gICAgfSAgIFxyXG4gICAgICAgIFxyXG5cclxuICAgIGdldEN1cnJlbnRUaW1lc3RhbXAoZm9ybWF0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgcGFkID0gKG46IG51bWJlcikgPT4gbi50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJlcGxhY2VtZW50czogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcclxuICAgICAgICAgIHl5eXk6IG5vdy5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICBtbTogcGFkKG5vdy5nZXRNb250aCgpICsgMSksXHJcbiAgICAgICAgICBkZDogcGFkKG5vdy5nZXREYXRlKCkpLFxyXG4gICAgICAgICAgaGg6IHBhZChub3cuZ2V0SG91cnMoKSksICAgICAgICAvLyB1c2UgaGggaW5zdGVhZCBvZiBISFxyXG4gICAgICAgICAgbWk6IHBhZChub3cuZ2V0TWludXRlcygpKSwgICAgIC8vIHVzaW5nIGBtaWAgZm9yIG1pbnV0ZXNcclxuICAgICAgICAgIHNzOiBwYWQobm93LmdldFNlY29uZHMoKSlcclxuICAgICAgICB9O1xyXG4gICAgICBcclxuICAgICAgICAvLyBOb3JtYWxpemUgYWxsIG1hdGNoZXMgdG8gbG93ZXJjYXNlIGFuZCByZXBsYWNlIHVzaW5nIHRoZSBhYm92ZSBrZXlzXHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdC5yZXBsYWNlKC9ZWVlZfE1NfEREfEhIfE1JfFNTL2dpLCAobWF0Y2gpID0+IHtcclxuICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBtYXRjaC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgc3dpdGNoIChub3JtYWxpemVkKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3l5eXknOiByZXR1cm4gcmVwbGFjZW1lbnRzLnl5eXk7XHJcbiAgICAgICAgICAgIGNhc2UgJ21tJzogcmV0dXJuIHJlcGxhY2VtZW50cy5tbTtcclxuICAgICAgICAgICAgY2FzZSAnZGQnOiByZXR1cm4gcmVwbGFjZW1lbnRzLmRkO1xyXG4gICAgICAgICAgICBjYXNlICdoaCc6IHJldHVybiByZXBsYWNlbWVudHMuaGg7XHJcbiAgICAgICAgICAgIGNhc2UgJ21pJzogcmV0dXJuIHJlcGxhY2VtZW50cy5taTtcclxuICAgICAgICAgICAgY2FzZSAnc3MnOiByZXR1cm4gcmVwbGFjZW1lbnRzLnNzO1xyXG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gbWF0Y2g7ICAgICAgICBcclxuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIFxyXG4gICAgICBcclxuICAgICAgXHJcblxyXG4gICAgLy8gRnVuY3Rpb24gdG8gaW5zZXJ0IHRpbWVzdGFtcCBiZWZvcmUgZmlsZSBleHRlbnNpb25cclxuICAgIGdldFRpbWVzdGFtcGVkRmlsZW5hbWUoZmlsZW5hbWU6IHN0cmluZywgZm9ybWF0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICghZm9ybWF0KSByZXR1cm4gZmlsZW5hbWU7XHJcbiAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRoaXMuZ2V0Q3VycmVudFRpbWVzdGFtcChmb3JtYXQpO1xyXG4gICAgICAgIGNvbnN0IGxhc3REb3RJbmRleCA9IGZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJyk7XHJcbiAgICAgIFxyXG4gICAgICAgIGlmIChsYXN0RG90SW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICByZXR1cm4gYCR7ZmlsZW5hbWV9XyR7dGltZXN0YW1wfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICBcclxuICAgICAgICBjb25zdCBuYW1lUGFydCA9IGZpbGVuYW1lLnN1YnN0cmluZygwLCBsYXN0RG90SW5kZXgpO1xyXG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGVuYW1lLnN1YnN0cmluZyhsYXN0RG90SW5kZXgpO1xyXG4gICAgICAgIHJldHVybiBgJHtuYW1lUGFydH1fJHt0aW1lc3RhbXB9JHtleHRlbnNpb259YDtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICBwcmludEFuZERvd25sb2FkKGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5ldmVudEFkZGl0aW9uYWxQYXJhbXMgPSB0aGlzLmdldEFkZGl0aW9uYWxQYXJhbWV0ZXIoKTtcclxuICAgICAgICBjb25zdCBwcmludEZvcm1hdCA9IHRoaXMuZXZlbnRBZGRpdGlvbmFsUGFyYW1zWydDRUVfUFJJTlRfRk9STUFUJ10gPyB0aGlzLmV2ZW50QWRkaXRpb25hbFBhcmFtc1snQ0VFX1BSSU5UX0ZPUk1BVCddLnRvTG93ZXJDYXNlKCkgOiBcInBkZlwiXHJcblxyXG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuZXZlbnRBZGRpdGlvbmFsUGFyYW1zWydDRUVfUFJJTlRfU09VUkNFJ107IC8vIFwiMF8xMjIxfHwxXzEyMjFcIlxyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gc291cmNlLnNwbGl0KC8jI3xcXC5cXHMqfFxcW1xcKlxcXS9nKS5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVySWRzID0gKGV2ZW50WydldmVudF9oYW5kbGVyJ10gJiYgZXZlbnRbJ2V2ZW50X2hhbmRsZXInXS50b0xvd2VyQ2FzZSgpID09PSAnc3RlcCcpXHJcbiAgICAgICAgICAgID8gc291cmNlLnNwbGl0KCd8fCcpLm1hcChpZCA9PiAnc3RlcGJsb2NrLScgKyBpZCkgLy8gU3BsaXQgYW5kIG1hcCB3aXRoIHByZWZpeFxyXG4gICAgICAgICAgICA6IHNvdXJjZS5zcGxpdCgnfHwnKTsgLy8gU3BsaXQgZGlyZWN0bHkgaWYgbm90ICdzdGVwJ1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lcklkRm9vdGVyID0gKGV2ZW50WydldmVudF9oYW5kbGVyJ10gJiYgZXZlbnRbJ2V2ZW50X2hhbmRsZXInXS50b0xvd2VyQ2FzZSgpID09ICdzdGVwJykgPyAnc3RlcGJsb2NrLScgKyB0aGlzLmV2ZW50QWRkaXRpb25hbFBhcmFtc1snQ0VFX1BSSU5UX1NPVVJDRV9IRUFERVInXSA6IHRoaXMuZXZlbnRBZGRpdGlvbmFsUGFyYW1zWydDRUVfUFJJTlRfU09VUkNFX0hFQURFUiddXHJcblxyXG4gICAgICAgIC8vIEZsYXR0ZW4gdGhlIGFycmF5IHRvIGVuc3VyZSBwcm9wZXIgc3RydWN0dXJlXHJcbiAgICAgICAgY29uc3Qgc3BsaXRDb250YWluZXJJZHMgPSBbLi4uY29udGFpbmVySWRzXTtcclxuXHJcbiAgICAgICAgdmFyIGZpbGVuYW1lID0gdGhpcy5ldmVudEFkZGl0aW9uYWxQYXJhbXNbJ0NFRV9QUklOVF9GSUxFX05BTUUnXSA/IHRoaXMuZXZlbnRBZGRpdGlvbmFsUGFyYW1zWydDRUVfUFJJTlRfRklMRV9OQU1FJ10gOiBcInJlcG9ydF9wZGYucGRmXCI7ICAgICAgICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGZpbGVuYW1lVGltZVN0YW1wID0gdGhpcy5ldmVudEFkZGl0aW9uYWxQYXJhbXNbJ0NFRV9QUklOVF9USU1FU1RBTVAnXSA/IHRoaXMuZXZlbnRBZGRpdGlvbmFsUGFyYW1zWydDRUVfUFJJTlRfVElNRVNUQU1QJ10gOiBcIlwiO1xyXG4gICAgICAgIGZpbGVuYW1lID0gdGhpcy5nZXRUaW1lc3RhbXBlZEZpbGVuYW1lKGZpbGVuYW1lLCBmaWxlbmFtZVRpbWVTdGFtcCk7XHJcbiAgICAgICAgLy92YXIgZmlsZW5hbWUgPSB0aGlzLmV2ZW50QWRkaXRpb25hbFBhcmFtc1snQ0VFX1BSSU5UX0ZJTEVfTkFNRSddID8gdGhpcy5ldmVudEFkZGl0aW9uYWxQYXJhbXNbJ0NFRV9QUklOVF9GSUxFX05BTUUnXSA6IFwicmVwb3J0X3BkZi5wZGZcIlxyXG5cclxuICAgICAgICBzd2l0Y2ggKHByaW50Rm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJkb3dubG9hZHBkZlwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kb3dubG9hZEZyb21TMyhldmVudCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInBkZlwiOlxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4Rm9yTmFtZSA9IC9cXHsoLio/KVxcfS9nO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGRmRmlsZU5hbWUgPSB0aGlzLmV2ZW50QWRkaXRpb25hbFBhcmFtc1snQ0VFX1BSSU5UX0ZJTEVfTkFNRSddID8gdGhpcy5nZXRGaWxlTmFtZSh0aGlzLmV2ZW50QWRkaXRpb25hbFBhcmFtc1snQ0VFX1BSSU5UX0ZJTEVfTkFNRSddLCAnJywgcmVnZXhGb3JOYW1lKSA6IFwicmVwb3J0X3BkZi5wZGZcIjsgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuY2FzZVBkZkdlbmVyYXRlKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZ2VuZXJhdGVQZGZVc2luZ1NoYWRvd0RvbS5lbWl0KHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsUGFyYW1ldGVyczogdGhpcy5ldmVudEFkZGl0aW9uYWxQYXJhbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgcGRmRmlsZU5hbWU6IHBkZkZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBpQ29uZmlnVG9rZW4gPSB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLnByaW50VXBsb2FkVXNpbmdTaGFkb3dEb20uc3Vic2NyaWJlKGFzeW5jIHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmludFVwbG9hZChyZXMuYmxvYiwgcmVzLmZpbGVOYW1lLCByZXMuc3VjY2VzcywgcmVzLmZhaWx1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUNvbmZpZ1Rva2VuLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImNzdlwiOlxyXG4gICAgICAgICAgICAgICAgbGV0IGFwaURhdGFzID0gdGhpcy5hcGlEYXRhU2VydmljZS5nZXRBcGlEYXRhQnlIYW5kbGVyKHNwbGl0Q29udGFpbmVySWRzWzBdLnNwbGl0KCcjIycpWzBdKTtcclxuICAgICAgICAgICAgICAgIHZhciBhcGlLZXlWYWx1ZSA9IHRoaXMuZ2V0QXBpS2V5VmFsdWVQYWlyKGFwaURhdGFzKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiYXBpS2V5VmFsdWU6IFwiLCBhcGlLZXlWYWx1ZSlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VyID0gKGtleSwgdmFsdWUpID0+IHZhbHVlID09PSBudWxsID8gJycgOiB2YWx1ZTsgLy8gc3BlY2lmeSBob3cgeW91IHdhbnQgdG8gaGFuZGxlIG51bGwgdmFsdWVzIGhlcmVcclxuICAgICAgICAgICAgICAgIC8vIGZpbmQgcm93IHdpdGggbWF4IGtleXMgc28gY2FuIGNvdmVyIGFsbCBoZWFkZXJzXHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXhXaXRoTWF4S2V5cyA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBpS2V5VmFsdWUgJiYgYXBpS2V5VmFsdWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhXaXRoTWF4S2V5cyA9IGFwaUtleVZhbHVlLnJlZHVjZSgobWF4SW5kZXgsIGN1cnJlbnRSb3csIGN1cnJlbnRJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY3VycmVudFJvdykubGVuZ3RoID4gT2JqZWN0LmtleXMoYXBpS2V5VmFsdWVbbWF4SW5kZXhdKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50SW5kZXg7IC8vIFJldHVybiBjdXJyZW50IGluZGV4IGlmIGN1cnJlbnQgcm93IGhhcyBtb3JlIGtleXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF4SW5kZXg7IC8vIEtlZXAgdGhlIG1heEluZGV4IGlmIG5vIHVwZGF0ZSBpcyBuZWVkZWRcclxuICAgICAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IE9iamVjdC5rZXlzKGFwaUtleVZhbHVlW2luZGV4V2l0aE1heEtleXNdKTtcclxuICAgICAgICAgICAgICAgIGxldCBjc3YgPSBhcGlLZXlWYWx1ZS5tYXAocm93ID0+IGhlYWRlci5tYXAoZmllbGROYW1lID0+IEpTT04uc3RyaW5naWZ5KHJvd1tmaWVsZE5hbWVdLCByZXBsYWNlcikpLmpvaW4oJywnKSk7XHJcbiAgICAgICAgICAgICAgICBjc3YudW5zaGlmdChoZWFkZXIuam9pbignLCcpKTtcclxuICAgICAgICAgICAgICAgIGxldCBjc3ZBcnJheSA9IGNzdi5qb2luKCdcXHJcXG4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3ZBcnJheV0sIHsgdHlwZTogJ3RleHQvY3N2JyB9KVxyXG4gICAgICAgICAgICAgICAgc2F2ZUFzKGJsb2IsIGZpbGVuYW1lKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZXhjZWxcIjpcclxuICAgICAgICAgICAgY2FzZSBcInhsc1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwieGxzeFwiOiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IGFwaURhdGFzRXhjZWwgPSB0aGlzLmFwaURhdGFTZXJ2aWNlLmdldEFwaURhdGFCeUhhbmRsZXIoc3BsaXRDb250YWluZXJJZHNbMF0uc3BsaXQoJyMjJylbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IGFwaUtleVZhbHVlRXhjZWwgPSB0aGlzLmdldEFwaUtleVZhbHVlUGFpcihhcGlEYXRhc0V4Y2VsKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoYXBpS2V5VmFsdWVFeGNlbCAmJiBhcGlLZXlWYWx1ZUV4Y2VsLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCB3b3Jrc2hlZXQgPSBYTFNYLnV0aWxzLmpzb25fdG9fc2hlZXQoYXBpS2V5VmFsdWVFeGNlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnN0IHdvcmtib29rID0gWExTWC51dGlscy5ib29rX25ldygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBYTFNYLnV0aWxzLmJvb2tfYXBwZW5kX3NoZWV0KHdvcmtib29rLCB3b3Jrc2hlZXQsIFwiU2hlZXQxXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCBleGNlbEJ1ZmZlciA9IFhMU1gud3JpdGUod29ya2Jvb2ssIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGJvb2tUeXBlOiBwcmludEZvcm1hdCA9PT0gXCJ4bHNcIiA/IFwiYmlmZjhcIiA6IFwieGxzeFwiLCAvLyA8PT0gZml4ZWRcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHR5cGU6IFwiYXJyYXlcIlxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtleGNlbEJ1ZmZlcl0sIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHR5cGU6IFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXRcIlxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgc2F2ZUFzKGJsb2IsIGZpbGVuYW1lLmVuZHNXaXRoKCcueGxzeCcpIHx8IGZpbGVuYW1lLmVuZHNXaXRoKCcueGxzJykgPyBmaWxlbmFtZSA6IGZpbGVuYW1lICsgKHByaW50Rm9ybWF0ID09PSAneGxzJyA/ICcueGxzJyA6ICcueGxzeCcpKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFwaURhdGFzRXhjZWxNID0gdGhpcy5hcGlEYXRhU2VydmljZS5nZXRBcGlEYXRhQnlIYW5kbGVyKHNwbGl0Q29udGFpbmVySWRzWzBdLnNwbGl0KCcjIycpWzBdKTtcclxuICAgICAgICAgICAgICAgIGxldCB1cGRhdGVkRGF0YSA9IE9iamVjdC5rZXlzKGFwaURhdGFzRXhjZWxNLnZhbHVlKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0tleSA9IGtleS5yZXBsYWNlKGFwaURhdGFzRXhjZWxNLnZhbHVlLmhhbmRsZXJfbmFtZSArICcjIycsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY1tuZXdLZXldID0gYXBpRGF0YXNFeGNlbE0udmFsdWVba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICAgICAgfSwge30pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmxvYmRhdGEgPSBuZXcgQmxvYigpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0cyA9IHRoaXMudW5mbGF0dGVuSlNPTih1cGRhdGVkRGF0YSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJzOiBbc3RyaW5nLCBhbnldW10gPSBPYmplY3QuZW50cmllcyhkYXRzW3BhcnRzWzFdXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcGlEYXRhc0V4Y2VscyA9IGFycnMubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBwcm9wZXJ0eU5hbWU6IGtleSwgdmFsdWU6IHZhbHVlIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gudXRpbHMuYm9va19uZXcoKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXBpRGF0YXNFeGNlbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxICYmIHBhcnRzLmluY2x1ZGVzKGFwaURhdGFzRXhjZWxzW2ldLnByb3BlcnR5TmFtZSkpIHsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBwcm9wZXJ0eSBuYW1lIGlzIGluIHRoZSBsaXN0LCB3ZSBjYW4gc2tpcCBpdFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhhcGlEYXRhc0V4Y2Vsc1tpXS5wcm9wZXJ0eU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IE9iamVjdC5rZXlzKGFwaURhdGFzRXhjZWxzW2ldLnZhbHVlKS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWNjZXNzIHNwZWNpZmljIHByb3BlcnRpZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYXBpRGF0YXNFeGNlbHNbaV0udmFsdWVbT2JqZWN0LmtleXMoYXBpRGF0YXNFeGNlbHNbaV0udmFsdWUpW2pdXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2goYXBpRGF0YXNFeGNlbHNbaV0udmFsdWVbT2JqZWN0LmtleXMoYXBpRGF0YXNFeGNlbHNbaV0udmFsdWUpW2pdXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0cy5sZW5ndGggPT09IDIgJiYgIXBhcnRzLmluY2x1ZGVzKGFwaURhdGFzRXhjZWxzW2ldLnByb3BlcnR5TmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHByb3BlcnR5IG5hbWUgaXMgaW4gdGhlIGxpc3QsIHdlIGNhbiBza2lwIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgT2JqZWN0LmtleXMoYXBpRGF0YXNFeGNlbHNbaV0udmFsdWUpLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBY2Nlc3Mgc3BlY2lmaWMgcHJvcGVydGllc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhhcGlEYXRhc0V4Y2Vsc1tpXS52YWx1ZVtPYmplY3Qua2V5cyhhcGlEYXRhc0V4Y2Vsc1tpXS52YWx1ZSlbal1dKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChhcGlEYXRhc0V4Y2Vsc1tpXS52YWx1ZVtPYmplY3Qua2V5cyhhcGlEYXRhc0V4Y2Vsc1tpXS52YWx1ZSlbal1dKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29ya3NoZWV0ID0gZGF0YS5sZW5ndGggPiAwID8gWExTWC51dGlscy5qc29uX3RvX3NoZWV0KGRhdGEpIDogWExTWC51dGlscy5hb2FfdG9fc2hlZXQoW10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnN0IHdvcmtib29rID0gWExTWC51dGlscy5ib29rX25ldygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHBhcnRzLmxlbmd0aCA+IDEgJiYgcGFydHMuaW5jbHVkZXMoYXBpRGF0YXNFeGNlbHNbaV0ucHJvcGVydHlOYW1lKSkgfHwgKHBhcnRzLmxlbmd0aCA9PT0gMiAmJiAhcGFydHMuaW5jbHVkZXMoYXBpRGF0YXNFeGNlbHNbaV0ucHJvcGVydHlOYW1lKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhMU1gudXRpbHMuYm9va19hcHBlbmRfc2hlZXQod29ya2Jvb2ssIHdvcmtzaGVldCwgYXBpRGF0YXNFeGNlbHNbaV0ucHJvcGVydHlOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGNlbEJ1ZmZlciA9IFhMU1gud3JpdGUod29ya2Jvb2ssIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2tUeXBlOiBwcmludEZvcm1hdCA9PT0gXCJ4bHNcIiA/IFwiYmlmZjhcIiA6IFwieGxzeFwiLCAvLyA8PT0gZml4ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy93b3JrYm9vay5TaGVldE5hbWVzLnB1c2goYXBpRGF0YXNFeGNlbHNbaV0ucHJvcGVydHlOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGRhdGEubGVuZ3RoID4gMCA/IG5ldyBCbG9iKFtleGNlbEJ1ZmZlcl0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXRcIlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBuZXcgQmxvYihbYmxvYmRhdGFdLCB7fSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09IDIgJiYgaSA9PT0gYXBpRGF0YXNFeGNlbHMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUFzKGJsb2IsIGZpbGVuYW1lLmVuZHNXaXRoKCcueGxzeCcpIHx8IGZpbGVuYW1lLmVuZHNXaXRoKCcueGxzJykgPyBmaWxlbmFtZSA6IGZpbGVuYW1lICsgKHByaW50Rm9ybWF0ID09PSAneGxzJyA/ICcueGxzJyA6ICcueGxzeCcpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0cy5sZW5ndGggPiAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlQXMoYmxvYiwgZmlsZW5hbWUuZW5kc1dpdGgoJy54bHN4JykgfHwgZmlsZW5hbWUuZW5kc1dpdGgoJy54bHMnKSA/IGZpbGVuYW1lIDogZmlsZW5hbWUgKyAocHJpbnRGb3JtYXQgPT09ICd4bHMnID8gJy54bHMnIDogJy54bHN4JykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIG1ldGhvZCByZXR1cm5zIHRoZSBuYW1lIGJhc2VkIG9uIHRoZSBjb25maWd1cmF0aW9uXHJcbiAgICAqIEBwYXJhbSBvcmlnaW5hbE5hbWUgdGhlIG9yaWdpbmFsIG5hbWUgZnJvbSB3aGVyZVxyXG4gICAgKiBAcGFyYW0gZmlsZU5hbWUgdGhlIGZpbGUgbmFtZSBvZiB0aGUgZmlsZVxyXG4gICAgKiBAcGFyYW0gcmVnZXggdGhlIHJlZ2V4IGZyb20gd2hpY2ggdGhlIGR5bmFtaWMgdmFyaWFibGVzIG5lZWRzIHRvIGJlIGV4dHJhY3RlZFxyXG4gICAgKiBAcmV0dXJucyB0aGUgcmVzdWx0IG5hbWVcclxuICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RmlsZU5hbWUob3JpZ2luYWxOYW1lOiBzdHJpbmcsIGZpbGVOYW1lOiBzdHJpbmcsIHJlZ2V4OiBSZWdFeHApIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gb3JpZ2luYWxOYW1lO1xyXG4gICAgICAgIGNvbnN0IG1hdGNoZWQgPSBvcmlnaW5hbE5hbWUubWF0Y2gobmV3IFJlZ0V4cChyZWdleCkpO1xyXG4gICAgICAgIGlmIChtYXRjaGVkKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBvZiBtYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsID0gJyc7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG5hbWUudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3tmaWxlbmFtZX0nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBmaWxlTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAne3l5eXltbWRkaGhtbXNzfSc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAne3RpbWVzdGFtcH0nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBTdHJpbmcobmV3IERhdGUoKS5nZXRUaW1lKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5pbmNsdWRlcygnIyMnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gbmFtZS5tYXRjaChuZXcgUmVnRXhwKC9bXnt9XSsvZykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdmFsdWVzID8gdmFsdWVzWzBdIDogbmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXJEYXRhID0gdGhpcy5hcGlEYXRhU2VydmljZS5nZXRBcGlEYXRhQnlIYW5kbGVyKGtleS5zcGxpdCgnIyMnKVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBoYW5kbGVyRGF0YSA/IGhhbmRsZXJEYXRhLnZhbHVlW2tleV0gOiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwaURhdGEgPSB0aGlzLmFwaURhdGFTZXJ2aWNlLmdldEFwaURhdGFCeUFwaUtleShuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFwaURhdGEgPyBhcGlEYXRhLnZhbHVlIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuc3BsaXQobmFtZSkuam9pbih2YWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICB1bmZsYXR0ZW5KU09OKGZsYXRPYmo6IHsgW2tleTogc3RyaW5nXTogYW55IH0pOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdDogYW55ID0ge307XHJcblxyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGZsYXRPYmopIHtcclxuICAgICAgICAgICAgaWYgKGZsYXRPYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IGtleS5zcGxpdCgnLicpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSByZXN1bHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydCA9IGtleXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyYXlNYXRjaCA9IHBhcnQubWF0Y2goLyhcXHcrKVxcWyhcXGQrKVxcXS8pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyYXlNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgYXJyYXkgbm90YXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyYXlLZXkgPSBhcnJheU1hdGNoWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheUluZGV4ID0gcGFyc2VJbnQoYXJyYXlNYXRjaFsyXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50W2FycmF5S2V5XSA9IGN1cnJlbnRbYXJyYXlLZXldIHx8IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IGtleXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFthcnJheUtleV1bYXJyYXlJbmRleF0gPSBmbGF0T2JqW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50W2FycmF5S2V5XVthcnJheUluZGV4XSA9IGN1cnJlbnRbYXJyYXlLZXldW2FycmF5SW5kZXhdIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnRbYXJyYXlLZXldW2FycmF5SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG9iamVjdCBub3RhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0ga2V5cy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50W3BhcnRdID0gZmxhdE9ialtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFtwYXJ0XSA9IGN1cnJlbnRbcGFydF0gfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudFtwYXJ0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwcmludFVwbG9hZChibG9iT2JqZWN0LGZpbGVOYW1lLCBzdWNjZXNzLCBmYWlsdXJlKSB7XHJcbiAgICAgICAgdGhpcy5zaG93TG9hZGVyKFwiVXBsb2FkaW5nIFBERi4uLiBQbGVhc2Ugd2FpdC5cIik7XHJcbiAgICAgICAgbGV0IGV4dHJhQ29uZmlnRGF0YTogYW55ID0ge307XHJcbiAgICAgICAgY29uc3QgYXBpQ29uZmlnRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdBUElfQ09ORklHJyk7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IGFwaUNvbmZpZ0RhdGEgPyBKU09OLnBhcnNlKGFwaUNvbmZpZ0RhdGEpIDogbnVsbDtcclxuICAgICAgICBpZiAocGFyc2VkRGF0YSAmJiBwYXJzZWREYXRhW1wiZmlsZS91cGxvYWRcIl0pIHtcclxuICAgICAgICAgICAgZXh0cmFDb25maWdEYXRhID0gdGhpcy5leHRlcm5hbFJlcXVlc3RSZXNwb25zZVV0aWwuZm9ybVRoZVJlcXVlc3RPYmoocGFyc2VkRGF0YVtcImZpbGUvdXBsb2FkXCJdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnQ0VFX09JREMnKSA9PSAnMScgJiZcclxuICAgICAgICAgICAgZXh0cmFDb25maWdEYXRhLmhhc0F1dGhvcmlzYXRpb24gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBhcGlDb25maWdUb2tlbiA9IHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuYXBpQ29uZmlnVG9rZW5FbWl0dGVyLnN1YnNjcmliZShhc3luYyByZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGxvYWRzM3BkZihyZXMsIGJsb2JPYmplY3QsZmlsZU5hbWUsIHN1Y2Nlc3MsIGZhaWx1cmUpO1xyXG4gICAgICAgICAgICAgICAgYXBpQ29uZmlnVG9rZW4udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdDRUVfT0lEQycpID09ICcxJyAmJlxyXG4gICAgICAgICAgICBleHRyYUNvbmZpZ0RhdGEuaGFzQXV0aG9yaXNhdGlvbiA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGV4dHJhQ29uZmlnRGF0YS5lbWl0VG9rZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLm9pZGNEYXRhRW1pdHRlci5lbWl0KGV4dHJhQ29uZmlnRGF0YSk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBsb2FkczNwZGYoZXh0cmFDb25maWdEYXRhLCBibG9iT2JqZWN0LGZpbGVOYW1lLCBzdWNjZXNzLCBmYWlsdXJlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5oaWRlTG9hZGVyKClcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyB1cGxvYWRzM3BkZihleHRyYUNvbmZpZ0RhdGEsIGJsb2JPYmplY3QsZmlsZU5hbWUsICBzdWNjZXNzLCBmYWlsdXJlKSB7XHJcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTsgLy8gZGF0ZSBjdXR0ZW50XHJcbiAgICAgICAgbGV0IHBheWxvYWQgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiYXBwbGljYXRpb24vcGRmXCIsXHJcbiAgICAgICAgICAgIGZpbGVEYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXk6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcInRlc3RGaWxlTmFtZVwiLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJhcHBsaWNhdGlvbi9wZGZcIixcclxuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnROYW1lOmZpbGVOYW1lLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBrZXk6IFwidXBsb2FkZWQucGRmXCIsXHJcbiAgICAgICAgICAgICAgICBhdHRhY2htZW50UGF0aDogXCJcIixcclxuICAgICAgICAgICAgICAgIGZpbGU6IGJsb2JPYmplY3QsXHJcbiAgICAgICAgICAgICAgICBmaWxlU2l6ZTogYmxvYk9iamVjdFtcInNpemVcIl0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiBibG9iT2JqZWN0W1wic2l6ZVwiXSxcclxuICAgICAgICAgICAgICAgIHVJZDogdGltZXN0YW1wLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZpbGVVcGxvYWRTZXJ2aWNlLmdlbmVyaWNGaWxlU2VydmljZShcclxuICAgICAgICAgICAgICAgIFwiT25VcGxvYWRcIiwgcGF5bG9hZCwgZXh0cmFDb25maWdEYXRhLCBcImZpbGUvdXBsb2FkXCIpO1xyXG4gICAgICAgIGlmIChOdW1iZXIocmVzcG9uc2Uuc3RhdHVzQ29kZSkgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAvLyBjYWxsIG9uIHJlc3BvbnNlIG9yIG9uIHN1Y2Nlc3NcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVtaXQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFwaUtleURhdGEgPSB0aGlzLmFwaURhdGFTZXJ2aWNlLmdldEFwaURhdGFCeUhhbmRsZXIoXCJmaWxlL3VwbG9hZFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZW1pdEFwaVN1Y2Nlc3NSZXNwb25zZS5lbWl0KGFwaUtleURhdGEudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NDYWxsYmFjayA9IHRoaXMucHJvY2Vzc0NhbGxiYWNrQmxvY2tzKHsgYm9keTogcmVzcG9uc2UuZGF0YSwgc3RhdHVzOiByZXNwb25zZS5zdGF0dXNDb2RlIH0sIHN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICBpZiAoc3VjY2Vzc0NhbGxiYWNrICYmIHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0T25TdWNjZXNzKHN1Y2Nlc3NDYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBjYWxsIG9uIGV4Y2VwdGlvbiBvciBvbiBmYWlsdXJlXHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5lbWl0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLmVtaXRBcGlFcnJvclJlc3BvbnNlLmVtaXQocmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgZmFpbHVyZUNhbGxiYWNrID0gdGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MoeyBib2R5OiByZXNwb25zZS5kYXRhLCBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1c0NvZGUgfSwgZmFpbHVyZSk7XHJcbiAgICAgICAgICAgIGlmIChmYWlsdXJlQ2FsbGJhY2sgJiYgZmFpbHVyZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPbkZhaWx1cmUoZmFpbHVyZUNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLmhpZGVMb2FkZXIoKTtcclxuICAgICAgICB9LDUwMCk7XHJcbiAgICB9XHJcbiAgICBzdHJpcEh0bWwoaHRtbDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCB0ZW1wRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0ZW1wRGl2LmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgcmV0dXJuIHRlbXBEaXYudGV4dENvbnRlbnQgfHwgdGVtcERpdi5pbm5lclRleHQgfHwgXCJcIjtcclxuICAgIH1cclxuICAgIGV2ZW50Q29uZmlnKGNvbmZpZzogRXZlbnRDb25maWcsIGhhbmRsZXI6IGFueSwgcHJpbWFyeURhdGE6IGFueSA9IHt9KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NvbmZpZy5kaXNwbGF5X3N0ZXAnLCBjb25maWcuZGlzcGxheV9zdGVwKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnaGFuZGxlcicsIGhhbmRsZXIpO1xyXG4gICAgICAgIC8vIGV2ZW50IGNvbmZpZyB3aWxsIGV4ZWN1dGUgdGhlIHN0ZXBcclxuICAgICAgICB0aGlzLnNraXBMb2FkZXJDaGVjaygpO1xyXG4gICAgICAgIGNvbnN0IGZsYWdCdG4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaXNCdXR0b25JbnZva2VBcGknKTtcclxuICAgICAgICBjb25zdCBidG5UZXh0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2J1dHRvblRleHQnKTtcclxuICAgICAgICBjb25zdCBwbGFpbkJ0blRleHQgPSB0aGlzLnN0cmlwSHRtbChidG5UZXh0KTtcclxuICAgICAgICBpZiAoY29uZmlnLmRpc3BsYXlfc3RlcCkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGNvbmZpZy5kaXNwbGF5X3N0ZXApIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0ludm9rZUFQSSc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdJbnZva2VDYXB0Y2hhJzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmxhZ0J0biA9PT0gJzEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ1JlZiA9IHRoaXMuZGlhbG9nLm9wZW4oQWxlcnRNb2RhbENvbXBvbmVudCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBEbyB5b3Ugd2FudCB0byAke3BsYWluQnRuVGV4dH0/YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCIgXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiY3VzdG9tLWNvbmZpcm1hdGlvbi1ib3hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ1JlZi5hZnRlckNsb3NlZCgpLnN1YnNjcmliZShyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lzQnV0dG9uSW52b2tlQXBpJywgJzAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SGFuZGxlcihoYW5kbGVyLCBwcmltYXJ5RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyOiBoYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZToge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoazogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLmV2ZW50Q29uZGl0aW9uYWxGYWlsdXJlU3Vic2NyaWJlci5lbWl0KHJlc3BvbnNlT2JqKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEhhbmRsZXIoaGFuZGxlciwgcHJpbWFyeURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdMYW5ndWFnZVRvZ2dsZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGF5TG9hZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBheUxvYWQudW5pcXVlSWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXlMb2FkLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TGFuZ3VhZ2UodGhpcy5wYXlMb2FkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdQcmludEFuZERvd25sb2FkJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaW50QW5kRG93bmxvYWQoaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdTZXNzaW9uQ2xlYXJhbmNlJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaENsZWFyZW5jZVR5cGUodGhpcy5zZXNzaW9uRXZlbnRIYW5kbGVyKGhhbmRsZXIsICdFcmFzZVNlc3Npb25EYXRhJyksIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnQ2hlY2tNYW5kYXRvcnknOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoTWFuZGF0b3J5Q2hlY2tUeXBlKHRoaXMuc2Vzc2lvbkV2ZW50SGFuZGxlcihoYW5kbGVyLCAnQ2hlY2tNYW5kYXRvcnlEYXRhJyksIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnQ2hlY2tWYWxpZGF0aW9uJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaFZhbGlkYXRpb25DaGVja1R5cGUodGhpcy5zZXNzaW9uRXZlbnRIYW5kbGVyKGhhbmRsZXIsICdDaGVja1ZhbGlkRGF0YScpLCBoYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0NsZWFyU2Vzc2lvblZhbHVlcyc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hDbGVhckFraXRhU3RvcmUodGhpcy5zZXNzaW9uRXZlbnRIYW5kbGVyKGhhbmRsZXIsICdFcmFzZVNlc3Npb25EYXRhJyksIGhhbmRsZXIsIHByaW1hcnlEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0NoYW5nZVZpc2liaWxpdHknOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnQ2hhbmdlRWRpdGFibGUnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnQ2hhbmdlTWFuZGF0b3J5JzpcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVhZERhdGFGcm9tTW9kYWwgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdSZWFkRGF0YUZyb21Nb2RhbCcgfSkubGVuZ3RoID4gMCA/IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ1JlYWREYXRhRnJvbU1vZGFsJyB9KVswXS52YWx1ZSA9PSAndHJ1ZScgPyB0cnVlIDogZmFsc2UgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpZWxkU3RhdGVDaGFuZ2VFdmVudCh0aGlzLnNlc3Npb25FdmVudEhhbmRsZXIoaGFuZGxlciwgJ0ZpZWxkU3RhdGVJZHMnKSwgY29uZmlnLmRpc3BsYXlfc3RlcCxyZWFkRGF0YUZyb21Nb2RhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdDb3B5VG9DbGlwYm9hcmQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29weVRvQ2xpcGJvYXJkRXZlbnRIYW5kbGVyKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnRGlzbWlzc01vZGFsJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5jbG9zZUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbW9uVXRpbC5tb3ZlTWF0RGlhbG9nVG9Cb2R5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5tb2RlbEVtaXR0ZXIuZW1pdCh7IGRhdGE6IHsgc3RlcElkOiBcIlwiLCBjb25maWc6IHsgZGlzYWJsZUNsb3NlOiB0cnVlIH0gfSwgaWQ6IGBgLCBwYW5lbENsYXNzOiBgYCB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnRGlzcGxheSBNb2RhbCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5TW9kYWwoaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5tb2RlbEVtaXR0ZXIuZW1pdCh7IGRhdGE6IHsgc3RlcElkOiBcIlwiLCBjb25maWc6IHsgZGlzYWJsZUNsb3NlOiB0cnVlIH0gfSwgaWQ6IGBgLCBwYW5lbENsYXNzOiBgYCB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnSGlnaGxpZ2h0TWFwTWFya2VyJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZ2hsaWdodE1hcE1hcmtlcihoYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1NlYXJjaEZpbHRlcic6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hGaWx0ZXIoaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdNYXBDZW50ZXInOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFwQ2VudGVyKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnTWFwTGF5ZXInOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuTWFwTGF5ZXIoaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdUb2dnbGVBY2NvcmRpb24nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQWNjb3JkaW9uKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnQ2FuY2VsVGFibGVJbmxpbmVFZGl0JzpcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5lbWl0T25UYWJsZUlubGluZUVkaXRDYW5jZWxDbGlja2VkLmVtaXQoaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnT3BlblRhYmxlSW5saW5lRWRpdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZW1pdE9uVGFibGVJbmxpbmVFZGl0Q2xpY2tlZC5lbWl0KGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1VuZG8nOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkSWRzID0gdGhpcy5nZXRBZGRpdGlvbmFsUGFyYW1ldGVyKClbJ1VuZG9GaWVsZElkcyddLnNwbGl0KCd8JykubWFwKHN0ciA9PiBzdHIudHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRJZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZG9SZWRvVXRpbC51bmRvQ3VycmVudElkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5zdGF0ZUhpc3RvcnlFbWl0dGVyLmVtaXQoZmllbGRJZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnQ3VzdG9tRnVuY3Rpb25zJzpcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmV2ZW50X2hhbmRsZXIgPT09IFwiRXhlY3V0ZU9uTG9hZEV2ZW50c1wiID8gdGhpcy5leGVjdXRlU3RlcE9uTG9hZEV2ZW50cygpIDogdGhpcy5jdXN0b21GdW5jdGlvbnMoaGFuZGxlciwgJ1ZhcmlhYmxlcycsICdUYXJnZXRzJywgcHJpbWFyeURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnSGlzdG9yeUJhY2snOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeUJhY2soKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1N0YXRlTW9kaWZpZWQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVNb2RpZmllZChoYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1NldFZhbHVlcyc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZXNPbkV2ZW50KGhhbmRsZXIsIHByaW1hcnlEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1Njcm9sbFRvVG9wJzpcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oeyB0b3A6IDAsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0xpc3RDZWxsJzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJpbWFyeURhdGEgJiYgT2JqZWN0LmtleXMocHJpbWFyeURhdGEpLmxlbmd0aCAmJiBwcmltYXJ5RGF0YS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VsbERhdGEocHJpbWFyeURhdGEsIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0dlb0xvY2F0aW9uJzpcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBnbG9iYWxQYXJhbWV0ZXJzID0gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5hZGRpdGlvbmFsUGFyYW1ldGVycztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldExvY2F0aW9uKGdsb2JhbFBhcmFtZXRlcnMsIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnU3RhcnRUaWNrZXInOlxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZElkID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnVGlja2VySUQnIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdUaWNrZXJJRCcgfSlbMF0udmFsdWUgOiAnJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLnN0YXJ0VGlja2VyRW1pdHRlci5lbWl0KGZpZWxkSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnU3RvcFRpY2tlcic6XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpY2tlcklkID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnVGlja2VySUQnIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdUaWNrZXJJRCcgfSlbMF0udmFsdWUgOiAnJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLnN0b3BUaWNrZXJFbWl0dGVyLmVtaXQodGlja2VySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnUGF1c2VUaWNrZXInOlxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aW1lcklkID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnVGlja2VySUQnIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdUaWNrZXJJRCcgfSlbMF0udmFsdWUgOiAnJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLnBhdXNlVGlja2VyRW1pdHRlci5lbWl0KHRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnT3BlblNuYWNrQmFyJzpcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGltZU91dCA9IE51bWJlcihoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdNZXNzYWdlRHVyYXRpb24nIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdNZXNzYWdlRHVyYXRpb24nIH0pWzBdLnZhbHVlIDogMzAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2VIZWFkZXJUZXh0ID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnTWVzc2FnZUhlYWRlcicgfSkubGVuZ3RoID4gMCA/IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ01lc3NhZ2VIZWFkZXInIH0pWzBdLnZhbHVlIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2VUZXh0SGFuZGxlciA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ01lc3NhZ2VUZXh0JyB9KS5sZW5ndGggPiAwID8gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnTWVzc2FnZVRleHQnIH0pWzBdLnZhbHVlIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGlvbkJ1dHRvblRleHQgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdBY3Rpb25CdXR0b25UZXh0JyB9KS5sZW5ndGggPiAwID8gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnQWN0aW9uQnV0dG9uVGV4dCcgfSlbMF0udmFsdWUgOiAnJztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcGFuZWxDbGFzcyA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ1BhbmVsQ2xhc3MnIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdQYW5lbENsYXNzJyB9KVswXS52YWx1ZS5zcGxpdCgnICcpIDogWyduZ3gtdG9hc3RyJ107XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlzUHJvZ3Jlc3NCYXJOZWVkZWQgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdQcm9ncmVzc0JhcicgfSkubGVuZ3RoID4gMCA/IChoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdQcm9ncmVzc0JhcicgfSlbMF0udmFsdWUudG9Mb3dlckNhc2UoKSA9PSAndHJ1ZScgPyB0cnVlIDogZmFsc2UpIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2VWZXJ0aWNhbFBvc2l0aW9uID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnTWVzc2FnZVZlcnRpY2FsUG9zaXRpb24nIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdNZXNzYWdlVmVydGljYWxQb3NpdGlvbicgfSlbMF0udmFsdWUgOiAndG9wJztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZUhvcml6b250YWxQb3NpdGlvbiA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ01lc3NhZ2VIb3Jpem9udGFsUG9zaXRpb24nIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdNZXNzYWdlSG9yaXpvbnRhbFBvc2l0aW9uJyB9KVswXS52YWx1ZSA6ICdjZW50ZXInO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlRHluYW1pY0hhbmRsZXJzID0gbWVzc2FnZVRleHRIYW5kbGVyLnNwbGl0KCd8fCcpLmxlbmd0aCA+IDEgPyBtZXNzYWdlVGV4dEhhbmRsZXIuc3BsaXQoJ3x8JylbMV0uc3BsaXQoJ3wnKSA6IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlVGV4dCA9IG1lc3NhZ2VUZXh0SGFuZGxlciA/IG1lc3NhZ2VUZXh0SGFuZGxlci5zcGxpdCgnfHwnKVswXSA6IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGR5bmFtaWNUZXh0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUR5bmFtaWNIYW5kbGVycy5mb3JFYWNoKG1lc3NhZ2VIYW5kbGVyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFwaVN0b3JlRGF0YSA9IHRoaXMuYXBpRGF0YVNlcnZpY2UuZ2V0QXBpRGF0YUJ5SGFuZGxlcihtZXNzYWdlSGFuZGxlci5zcGxpdCgnIyMnKVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR5bmFtaWNUZXh0LnB1c2goYXBpU3RvcmVEYXRhLnZhbHVlW21lc3NhZ2VIYW5kbGVyXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2VBcnIgPSBtZXNzYWdlVGV4dC5zcGxpdCgne3tkeW5hbWljfX0nKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IG1lc3NhZ2VIZWFkZXJUZXh0ID8gXCI8aDI+XCIgKyBtZXNzYWdlSGVhZGVyVGV4dCArIFwiPC9oMj5cIiA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VBcnIuZm9yRWFjaCgobXNnLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZSArIG1zZyArIChkeW5hbWljVGV4dC5sZW5ndGggPiBpbmRleCA/IGR5bmFtaWNUZXh0W2luZGV4XSA6IFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlICYmIG1lc3NhZ2UgIT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNuYWNrQmFyLm9wZW5Gcm9tQ29tcG9uZW50KFNuYWNrYmFyUmVuZGVyZXJDb21wb25lbnQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBodG1sOiBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGFjdGlvbkJ1dHRvbjogYWN0aW9uQnV0dG9uVGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBwcm9ncmVzc0JhcjogaXNQcm9ncmVzc0Jhck5lZWRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHZlcnRpY2FsUG9zaXRpb246IG1lc3NhZ2VWZXJ0aWNhbFBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgaG9yaXpvbnRhbFBvc2l0aW9uOiBtZXNzYWdlSG9yaXpvbnRhbFBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgcGFuZWxDbGFzczogcGFuZWxDbGFzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGR1cmF0aW9uOiBOdW1iZXIodGltZU91dClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2Uub3BlblRvc3RlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sOiBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsUG9zaXRpb246IG1lc3NhZ2VWZXJ0aWNhbFBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvcml6b250YWxQb3NpdGlvbjogbWVzc2FnZUhvcml6b250YWxQb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYW5lbENsYXNzOiBwYW5lbENsYXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQmFyOiBpc1Byb2dyZXNzQmFyTmVlZGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlQnV0dG9uOiBhY3Rpb25CdXR0b25UZXh0ICYmIGFjdGlvbkJ1dHRvblRleHQgIT0gJycgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IE51bWJlcih0aW1lT3V0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnU2F2ZUxvY2FsRGF0YSc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlTG9jYWxEYXRhUHJvY2VzcyhoYW5kbGVyLCBwcmltYXJ5RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5lbWl0VXBkYXRlZERhdGFUb1N0b3JlKGhhbmRsZXIsIGFwaUtleVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2NhbmNlbExvY2FsRGF0YSc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxMb2NhbERhdGFQcm9jZXNzKGhhbmRsZXIsIHByaW1hcnlEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmVtaXRVcGRhdGVkRGF0YVRvU3RvcmUoaGFuZGxlciwgYXBpS2V5VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndXBkYXRlTG9jYWxEYXRhJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxvY2FsRGF0YVByb2Nlc3MoaGFuZGxlciwgcHJpbWFyeURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZW1pdFVwZGF0ZWREYXRhVG9TdG9yZShoYW5kbGVyLCBhcGlLZXlWYWx1ZVVwZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdEZWxldGVMb2NhbERhdGEnOlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWxldGVXb3JuaW5nTWVzc2FnZSA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ0RlbGV0ZU1lc3NhZ2UnIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdEZWxldGVNZXNzYWdlJyB9KVswXS52YWx1ZSA6ICdmYWxzZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGV0ZVdvcm5pbmdNZXNzYWdlLnRvTG93ZXJDYXNlKCkgIT0gXCJmYWxzZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EZWxldGVEYXRhKGRlbGV0ZVdvcm5pbmdNZXNzYWdlLCBoYW5kbGVyLCBwcmltYXJ5RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMb2NhbERhdGFQcm9jZXNzKGhhbmRsZXIsIHByaW1hcnlEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSAnT0lEQ0Nvbm5lY3QnOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmICh3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnQ0VFX09JREMnKSA9PT0gJzEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMub2lkY0V2ZW50RW1pdHRlci5lbWl0KGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5lcnJvcignT0lEQyBub3QgY29uZmlndXJlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMub2lkY0V2ZW50RW1pdHRlci5lbWl0KGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnY29udGV4dE1lbnUnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUoaGFuZGxlciwgcHJpbWFyeURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnQXBwbHlGaWx0ZXInOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiIyMjIyMjIyMjIyMjIyMjIyMjIyBBcHBseUZpbHRlciAjIyMjIyMjIyMjIyMjIyMjIyMjXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhYmxlSWQgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdDRUVfVEFCTEVfSUQnIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdDRUVfVEFCTEVfSUQnIH0pWzBdLnZhbHVlIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJoZWxsbyBBcHBseUZpbHRlciE6IFwiLHRhYmxlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZW1pdE9uQXBwbHlSZWFycmFuZ2VCdG5DbGlja2VkLmVtaXQoaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdzdGVwUmVkaXJlY3Rpb24nOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmbGFnQnRuID09PSAnMScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlhbG9nUmVmID0gdGhpcy5kaWFsb2cub3BlbihBbGVydE1vZGFsQ29tcG9uZW50LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYERvIHlvdSB3YW50IHRvICR7cGxhaW5CdG5UZXh0fT9gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIiBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJjdXN0b20tY29uZmlybWF0aW9uLWJveFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nUmVmLmFmdGVyQ2xvc2VkKCkuc3Vic2NyaWJlKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaXNCdXR0b25JbnZva2VBcGknLCAnMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcFJlZGlyZWN0aW9uKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZU9iaiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjogaGFuZGxlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGs6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5ldmVudENvbmRpdGlvbmFsRmFpbHVyZVN1YnNjcmliZXIuZW1pdChyZXNwb25zZU9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcFJlZGlyZWN0aW9uKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0NyZWF0ZVppcCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVaaXAoaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdleHRyYWN0RW1haWxJZHMnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdEVtYWlsSWRzKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3Njcm9sbEludG9WaWV3JzpcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbmQoKGVsKSA9PiB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnVGFyZ2V0JyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldC52YWx1ZSkuc2Nyb2xsSW50b1ZpZXcoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCIsIC8vIFNtb290aCBzY3JvbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrOiBcInN0YXJ0XCIsICAgICAvLyBBbGlnbiB0byB0aGUgc3RhcnQgKHRvcCkgb2YgdGhlIHZpZXdwb3J0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1NpZGVNZW51U2VsZWN0aW9uUmVzZXQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuc2lkZU1lbnVTZWxlY3Rpb25SZXNldEVtaXR0ZXIuZW1pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGlzcGxheV9zdGVwID0gY29uZmlnLmRpc3BsYXlfc3RlcDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5jbG9zZUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuZGlzcGxheV9zdGVwLmluZGV4T2YoJyMnKSAhPT0gLTEgJiYgY29uZmlnLmRpc3BsYXlfc3RlcC5zcGxpdCgnIycpLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxpdERTID0gY29uZmlnLmRpc3BsYXlfc3RlcC5zcGxpdCgnIycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X3N0ZXAgPSBzcGxpdERTWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3BsaXREU1sxXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNwbGl0RFNbMV0pLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdhdXRvJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzY3JvbGxUYXJnZXQnLCBzcGxpdERTWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzcGxheV9zdGVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGVwUmVkaXJlY3Rpb25UYXJnZXQgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdUYXJnZXQnIH0pWzBdPy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0ZXBSZWRpcmVjdGlvblRhcmdldCAmJiAhKFsnc2VsZicsICdibGFuaycsICd0b3AnXS5pbmNsdWRlcyhzdGVwUmVkaXJlY3Rpb25UYXJnZXQudG9Mb3dlckNhc2UoKSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLnRhcmdldFN0ZXBSZWRpcmVjdGlvbi5lbWl0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwSWQ6IHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2Uuc3RlcE5hbWVBbmRJZERhdGFNYXBbZGlzcGxheV9zdGVwXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHN0ZXBSZWRpcmVjdGlvblRhcmdldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLmxvYWRTdGVwQnlOYW1lKGRpc3BsYXlfc3RlcCkuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NTdGVwUmVkaXJlY3Rpb24oZGlzcGxheV9zdGVwLCBkYXRhLCBoYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEFraXRhRGF0YUZyb21IYW5kbGVyKGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5hcGlEYXRhU2VydmljZS5nZXRBcGlEYXRhQnlIYW5kbGVyKGhhbmRsZXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJldHVybk5lc3RlZERhdGEodGhpcy5hcGlEYXRhU2VydmljZS5nZXRBcGlEYXRhQnlIYW5kbGVyKGhhbmRsZXIpLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuTmVzdGVkRGF0YShkYXRhKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdChkYXRhKSAhPT0gZGF0YSB8fCBBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZWdleCA9IC9cXC4/KFteLlxcW1xcXV0rKXxcXFsoXFxkKylcXF0vZztcclxuICAgICAgICBjb25zdCByZXN1bHRob2xkZXIgPSB7fTtcclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGZvcmluXHJcbiAgICAgICAgZm9yIChjb25zdCBwIGluIGRhdGEpIHtcclxuICAgICAgICAgICAgbGV0IGN1ciA9IHJlc3VsdGhvbGRlcjtcclxuICAgICAgICAgICAgbGV0IHByb3AgPSAnJztcclxuICAgICAgICAgICAgbGV0IG07XHJcbiAgICAgICAgICAgIHdoaWxlICgobSA9IHJlZ2V4LmV4ZWMocCkpKSB7XHJcbiAgICAgICAgICAgICAgICBjdXIgPSBjdXJbcHJvcF0gfHwgKGN1cltwcm9wXSA9IG1bMl0gPyBbXSA6IHt9KTtcclxuICAgICAgICAgICAgICAgIHByb3AgPSBtWzJdIHx8IG1bMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VyW3Byb3BdID0gZGF0YVtwXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdGhvbGRlclsnJ10gfHwgcmVzdWx0aG9sZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHN0ZXBSZWRpcmVjdGlvbihoYW5kbGVyKSB7XHJcbiAgICAgICAgdGhpcy5hZGRpdGlvbmFsUGFyYW1ldGVycyA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnM7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0U3RlcCA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmluZChpID0+IGkucGFyYW1ldGVyX3R5cGUgPT09ICdDRUVfZHluYWltY1JvdXRlJyk7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maW5kKGkgPT4gaS5wYXJhbWV0ZXJfdHlwZSA9PT0gJ1RhcmdldCcpO1xyXG4gICAgICAgIGlmICh0YXJnZXRTdGVwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwcFN0b3JlRGF0YSA9IHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0QWxsQXBwU3RvcmVEYXRhKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRVcmwgPSB0YXJnZXRTdGVwLnZhbHVlLnJlcGxhY2UoLyUoW14lXSspJS9nLCAoXywga2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGEgb2YgYXBwU3RvcmVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSBkYXRhLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVkaXJlY3RUb0hyZWYodXBkYXRlZFVybCwgbnVsbCwgdGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbkRyYXdlcihkYXRhOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBsZXQgaXNEaXNhYmxlQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICAvLyBkYXRhLmRpc21pc3NfbW9kYWwgPSAxIChpLmUgaXNEaXNhYmxlQ2xvc2UgPSB0cnVlKSBpcyB0byByZXN0cmljdCBjbG9zaW5nIHRoZSBtb2RhbCB3aGVuIGNsaWNraW5nIG91dHNpZGUgdGhlIG1vZGFsIG9yIHByZXNzaW5nIHRoZSBlc2NhcGUga2V5IG9uIHRoZSBrZXlib2FyZC5cclxuICAgICAgICBpZiAoZGF0YSAhPT0gdW5kZWZpbmVkICYmIGRhdGEuZGlzbWlzc19tb2RhbCA9PT0gMSkge1xyXG4gICAgICAgICAgICBpc0Rpc2FibGVDbG9zZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMubW9kZWxFbWl0dGVyLmVtaXQoeyBkYXRhOiB7IHN0ZXBJZDogZGF0YS50aWQsIGNvbmZpZzogeyBkaXNhYmxlQ2xvc2U6IGlzRGlzYWJsZUNsb3NlLCBkaXNtaXNzTW9kYWw6IGRhdGEuZGlzbWlzc19tb2RhbCB9IH0sIGlkOiBgc3RlcE1vZGFsLSR7ZGF0YS50aWR9YCwgcGFuZWxDbGFzczogYHN0ZXBNb2RhbC0ke2RhdGEudGlkfWAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEZpbGVGZXRjaFVSTCgpIHtcclxuICAgICAgICBjb25zdCBoYW5kbGVyID0gJ2ZpbGUvZmV0Y2gnO1xyXG4gICAgICAgIGNvbnN0IGFwaUNvbmZpZzogYW55ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnQVBJX0NPTkZJRycpKTtcclxuICAgICAgICBjb25zdCBhcGlDb25maWdPYmplY3Q6IGFueSA9IGFwaUNvbmZpZ1toYW5kbGVyXTtcclxuXHJcbiAgICAgICAgaWYgKCFhcGlDb25maWdPYmplY3QpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYEVycm9yIGluIE1hcHBpbmcgJHtoYW5kbGVyfWApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RCb2R5LFxyXG4gICAgICAgICAgICBoZWFkZXJzLFxyXG4gICAgICAgICAgICBxdWVyeVBhcmFtcyxcclxuICAgICAgICAgICAgdXJsUGFyYW1zLFxyXG4gICAgICAgICAgICB1cmwsXHJcbiAgICAgICAgICAgIG1ldGhvZFR5cGUsXHJcbiAgICAgICAgICAgIHJlcXVlc3RUeXBlLFxyXG4gICAgICAgICAgICBpc0VTQixcclxuICAgICAgICAgICAgaGFzQXV0aG9yaXNhdGlvbixcclxuICAgICAgICAgICAgc3RvcmFnZVR5cGUsXHJcbiAgICAgICAgICAgIHVzZVVJRCxcclxuICAgICAgICAgICAgZXNiUmVxdWVzdEJvZHkgfSA9IHRoaXMuZXh0ZXJuYWxSZXF1ZXN0UmVzcG9uc2VVdGlsLmZvcm1UaGVSZXF1ZXN0T2JqKGFwaUNvbmZpZ09iamVjdCk7XHJcblxyXG4gICAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVaaXAoaGFuZGxlcikge1xyXG4gICAgICAgIGNvbnN0IGZpbGVGZXRjaFVSTCA9IHRoaXMuZ2V0RmlsZUZldGNoVVJMKCk7XHJcbiAgICAgICAgY29uc3QgQXNzb2NpYXRlZEFQSUtleSA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ0Fzc29jaWF0ZWRBUElLZXknIH0pLmxlbmd0aCA+IDAgP1xyXG4gICAgICAgICAgICBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdBc3NvY2lhdGVkQVBJS2V5JyB9KVswXS52YWx1ZS5zcGxpdCgnfHwnKSA6IFtdO1xyXG4gICAgICAgIGlmIChmaWxlRmV0Y2hVUkwgJiYgQXNzb2NpYXRlZEFQSUtleS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgQXR0YWNobWVudEZpbGVzID0gW107XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgYXBpS2V5IG9mIEFzc29jaWF0ZWRBUElLZXkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXJEYXRhID0gdGhpcy5hcGlEYXRhU2VydmljZS5nZXRBcGlEYXRhQnlIYW5kbGVyKGFwaUtleS5zcGxpdCgnIyMnKVswXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlckRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNEYXRhID0gdGhpcy5zZXRBUElLZXlVdGlsLnNldEFwaUNhbGxCYWNrRGF0YShhcGlLZXksIGhhbmRsZXJEYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzRGF0YSAmJiBBcnJheS5pc0FycmF5KHJlc0RhdGEpICYmIHJlc0RhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc0RhdGFbaV1bJ2F0dGFjaG1lbnRJZCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmV0Y2hVcmwgPSBmaWxlRmV0Y2hVUkwgKyByZXNEYXRhW2ldWydhdHRhY2htZW50SWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmZXRjaFJlcyA9IGF3YWl0IHRoaXMuaHR0cC5nZXQoZmV0Y2hVcmwpLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZXRjaFJlcyAmJiBmZXRjaFJlc1sncmVzdWx0J10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNobWVudEZpbGVzLnB1c2goZmV0Y2hSZXNbJ3Jlc3VsdCddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jb21tb25VdGlsLnByb2Nlc3NaaXBGaWxlKEF0dGFjaG1lbnRGaWxlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHJvY2Vzc1N0ZXBSZWRpcmVjdGlvbihkaXNwbGF5X3N0ZXAsIGRhdGEsIGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoZGF0YSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2Uuc2V0U3RlcERhdGFJbkNhY2hlKGRpc3BsYXlfc3RlcCwgZGF0YSk7XHJcbiAgICAgICAgICAgIC8vIGltcGxlbWVudGVkIGJ5LWRlZmF1bHQgb3ZlclJpZGVXb3JrZmxvdyBmb3IgQ29tcGxpYW5jZUZvcm1zIHN0ZXAgcmVkaWNyZWN0aW9uIHRvIHJlZHVjZSB0aGUgbWVtb3J5IGxlYWsgaXNzdWVcclxuICAgICAgICAgICAgaWYoZGlzcGxheV9zdGVwID09IFwiQ29tcGxpYW5jZUZvcm1zXCIpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXIuZXZlbnRfaGFuZGxlciA9IFwib3ZlclJpZGVXb3JrZmxvd1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmRpc3BsYXlfYXNfbW9kYWwgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgdGhlIFN0ZXAgQXMgTW9kYWxcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5vcGVuRGlhbG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuRHJhd2VyKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvd1snbmF2T3BlblN0YXVzJ10gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuaGFtYnVyZ2VybWVudUVtaXR0ZXIuZW1pdCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChoYW5kbGVyLmV2ZW50X2hhbmRsZXIgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVkaXJlY3RXaXRoUGFyYW1zKGhhbmRsZXIsIGRhdGEudGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IE1vZGFsT25QYWdlTGVhdmUgPSBoYW5kbGVyWydNb2RhbE9uUGFnZUxlYXZlJ10gPyBoYW5kbGVyWydNb2RhbE9uUGFnZUxlYXZlJ10gOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5oYW1idXJnZXJtZW51RW1pdHRlci5lbWl0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFRvKGRhdGEudGlkLCBNb2RhbE9uUGFnZUxlYXZlKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWRpcmVjdFdpdGhQYXJhbXMoaGFuZGxlciwgc3RlcElkKSB7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIuZXZlbnRfaGFuZGxlciA9PSBcIm92ZXJSaWRlV29ya2Zsb3dcIil7XHJcbiAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMudGFyZ2V0U3RlcFJlZGlyZWN0aW9uLmVtaXQoeyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGV2ZW50X2hhbmRsZXI6IGhhbmRsZXIuZXZlbnRfaGFuZGxlclxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdGlvblV0aWwucmVkaXJlY3RUbyhzdGVwSWQsICdfc2VsZicsICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaGFuZGxlci5ldmVudF9oYW5kbGVyID09IFwib3ZlclJpZGVXb3JrZmxvd1dpdGhMb2NhdGlvblwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMudGFyZ2V0U3RlcFJlZGlyZWN0aW9uLmVtaXQoeyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGV2ZW50X2hhbmRsZXI6IGhhbmRsZXIuZXZlbnRfaGFuZGxlclxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdGlvblV0aWwucmVkaXJlY3RUbyhzdGVwSWQsICdsb2NhdGlvbicsICcnKTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFwaUNvbmZpZzogYW55ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnQVBJX0NPTkZJRycpKTtcclxuICAgICAgICBpZiAoIWFwaUNvbmZpZyB8fCAhYXBpQ29uZmlnW2hhbmRsZXIuZXZlbnRfaGFuZGxlcl0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhcGlDb25maWdPYmplY3Q6IGFueSA9IGFwaUNvbmZpZ1toYW5kbGVyLmV2ZW50X2hhbmRsZXJdO1xyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgcXVlcnlQYXJhbXMsXHJcbiAgICAgICAgICAgIHVybFBhcmFtc1xyXG4gICAgICAgIH0gPSB0aGlzLmV4dGVybmFsUmVxdWVzdFJlc3BvbnNlVXRpbC5mb3JtVGhlUmVxdWVzdE9iaihhcGlDb25maWdPYmplY3QpO1xyXG4gICAgICAgIC8vIHNldCB1cmwgcGFyYW1cclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh1cmxQYXJhbXMpKSB7XHJcbiAgICAgICAgICAgIGlmICh1cmwuaW5jbHVkZXMoYHske2tleX19YCkpIHtcclxuICAgICAgICAgICAgICAgIHVybCA9IHVybC5zcGxpdChgeyR7a2V5fX1gKS5qb2luKGVuY29kZVVSSUNvbXBvbmVudCh1cmxQYXJhbXNba2V5XSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHNldCBxdWVyeSBwYXJhbVxyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHF1ZXJ5UGFyYW1zKSkge1xyXG4gICAgICAgICAgICBpZiAodXJsLmluY2x1ZGVzKGB7JHtrZXl9fWApKSB7XHJcbiAgICAgICAgICAgICAgICB1cmwgPSB1cmwuc3BsaXQoYHske2tleX19YCkuam9pbihlbmNvZGVVUklDb21wb25lbnQocXVlcnlQYXJhbXNba2V5XSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBfdGFyZ2V0ID0gXCJfYmxhbmtcIjtcclxuICAgICAgICBpZiAoaGFuZGxlciAmJiBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcgJiYgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFwIG9mIGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcC5wYXJhbWV0ZXJfdHlwZSA9PT0gJ1RhcmdldCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGFwLnZhbHVlLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2VsZic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGFyZ2V0ID0gJ19zZWxmJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdibGFuayc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGFyZ2V0ID0gJ19ibGFuayc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndG9wJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90YXJnZXQgPSAnX3RvcCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlZGlyZWN0aW9uVXRpbC5yZWRpcmVjdFRvKHN0ZXBJZCwgX3RhcmdldCwgdXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkRlbGV0ZURhdGEoZGVsZXRlV29ybmluZ01lc3NhZ2UsIGhhbmRsZXIsIHByaW1hcnlEYXRhKSB7XHJcbiAgICAgICAgaWYgKGRlbGV0ZVdvcm5pbmdNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNsb3NlQWxsKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpYWxvZ1JlZiA9IHRoaXMuZGlhbG9nLm9wZW4oQWxlcnRNb2RhbENvbXBvbmVudCwge1xyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlbGV0ZVdvcm5pbmdNZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIiBcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGlhbG9nUmVmLmFmdGVyQ2xvc2VkKCkuc3Vic2NyaWJlKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMb2NhbERhdGFQcm9jZXNzKGhhbmRsZXIsIHByaW1hcnlEYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kZWxldGVMb2NhbERhdGFQcm9jZXNzKGhhbmRsZXIsIHByaW1hcnlEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlbGV0ZUxvY2FsRGF0YVByb2Nlc3MoaGFuZGxlciwgcHJpbWFyeURhdGEsIHJlc3BvbnNlRGF0YSA9IHt9KSB7XHJcbiAgICAgICAgbGV0IGJsb2NrRmllbGRzID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnYmxvY2tGaWVsZHMnIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdibG9ja0ZpZWxkcycgfSlbMF0udmFsdWUgPyB0cnVlIDogZmFsc2UgOiBmYWxzZTtcclxuICAgICAgICBsZXQgZmlsdGVyS2V5ID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnUHJpbWFyeUtleU5hbWUnIH0pWzBdLnZhbHVlO1xyXG4gICAgICAgIGxldCB0YWJsZV9rZXkgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICd0YWJsZV9rZXknIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICd0YWJsZV9rZXknIH0pWzBdLnZhbHVlIDogJyc7XHJcbiAgICAgICAgbGV0IGJsb2NrRmllbGROYW1lID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnYmxvY2tGaWVsZHMnIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdibG9ja0ZpZWxkcycgfSlbMF0udmFsdWUgOiAnJztcclxuICAgICAgICBsZXQgYXBpS2V5VmFsdWVBcnIgPSB0aGlzLmdldEFraXRhRGF0YUZyb21IYW5kbGVyKGhhbmRsZXIuZXZlbnRfaGFuZGxlci5zcGxpdCgnIyMnKVswXSlbaGFuZGxlci5ldmVudF9oYW5kbGVyXTtcclxuICAgICAgICBsZXQgYXBpRGF0YSA9IHRoaXMuYXBpRGF0YVNlcnZpY2UuZ2V0QXBpRGF0YUJ5SGFuZGxlcihoYW5kbGVyLmV2ZW50X2hhbmRsZXIuc3BsaXQoJyMjJylbMF0pO1xyXG4gICAgICAgIGxldCBhcGlLZXlWYWx1ZSA9IFtdO1xyXG4gICAgICAgIGxldCBwYXJlbnRQb3NpdGlvbnM7XHJcbiAgICAgICAgbGV0IGRlbGV0ZVBvc2l0aW9uO1xyXG4gICAgICAgIGxldCBsYXN0TnVtYmVyID0gYmxvY2tGaWVsZE5hbWUuc3BsaXQoXCIkXCIpO1xyXG4gICAgICAgIGlmIChhcGlEYXRhLnZhbHVlLmhhbmRsZXJfbmFtZSAmJiBibG9ja0ZpZWxkcyA9PSB0cnVlICYmIHJlc3BvbnNlRGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodGFibGVfa2V5ID09PSBcImJvcnJvd2Vycy5lbXBsb3ltZW50XCIgfHwgdGFibGVfa2V5ID09PSBcInByb3BlcnRpZXMubW9ydGdhZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50UG9zaXRpb25zID0gcHJpbWFyeURhdGE/LnZhbHVlPy5wYXJlbnRQb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZVBvc2l0aW9uID0gcHJpbWFyeURhdGE/LnZhbHVlPy5wb3NpdGlvbjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudFBvc2l0aW9ucyA9IGxhc3ROdW1iZXJbbGFzdE51bWJlci5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZVBvc2l0aW9uID0gcHJpbWFyeURhdGE/LnZhbHVlPy5kYXRhPy5hcHBsaWNhdGlvbl9pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYmxvY2tGaWVsZHMgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBsZXQgdGFibGVLZXlGb3JtYXQgPSB0YWJsZV9rZXkuc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgICAgICBpZiAodGFibGVLZXlGb3JtYXQubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlID0gYXBpS2V5VmFsdWVBcnI/Llt0YWJsZUtleUZvcm1hdFswXV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZSA9IGFwaUtleVZhbHVlQXJyPy5bdGFibGVLZXlGb3JtYXRbMF1dPy5bcGFyZW50UG9zaXRpb25zXT8uW3RhYmxlS2V5Rm9ybWF0WzFdXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWRlbGV0ZVBvc2l0aW9uICYmIHRhYmxlX2tleSAhPT0gXCJib3Jyb3dlcnMuZW1wbG95bWVudFwiICYmIHRhYmxlX2tleSAhPT0gXCJwcm9wZXJ0aWVzLm1vcnRnYWdlXCIpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZVBvc2l0aW9uID0gYXBpS2V5VmFsdWVbcGFyZW50UG9zaXRpb25zXT8uYXBwbGljYXRpb25faWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IG5ld0FycmF5XHJcbiAgICAgICAgICAgIGlmICh0YWJsZV9rZXkgPT09IFwiYm9ycm93ZXJzLmVtcGxveW1lbnRcIiB8fCB0YWJsZV9rZXkgPT09IFwicHJvcGVydGllcy5tb3J0Z2FnZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdBcnJheSA9IGFwaUtleVZhbHVlLmZpbHRlcigoXywgaW5kZXgpID0+IGluZGV4ICE9PSBkZWxldGVQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXdBcnJheSA9IGFwaUtleVZhbHVlLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxbZmlsdGVyS2V5XSAhPSBkZWxldGVQb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0YWJsZUtleUZvcm1hdC5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dID0gbmV3QXJyYXk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25zXVt0YWJsZUtleUZvcm1hdFsxXV0gPSBuZXdBcnJheTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGFibGVfa2V5ID09IFwiYXNzZXRcIiAmJiBhcGlLZXlWYWx1ZUFyclsnYXNzZXQnXS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclsnYXNzZXRUb3RhbCddWydjb3VudCddID0gYXBpS2V5VmFsdWVBcnJbJ2Fzc2V0J10ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2Fzc2V0VG90YWwnXVsnc3VtJ10gPSBhcGlLZXlWYWx1ZUFyclsnYXNzZXQnXS5tYXAoaXRlbSA9PiBpdGVtLmNhc2hfb3JfbWFya2V0X3ZhbHVlKS5yZWR1Y2UoKHByZXYsIG5leHQpID0+IE51bWJlcihwcmV2KSArIE51bWJlcihuZXh0KSk7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclsnYXNzZXRTdHInXSA9IFwiQXNzZXRzIFRvdGFsIGFzc2V0cyBcIiArIGFwaUtleVZhbHVlQXJyWydhc3NldFRvdGFsJ11bJ2NvdW50J10gKyBcIiB8IFRvdGFsIGFzc2V0cyBhbW91bnQgJFwiICsgYXBpS2V5VmFsdWVBcnJbJ2Fzc2V0VG90YWwnXVsnc3VtJ11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYXBpS2V5VmFsdWVBcnJbJ2Fzc2V0J10ubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyWydhc3NldFRvdGFsJ11bJ2NvdW50J10gPSAwO1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2Fzc2V0VG90YWwnXVsnc3VtJ10gPSAwO1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2Fzc2V0U3RyJ10gPSBcIkFzc2V0cyBUb3RhbCBhc3NldHMgMCB8IFRvdGFsIGFzc2V0cyBhbW91bnQgJDBcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0YWJsZV9rZXkgPT0gXCJsaWFiaWxpdGllc1wiICYmIGFwaUtleVZhbHVlQXJyWydsaWFiaWxpdGllcyddLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyWydsaWFiaWxpdHlUb3RhbCddWydjb3VudCddID0gYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0aWVzJ10ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0eVRvdGFsJ11bJ3N1bSddID0gYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0aWVzJ10ubWFwKGl0ZW0gPT4gaXRlbS5tb250aGx5X3BheW1lbnQpLnJlZHVjZSgocHJldiwgbmV4dCkgPT4gTnVtYmVyKHByZXYpICsgTnVtYmVyKG5leHQpKTtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyWydsaWFiaWxpdGllU3RyJ10gPSBcIkxpYWJpbGl0aWVzIFRvdGFsIGxpYWJpbGl0aWVzIFwiICsgYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0eVRvdGFsJ11bJ2NvdW50J10gKyBcIiB8IFRvdGFsIGxpYWJpbGl0aWVzIGFtb3VudCAkXCIgKyBhcGlLZXlWYWx1ZUFyclsnbGlhYmlsaXR5VG90YWwnXVsnc3VtJ11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0aWVzJ10ubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyWydsaWFiaWxpdHlUb3RhbCddWydjb3VudCddID0gMDtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyWydsaWFiaWxpdHlUb3RhbCddWydzdW0nXSA9IDA7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclsnbGlhYmlsaXRpZVN0ciddID0gXCJMaWFiaWxpdGllcyBUb3RhbCBsaWFiaWxpdGllcyAwIHwgVG90YWwgbGlhYmlsaXRpZXMgYW1vdW50ICQwXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGFibGVfa2V5ID09IFwiYm9ycm93ZXJzLmJvcnJvd2VyQWRkcmVzc1wiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFibGVLZXlGb3JtYXQgPSB0YWJsZV9rZXkuc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGFkZHJlc3NEYXRhID0gYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3BhcmVudFBvc2l0aW9uc11bdGFibGVLZXlGb3JtYXRbMV1dXHJcbiAgICAgICAgICAgICAgICBsZXQgcHJldmlvdXNBZGRyZXNzZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50QWRkcmVzcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBhZGRyZXNzRGF0YS5mb3JFYWNoKChhZGRyZXNzLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGRyZXNzLm1vdmVfb3V0X2RhdGUgJiYgYWRkcmVzcy5tb3ZlX291dF9kYXRlICE9IFwiSW52YWxpZCBkYXRlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkcmVzc2VzIHdpdGggbW92ZV9vdXRfZGF0ZSBhcmUgdHJlYXRlZCBhcyBQcmV2aW91c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0FkZHJlc3Nlcy5wdXNoKGFkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25zXVt0YWJsZUtleUZvcm1hdFsxXV1baW5kZXhdWydpc19jdXJyZW50J10gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFjdXJyZW50QWRkcmVzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCBhZGRyZXNzIHdpdGhvdXQgbW92ZV9vdXRfZGF0ZSBpcyB0cmVhdGVkIGFzIEN1cnJlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEFkZHJlc3MgPSBhZGRyZXNzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25zXVt0YWJsZUtleUZvcm1hdFsxXV1baW5kZXhdWydpc19jdXJyZW50J10gPSAnY3VycmVudCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW55IGFkZGl0aW9uYWwgYWRkcmVzc2VzIHdpdGhvdXQgbW92ZV9vdXRfZGF0ZSBhcmUgUHJldmlvdXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNBZGRyZXNzZXMucHVzaChhZGRyZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3BhcmVudFBvc2l0aW9uc11bdGFibGVLZXlGb3JtYXRbMV1dW2luZGV4XVsnaXNfY3VycmVudCddID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25zXVsnYWRkcmVzc1N0ciddID0gYCR7YXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3BhcmVudFBvc2l0aW9uc11bJ3BlcnNvbmFsX2luZm8nXVsnZmlyc3RfbmFtZSddfSdzIGxpdmluZyBhZGRyZXNzIGRldGFpbHMgICAgICAgJHtjdXJyZW50QWRkcmVzcz8uYWRkcmVzcyA/PyAnLSd9YFxyXG4gICAgICAgICAgICAgICAgaWYgKCFhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25zXS5oYXNPd25Qcm9wZXJ0eSgncHJvY2Vzc2FkZHJlc3MnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwYXJlbnRQb3NpdGlvbnNdWydwcm9jZXNzYWRkcmVzcyddID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3BhcmVudFBvc2l0aW9uc10gJiYgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3BhcmVudFBvc2l0aW9uc11bJ3Byb2Nlc3NhZGRyZXNzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25zXVsncHJvY2Vzc2FkZHJlc3MnXVsnY3VycmVudEFkZHJlc3MnXSA9IHsgLi4uY3VycmVudEFkZHJlc3MgfVxyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwYXJlbnRQb3NpdGlvbnNdWydwcm9jZXNzYWRkcmVzcyddWydwcmV2aW91c0FkZHJlc3NlcyddID0gcHJldmlvdXNBZGRyZXNzZXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcImJvcnJvd2Vycy5pbmNvbWVcIikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhYmxlS2V5Rm9ybWF0ID0gdGFibGVfa2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwYXJlbnRQb3NpdGlvbnNdW3RhYmxlS2V5Rm9ybWF0WzFdXS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFsneWVhcmx5RWFybmluZyddID0gdGhpcy5jYWxjdWxhdGVZZWFybHlJbmNvbWUoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBpbmNvbWVEYXRhID0gYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3BhcmVudFBvc2l0aW9uc11bdGFibGVLZXlGb3JtYXRbMV1dXHJcbiAgICAgICAgICAgICAgICBsZXQgdG90YWxJbmNvbWUgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsQW5kQ291bnQoaW5jb21lRGF0YSwgJ3llYXJseUVhcm5pbmcnKS50b3RhbEluY29tZTtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwYXJlbnRQb3NpdGlvbnNdWydpbmNvbWVTdHInXSA9IGAke2FwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwYXJlbnRQb3NpdGlvbnNdWydwZXJzb25hbF9pbmZvJ11bJ2ZpcnN0X25hbWUnXX0ncyBBZGRpdGlvbmFsIGluY29tZSBkZXRhaWxzICAgPHNwYW4+ICAgICBUb3RhbCBJbmNvbWU6ICR7aW5jb21lRGF0YT8ubGVuZ3RoID8/IDB9IHwgVG90YWwgQW1vdW50OiAkICR7dG90YWxJbmNvbWUgPz8gMH0vYW5udWFsbHkgPC9zcGFuPmBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGFibGVfa2V5ID09IFwicHJvcGVydGllc1wiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFibGVLZXlGb3JtYXQgPSB0YWJsZV9rZXkuc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ3Byb3BlcnR5X2xlbmd0aCddID0gYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dLmxlbmd0aCA+IC0xID8gYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dLmxlbmd0aCA6IGFwaUtleVZhbHVlQXJyWydwcm9wZXJ0eV9sZW5ndGgnXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVkRGF0YVRvU3RvcmUoaGFuZGxlciwgYXBpS2V5VmFsdWVBcnIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGFwaURhdGEudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXhBcnIgPSBrZXkubWF0Y2goL14uKj9cXFtbXlxcZF0qKFxcZCspW15cXGRdKlxcXS4qJC8pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gaW5kZXhBcnIgPyBOdW1iZXIoaW5kZXhBcnJbMV0pIDogLTFcclxuICAgICAgICAgICAgICAgIGxldCBpbmRleEtleSA9IGtleS5zcGxpdCgnLicpWzFdO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9iaiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBpS2V5VmFsdWVbaW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlW2luZGV4XVtpbmRleEtleV0gPSBhcGlEYXRhLnZhbHVlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqW2luZGV4S2V5XSA9IGFwaURhdGEudmFsdWVba2V5XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZVtpbmRleF0gPSBvYmo7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFwaUtleVZhbHVlLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbFtmaWx0ZXJLZXldICE9IHByaW1hcnlEYXRhLnZhbHVlLmRhdGFbZmlsdGVyS2V5XTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh0YWJsZV9rZXkgPT0gXCJhc3NldFwiICYmIGFwaUtleVZhbHVlQXJyWydhc3NldCddLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyWydhc3NldFRvdGFsJ11bJ2NvdW50J10gPSBhcGlLZXlWYWx1ZUFyclsnYXNzZXQnXS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclsnYXNzZXRUb3RhbCddWydzdW0nXSA9IGFwaUtleVZhbHVlQXJyWydhc3NldCddLm1hcChpdGVtID0+IGl0ZW0uY2FzaF9vcl9tYXJrZXRfdmFsdWUpLnJlZHVjZSgocHJldiwgbmV4dCkgPT4gTnVtYmVyKHByZXYpICsgTnVtYmVyKG5leHQpKTtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyWydhc3NldFN0ciddID0gXCJBc3NldHMgVG90YWwgYXNzZXRzIFwiICsgYXBpS2V5VmFsdWVBcnJbJ2Fzc2V0VG90YWwnXVsnY291bnQnXSArIFwiIHwgVG90YWwgYXNzZXRzIGFtb3VudCAkXCIgKyBhcGlLZXlWYWx1ZUFyclsnYXNzZXRUb3RhbCddWydzdW0nXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhcGlLZXlWYWx1ZUFyclsnYXNzZXQnXS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2Fzc2V0VG90YWwnXVsnY291bnQnXSA9IDA7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclsnYXNzZXRUb3RhbCddWydzdW0nXSA9IDA7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclsnYXNzZXRTdHInXSA9IFwiQXNzZXRzIFRvdGFsIGFzc2V0cyAwIHwgVG90YWwgYXNzZXRzIGFtb3VudCAkMFwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcImxpYWJpbGl0aWVzXCIgJiYgYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0aWVzJ10ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0eVRvdGFsJ11bJ2NvdW50J10gPSBhcGlLZXlWYWx1ZUFyclsnbGlhYmlsaXRpZXMnXS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclsnbGlhYmlsaXR5VG90YWwnXVsnc3VtJ10gPSBhcGlLZXlWYWx1ZUFyclsnbGlhYmlsaXRpZXMnXS5tYXAoaXRlbSA9PiBpdGVtLm1vbnRobHlfcGF5bWVudCkucmVkdWNlKChwcmV2LCBuZXh0KSA9PiBOdW1iZXIocHJldikgKyBOdW1iZXIobmV4dCkpO1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0aWVTdHInXSA9IFwiTGlhYmlsaXRpZXMgVG90YWwgbGlhYmlsaXRpZXMgXCIgKyBhcGlLZXlWYWx1ZUFyclsnbGlhYmlsaXR5VG90YWwnXVsnY291bnQnXSArIFwiIHwgVG90YWwgbGlhYmlsaXRpZXMgYW1vdW50ICRcIiArIGFwaUtleVZhbHVlQXJyWydsaWFiaWxpdHlUb3RhbCddWydzdW0nXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhcGlLZXlWYWx1ZUFyclsnbGlhYmlsaXRpZXMnXS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0eVRvdGFsJ11bJ2NvdW50J10gPSAwO1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0eVRvdGFsJ11bJ3N1bSddID0gMDtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyWydsaWFiaWxpdGllU3RyJ10gPSBcIkxpYWJpbGl0aWVzIFRvdGFsIGxpYWJpbGl0aWVzIDAgfCBUb3RhbCBsaWFiaWxpdGllcyBhbW91bnQgJDBcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0YWJsZV9rZXkgPT0gXCJib3Jyb3dlcnMuYm9ycm93ZXJBZGRyZXNzXCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0YWJsZUtleUZvcm1hdCA9IHRhYmxlX2tleS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWRkcmVzc0RhdGEgPSBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25zXVt0YWJsZUtleUZvcm1hdFsxXV1cclxuICAgICAgICAgICAgICAgIGxldCBwcmV2aW91c0FkZHJlc3NlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRBZGRyZXNzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGFkZHJlc3NEYXRhLmZvckVhY2goKGFkZHJlc3MsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZHJlc3MubW92ZV9vdXRfZGF0ZSAmJiBhZGRyZXNzLm1vdmVfb3V0X2RhdGUgIT0gXCJJbnZhbGlkIGRhdGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRyZXNzZXMgd2l0aCBtb3ZlX291dF9kYXRlIGFyZSB0cmVhdGVkIGFzIFByZXZpb3VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQWRkcmVzc2VzLnB1c2goYWRkcmVzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwYXJlbnRQb3NpdGlvbnNdW3RhYmxlS2V5Rm9ybWF0WzFdXVtpbmRleF1bJ2lzX2N1cnJlbnQnXSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWN1cnJlbnRBZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGFkZHJlc3Mgd2l0aG91dCBtb3ZlX291dF9kYXRlIGlzIHRyZWF0ZWQgYXMgQ3VycmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWRkcmVzcyA9IGFkZHJlc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwYXJlbnRQb3NpdGlvbnNdW3RhYmxlS2V5Rm9ybWF0WzFdXVtpbmRleF1bJ2lzX2N1cnJlbnQnXSA9ICdjdXJyZW50JztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBbnkgYWRkaXRpb25hbCBhZGRyZXNzZXMgd2l0aG91dCBtb3ZlX291dF9kYXRlIGFyZSBQcmV2aW91c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0FkZHJlc3Nlcy5wdXNoKGFkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25zXVt0YWJsZUtleUZvcm1hdFsxXV1baW5kZXhdWydpc19jdXJyZW50J10gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwYXJlbnRQb3NpdGlvbnNdWydhZGRyZXNzU3RyJ10gPSBgJHthcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25zXVsncGVyc29uYWxfaW5mbyddWydmaXJzdF9uYW1lJ119J3MgbGl2aW5nIGFkZHJlc3MgZGV0YWlscyAgICAgICAke2N1cnJlbnRBZGRyZXNzPy5hZGRyZXNzID8/ICctJ31gXHJcbiAgICAgICAgICAgICAgICBpZiAoIWFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwYXJlbnRQb3NpdGlvbnNdLmhhc093blByb3BlcnR5KCdwcm9jZXNzYWRkcmVzcycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3BhcmVudFBvc2l0aW9uc11bJ3Byb2Nlc3NhZGRyZXNzJ10gPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25zXSAmJiBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25zXVsncHJvY2Vzc2FkZHJlc3MnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwYXJlbnRQb3NpdGlvbnNdWydwcm9jZXNzYWRkcmVzcyddWydjdXJyZW50QWRkcmVzcyddID0geyAuLi5jdXJyZW50QWRkcmVzcyB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3BhcmVudFBvc2l0aW9uc11bJ3Byb2Nlc3NhZGRyZXNzJ11bJ3ByZXZpb3VzQWRkcmVzc2VzJ10gPSBwcmV2aW91c0FkZHJlc3NlcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGFibGVfa2V5ID09IFwiYm9ycm93ZXJzLmluY29tZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFibGVLZXlGb3JtYXQgPSB0YWJsZV9rZXkuc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3BhcmVudFBvc2l0aW9uc11bdGFibGVLZXlGb3JtYXRbMV1dLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50Wyd5ZWFybHlFYXJuaW5nJ10gPSB0aGlzLmNhbGN1bGF0ZVllYXJseUluY29tZShlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGluY29tZURhdGEgPSBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25zXVt0YWJsZUtleUZvcm1hdFsxXV1cclxuICAgICAgICAgICAgICAgIGxldCB0b3RhbEluY29tZSA9IHRoaXMuY2FsY3VsYXRlVG90YWxBbmRDb3VudChpbmNvbWVEYXRhLCAneWVhcmx5RWFybmluZycpLnRvdGFsSW5jb21lO1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3BhcmVudFBvc2l0aW9uc11bJ2luY29tZVN0ciddID0gYCR7YXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3BhcmVudFBvc2l0aW9uc11bJ3BlcnNvbmFsX2luZm8nXVsnZmlyc3RfbmFtZSddfSdzIEFkZGl0aW9uYWwgaW5jb21lIGRldGFpbHMgICA8c3Bhbj4gICAgIFRvdGFsIEluY29tZTogJHtpbmNvbWVEYXRhPy5sZW5ndGggPz8gMH0gfCBUb3RhbCBBbW91bnQ6ICQgJHt0b3RhbEluY29tZSA/PyAwfS9hbm51YWxseSA8L3NwYW4+YFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0YWJsZV9rZXkgPT0gXCJwcm9wZXJ0aWVzXCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0YWJsZUtleUZvcm1hdCA9IHRhYmxlX2tleS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZVsncHJvcGVydHlfbGVuZ3RoJ10gPSBhcGlLZXlWYWx1ZVt0YWJsZUtleUZvcm1hdFswXV0ubGVuZ3RoID4gLTEgPyBhcGlLZXlWYWx1ZVt0YWJsZUtleUZvcm1hdFswXV0ubGVuZ3RoIDogYXBpS2V5VmFsdWVbJ3Byb3BlcnR5X2xlbmd0aCddO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZWREYXRhVG9TdG9yZShoYW5kbGVyLCBhcGlLZXlWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGNhbmNlbExvY2FsRGF0YVByb2Nlc3MoaGFuZGxlciwgcHJpbWFyeURhdGEpIHtcclxuICAgICAgICBsZXQgYXBpS2V5VmFsdWVBcnIgPSB0aGlzLmdldEFraXRhRGF0YUZyb21IYW5kbGVyKGhhbmRsZXIuZXZlbnRfaGFuZGxlci5zcGxpdCgnIyMnKVswXSlbaGFuZGxlci5ldmVudF9oYW5kbGVyXTtcclxuICAgICAgICBpZiAocHJpbWFyeURhdGEudmFsdWUpIHtcclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnIucHJpbWFyeURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcHJpbWFyeURhdGEudmFsdWUucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICBsaW5rZWRCbG9ja0lkOiBwcmltYXJ5RGF0YS52YWx1ZS5saW5rZWRCbG9ja0lkLFxyXG4gICAgICAgICAgICAgICAgcmVwZWF0ZWRCbG9ja0ZpZWxkSWQ6IHByaW1hcnlEYXRhLnZhbHVlLnJlcGVhdGVkQmxvY2tGaWVsZElkLFxyXG4gICAgICAgICAgICAgICAgdW5pcXVlX2lkOiBwcmltYXJ5RGF0YS52YWx1ZS51bmlxdWVfaWQsXHJcbiAgICAgICAgICAgICAgICBpc0NhbmNlbEV2ZW50OiBcInRydWVcIixcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVtaXRVcGRhdGVkRGF0YVRvU3RvcmUoaGFuZGxlciwgYXBpS2V5VmFsdWVBcnIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzYXZlTG9jYWxEYXRhUHJvY2VzcyhoYW5kbGVyLCBwcmltYXJ5RGF0YSwgcmVzcG9uc2VEYXRhID0ge30pIHtcclxuICAgICAgICBsZXQgcHJpbWFyeUtleU5hbWUgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdQcmltYXJ5S2V5TmFtZScgfSkubGVuZ3RoID4gMCA/IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ1ByaW1hcnlLZXlOYW1lJyB9KVswXS52YWx1ZSA6ICcnO1xyXG4gICAgICAgIGxldCBSZWFkRGF0YUZyb21Nb2RhbCA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ1JlYWREYXRhRnJvbU1vZGFsJyB9KS5sZW5ndGggPiAwID8gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnUmVhZERhdGFGcm9tTW9kYWwnIH0pWzBdLnZhbHVlID09ICd0cnVlJyA/IHRydWUgOiBmYWxzZSA6IGZhbHNlO1xyXG4gICAgICAgIGxldCBibG9ja0ZpZWxkcyA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ2Jsb2NrRmllbGRzJyB9KS5sZW5ndGggPiAwID8gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnYmxvY2tGaWVsZHMnIH0pWzBdLnZhbHVlID8gdHJ1ZSA6IGZhbHNlIDogZmFsc2U7XHJcbiAgICAgICAgbGV0IGJsb2NrRmllbGROYW1lID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnYmxvY2tGaWVsZHMnIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdibG9ja0ZpZWxkcycgfSlbMF0udmFsdWUgOiAnJztcclxuICAgICAgICBsZXQgdGFibGVfa2V5ID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAndGFibGVfa2V5JyB9KS5sZW5ndGggPiAwID8gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAndGFibGVfa2V5JyB9KVswXS52YWx1ZSA6ICcnO1xyXG4gICAgICAgIGxldCBzcGxpdEtleXMgPSBwcmltYXJ5S2V5TmFtZS5zcGxpdCgnfHwnKTtcclxuICAgICAgICBsZXQgdGVtcEtleUNyZWF0ZTtcclxuICAgICAgICBpZiAoc3BsaXRLZXlzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcHJpbWFyeUtleU5hbWUgPSBzcGxpdEtleXNbMF07XHJcbiAgICAgICAgICAgIHRlbXBLZXlDcmVhdGUgPSAnXycgKyBzcGxpdEtleXNbMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudW5pcXVlRmllbGRzID0gW107XHJcbiAgICAgICAgbGV0IHVuaXF1ZUZpZWxkc0FkZGl0aW9uYWxQYXJhbSA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ1VuaXF1ZUZpZWxkcycgfSk7XHJcbiAgICAgICAgaWYgKHVuaXF1ZUZpZWxkc0FkZGl0aW9uYWxQYXJhbS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHVuaXF1ZUZpZWxkc0FkZGl0aW9uYWxQYXJhbVswXS52YWx1ZS5zcGxpdCgnfHwnKS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW1lbnRBcnIgPSBlbGVtZW50LnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcE9iaiA9IHtcclxuICAgICAgICAgICAgICAgICAgICByZXFfa2V5OiBlbGVtZW50QXJyLmxlbmd0aCA+IDAgPyBlbGVtZW50QXJyWzBdIDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZWxlbWVudEFyci5sZW5ndGggPiAxID8gZWxlbWVudEFyclsxXSA6ICdQbGVhc2UgcHJvdmlkZSB1bmlxdWUgdmFsdWUhJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy51bmlxdWVGaWVsZHMucHVzaCh0ZW1wT2JqKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHNlY3Rpb25GaWVsZHMgPSB7fTtcclxuICAgICAgICBsZXQgc2VjdGlvbkZpZWxkc0ZpbHRlcmVkID0ge307XHJcbiAgICAgICAgaWYgKGJsb2NrRmllbGRzICE9IHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKFJlYWREYXRhRnJvbU1vZGFsKSB7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uRmllbGRzID0gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZSAmJiB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLnJvb3REYXRhICYmIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2Uucm9vdERhdGFbJ3NlY3Rpb25GaWVsZHMnXSA/IHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2Uucm9vdERhdGFbJ3NlY3Rpb25GaWVsZHMnXSA6IHt9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkZpZWxkcyA9IHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UgJiYgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sYXN0U3RlcFJvb3REYXRhICYmIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UubGFzdFN0ZXBSb290RGF0YVsnc2VjdGlvbkZpZWxkcyddID8gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sYXN0U3RlcFJvb3REYXRhWydzZWN0aW9uRmllbGRzJ10gOiB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBGaWx0ZXJpbmcgb25seSBjdXJyZW50IHN0ZXAgZGF0YVxyXG4gICAgICAgICAgICBsZXQgc3RlcElkID0gUmVhZERhdGFGcm9tTW9kYWwgPyB3aW5kb3dbJ2N1cnJlbnRNb2RhbElkJ10gOiB3aW5kb3dbJ2N1cnJlbnRTdGVwSWQnXTtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkZpZWxkc0FycmF5ID0gT2JqZWN0LmVudHJpZXMoc2VjdGlvbkZpZWxkcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkU2VjdGlvbkZpZWxkcyA9IHNlY3Rpb25GaWVsZHNBcnJheS5maWx0ZXIoKFtrZXksIHZhbHVlXSkgPT4ga2V5LmluY2x1ZGVzKHN0ZXBJZCkpO1xyXG4gICAgICAgICAgICAvLyBsZXQgc2VjdGlvbkZpZWxkc0ZpbHRlcmVkID0ge307XHJcbiAgICAgICAgICAgIGZpbHRlcmVkU2VjdGlvbkZpZWxkcy5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkZpZWxkc0ZpbHRlcmVkW2VbMF1dID0gZVsxXTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWN0aW9uRmllbGRzID0gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZSAmJiB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLmxhc3RTdGVwUm9vdERhdGEgJiYgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sYXN0U3RlcFJvb3REYXRhWydibG9ja0ZpZWxkcyddID8gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sYXN0U3RlcFJvb3REYXRhWydibG9ja0ZpZWxkcyddIDoge307XHJcbiAgICAgICAgICAgIHNlY3Rpb25GaWVsZHNGaWx0ZXJlZFtibG9ja0ZpZWxkTmFtZV0gPSBzZWN0aW9uRmllbGRzW2Jsb2NrRmllbGROYW1lXTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBuZXdPYmo6IGFueSA9IHt9O1xyXG4gICAgICAgIGlmIChzZWN0aW9uRmllbGRzRmlsdGVyZWQpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoc2VjdGlvbkZpZWxkc0ZpbHRlcmVkKSkge1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkZpZWxkc0ZpbHRlcmVkW2tleV0/LmZvckVhY2goZmllbGRJZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBEYXRhU2VydmljZS5nZXRJbmRpdmlkdWFsQXBwRGF0YShmaWVsZElkKS5waXBlKHRha2UoMSkpLnN1YnNjcmliZShmaWVsZERhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGREYXRhLmxlbmd0aCA+IDAgJiYgZmllbGREYXRhWzBdWydyZXF1ZXN0QXBpS2V5J10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXFLZXkgPSBmaWVsZERhdGFbMF1bJ3JlcXVlc3RBcGlLZXknXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZFZhbHVlID0gZmllbGREYXRhWzBdWyd2YWx1ZSddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcUtleSAhPSBcIlwiICYmIHJlcUtleSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdPYmpbcmVxS2V5XSA9IGZpZWxkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGREYXRhWzBdWydpc1JlcGVhdGVkRmllbGQnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrSWQgPSBmaWVsZERhdGFbMF1bXCJsaW5rZWRCbG9ja0lkXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBibG9ja0RhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBLZXlDcmVhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tEYXRhID0gdGhpcy5nZXRSZXBldGFibGVCbG9ja0RhdGFGcm9tQmxvY2tJZHdpdGhSZXNwb25zZUtleShibG9ja0lkLCByZXFLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrRGF0YSA9IHRoaXMuZ2V0UmVwZXRhYmxlQmxvY2tEYXRhRnJvbUJsb2NrSWQoYmxvY2tJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXFLZXkgIT0gXCJcIiAmJiByZXFLZXkgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld09ialtyZXFLZXldID0gYmxvY2tEYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGREYXRhWzBdWydhcGlLZXknXSA9PSAnR2VuZXJpYyBCbG9jaycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImZpZWxkOi0tLS0+IFwiLGZpZWxkRGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja0lkID0gZmllbGREYXRhWzBdW1wibGlua2VkQmxvY2tJZFwiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAoYmxvY2tJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBibG9ja09iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UubG9hZEJsb2NrQnlOYW1lKGJsb2NrSWQpLnRvUHJvbWlzZSgpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrRmllbGRzICE9IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbJ2Jsb2NrX2ZpZWxkcyddLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRbJ2ZpZWxkX3R5cGUnXSAhPSBcIkJ1dHRvblwiICYmIGVsZW1lbnRbJ2ZpZWxkX3R5cGUnXSAhPSBcImxhYmVsXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2NrRmllbGRSZXF1ZXN0S2V5ID0gZWxlbWVudFsncmVxdWVzdEFwaUtleSddID8gZWxlbWVudFsncmVxdWVzdEFwaUtleSddIDogZWxlbWVudFsndW5pcXVlX2lkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldCBibG9ja0ZpZWxkUmVxdWVzdEtleSA9IGVsZW1lbnRbJ3JlcXVlc3RBcGlLZXknXS5zcGxpdCgnIyMnKVtlbGVtZW50WydyZXF1ZXN0QXBpS2V5J10uc3BsaXQoJyMjJykubGVuZ3RoIC0gMV0gPyBlbGVtZW50WydyZXF1ZXN0QXBpS2V5J10uc3BsaXQoJyMjJylbZWxlbWVudFsncmVxdWVzdEFwaUtleSddLnNwbGl0KCcjIycpLmxlbmd0aCAtIDFdIDogZWxlbWVudFsndW5pcXVlX2lkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBibG9ja0ZpZWxkVmFsdWUgPSB0aGlzLmFwcERhdGFTZXJ2aWNlLmdldEZpZWxkRGF0YUJ5RmllbGRJZChlbGVtZW50LnVuaXF1ZV9pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrT2JqZWN0W2Jsb2NrRmllbGRSZXF1ZXN0S2V5XSA9IGJsb2NrRmllbGRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ1bmlxdWVfaWQ6IFwiLCBlbGVtZW50LnVuaXF1ZV9pZCwgXCIgZmllbGQgZGF0YTogXCIsIHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0RmllbGREYXRhQnlGaWVsZElkKGVsZW1lbnQudW5pcXVlX2lkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhWydibG9ja19maWVsZHMnXS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50WydmaWVsZF90eXBlJ10gIT0gXCJCdXR0b25cIiAmJiBlbGVtZW50WydmaWVsZF90eXBlJ10gIT0gXCJsYWJlbFwiICYmIGVsZW1lbnRbJ2ZpZWxkX3R5cGUnXSAhPSBcIlRhYmxlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2NrRmllbGRSZXF1ZXN0S2V5ID0gZWxlbWVudFsncmVxdWVzdEFwaUtleSddID8gZWxlbWVudFsncmVxdWVzdEFwaUtleSddIDogZWxlbWVudFsndW5pcXVlX2lkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldCBibG9ja0ZpZWxkUmVxdWVzdEtleSA9IGVsZW1lbnRbJ3JlcXVlc3RBcGlLZXknXS5zcGxpdCgnIyMnKVtlbGVtZW50WydyZXF1ZXN0QXBpS2V5J10uc3BsaXQoJyMjJykubGVuZ3RoIC0gMV0gPyBlbGVtZW50WydyZXF1ZXN0QXBpS2V5J10uc3BsaXQoJyMjJylbZWxlbWVudFsncmVxdWVzdEFwaUtleSddLnNwbGl0KCcjIycpLmxlbmd0aCAtIDFdIDogZWxlbWVudFsndW5pcXVlX2lkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBibG9ja0ZpZWxkVmFsdWUgPSB0aGlzLmFwcERhdGFTZXJ2aWNlLmdldEZpZWxkRGF0YUJ5RmllbGRJZChlbGVtZW50LnVuaXF1ZV9pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrT2JqZWN0W2Jsb2NrRmllbGRSZXF1ZXN0S2V5XSA9IGJsb2NrRmllbGRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ1bmlxdWVfaWQ6IFwiLCBlbGVtZW50LnVuaXF1ZV9pZCwgXCIgZmllbGQgZGF0YTogXCIsIHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0RmllbGREYXRhQnlGaWVsZElkKGVsZW1lbnQudW5pcXVlX2lkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiYmxvY2tEYXRhOi0tLS0tPiBcIixibG9ja09iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXFLZXkgIT0gXCJcIiAmJiByZXFLZXkgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdPYmpbcmVxS2V5XSA9IGJsb2NrT2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaXNEdXBsaWNhdGVJdGVtRm91bmQgPSAtMTtcclxuICAgICAgICBsZXQgaXNOb25VbmlxdWVJdGVtRm91bmQgPSAtMTtcclxuICAgICAgICBsZXQgbm9uVW5pcXVlSXRlbVdhcm5pbmdNc2cgPSBcIlZhbHVlIHByb3ZpZGVkIGlzIG5vdCB1bmlxdWUhXCI7XHJcbiAgICAgICAgbGV0IGFwaURhdGFzID0gdGhpcy5hcGlEYXRhU2VydmljZS5nZXRBcGlEYXRhQnlIYW5kbGVyKGhhbmRsZXIuZXZlbnRfaGFuZGxlci5zcGxpdCgnIyMnKVswXSk7XHJcbiAgICAgICAgbGV0IHBhcmVudFBvc2l0aW9uO1xyXG4gICAgICAgIGxldCBwb3NpdGlvbjtcclxuICAgICAgICBpZiAoYXBpRGF0YXMudmFsdWUuaGFuZGxlcl9uYW1lICYmIGJsb2NrRmllbGRzID09IHRydWUgJiYgcmVzcG9uc2VEYXRhKSB7XHJcbiAgICAgICAgICAgIHBhcmVudFBvc2l0aW9uID0gcHJpbWFyeURhdGE/LnZhbHVlPy5wYXJlbnRQb3NpdGlvbjtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBwcmltYXJ5RGF0YT8udmFsdWU/LnBvc2l0aW9uO1xyXG4gICAgICAgICAgICBuZXdPYmpbcHJpbWFyeUtleU5hbWVdID0gcmVzcG9uc2VEYXRhWydkYXRhJ10/LmFwcGxpY2F0aW9uX2lkIHx8IHJlc3BvbnNlRGF0YVsnZGF0YSddPy5tYWluQWRkcmVzc1Jlc3BvbnNlPy5hcHBsaWNhdGlvbl9pZDtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlRGF0YSAmJiByZXNwb25zZURhdGFbJ2RhdGEnXSAmJiByZXNwb25zZURhdGFbJ2RhdGEnXVsnYWRkcmVzc1NpdHVhdGlvbnNSZXNwb25zZSddICYmIHJlc3BvbnNlRGF0YVsnZGF0YSddWydhZGRyZXNzU2l0dWF0aW9uc1Jlc3BvbnNlJ11bJ2FwcGxpY2F0aW9uX2lkJ10pIHtcclxuICAgICAgICAgICAgICAgIG5ld09ialsnYWRkcmVzc19zaXR1YXRpb25zX2FwcGxpY2F0aW9uX2lkJ10gPSByZXNwb25zZURhdGFbJ2RhdGEnXVsnYWRkcmVzc1NpdHVhdGlvbnNSZXNwb25zZSddWydhcHBsaWNhdGlvbl9pZCddO1xyXG4gICAgICAgICAgICAgICAgbmV3T2JqWydhZGRyZXNzJ10gPSAobmV3T2JqPy51bml0ID8gKG5ld09iaj8udW5pdCArICctJykgOiAnJykgKyBgJHtuZXdPYmo/LnN0cmVldF9sb25nfSAke25ld09iaj8uc3RyZWV0X3R5cGV9ICR7bmV3T2JqPy5zdHJlZXRfZGlyZWN0aW9ufSAke25ld09iaj8uY291bnRyeX1gICsgKG5ld09iaj8ucHJvdmluY2UgPyAoJywgJyArIG5ld09iaj8ucHJvdmluY2UpIDogJycpICsgKG5ld09iaj8ucG9zdGFsX2NvZGUgPyAoJywgJyArIG5ld09iaj8ucG9zdGFsX2NvZGUpIDogJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCFuZXdPYmpbcHJpbWFyeUtleU5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdPYmpbcHJpbWFyeUtleU5hbWVdID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGFwaUtleVZhbHVlQXJyID0gYmxvY2tGaWVsZHMgPT0gdHJ1ZSA/IHRoaXMuZ2V0QWtpdGFEYXRhRnJvbUhhbmRsZXIoaGFuZGxlci5ldmVudF9oYW5kbGVyLnNwbGl0KCcjIycpWzBdKVtoYW5kbGVyLmV2ZW50X2hhbmRsZXJdIDogdGhpcy5nZXRBcGlLZXlWYWx1ZVBhaXIoYXBpRGF0YXMpOztcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImFwaUtleVZhbHVlQXJyOiBcIiwgYXBpS2V5VmFsdWVBcnIpXHJcbiAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcImFzc2V0XCIgfHwgdGFibGVfa2V5ID09IFwibGlhYmlsaXRpZXNcIikge1xyXG4gICAgICAgICAgICBsZXQgYm9ycm93ZXJMaXN0ID0gYXBpS2V5VmFsdWVBcnJbJ2JvcnJvd2VyTGlzdCddO1xyXG4gICAgICAgICAgICBsZXQgYm9ycm93ZXJOYW1lc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgYm9ycm93ZXJOYW1lc0xpc3QgPSBib3Jyb3dlckxpc3QuZmlsdGVyKG9iaiA9PiBuZXdPYmpbXCJib3Jyb3dlcl9pZHNcIl0uaW5kZXhPZihvYmouaWQpID4gLTEpXHJcbiAgICAgICAgICAgIGxldCBib3Jyb3dlck5hbWVzID0gYm9ycm93ZXJOYW1lc0xpc3QubWFwKG9iaiA9PiBvYmoubmFtZSkuam9pbignLCAnKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJib3Jyb3dlck5hbWVzOiBcIiwgYm9ycm93ZXJOYW1lcylcclxuICAgICAgICAgICAgbmV3T2JqWydhc3NvaWNhdGVkX2JvcnJvd2VyX2lkJ10gPSBuZXdPYmpbJ2JvcnJvd2VyX2lkcyddO1xyXG4gICAgICAgICAgICBuZXdPYmpbJ2JvcnJvd2VyX2lkcyddID0gYm9ycm93ZXJOYW1lcztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobmV3T2JqW3ByaW1hcnlLZXlOYW1lXSkgJiYgdGVtcEtleUNyZWF0ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBkdW1teUFycmF5ID0gbmV3T2JqW3ByaW1hcnlLZXlOYW1lXTtcclxuICAgICAgICAgICAgbGV0IGFwaUtleVZhbHVlU2V0ID0gW107XHJcbiAgICAgICAgICAgIGxldCBpbmNsdWRlZElkcyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsVmFsdWUgPSAtMTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gZHVtbXlBcnJheS5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChkdW1teUFycmF5W2ldPy5bcHJpbWFyeUtleU5hbWVdICYmIGR1bW15QXJyYXlbaV1bcHJpbWFyeUtleU5hbWVdICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvcGllZE9iamVjdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobmV3T2JqKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29waWVkT2JqZWN0W3ByaW1hcnlLZXlOYW1lXSA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSArIGkpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29waWVkT2JqZWN0W3ByaW1hcnlLZXlOYW1lICsgdGVtcEtleUNyZWF0ZV0gPSBkdW1teUFycmF5W2ldW3ByaW1hcnlLZXlOYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZVNldC5wdXNoKGNvcGllZE9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVTZXQuZm9yRWFjaCgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudW5pcXVlRmllbGRzLmZvckVhY2goKHZhbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5jbHVkZWRJZHMuaW5jbHVkZXModmFsdWVbdmFsLnJlcV9rZXldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZElkcy5wdXNoKHZhbHVlW3ZhbC5yZXFfa2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbFZhbHVlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsVmFsdWUgIT0gMSkge1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnIuZm9yRWFjaCgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuaXF1ZUZpZWxkcy5mb3JFYWNoKCh2YWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluY2x1ZGVkSWRzLmluY2x1ZGVzKHZhbHVlW3ZhbC5yZXFfa2V5XSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWxWYWx1ZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsVmFsdWUgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcGlLZXlWYWx1ZUFycjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyLnB1c2goLi4uYXBpS2V5VmFsdWVTZXQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgZHVtbXlBcnJheSA9IGFwaUtleVZhbHVlQXJyO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsVmFsdWUgPSAtMTtcclxuICAgICAgICAgICAgaWYgKGJsb2NrRmllbGRzICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFycj8uZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlW3ByaW1hcnlLZXlOYW1lXSA9PSBuZXdPYmpbcHJpbWFyeUtleU5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRHVwbGljYXRlSXRlbUZvdW5kID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5pcXVlRmllbGRzLmZvckVhY2goKHZhbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVbdmFsLnJlcV9rZXldID09IG5ld09ialt2YWwucmVxX2tleV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wS2V5Q3JlYXRlICYmIHZhbHVlW3ByaW1hcnlLZXlOYW1lXSAhPSBuZXdPYmpbcHJpbWFyeUtleU5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbFZhbHVlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNOb25VbmlxdWVJdGVtRm91bmQgPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25VbmlxdWVJdGVtV2FybmluZ01zZyA9IHZhbC5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaXNEdXBsaWNhdGVJdGVtRm91bmQgPiAtMSAmJiB0aGlzLm1vZGVsVmFsdWUgIT0gMSkge1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbaXNEdXBsaWNhdGVJdGVtRm91bmRdID0gbmV3T2JqO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzTm9uVW5pcXVlSXRlbUZvdW5kID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc25hY2tCYXIub3Blbihub25VbmlxdWVJdGVtV2FybmluZ01zZywgJ09LJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsUG9zaXRpb246ICd0b3AnLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhbmVsQ2xhc3M6IFsnbWF0LXRvb2xiYXInLCAnbWF0LXByaW1hcnknXVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlbFZhbHVlID09IDEpIHtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyID0gZHVtbXlBcnJheTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChibG9ja0ZpZWxkcyAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyLnB1c2gobmV3T2JqKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhYmxlS2V5Rm9ybWF0ID0gdGFibGVfa2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50QXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVLZXlGb3JtYXQubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50QXJyYXkgPSBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlX2tleSA9PT0gXCJib3Jyb3dlcnMuZW1wbG95bWVudFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRBcnJheSA9IGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwYXJlbnRQb3NpdGlvbl1bdGFibGVLZXlGb3JtYXRbMV1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50QXJyYXkgPSBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dW3RhYmxlS2V5Rm9ybWF0WzFdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50QXJyYXkgJiYgQXJyYXkuaXNBcnJheShwYXJlbnRBcnJheSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFPYmplY3QuaXNFeHRlbnNpYmxlKHBhcmVudEFycmF5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50QXJyYXkgPSBbLi4ucGFyZW50QXJyYXksIG5ld09ial07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRBcnJheS5wdXNoKG5ld09iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlS2V5Rm9ybWF0Lmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXSA9IHBhcmVudEFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZV9rZXkgPT09IFwiYm9ycm93ZXJzLmJvcnJvd2VyQWRkcmVzc1wiIHx8IHRhYmxlX2tleSA9PT0gXCJib3Jyb3dlcnMuaW5jb21lXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwb3NpdGlvbl1bdGFibGVLZXlGb3JtYXRbMV1dID0gcGFyZW50QXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcGFyZW50UG9zaXRpb25dW3RhYmxlS2V5Rm9ybWF0WzFdXSA9IHBhcmVudEFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YWJsZV9rZXkgPT0gXCJhc3NldFwiKSB7XHJcbiAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyWydhc3NldFRvdGFsJ11bJ2NvdW50J10gPSBhcGlLZXlWYWx1ZUFyclsnYXNzZXQnXS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyWydhc3NldFRvdGFsJ11bJ3N1bSddID0gYXBpS2V5VmFsdWVBcnJbJ2Fzc2V0J10ubWFwKGl0ZW0gPT4gaXRlbS5jYXNoX29yX21hcmtldF92YWx1ZSkucmVkdWNlKChwcmV2LCBuZXh0KSA9PiBOdW1iZXIocHJldikgKyBOdW1iZXIobmV4dCkpO1xyXG4gICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclsnYXNzZXRTdHInXSA9IFwiQXNzZXRzIFRvdGFsIGFzc2V0cyBcIiArIGFwaUtleVZhbHVlQXJyWydhc3NldFRvdGFsJ11bJ2NvdW50J10gKyBcIiB8IFRvdGFsIGFzc2V0cyBhbW91bnQgJFwiICsgYXBpS2V5VmFsdWVBcnJbJ2Fzc2V0VG90YWwnXVsnc3VtJ11cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcImxpYWJpbGl0aWVzXCIpIHtcclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0eVRvdGFsJ11bJ2NvdW50J10gPSBhcGlLZXlWYWx1ZUFyclsnbGlhYmlsaXRpZXMnXS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyWydsaWFiaWxpdHlUb3RhbCddWydzdW0nXSA9IGFwaUtleVZhbHVlQXJyWydsaWFiaWxpdGllcyddLm1hcChpdGVtID0+IGl0ZW0ubW9udGhseV9wYXltZW50KS5yZWR1Y2UoKHByZXYsIG5leHQpID0+IE51bWJlcihwcmV2KSArIE51bWJlcihuZXh0KSk7XHJcbiAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyWydsaWFiaWxpdGllU3RyJ10gPSBcIkxpYWJpbGl0aWVzIFRvdGFsIGxpYWJpbGl0aWVzIFwiICsgYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0eVRvdGFsJ11bJ2NvdW50J10gKyBcIiB8IFRvdGFsIGxpYWJpbGl0aWVzIGFtb3VudCAkXCIgKyBhcGlLZXlWYWx1ZUFyclsnbGlhYmlsaXR5VG90YWwnXVsnc3VtJ11cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcImJvcnJvd2Vycy5ib3Jyb3dlckFkZHJlc3NcIikge1xyXG4gICAgICAgICAgICBsZXQgdGFibGVLZXlGb3JtYXQgPSB0YWJsZV9rZXkuc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgICAgICBsZXQgYWRkcmVzc0RhdGEgPSBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dW3RhYmxlS2V5Rm9ybWF0WzFdXVxyXG4gICAgICAgICAgICBsZXQgcHJldmlvdXNBZGRyZXNzZXMgPSBbXTtcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRBZGRyZXNzID0gbnVsbDtcclxuICAgICAgICAgICAgYWRkcmVzc0RhdGEuZm9yRWFjaCgoYWRkcmVzcywgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhZGRyZXNzLm1vdmVfb3V0X2RhdGUgJiYgYWRkcmVzcy5tb3ZlX291dF9kYXRlICE9IFwiSW52YWxpZCBkYXRlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGRyZXNzZXMgd2l0aCBtb3ZlX291dF9kYXRlIGFyZSB0cmVhdGVkIGFzIFByZXZpb3VzXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNBZGRyZXNzZXMucHVzaChhZGRyZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dW3RhYmxlS2V5Rm9ybWF0WzFdXVtpbmRleF1bJ2lzX2N1cnJlbnQnXSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghY3VycmVudEFkZHJlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCBhZGRyZXNzIHdpdGhvdXQgbW92ZV9vdXRfZGF0ZSBpcyB0cmVhdGVkIGFzIEN1cnJlbnRcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWRkcmVzcyA9IGFkZHJlc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3Bvc2l0aW9uXVt0YWJsZUtleUZvcm1hdFsxXV1baW5kZXhdWydpc19jdXJyZW50J10gPSAnY3VycmVudCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFueSBhZGRpdGlvbmFsIGFkZHJlc3NlcyB3aXRob3V0IG1vdmVfb3V0X2RhdGUgYXJlIFByZXZpb3VzXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNBZGRyZXNzZXMucHVzaChhZGRyZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dW3RhYmxlS2V5Rm9ybWF0WzFdXVtpbmRleF1bJ2lzX2N1cnJlbnQnXSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3Bvc2l0aW9uXVsnYWRkcmVzc1N0ciddID0gYCR7YXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3Bvc2l0aW9uXVsncGVyc29uYWxfaW5mbyddWydmaXJzdF9uYW1lJ119J3MgbGl2aW5nIGFkZHJlc3MgZGV0YWlscyAgICAgICAke2N1cnJlbnRBZGRyZXNzPy5hZGRyZXNzID8/ICctJ31gXHJcbiAgICAgICAgICAgIGlmICghYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3Bvc2l0aW9uXS5oYXNPd25Qcm9wZXJ0eSgncHJvY2Vzc2FkZHJlc3MnKSkge1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3Bvc2l0aW9uXVsncHJvY2Vzc2FkZHJlc3MnXSA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dICYmIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwb3NpdGlvbl1bJ3Byb2Nlc3NhZGRyZXNzJ10pIHtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwb3NpdGlvbl1bJ3Byb2Nlc3NhZGRyZXNzJ11bJ2N1cnJlbnRBZGRyZXNzJ10gPSB7IC4uLmN1cnJlbnRBZGRyZXNzIH1cclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwb3NpdGlvbl1bJ3Byb2Nlc3NhZGRyZXNzJ11bJ3ByZXZpb3VzQWRkcmVzc2VzJ10gPSBwcmV2aW91c0FkZHJlc3NlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGFibGVfa2V5ID09IFwiYm9ycm93ZXJzLmluY29tZVwiKSB7XHJcbiAgICAgICAgICAgIGxldCB0YWJsZUtleUZvcm1hdCA9IHRhYmxlX2tleS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwb3NpdGlvbl1bdGFibGVLZXlGb3JtYXRbMV1dLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRbJ3llYXJseUVhcm5pbmcnXSA9IHRoaXMuY2FsY3VsYXRlWWVhcmx5SW5jb21lKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGV0IGluY29tZURhdGEgPSBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dW3RhYmxlS2V5Rm9ybWF0WzFdXVxyXG4gICAgICAgICAgICBsZXQgdG90YWxJbmNvbWUgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsQW5kQ291bnQoaW5jb21lRGF0YSwgJ3llYXJseUVhcm5pbmcnKS50b3RhbEluY29tZTtcclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3Bvc2l0aW9uXVsnaW5jb21lU3RyJ10gPSBgJHthcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dWydwZXJzb25hbF9pbmZvJ11bJ2ZpcnN0X25hbWUnXX0ncyBBZGRpdGlvbmFsIGluY29tZSBkZXRhaWxzICAgPHNwYW4+ICAgICBUb3RhbCBJbmNvbWU6ICR7aW5jb21lRGF0YT8ubGVuZ3RoID8/IDB9IHwgVG90YWwgQW1vdW50OiAkICR7dG90YWxJbmNvbWUgPz8gMH0vYW5udWFsbHkgPC9zcGFuPmBcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcIm1vcnRnYWdlXCIpIHtcclxuICAgICAgICAgICAgbGV0IHRhYmxlS2V5Rm9ybWF0ID0gdGFibGVfa2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dWydsb2FuX2Ftb3VudCddID0gbmV3T2JqWydwdXJjaGFzZV9wcmljZSddO1xyXG4gICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bJ3RvdGFsX2xvYW5fYW1vdW50J10gPSBuZXdPYmpbJ3B1cmNoYXNlX3ByaWNlJ107XHJcbiAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVsncHVyY2hhc2VfcHJpY2UnXSA9IG5ld09ialsncHVyY2hhc2VfcHJpY2UnXTtcclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dWydwcm9wZXJ0eV92YWx1ZSddID0gbmV3T2JqWydwdXJjaGFzZV9wcmljZSddO1xyXG4gICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bJ2xlbmRlciddID0gbmV3T2JqWydsZW5kZXInXTtcclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dWydxdWFsaWZ5aW5nTW9udGhseVBheW1lbnQnXSA9IHJlc3BvbnNlRGF0YVsnZGF0YSddWydxdWFsaWZ5aW5nTW9udGhseVBheW1lbnQnXTtcclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dWydmcmVlcXVlbmN5UGF5bWVudCddID0gcmVzcG9uc2VEYXRhWydkYXRhJ11bJ2ZyZWVxdWVuY3lQYXltZW50J107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YWJsZV9rZXkgPT0gXCJwcm9wZXJ0aWVzXCIpIHtcclxuICAgICAgICAgICAgbGV0IHRhYmxlS2V5Rm9ybWF0ID0gdGFibGVfa2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ3Byb3BlcnR5X2xlbmd0aCddID0gYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dLmxlbmd0aCA+IC0xID8gYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dLmxlbmd0aCA6IGFwaUtleVZhbHVlQXJyWydwcm9wZXJ0eV9sZW5ndGgnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcInN1YmplY3RQcm9wZXJ0eVwiKSB7XHJcbiAgICAgICAgICAgIGxldCB0YWJsZUtleUZvcm1hdHN1YiA9IHRhYmxlX2tleS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgIGlmIChhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdHN1YlswXV0ubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0c3ViWzBdXVswXSA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0c3ViWzBdXVswXVsndG90YWxfZXhwZW5zZXMnXSA9IE51bWJlcihOdW1iZXIobmV3T2JqWydtb250aGx5X2hlYXRpbmdfZmVlcyddKSArIE51bWJlcihuZXdPYmpbJ21vbnRobHlfaHlkcm9fY29zdHMnXSkgKyBOdW1iZXIobmV3T2JqWydtb250aGx5X2luc3VyYW5jZV9jb3N0cyddKSArIE51bWJlcihuZXdPYmpbJ21vbnRobHlfbWFuYWdlbWVudF9jb3N0cyddKSArIE51bWJlcihuZXdPYmpbJ21vbnRobHlfcmVwYWlyc19jb3N0cyddKSArIE51bWJlcihuZXdPYmpbJ21vbnRobHlfaW50ZXJlc3RfY29zdHMnXSkgKyBOdW1iZXIobmV3T2JqWydtb250aGx5X290aGVyX2Nvc3RzJ10pICsgTnVtYmVyKG5ld09ialsnbW9udGhseV9yZW50YWxfaW5jb21lJ10pICsgTnVtYmVyKG5ld09ialsnbW9udGhseV9jb25kb19mZWVzJ10pKSB8fCAwO1xyXG4gICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdHN1YlswXV1bMF1bJ2FkZHJlc3MnXSA9IG5ld09ialsnY29udGFjdC91cGRhdGUvZ2V0QWRkcmVzc0Zyb21Mb29rdXAjI2lucHV0J107XHJcbiAgICAgICAgICAgIHRhYmxlX2tleSA9IFwibW9ydGdhZ2VcIjtcclxuICAgICAgICAgICAgbGV0IHRhYmxlS2V5Rm9ybWF0ID0gdGFibGVfa2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dWydsb2FuX2Ftb3VudCddID0gbmV3T2JqWydwdXJjaGFzZV9wcmljZSddO1xyXG4gICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bJ3RvdGFsX2xvYW5fYW1vdW50J10gPSBuZXdPYmpbJ3B1cmNoYXNlX3ByaWNlJ107XHJcbiAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVsncHVyY2hhc2VfcHJpY2UnXSA9IG5ld09ialsncHVyY2hhc2VfcHJpY2UnXTtcclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dWydwcm9wZXJ0eV92YWx1ZSddID0gbmV3T2JqWydwdXJjaGFzZV9wcmljZSddO1xyXG4gICAgICAgICAgICBhcGlLZXlWYWx1ZUFyci5sb2FuX2Ftb3VudCA9IG5ld09ialsncHVyY2hhc2VfcHJpY2UnXTtcclxuICAgICAgICAgICAgdGFibGVfa2V5ID0gXCJzdWJqZWN0UHJvcGVydHlcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcIm1vcnRnYWdlXCIpIHtcclxuICAgICAgICAgICAgdGFibGVfa2V5ID0gXCJzdWJqZWN0UHJvcGVydHlcIjtcclxuICAgICAgICAgICAgbGV0IHRhYmxlS2V5Rm9ybWF0ID0gdGFibGVfa2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgaWYgKGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dWzBdID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dWzBdWydwdXJjaGFzZV9wcmljZSddID0gbmV3T2JqWydsb2FuX2Ftb3VudCddO1xyXG4gICAgICAgICAgICBhcGlLZXlWYWx1ZUFyci5sb2FuX2Ftb3VudCA9IG5ld09ialsnbG9hbl9hbW91bnQnXTtcclxuICAgICAgICAgICAgdGFibGVfa2V5ID0gXCJtb3J0Z2FnZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVtaXRVcGRhdGVkRGF0YVRvU3RvcmUoaGFuZGxlciwgYXBpS2V5VmFsdWVBcnIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGN1bGF0ZVllYXJseUluY29tZShkYXRhKSB7XHJcbiAgICAgICAgY29uc3QgZnJlcXVlbmN5TXVsdGlwbGllciA9IHtcclxuICAgICAgICAgICAgQW5udWFsOiAxLFxyXG4gICAgICAgICAgICBNb250aGx5OiAxMixcclxuICAgICAgICAgICAgJ0JpLXdlZWtseSc6IDI2LFxyXG4gICAgICAgICAgICAnU2VtaS1tb250aGx5JzogMjQsXHJcbiAgICAgICAgICAgICdTZW1pLSBtb250aGx5JzogMjQsXHJcbiAgICAgICAgICAgIFdlZWtseTogNTIsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgeyBpbmNvbWUsIHBheW1lbnRfZnJlcXVlbmN5IH0gPSBkYXRhO1xyXG4gICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBmcmVxdWVuY3lNdWx0aXBsaWVyW3BheW1lbnRfZnJlcXVlbmN5XTtcclxuICAgICAgICAvLyBpZiAoIW11bHRpcGxpZXIpIHtcclxuICAgICAgICAvLyAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwYXltZW50IGZyZXF1ZW5jeTogJHtwYXltZW50X2ZyZXF1ZW5jeX1gKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgcmV0dXJuIGluY29tZSAqIG11bHRpcGxpZXI7XHJcbiAgICB9XHJcblxyXG4gICAgY2FsY3VsYXRlVG90YWxBbmRDb3VudChkYXRhLCBrZXkpIHtcclxuICAgICAgICBjb25zdCB0b3RhbEluY29tZSA9IGRhdGEucmVkdWNlKCh0b3RhbCwgaXRlbSkgPT4gTnVtYmVyKHRvdGFsKSArIChOdW1iZXIoaXRlbVtrZXldKSB8fCAwKSwgMCk7XHJcbiAgICAgICAgY29uc3QgcmVjb3JkQ291bnQgPSBkYXRhLmxlbmd0aDtcclxuICAgICAgICByZXR1cm4geyB0b3RhbEluY29tZSwgcmVjb3JkQ291bnQgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlTG9jYWxEYXRhUHJvY2VzcyhoYW5kbGVyLCBwcmltYXJ5RGF0YSwgcmVzcG9uc2VEYXRhID0ge30pIHtcclxuICAgICAgICBsZXQgcHJpbWFyeUtleU5hbWUgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdQcmltYXJ5S2V5TmFtZScgfSkubGVuZ3RoID4gMCA/IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ1ByaW1hcnlLZXlOYW1lJyB9KVswXS52YWx1ZSA6ICcnO1xyXG4gICAgICAgIGxldCBSZWFkRGF0YUZyb21Nb2RhbCA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ1JlYWREYXRhRnJvbU1vZGFsJyB9KS5sZW5ndGggPiAwID8gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnUmVhZERhdGFGcm9tTW9kYWwnIH0pWzBdLnZhbHVlID09ICd0cnVlJyA/IHRydWUgOiBmYWxzZSA6IGZhbHNlO1xyXG4gICAgICAgIGxldCBibG9ja0ZpZWxkcyA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ2Jsb2NrRmllbGRzJyB9KS5sZW5ndGggPiAwID8gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnYmxvY2tGaWVsZHMnIH0pWzBdLnZhbHVlID8gdHJ1ZSA6IGZhbHNlIDogZmFsc2U7XHJcbiAgICAgICAgbGV0IGJsb2NrRmllbGROYW1lID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnYmxvY2tGaWVsZHMnIH0pLmxlbmd0aCA+IDAgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsLnBhcmFtZXRlcl90eXBlID09ICdibG9ja0ZpZWxkcycgfSlbMF0udmFsdWUgOiAnJztcclxuICAgICAgICBsZXQgZmlsdGVyS2V5ID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnUHJpbWFyeUtleU5hbWUnIH0pWzBdPy52YWx1ZTtcclxuICAgICAgICBsZXQgdGFibGVfa2V5ID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAndGFibGVfa2V5JyB9KS5sZW5ndGggPiAwID8gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAndGFibGVfa2V5JyB9KVswXS52YWx1ZSA6ICcnO1xyXG4gICAgICAgIGxldCBzcGxpdEtleXMgPSBwcmltYXJ5S2V5TmFtZS5zcGxpdCgnfHwnKTtcclxuICAgICAgICBsZXQgdGVtcEtleUNyZWF0ZTtcclxuICAgICAgICBpZiAoc3BsaXRLZXlzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcHJpbWFyeUtleU5hbWUgPSBzcGxpdEtleXNbMF07XHJcbiAgICAgICAgICAgIHRlbXBLZXlDcmVhdGUgPSAnXycgKyBzcGxpdEtleXNbMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudW5pcXVlRmllbGRzID0gW107XHJcbiAgICAgICAgbGV0IHVuaXF1ZUZpZWxkc0FkZGl0aW9uYWxQYXJhbSA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ1VuaXF1ZUZpZWxkcycgfSk7XHJcbiAgICAgICAgaWYgKHVuaXF1ZUZpZWxkc0FkZGl0aW9uYWxQYXJhbS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHVuaXF1ZUZpZWxkc0FkZGl0aW9uYWxQYXJhbVswXS52YWx1ZS5zcGxpdCgnfHwnKS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW1lbnRBcnIgPSBlbGVtZW50LnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcE9iaiA9IHtcclxuICAgICAgICAgICAgICAgICAgICByZXFfa2V5OiBlbGVtZW50QXJyLmxlbmd0aCA+IDAgPyBlbGVtZW50QXJyWzBdIDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZWxlbWVudEFyci5sZW5ndGggPiAxID8gZWxlbWVudEFyclsxXSA6ICdQbGVhc2UgcHJvdmlkZSB1bmlxdWUgdmFsdWUhJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy51bmlxdWVGaWVsZHMucHVzaCh0ZW1wT2JqKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHNlY3Rpb25GaWVsZHMgPSB7fTtcclxuICAgICAgICBsZXQgc2VjdGlvbkZpZWxkc0ZpbHRlcmVkID0ge307XHJcbiAgICAgICAgaWYgKGJsb2NrRmllbGRzICE9IHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKFJlYWREYXRhRnJvbU1vZGFsKSB7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uRmllbGRzID0gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZSAmJiB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLnJvb3REYXRhICYmIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2Uucm9vdERhdGFbJ3NlY3Rpb25GaWVsZHMnXSA/IHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2Uucm9vdERhdGFbJ3NlY3Rpb25GaWVsZHMnXSA6IHt9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkZpZWxkcyA9IHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UgJiYgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sYXN0U3RlcFJvb3REYXRhICYmIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UubGFzdFN0ZXBSb290RGF0YVsnc2VjdGlvbkZpZWxkcyddID8gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sYXN0U3RlcFJvb3REYXRhWydzZWN0aW9uRmllbGRzJ10gOiB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBGaWx0ZXJpbmcgb25seSBjdXJyZW50IHN0ZXAgZGF0YVxyXG4gICAgICAgICAgICBsZXQgc3RlcElkID0gUmVhZERhdGFGcm9tTW9kYWwgPyB3aW5kb3dbJ2N1cnJlbnRNb2RhbElkJ10gOiB3aW5kb3dbJ2N1cnJlbnRTdGVwSWQnXTtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkZpZWxkc0FycmF5ID0gT2JqZWN0LmVudHJpZXMoc2VjdGlvbkZpZWxkcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkU2VjdGlvbkZpZWxkcyA9IHNlY3Rpb25GaWVsZHNBcnJheS5maWx0ZXIoKFtrZXksIHZhbHVlXSkgPT4ga2V5LmluY2x1ZGVzKHN0ZXBJZCkpO1xyXG4gICAgICAgICAgICBsZXQgc2VjdGlvbkZpZWxkc0ZpbHRlcmVkID0ge307XHJcbiAgICAgICAgICAgIGZpbHRlcmVkU2VjdGlvbkZpZWxkcy5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkZpZWxkc0ZpbHRlcmVkW2VbMF1dID0gZVsxXTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWN0aW9uRmllbGRzID0gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZSAmJiB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLmxhc3RTdGVwUm9vdERhdGEgJiYgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sYXN0U3RlcFJvb3REYXRhWydibG9ja0ZpZWxkcyddID8gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sYXN0U3RlcFJvb3REYXRhWydibG9ja0ZpZWxkcyddIDoge307XHJcbiAgICAgICAgICAgIHNlY3Rpb25GaWVsZHNGaWx0ZXJlZFtibG9ja0ZpZWxkTmFtZV0gPSBzZWN0aW9uRmllbGRzW2Jsb2NrRmllbGROYW1lXTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBuZXdPYmo6IGFueSA9IHt9O1xyXG4gICAgICAgIGlmIChzZWN0aW9uRmllbGRzRmlsdGVyZWQpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoc2VjdGlvbkZpZWxkc0ZpbHRlcmVkKSkge1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkZpZWxkc0ZpbHRlcmVkW2tleV0uZm9yRWFjaChmaWVsZElkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcERhdGFTZXJ2aWNlLmdldEluZGl2aWR1YWxBcHBEYXRhKGZpZWxkSWQpLnBpcGUodGFrZSgxKSkuc3Vic2NyaWJlKGZpZWxkRGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZERhdGEubGVuZ3RoID4gMCAmJiBmaWVsZERhdGFbMF1bJ3JlcXVlc3RBcGlLZXknXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlcUtleSA9IGZpZWxkRGF0YVswXVsncmVxdWVzdEFwaUtleSddWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkVmFsdWUgPSBmaWVsZERhdGFbMF1bJ3ZhbHVlJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxS2V5ICE9IFwiXCIgJiYgcmVxS2V5ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld09ialtyZXFLZXldID0gZmllbGRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZERhdGFbMF1bJ2lzUmVwZWF0ZWRGaWVsZCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tJZCA9IGZpZWxkRGF0YVswXVtcImxpbmtlZEJsb2NrSWRcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2NrRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcEtleUNyZWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja0RhdGEgPSB0aGlzLmdldFJlcGV0YWJsZUJsb2NrRGF0YUZyb21CbG9ja0lkd2l0aFJlc3BvbnNlS2V5KGJsb2NrSWQsIHJlcUtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tEYXRhID0gdGhpcy5nZXRSZXBldGFibGVCbG9ja0RhdGFGcm9tQmxvY2tJZChibG9ja0lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcUtleSAhPSBcIlwiICYmIHJlcUtleSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3T2JqW3JlcUtleV0gPSBibG9ja0RhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaWVsZERhdGFbMF1bJ2FwaUtleSddID09ICdHZW5lcmljIEJsb2NrJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZmllbGQ6LS0tLT4gXCIsZmllbGREYXRhKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrSWQgPSBmaWVsZERhdGFbMF1bXCJsaW5rZWRCbG9ja0lkXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIChibG9ja0lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2NrT2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sb2FkQmxvY2tCeU5hbWUoYmxvY2tJZCkudG9Qcm9taXNlKCkudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2tGaWVsZHMgIT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVsnYmxvY2tfZmllbGRzJ10uZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFsnZmllbGRfdHlwZSddICE9IFwiQnV0dG9uXCIgJiYgZWxlbWVudFsnZmllbGRfdHlwZSddICE9IFwibGFiZWxcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmxvY2tGaWVsZFJlcXVlc3RLZXkgPSBlbGVtZW50WydyZXF1ZXN0QXBpS2V5J10gPyBlbGVtZW50WydyZXF1ZXN0QXBpS2V5J10gOiBlbGVtZW50Wyd1bmlxdWVfaWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGJsb2NrRmllbGRSZXF1ZXN0S2V5ID0gZWxlbWVudFsncmVxdWVzdEFwaUtleSddLnNwbGl0KCcjIycpW2VsZW1lbnRbJ3JlcXVlc3RBcGlLZXknXS5zcGxpdCgnIyMnKS5sZW5ndGggLSAxXSA/IGVsZW1lbnRbJ3JlcXVlc3RBcGlLZXknXS5zcGxpdCgnIyMnKVtlbGVtZW50WydyZXF1ZXN0QXBpS2V5J10uc3BsaXQoJyMjJykubGVuZ3RoIC0gMV0gOiBlbGVtZW50Wyd1bmlxdWVfaWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2NrRmllbGRWYWx1ZSA9IHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0RmllbGREYXRhQnlGaWVsZElkKGVsZW1lbnQudW5pcXVlX2lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tPYmplY3RbYmxvY2tGaWVsZFJlcXVlc3RLZXldID0gYmxvY2tGaWVsZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInVuaXF1ZV9pZDogXCIsIGVsZW1lbnQudW5pcXVlX2lkLCBcIiBmaWVsZCBkYXRhOiBcIiwgdGhpcy5hcHBEYXRhU2VydmljZS5nZXRGaWVsZERhdGFCeUZpZWxkSWQoZWxlbWVudC51bmlxdWVfaWQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbJ2Jsb2NrX2ZpZWxkcyddLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRbJ2ZpZWxkX3R5cGUnXSAhPSBcIkJ1dHRvblwiICYmIGVsZW1lbnRbJ2ZpZWxkX3R5cGUnXSAhPSBcImxhYmVsXCIgJiYgZWxlbWVudFsnZmllbGRfdHlwZSddICE9IFwiVGFibGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmxvY2tGaWVsZFJlcXVlc3RLZXkgPSBlbGVtZW50WydyZXF1ZXN0QXBpS2V5J10gPyBlbGVtZW50WydyZXF1ZXN0QXBpS2V5J10gOiBlbGVtZW50Wyd1bmlxdWVfaWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGJsb2NrRmllbGRSZXF1ZXN0S2V5ID0gZWxlbWVudFsncmVxdWVzdEFwaUtleSddLnNwbGl0KCcjIycpW2VsZW1lbnRbJ3JlcXVlc3RBcGlLZXknXS5zcGxpdCgnIyMnKS5sZW5ndGggLSAxXSA/IGVsZW1lbnRbJ3JlcXVlc3RBcGlLZXknXS5zcGxpdCgnIyMnKVtlbGVtZW50WydyZXF1ZXN0QXBpS2V5J10uc3BsaXQoJyMjJykubGVuZ3RoIC0gMV0gOiBlbGVtZW50Wyd1bmlxdWVfaWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJsb2NrRmllbGRWYWx1ZSA9IHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0RmllbGREYXRhQnlGaWVsZElkKGVsZW1lbnQudW5pcXVlX2lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tPYmplY3RbYmxvY2tGaWVsZFJlcXVlc3RLZXldID0gYmxvY2tGaWVsZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInVuaXF1ZV9pZDogXCIsIGVsZW1lbnQudW5pcXVlX2lkLCBcIiBmaWVsZCBkYXRhOiBcIiwgdGhpcy5hcHBEYXRhU2VydmljZS5nZXRGaWVsZERhdGFCeUZpZWxkSWQoZWxlbWVudC51bmlxdWVfaWQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJibG9ja0RhdGE6LS0tLS0+IFwiLGJsb2NrT2JqZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcUtleSAhPSBcIlwiICYmIHJlcUtleSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld09ialtyZXFLZXldID0gYmxvY2tPYmplY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhcGlEYXRhID0gdGhpcy5hcGlEYXRhU2VydmljZS5nZXRBcGlEYXRhQnlIYW5kbGVyKGhhbmRsZXIuZXZlbnRfaGFuZGxlci5zcGxpdCgnIyMnKVswXSk7XHJcbiAgICAgICAgbGV0IGFwaUtleVZhbHVlQXJyID0gdGhpcy5nZXRBa2l0YURhdGFGcm9tSGFuZGxlcihoYW5kbGVyLmV2ZW50X2hhbmRsZXIuc3BsaXQoJyMjJylbMF0pW2hhbmRsZXIuZXZlbnRfaGFuZGxlcl07XHJcbiAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcImFzc2V0XCIgfHwgdGFibGVfa2V5ID09IFwibGlhYmlsaXRpZXNcIikge1xyXG4gICAgICAgICAgICBsZXQgYm9ycm93ZXJMaXN0ID0gYXBpS2V5VmFsdWVBcnJbJ2JvcnJvd2VyTGlzdCddO1xyXG4gICAgICAgICAgICBsZXQgYm9ycm93ZXJOYW1lc0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgYm9ycm93ZXJOYW1lc0xpc3QgPSBib3Jyb3dlckxpc3QuZmlsdGVyKG9iaiA9PiBuZXdPYmpbXCJib3Jyb3dlcl9pZHNcIl0uaW5kZXhPZihvYmouaWQpID4gLTEpXHJcbiAgICAgICAgICAgIGxldCBib3Jyb3dlck5hbWVzID0gYm9ycm93ZXJOYW1lc0xpc3QubWFwKG9iaiA9PiBvYmoubmFtZSkuam9pbignLCAnKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJib3Jyb3dlck5hbWVzOiBcIiwgYm9ycm93ZXJOYW1lcylcclxuICAgICAgICAgICAgbmV3T2JqWydhc3NvaWNhdGVkX2JvcnJvd2VyX2lkJ10gPSBuZXdPYmpbJ2JvcnJvd2VyX2lkcyddO1xyXG4gICAgICAgICAgICBuZXdPYmpbJ2JvcnJvd2VyX2lkcyddID0gYm9ycm93ZXJOYW1lcztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcImRlYWxfaW5mb1wiKSB7XHJcbiAgICAgICAgICAgIG5ld09ialsnYXBwbGljYXRpb25faWQnXSA9IG5ld09ialsnZGVhbF9hcHBsaWNhdGlvbl9pZCddO1xyXG4gICAgICAgICAgICB0YWJsZV9rZXkgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYXBpS2V5VmFsdWUgPSBbXTtcclxuICAgICAgICBsZXQgZWRpdFBvc2l0aW9uO1xyXG4gICAgICAgIGxldCBhcHBsaWNhdGlvbklkO1xyXG4gICAgICAgIGxldCBwYXJlbnRQb3NpdGlvbjtcclxuICAgICAgICBsZXQgcG9zaXRpb247XHJcbiAgICAgICAgaWYgKGFwaURhdGEudmFsdWUuaGFuZGxlcl9uYW1lICYmIGJsb2NrRmllbGRzID09IHRydWUgJiYgcmVzcG9uc2VEYXRhKSB7XHJcbiAgICAgICAgICAgIHBhcmVudFBvc2l0aW9uID0gcHJpbWFyeURhdGE/LnZhbHVlPy5wYXJlbnRQb3NpdGlvbjtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBwcmltYXJ5RGF0YT8udmFsdWU/LnBvc2l0aW9uO1xyXG4gICAgICAgICAgICBlZGl0UG9zaXRpb24gPSBuZXdPYmpbcHJpbWFyeUtleU5hbWVdO1xyXG4gICAgICAgICAgICBpZiAoYmxvY2tGaWVsZHMgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhYmxlS2V5Rm9ybWF0ID0gdGFibGVfa2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZV9rZXkgPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlID0gYXBpS2V5VmFsdWVBcnI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhYmxlS2V5Rm9ybWF0Lmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWUgPSBhcGlLZXlWYWx1ZUFycj8uW3RhYmxlS2V5Rm9ybWF0WzBdXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlX2tleSA9PT0gXCJib3Jyb3dlcnMuZW1wbG95bWVudFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcktleSA9IFwiYXBwbGljYXRpb25faWRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWUgPSBhcGlLZXlWYWx1ZUFycj8uW3RhYmxlS2V5Rm9ybWF0WzBdXT8uW3BhcmVudFBvc2l0aW9uXT8uW3RhYmxlS2V5Rm9ybWF0WzFdXTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZSA9IGFwaUtleVZhbHVlQXJyPy5bdGFibGVLZXlGb3JtYXRbMF1dPy5bcG9zaXRpb25dPy5bdGFibGVLZXlGb3JtYXRbMV1dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZV9rZXkgPT0gXCJtb3J0Z2FnZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25JZCA9IGFwaUtleVZhbHVlWydhcHBsaWNhdGlvbl9pZCddO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG5ld09iaiAmJiBuZXdPYmpbJ2FkZHJlc3Nfc2l0dWF0aW9uc19hcHBsaWNhdGlvbl9pZCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3T2JqWydhZGRyZXNzJ10gPSAobmV3T2JqPy51bml0ID8gKG5ld09iaj8udW5pdCArICctJykgOiAnJykgKyBgJHtuZXdPYmo/LnN0cmVldF9sb25nfSAke25ld09iaj8uc3RyZWV0X3R5cGV9ICR7bmV3T2JqPy5zdHJlZXRfZGlyZWN0aW9ufSAke25ld09iaj8uY291bnRyeX1gICsgKG5ld09iaj8ucHJvdmluY2UgPyAoJywgJyArIG5ld09iaj8ucHJvdmluY2UpIDogJycpICsgKG5ld09iaj8ucG9zdGFsX2NvZGUgPyAoJywgJyArIG5ld09iaj8ucG9zdGFsX2NvZGUpIDogJycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IHVwZGF0ZWRBcnJheSA9IGFwaUtleVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcIlwiICYmIG5ld09ialsndHJhbnNhY3Rpb25fdHlwZSddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3T2JqWydwcmV2aW91c190cmFuc2FjdGlvbl90eXBlJ10gPSB1cGRhdGVkQXJyYXlbJ3RyYW5zYWN0aW9uX3R5cGUnXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFwaUtleVZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBcnJheSA9IGFwaUtleVZhbHVlLm1hcChvYmogPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqW2ZpbHRlcktleV0gPT09IGVkaXRQb3NpdGlvbiA/IHsgLi4ub2JqLCAuLi5uZXdPYmogfSA6IG9ialxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBcnJheSA9IHsgLi4udXBkYXRlZEFycmF5LCAuLi5uZXdPYmogfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZV9rZXkgPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyID0gdXBkYXRlZEFycmF5O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0YWJsZUtleUZvcm1hdC5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXSA9IHVwZGF0ZWRBcnJheTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlX2tleSA9PT0gXCJib3Jyb3dlcnMuZW1wbG95bWVudFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwYXJlbnRQb3NpdGlvbl1bdGFibGVLZXlGb3JtYXRbMV1dID0gdXBkYXRlZEFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwb3NpdGlvbl1bdGFibGVLZXlGb3JtYXRbMV1dID0gdXBkYXRlZEFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZV9rZXkgPT0gXCJhc3NldFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2Fzc2V0VG90YWwnXVsnY291bnQnXSA9IGFwaUtleVZhbHVlQXJyWydhc3NldCddLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclsnYXNzZXRUb3RhbCddWydzdW0nXSA9IGFwaUtleVZhbHVlQXJyWydhc3NldCddLm1hcChpdGVtID0+IGl0ZW0uY2FzaF9vcl9tYXJrZXRfdmFsdWUpLnJlZHVjZSgocHJldiwgbmV4dCkgPT4gTnVtYmVyKHByZXYpICsgTnVtYmVyKG5leHQpKTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclsnYXNzZXRTdHInXSA9IFwiQXNzZXRzIFRvdGFsIGFzc2V0cyBcIiArIGFwaUtleVZhbHVlQXJyWydhc3NldFRvdGFsJ11bJ2NvdW50J10gKyBcIiB8IFRvdGFsIGFzc2V0cyBhbW91bnQgJFwiICsgYXBpS2V5VmFsdWVBcnJbJ2Fzc2V0VG90YWwnXVsnc3VtJ11cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZV9rZXkgPT0gXCJsaWFiaWxpdGllc1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0eVRvdGFsJ11bJ2NvdW50J10gPSBhcGlLZXlWYWx1ZUFyclsnbGlhYmlsaXRpZXMnXS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0eVRvdGFsJ11bJ3N1bSddID0gYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0aWVzJ10ubWFwKGl0ZW0gPT4gaXRlbS5tb250aGx5X3BheW1lbnQpLnJlZHVjZSgocHJldiwgbmV4dCkgPT4gTnVtYmVyKHByZXYpICsgTnVtYmVyKG5leHQpKTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclsnbGlhYmlsaXRpZVN0ciddID0gXCJMaWFiaWxpdGllcyBUb3RhbCBsaWFiaWxpdGllcyBcIiArIGFwaUtleVZhbHVlQXJyWydsaWFiaWxpdHlUb3RhbCddWydjb3VudCddICsgXCIgfCBUb3RhbCBsaWFiaWxpdGllcyBhbW91bnQgJFwiICsgYXBpS2V5VmFsdWVBcnJbJ2xpYWJpbGl0eVRvdGFsJ11bJ3N1bSddXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGVfa2V5ID09IFwiYm9ycm93ZXJzLmJvcnJvd2VyQWRkcmVzc1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhYmxlS2V5Rm9ybWF0ID0gdGFibGVfa2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYWRkcmVzc0RhdGEgPSBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dW3RhYmxlS2V5Rm9ybWF0WzFdXVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwcmV2aW91c0FkZHJlc3NlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50QWRkcmVzcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzc0RhdGEuZm9yRWFjaCgoYWRkcmVzcywgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZHJlc3MubW92ZV9vdXRfZGF0ZSAmJiBhZGRyZXNzLm1vdmVfb3V0X2RhdGUgIT0gXCJJbnZhbGlkIGRhdGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkcmVzc2VzIHdpdGggbW92ZV9vdXRfZGF0ZSBhcmUgdHJlYXRlZCBhcyBQcmV2aW91c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNBZGRyZXNzZXMucHVzaChhZGRyZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwb3NpdGlvbl1bdGFibGVLZXlGb3JtYXRbMV1dW2luZGV4XVsnaXNfY3VycmVudCddID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWN1cnJlbnRBZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCBhZGRyZXNzIHdpdGhvdXQgbW92ZV9vdXRfZGF0ZSBpcyB0cmVhdGVkIGFzIEN1cnJlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBZGRyZXNzID0gYWRkcmVzcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwb3NpdGlvbl1bdGFibGVLZXlGb3JtYXRbMV1dW2luZGV4XVsnaXNfY3VycmVudCddID0gJ2N1cnJlbnQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW55IGFkZGl0aW9uYWwgYWRkcmVzc2VzIHdpdGhvdXQgbW92ZV9vdXRfZGF0ZSBhcmUgUHJldmlvdXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQWRkcmVzc2VzLnB1c2goYWRkcmVzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dW3RhYmxlS2V5Rm9ybWF0WzFdXVtpbmRleF1bJ2lzX2N1cnJlbnQnXSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3Bvc2l0aW9uXVsnYWRkcmVzc1N0ciddID0gYCR7YXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3Bvc2l0aW9uXVsncGVyc29uYWxfaW5mbyddWydmaXJzdF9uYW1lJ119J3MgbGl2aW5nIGFkZHJlc3MgZGV0YWlscyAgICAgICAke2N1cnJlbnRBZGRyZXNzPy5hZGRyZXNzID8/ICctJ31gXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dLmhhc093blByb3BlcnR5KCdwcm9jZXNzYWRkcmVzcycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwb3NpdGlvbl1bJ3Byb2Nlc3NhZGRyZXNzJ10gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwb3NpdGlvbl0gJiYgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3Bvc2l0aW9uXVsncHJvY2Vzc2FkZHJlc3MnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dWydwcm9jZXNzYWRkcmVzcyddWydjdXJyZW50QWRkcmVzcyddID0geyAuLi5jdXJyZW50QWRkcmVzcyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwb3NpdGlvbl1bJ3Byb2Nlc3NhZGRyZXNzJ11bJ3ByZXZpb3VzQWRkcmVzc2VzJ10gPSBwcmV2aW91c0FkZHJlc3NlcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGVfa2V5ID09IFwiYm9ycm93ZXJzLmluY29tZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhYmxlS2V5Rm9ybWF0ID0gdGFibGVfa2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dW3RhYmxlS2V5Rm9ybWF0WzFdXS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRbJ3llYXJseUVhcm5pbmcnXSA9IHRoaXMuY2FsY3VsYXRlWWVhcmx5SW5jb21lKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmNvbWVEYXRhID0gYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dW3Bvc2l0aW9uXVt0YWJsZUtleUZvcm1hdFsxXV1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgdG90YWxJbmNvbWUgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsQW5kQ291bnQoaW5jb21lRGF0YSwgJ3llYXJseUVhcm5pbmcnKS50b3RhbEluY29tZTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bcG9zaXRpb25dWydpbmNvbWVTdHInXSA9IGAke2FwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVtwb3NpdGlvbl1bJ3BlcnNvbmFsX2luZm8nXVsnZmlyc3RfbmFtZSddfSdzIEFkZGl0aW9uYWwgaW5jb21lIGRldGFpbHMgICA8c3Bhbj4gICAgIFRvdGFsIEluY29tZTogJHtpbmNvbWVEYXRhPy5sZW5ndGggPz8gMH0gfCBUb3RhbCBBbW91bnQ6ICQgJHt0b3RhbEluY29tZSA/PyAwfS9hbm51YWxseSA8L3NwYW4+YFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcInByb3BlcnRpZXNcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWJsZUtleUZvcm1hdCA9IHRhYmxlX2tleS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbJ3Byb3BlcnR5X2xlbmd0aCddID0gYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dLmxlbmd0aCA+IC0xID8gYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dLmxlbmd0aCA6IGFwaUtleVZhbHVlQXJyWydwcm9wZXJ0eV9sZW5ndGgnXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZV9rZXkgPT0gXCJtb3J0Z2FnZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhYmxlS2V5Rm9ybWF0ID0gdGFibGVfa2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bJ2FwcGxpY2F0aW9uX2lkJ10gPSBhcHBsaWNhdGlvbklkO1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVsnbG9hbl9hbW91bnQnXSA9IG5ld09ialsnbG9hbl9hbW91bnQnXTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bJ3RvdGFsX2xvYW5fYW1vdW50J10gPSBuZXdPYmpbJ2xvYW5fYW1vdW50J107XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dWydwdXJjaGFzZV9wcmljZSddID0gbmV3T2JqWydwcm9wZXJ0eV92YWx1ZSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVsncHJvcGVydHlfdmFsdWUnXSA9IG5ld09ialsncHJvcGVydHlfdmFsdWUnXTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bJ2xlbmRlciddID0gbmV3T2JqWydsZW5kZXInXTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bJ3F1YWxpZnlpbmdNb250aGx5UGF5bWVudCddID0gcmVzcG9uc2VEYXRhWydkYXRhJ11bJ3F1YWxpZnlpbmdNb250aGx5UGF5bWVudCddO1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVsnZnJlZXF1ZW5jeVBheW1lbnQnXSA9IHJlc3BvbnNlRGF0YVsnZGF0YSddWydmcmVlcXVlbmN5UGF5bWVudCddO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcInN1YmplY3RQcm9wZXJ0eVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhYmxlS2V5Rm9ybWF0c3ViID0gdGFibGVfa2V5LnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRzdWJbMF1dLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0c3ViWzBdXVswXSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdHN1YlswXV1bMF1bJ3RvdGFsX2V4cGVuc2VzJ10gPSBOdW1iZXIoTnVtYmVyKG5ld09ialsnbW9udGhseV9oZWF0aW5nX2ZlZXMnXSkgKyBOdW1iZXIobmV3T2JqWydtb250aGx5X2h5ZHJvX2Nvc3RzJ10pICsgTnVtYmVyKG5ld09ialsnbW9udGhseV9pbnN1cmFuY2VfY29zdHMnXSkgKyBOdW1iZXIobmV3T2JqWydtb250aGx5X21hbmFnZW1lbnRfY29zdHMnXSkgKyBOdW1iZXIobmV3T2JqWydtb250aGx5X3JlcGFpcnNfY29zdHMnXSkgKyBOdW1iZXIobmV3T2JqWydtb250aGx5X2ludGVyZXN0X2Nvc3RzJ10pICsgTnVtYmVyKG5ld09ialsnbW9udGhseV9vdGhlcl9jb3N0cyddKSArIE51bWJlcihuZXdPYmpbJ21vbnRobHlfcmVudGFsX2luY29tZSddKSArIE51bWJlcihuZXdPYmpbJ21vbnRobHlfY29uZG9fZmVlcyddKSkgfHwgMDtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdHN1YlswXV1bMF1bJ2FkZHJlc3MnXSA9IG5ld09ialsnY29udGFjdC91cGRhdGUvZ2V0QWRkcmVzc0Zyb21Mb29rdXAjI2lucHV0J107XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVfa2V5ID0gXCJtb3J0Z2FnZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWJsZUtleUZvcm1hdCA9IHRhYmxlX2tleS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dWydhcHBsaWNhdGlvbl9pZCddID0gYXBwbGljYXRpb25JZDtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bJ2xvYW5fYW1vdW50J10gPSBuZXdPYmpbJ3B1cmNoYXNlX3ByaWNlJ10gLSBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bJ2Rvd25fcGF5bWVudCddO1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVsndG90YWxfbG9hbl9hbW91bnQnXSA9IG5ld09ialsncHVyY2hhc2VfcHJpY2UnXSAtIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVsnZG93bl9wYXltZW50J107XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dWydwdXJjaGFzZV9wcmljZSddID0gbmV3T2JqWydwdXJjaGFzZV9wcmljZSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXVsncHJvcGVydHlfdmFsdWUnXSA9IG5ld09ialsncHVyY2hhc2VfcHJpY2UnXTtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyci5sb2FuX2Ftb3VudCA9IG5ld09ialsncHVyY2hhc2VfcHJpY2UnXTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZV9rZXkgPSBcInN1YmplY3RQcm9wZXJ0eVwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlX2tleSA9PSBcIm1vcnRnYWdlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZV9rZXkgPSBcInN1YmplY3RQcm9wZXJ0eVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWJsZUtleUZvcm1hdCA9IHRhYmxlX2tleS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwaUtleVZhbHVlQXJyW3RhYmxlS2V5Rm9ybWF0WzBdXS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZUFyclt0YWJsZUtleUZvcm1hdFswXV1bMF0gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5VmFsdWVBcnJbdGFibGVLZXlGb3JtYXRbMF1dWzBdWydwdXJjaGFzZV9wcmljZSddID0gbmV3T2JqWydwcm9wZXJ0eV92YWx1ZSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleVZhbHVlQXJyLmxvYW5fYW1vdW50ID0gbmV3T2JqWydsb2FuX2Ftb3VudCddO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlX2tleSA9IFwibW9ydGdhZ2VcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZWREYXRhVG9TdG9yZShoYW5kbGVyLCBhcGlLZXlWYWx1ZUFycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEFwaUtleVZhbHVlUGFpcihhcGlEYXRhcykge1xyXG4gICAgICAgIGxldCBhcGlLZXlWYWx1ZSA9IFtdO1xyXG4gICAgICAgIGlmIChhcGlEYXRhcykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhhcGlEYXRhcy52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gXCJoYW5kbGVyX25hbWVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4QXJyID0ga2V5Lm1hdGNoKC9eLio/XFxbW15cXGRdKihcXGQrKVteXFxkXSpcXF0uKiQvKTtcclxuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGluZGV4QXJyID8gTnVtYmVyKGluZGV4QXJyWzFdKSA6IC0xXHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXhLZXkgPSBrZXkuc3BsaXQoJy4nKVsxXTtcclxuICAgICAgICAgICAgICAgIGxldCBvYmogPSB7fTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwaUtleVZhbHVlW2luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZVtpbmRleF1baW5kZXhLZXldID0gYXBpRGF0YXMudmFsdWVba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpbaW5kZXhLZXldID0gYXBpRGF0YXMudmFsdWVba2V5XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlWYWx1ZVtpbmRleF0gPSBvYmo7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcGlLZXlWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UmVwZXRhYmxlQmxvY2tEYXRhRnJvbUJsb2NrSWQoYmxvY2tJZCkge1xyXG4gICAgICAgIGNvbnN0IHJlcGVhdGFibGVMb2NhbFN0b3JhZ2VEYXRhID0gdGhpcy5yZXBlYXRhYmxlQmxvY2tVdGlsLmdldFJlcGVhdGFibGVMb2NhbFN0b3JhZ2VEYXRhQnlCbG9ja0lkKGJsb2NrSWQpO1xyXG4gICAgICAgIHZhciByZXBlYXRhYmxlQmxvY2tEYXRhID0gW107XHJcbiAgICAgICAgaWYgKHJlcGVhdGFibGVMb2NhbFN0b3JhZ2VEYXRhKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb2JqS2V5IG9mIE9iamVjdC5rZXlzKHJlcGVhdGFibGVMb2NhbFN0b3JhZ2VEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGREZXRhaWxzID0gb2JqS2V5LnNwbGl0KFwiJFwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkRGF0YSA9IHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0RmllbGREYXRhQnlGaWVsZElkKG9iaktleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmllbGREZXRhaWxzLmxlbmd0aCA+IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVwZWF0YWJsZUJsb2NrRGF0YVtmaWVsZERldGFpbHNbMl1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdGFibGVCbG9ja0RhdGFbZmllbGREZXRhaWxzWzJdXVtmaWVsZERldGFpbHNbMV1dID0gZmllbGREYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0YWJsZUJsb2NrRGF0YVtmaWVsZERldGFpbHNbMl1dID0geyBbZmllbGREZXRhaWxzWzFdXTogZmllbGREYXRhIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcGVhdGFibGVCbG9ja0RhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFJlcGV0YWJsZUJsb2NrRGF0YUZyb21CbG9ja0lkd2l0aFJlc3BvbnNlS2V5KGJsb2NrSWQsIHJlc0tleSkge1xyXG4gICAgICAgIGNvbnN0IHJlcGVhdGFibGVMb2NhbFN0b3JhZ2VEYXRhID0gdGhpcy5yZXBlYXRhYmxlQmxvY2tVdGlsLmdldFJlcGVhdGFibGVMb2NhbFN0b3JhZ2VEYXRhQnlCbG9ja0lkKGJsb2NrSWQpO1xyXG4gICAgICAgIHZhciByZXBlYXRhYmxlQmxvY2tEYXRhID0gW107XHJcbiAgICAgICAgaWYgKHJlcGVhdGFibGVMb2NhbFN0b3JhZ2VEYXRhKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb2JqS2V5IG9mIE9iamVjdC5rZXlzKHJlcGVhdGFibGVMb2NhbFN0b3JhZ2VEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGREZXRhaWxzID0gb2JqS2V5LnNwbGl0KFwiJFwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkRGF0YSA9IHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0RmllbGREYXRhQnlGaWVsZElkKG9iaktleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmllbGREZXRhaWxzLmxlbmd0aCA+IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXBlYXRhYmxlQmxvY2tEYXRhW2ZpZWxkRGV0YWlsc1syXV0gPSB7IFtyZXNLZXldOiBmaWVsZERhdGEgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXBlYXRhYmxlQmxvY2tEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbWl0TG9naW5TdGF0ZURhdGFUb1N0b3JlKGhhbmRsZXIsIHJlcykge1xyXG4gICAgICAgIGlmIChyZXMubG9naW5TdGF0dXMpIHtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWc/Lk9uU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc0NhbGxiYWNrQmxvY2tzKHJlcywgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5PblN1Y2Nlc3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPblN1Y2Nlc3ModGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MocmVzLCBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLk9uU3VjY2VzcykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWc/Lm9uRmFpbHVyZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc0NhbGxiYWNrQmxvY2tzKHJlcywgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vbkZhaWx1cmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPbkZhaWx1cmUodGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MocmVzLCBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uRmFpbHVyZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbWl0VXBkYXRlZERhdGFUb1N0b3JlKGhhbmRsZXIsIHJlcykge1xyXG4gICAgICAgIHZhciBmaW5hbFJlcyA9IHt9XHJcbiAgICAgICAgZmluYWxSZXNbKGhhbmRsZXIuZXZlbnRfaGFuZGxlci5pbmNsdWRlcygnIyMnKSA/IGhhbmRsZXIuZXZlbnRfaGFuZGxlci5zcGxpdCgnIyMnKVsxXSA6ICdkZXRhaWxzJykucmVwbGFjZSgnWypdJywgJycpXSA9IHJlcztcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgaGFuZGxlcjogaGFuZGxlci5ldmVudF9oYW5kbGVyLmluY2x1ZGVzKCcjIycpID8gaGFuZGxlci5ldmVudF9oYW5kbGVyLnNwbGl0KCcjIycpWzBdIDogaGFuZGxlci5ldmVudF9oYW5kbGVyLFxyXG4gICAgICAgICAgICByZXNwb25zZTogZmluYWxSZXMsXHJcbiAgICAgICAgICAgIGV2ZW50X3N1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgIHN0b3JhZ2VUeXBlOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3RvcmFnZVR5cGUnKSxcclxuICAgICAgICAgICAgc3RhdHVzQ29kZTogMFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgeyBmb3JtYXR0ZWRSZXNwb25zZSB9ID0gdGhpcy5leHRlcm5hbFJlcXVlc3RSZXNwb25zZVV0aWwuc3RvcmVSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0OiBFeHRlcm5hbFJlc3BvbnNlID0gZm9ybWF0dGVkUmVzcG9uc2U7XHJcbiAgICAgICAgY29uc3QgYXBpVGVtcERhdGEgPSB7XHJcbiAgICAgICAgICAgIGlkOiBoYW5kbGVyLmV2ZW50X2hhbmRsZXIuaW5jbHVkZXMoJyMjJykgPyBoYW5kbGVyLmV2ZW50X2hhbmRsZXIuc3BsaXQoJyMjJylbMF0gOiBoYW5kbGVyLmV2ZW50X2hhbmRsZXIsXHJcbiAgICAgICAgICAgIGFwaVVybDogaGFuZGxlci5ldmVudF9oYW5kbGVyLmluY2x1ZGVzKCcjIycpID8gaGFuZGxlci5ldmVudF9oYW5kbGVyLnNwbGl0KCcjIycpWzBdIDogaGFuZGxlci5ldmVudF9oYW5kbGVyLFxyXG4gICAgICAgICAgICBhcGlLZXk6IGhhbmRsZXIuZXZlbnRfaGFuZGxlci5pbmNsdWRlcygnIyMnKSA/IGhhbmRsZXIuZXZlbnRfaGFuZGxlci5zcGxpdCgnIyMnKVswXSA6IGhhbmRsZXIuZXZlbnRfaGFuZGxlcixcclxuICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5yZXNwb25zZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5hcGlEYXRhU2VydmljZS5zZXRBcGlEYXRhQnlBcGlVcmwoT2JqZWN0LmFzc2lnbih7fSwgYXBpVGVtcERhdGEpKTtcclxuICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLmVtaXRBcGlTdWNjZXNzUmVzcG9uc2UuZW1pdChyZXN1bHQucmVzcG9uc2UpO1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGVsVmFsdWUgPT09IDEpIHtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWc/Lm9uRmFpbHVyZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc0NhbGxiYWNrQmxvY2tzKHJlcywgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vbkZhaWx1cmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPbkZhaWx1cmUodGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MocmVzLCBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uRmFpbHVyZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWc/Lk9uU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc0NhbGxiYWNrQmxvY2tzKHJlcywgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5PblN1Y2Nlc3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPblN1Y2Nlc3ModGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MocmVzLCBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLk9uU3VjY2VzcykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBza2lwTG9hZGVyQ2hlY2soKSB7XHJcbiAgICAgICAgY29uc3QgU2tpcEwgPSB0aGlzLmFkZGl0aW9uYWxQYXJhbWV0ZXJzID8gdGhpcy5hZGRpdGlvbmFsUGFyYW1ldGVycy5maW5kKGkgPT4gaS5wYXJhbWV0ZXJfdHlwZSA9PSAnU2tpcExvYWRlcicpIDogW107XHJcbiAgICAgICAgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sb2FkZXJTZXJ2aWNlLnNraXBMb2FkaW5nID0gU2tpcEwgJiYgU2tpcExbJ3ZhbHVlJ10gPT09IFwidHJ1ZVwiO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0TGFuZ3VhZ2Uob2JqOiBhbnkpIHtcclxuICAgICAgICB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLnN0ZXBEYXRhU3RvcmUgPSB7fTtcclxuICAgICAgICB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLmJsb2NrRGF0YVN0b3JlID0ge307XHJcbiAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3N0ZXBEYXRhQ2FjaGUnKTtcclxuICAgICAgICAvLyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbGFzdEJsb2NrTG9hZGVkJyk7XHJcbiAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2Jsb2NrRGF0YUNhY2hlJyk7XHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsYW5nRmllbGQnLCBvYmoudW5pcXVlSWQpO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGFuZycsIGAvJHtvYmoudmFsdWV9YCk7XHJcbiAgICAgICAgLy8gdGhpcy5pbnRlcm5hbENFRUVtaXR0ZXIubGFuZ3VhZ2VDaGFuZ2VFbWl0dGVyLmVtaXQoYC8ke29iai52YWx1ZX1gKTtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGVNb2RpZmllZChoYW5kbGVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzVW5zYXZlZERhdGEgJiYgdGhpcy5tb2RhbE9uUGFnZUxlYXZlKSB7XHJcbiAgICAgICAgICAgIC8qIHRoaXMuZGlhbG9nLmNsb3NlQWxsKCk7XHJcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIGRvY3VtZW50LnRpdGxlLCBkb2N1bWVudC5sb2NhdGlvbi50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sb2FkU3RlcEJ5SWQodGhpcy5tb2RhbE9uUGFnZUxlYXZlKS5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCAmJiBkYXRhLmRpc3BsYXlfYXNfbW9kYWwgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5EaWFsb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pOyAqL1xyXG4gICAgICAgICAgICBjb25zdCBjYWxsQmFja0RhdGEgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnO1xyXG4gICAgICAgICAgICBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5PblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlclN1Y2Nlc3NPckZhaWx1cmUoY2FsbEJhY2tEYXRhLk9uU3VjY2Vzcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBjYWxsQmFja0RhdGEgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnO1xyXG4gICAgICAgICAgICBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5vbkZhaWx1cmUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlclN1Y2Nlc3NPckZhaWx1cmUoY2FsbEJhY2tEYXRhLm9uRmFpbHVyZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaGlzdG9yeUJhY2soKTogdm9pZCB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ21vZGFsX29uX3BhZ2VfbGVhdmUnKTtcclxuICAgICAgICBsZXQgaXNEcmF3ZXJPcGVuOiBhbnkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaXNEcmF3ZXJPcGVuJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nLm9wZW5EaWFsb2dzLmxlbmd0aCB8fCBTdHJpbmcoaXNEcmF3ZXJPcGVuKSA9PSAnMScpIHtcclxuICAgICAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2VBbGwoKTtcclxuICAgICAgICAgICAgaGlzdG9yeS5nbygtMik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy9Db21tZW50ZWQgYmVsb3cgbGluZSBhbmQgYWRkZWQgdGltZW91dCB0byBjbG9zZSBwb3B1cCBhbmQgZ28gYmFjayBieSAtMlxyXG4gICAgICAgICAgICBoaXN0b3J5LmdvKC0xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcy5yZWRpcmVjdGlvblV0aWwucmVkaXJlY3RUbyhzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdwcmV2aW91c1N0ZXBJZCcpKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZm9yY2VPbkJhY2snLCAndHJ1ZScpO1xyXG4gICAgfVxyXG4gICAgb3BlbkRpYWxvZyhkYXRhOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBsZXQgaXNEaXNhYmxlQ2xvc2UgPSBmYWxzZTtcclxuICAgICAgICAvLyBkYXRhLmRpc21pc3NfbW9kYWwgPSAxIChpLmUgaXNEaXNhYmxlQ2xvc2UgPSB0cnVlKSBpcyB0byByZXN0cmljdCBjbG9zaW5nIHRoZSBtb2RhbCB3aGVuIGNsaWNraW5nIG91dHNpZGUgdGhlIG1vZGFsIG9yIHByZXNzaW5nIHRoZSBlc2NhcGUga2V5IG9uIHRoZSBrZXlib2FyZC5cclxuICAgICAgICBpZiAoZGF0YSAhPT0gdW5kZWZpbmVkICYmIGRhdGEuZGlzbWlzc19tb2RhbCA9PT0gMSkge1xyXG4gICAgICAgICAgICBpc0Rpc2FibGVDbG9zZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRpYWxvZ1JlZiA9IHRoaXMuZGlhbG9nLm9wZW4oTW9kYWxSZW5kZXJlckNvbXBvbmVudCwgeyBkYXRhOiB7IHN0ZXBJZDogZGF0YS50aWQsIGNvbmZpZzogeyBkaXNhYmxlQ2xvc2U6IGlzRGlzYWJsZUNsb3NlIH0gfSwgaWQ6IGBzdGVwTW9kYWwtJHtkYXRhLnRpZH1gLCBwYW5lbENsYXNzOiBgc3RlcE1vZGFsLSR7ZGF0YS50aWR9YCB9KTtcclxuICAgICAgICBkaWFsb2dSZWYuYWZ0ZXJDbG9zZWQoKS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1RoZSBkaWFsb2cgJyArIGRhdGEudGlkICsgJyB3YXMgY2xvc2VkLicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW5BbGVydChkYXRhOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRpYWxvZy5vcGVuKEFsZXJ0TW9kYWxDb21wb25lbnQsIHsgZGF0YTogeyBtZXNzYWdlOiBkYXRhIH0gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QmFzZTY0KGZpbGUpIHtcclxuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlYWRlci5yZXN1bHQpO1xyXG4gICAgICAgICAgICB0aGlzLmVuY3JpcHRlZEZpbGVBcnJheS5wdXNoKFN0cmluZyhyZWFkZXIucmVzdWx0KS5zcGxpdCgnYmFzZTY0LCcpWzFdKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGV2ZW50SGFuZGxlcihoYW5kbGVyOiBhbnksIHByaW1hcnlEYXRhOiBhbnkpIHtcclxuICAgICAgICAvLyBoYW5kbGUgYWxsIHRoZSBldmVudHNcclxuICAgICAgICBpZiAoaGFuZGxlci5ldmVudF9oYW5kbGVyICE9PSAnJykge1xyXG4gICAgICAgICAgICB0aGlzLmZpbGVEYXRhQXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgYXBpVHlwZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdBUElfVFlQRScpO1xyXG4gICAgICAgICAgICBsZXQgU2F2ZUhhbmRsZXIgPSBbXTtcclxuICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzYXZlX2hhbmRsZXInKSkge1xyXG4gICAgICAgICAgICAgICAgU2F2ZUhhbmRsZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2F2ZV9oYW5kbGVyJykuc3BsaXQoJ3wnKS5tYXAocyA9PiBzLnRyaW0oKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gRmlsZSBFbmNyaXB0aW9uIENvZGVcclxuICAgICAgICAgICAgbGV0IGV2ZW50QWRkaXRpb25hbFBhcmFtZXRlcnMgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcgPyBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzIDogW107XHJcbiAgICAgICAgICAgIGxldCBmaWxlRW5jcmlwdGlvbkFyciA9IGV2ZW50QWRkaXRpb25hbFBhcmFtZXRlcnM/LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bJ3BhcmFtZXRlcl90eXBlJ10gPT0gXCJGaWxlRW5jcmlwdGlvblwiICYmIGl0ZW1bJ3ZhbHVlJ10udG9Mb3dlckNhc2UoKSA9PSBcImJhc2U2NFwiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGV0IHRhYmxlX29wZXJhdGlvbnMgPSBldmVudEFkZGl0aW9uYWxQYXJhbWV0ZXJzPy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtWydwYXJhbWV0ZXJfdHlwZSddID09IFwidGFibGVfb3BlcmF0aW9uc1wiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGV0IHRhYmxlX29wZXJhdGlvbnNfYmxvY2sgPSBldmVudEFkZGl0aW9uYWxQYXJhbWV0ZXJzPy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtWydwYXJhbWV0ZXJfdHlwZSddID09IFwidGFibGVfb3BlcmF0aW9uc19ibG9ja1wiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGV0IHRhYmxlT3BlcmF0aW9ucyA9IHRhYmxlX29wZXJhdGlvbnM/Lmxlbmd0aCA+IDAgPyB0YWJsZV9vcGVyYXRpb25zWzBdPy52YWx1ZT8udG9Mb3dlckNhc2UoKSA6ICcnO1xyXG4gICAgICAgICAgICBsZXQgdGFibGVPcGVyYXRpb25zQmxvY2sgPSB0YWJsZV9vcGVyYXRpb25zX2Jsb2NrPy5sZW5ndGggPiAwID8gdGFibGVfb3BlcmF0aW9uc19ibG9ja1swXT8udmFsdWU/LnRvTG93ZXJDYXNlKCkgOiAnJztcclxuICAgICAgICAgICAgbGV0IGlzRmlsZUVuY3JpcHRlZCA9IGZpbGVFbmNyaXB0aW9uQXJyPy5sZW5ndGggPiAwICYmIGZpbGVFbmNyaXB0aW9uQXJyWzBdPy52YWx1ZT8udG9Mb3dlckNhc2UoKSA9PSBcImJhc2U2NFwiID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXQgZmlsZURhdGEgPSB0aGlzLnBheUxvYWQgJiYgdGhpcy5wYXlMb2FkWydmaWxlRGF0YSddICYmIHRoaXMucGF5TG9hZFsnZmlsZURhdGEnXVsnZmlsZSddID8gdGhpcy5wYXlMb2FkWydmaWxlRGF0YSddWydmaWxlJ10gOiBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmZpbGVEYXRhQXJyYXkucHVzaChmaWxlRGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuZW5jcmlwdGVkRmlsZUFycmF5ID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuZmlsZURhdGFBcnJheS5mb3JFYWNoKGZpbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRCYXNlNjQoZmlsZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBzd2l0Y2ggZ2V0cyBjYWxsZWQgb25seSB3aGVuIHRoZXJlIGlzIHBheWxvYWQgYW5kIHBheUxvYWQgdHlwZSBpZiBhbiBmaWxlXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBheUxvYWQgJiYgdGhpcy5wYXlMb2FkLnR5cGUgPT09ICdmaWxlJyAmJiAhaXNGaWxlRW5jcmlwdGVkKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3VjY2VzcztcclxuICAgICAgICAgICAgICAgIGxldCBmYWlsdXJlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLk9uU3VjY2VzcyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uUmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFpbHVyZSA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25GYWlsdXJlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25FeGNlcHRpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgLyBnZXQgdGhlIGV4dHJhIHBheWxvYWQgZnJvbSB0aGUgY29uZmlnXHJcbiAgICAgICAgICAgICAgICAvLyBleHRyYSBjb25maWcgRGF0YSBuZWVkcyB0byBiZSBwYXNzZWQgc28gdGhhdCB0aGVcclxuICAgICAgICAgICAgICAgIC8vIG1vcmUgcGFyYW1ldGVycyBjYW4gYmUgY29uZmlndXJlZCB0aHJvdWdoIGNvbmZpZ1xyXG4gICAgICAgICAgICAgICAgbGV0IGV4dHJhQ29uZmlnRGF0YTogYW55ID0ge307XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcGlDb25maWdEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0FQSV9DT05GSUcnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBhcGlDb25maWdEYXRhID8gSlNPTi5wYXJzZShhcGlDb25maWdEYXRhKSA6IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZ2V0IGFkZGl0aW9uYWwgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICAgICAgbGV0IGFkZGl0aW9uYWxQYXJhbWV0ZXJzOiBhbnkgPSB0aGlzLmdldEFkZGl0aW9uYWxQYXJhbWV0ZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICBldmVudEhhbmRsZXJOYW1lOiBzdHJpbmcgPSBoYW5kbGVyLmV2ZW50X2hhbmRsZXIsIC8vIGRlZmF1bHQgZXZlbnQgaGFuZGxlciBuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgaGFzQ3VzdG9tRXZlbnRIYW5kbGVyOiBib29sZWFuID0gZmFsc2U7IC8vIGRlZmF1bHQgaGFzQ3VzdG9tRXZlbnRIYW5kbGVyIGZsYWdcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgYWRkaXRpb25hbCBwYXJhbWV0ZXIgQ0VFX0N1c3RvbUV2ZW50SGFuZGxlciBpcyBwcmVzZW50XHJcbiAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25hbFBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoJ0NFRV9DdXN0b21FdmVudEhhbmRsZXInKSAmJiBhZGRpdGlvbmFsUGFyYW1ldGVyc1snQ0VFX0N1c3RvbUV2ZW50SGFuZGxlciddICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50SGFuZGxlck5hbWUgPSBhZGRpdGlvbmFsUGFyYW1ldGVyc1snQ0VFX0N1c3RvbUV2ZW50SGFuZGxlciddO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc0N1c3RvbUV2ZW50SGFuZGxlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZERhdGEgJiYgcGFyc2VkRGF0YVtldmVudEhhbmRsZXJOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhQ29uZmlnRGF0YSA9IHRoaXMuZXh0ZXJuYWxSZXF1ZXN0UmVzcG9uc2VVdGlsLmZvcm1UaGVSZXF1ZXN0T2JqKHBhcnNlZERhdGFbZXZlbnRIYW5kbGVyTmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhQ29uZmlnRGF0YVsnY3VzdG9tRXZlbnRIYW5kbGVyJ10gPSBldmVudEhhbmRsZXJOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhQ29uZmlnRGF0YVsnaGFzQ3VzdG9tRXZlbnRIYW5kbGVyJ10gPSBoYXNDdXN0b21FdmVudEhhbmRsZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGZpbGUgYWN0aW9uIG5lZWRzIHRva2VuXHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ0NFRV9PSURDJykgPT0gJzEnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFDb25maWdEYXRhLmhhc0F1dGhvcmlzYXRpb24gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwaUNvbmZpZ1Rva2VuID0gdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5hcGlDb25maWdUb2tlbkVtaXR0ZXIuc3Vic2NyaWJlKGFzeW5jIHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaUNvbmZpZ1Rva2VuLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgdGhlIGFjdCBvbiBmaWxlIGFjdGlvbiBtZXRob2RcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3RPbkZpbGVBY3Rpb24ocmVzLCBoYW5kbGVyLCBzdWNjZXNzLCBmYWlsdXJlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ0NFRV9PSURDJykgPT0gJzEnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFDb25maWdEYXRhLmhhc0F1dGhvcmlzYXRpb24gPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICogc2V0dGluZyBlbWl0IHRva2VuIHRvIHRydWUgc28gdGhhdCBtc2FsIHNlcnZpY2VcclxuICAgICAgICAgICAgICAgICAgICAvLyAqIHNlbmQgdGhlIGFwaSBjb25maWcgZGF0YSBiYWNrIHRocm91Z2ggIGFwaUNvbmZpZ1Rva2VuIGVtaXR0ZXJcclxuICAgICAgICAgICAgICAgICAgICBleHRyYUNvbmZpZ0RhdGEuZW1pdFRva2VuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLm9pZGNEYXRhRW1pdHRlci5lbWl0KGV4dHJhQ29uZmlnRGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHRoZSBhY3Qgb24gZmlsZSBhY3Rpb24gbWV0aG9kXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3RPbkZpbGVBY3Rpb24oZXh0cmFDb25maWdEYXRhLCBoYW5kbGVyLCBzdWNjZXNzLCBmYWlsdXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXBpVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0VTQic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXF1ZXN0Qm9keSA9IHRoaXMuZXNiUmVxdWVzdEJvZHlVdGlsLmdldEVTQlJlcXVlc3RCb2R5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBxdWVyeVBhcmFtcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdvdWxkIHdvcmsgaWYgdGhlIGFwaSBrZXkgaXMgbm90IGhhc2hlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXRBZGRpdGlvbmFsUGFyYW1ldGVyKClbJ1F1ZXJ5UGFyYW1ldGVyJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zID0gdGhpcy5nZXRBZGRpdGlvbmFsUGFyYW1ldGVyKClbJ1F1ZXJ5UGFyYW1ldGVyJ10uc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5UGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBib2R5ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHF1ZXJ5UGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keVtwYXJhbV0gPSByZXF1ZXN0Qm9keVtwYXJhbV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Qm9keSA9IGJvZHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2VlQXBpU2VydmljZS5FU0JSZXF1ZXN0SGFuZGxlcihoYW5kbGVyLmV2ZW50X2hhbmRsZXIsIHJlcXVlc3RCb2R5KS5zdWJzY3JpYmUocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNbJ3N0YXR1cyddID09PSAnb2snKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc0RhdGEgPSBKU09OLnBhcnNlKHJlc1snYXBpX3Jlc3BvbnNlJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFwcEJhc2VSZXN1bHQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnQXBwbGljYXRpb25CYXNlUmVzdWx0UGF0aCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzRGF0YVthcHBCYXNlUmVzdWx0XSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZW1pdEFwaVN1Y2Nlc3NSZXNwb25zZS5lbWl0KEpTT04ucGFyc2UocmVzWydhcGlfcmVzcG9uc2UnXSlbYXBwQmFzZVJlc3VsdF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChzdWNjZXNzRGF0YVthcHBCYXNlUmVzdWx0XSkgPT09ICdzdHJpbmcnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgKHN1Y2Nlc3NEYXRhW2FwcEJhc2VSZXN1bHRdKSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgZGF0YSB0byB0aGUgYWtpdGEgc3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZURhdGEoYXBwQmFzZVJlc3VsdCwgaGFuZGxlci5ldmVudF9oYW5kbGVyLCBzdWNjZXNzRGF0YVthcHBCYXNlUmVzdWx0XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGEgb2YgT2JqZWN0LmtleXMoc3VjY2Vzc0RhdGFbYXBwQmFzZVJlc3VsdF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAoc3VjY2Vzc0RhdGFbYXBwQmFzZVJlc3VsdF1bZGF0YV0pID09PSAnc3RyaW5nJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgKHN1Y2Nlc3NEYXRhW2FwcEJhc2VSZXN1bHRdW2RhdGFdKSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBkYXRhIHRvIHRoZSBha2l0YSBzdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmVEYXRhKGRhdGEsIGhhbmRsZXIuZXZlbnRfaGFuZGxlciwgc3VjY2Vzc0RhdGFbYXBwQmFzZVJlc3VsdF1bZGF0YV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgZGF0YSB0byB0aGUgYWtpdGEgc3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlRGF0YShkYXRhLCBoYW5kbGVyLmV2ZW50X2hhbmRsZXIsIEpTT04uc3RyaW5naWZ5KHN1Y2Nlc3NEYXRhW2FwcEJhc2VSZXN1bHRdW2RhdGFdKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLk9uU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MoSlNPTi5wYXJzZShyZXNbJ2FwaV9yZXNwb25zZSddKSwgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5PblN1Y2Nlc3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9uU3VjY2VzcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NDYWxsYmFja0Jsb2NrcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNPTi5wYXJzZShyZXNbJ2FwaV9yZXNwb25zZSddKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5PblN1Y2Nlc3MpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnBhcnNlKHJlc1snYXBpX3Jlc3BvbnNlJ10pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vblJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPblJlc3BvbnNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0NhbGxiYWNrQmxvY2tzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnBhcnNlKHJlc1snYXBpX3Jlc3BvbnNlJ10pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uUmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uRmFpbHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MocmVzLCBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uRmFpbHVyZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0T25GYWlsdXJlKHRoaXMucHJvY2Vzc0NhbGxiYWNrQmxvY2tzKHJlcywgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vbkZhaWx1cmUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb2Nlc3NDYWxsYmFja0Jsb2NrcyhyZXMsIGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25SZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0T25SZXNwb25zZSh0aGlzLnByb2Nlc3NDYWxsYmFja0Jsb2NrcyhyZXMsIGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25SZXNwb25zZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uRmFpbHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb2Nlc3NDYWxsYmFja0Jsb2NrcyhlcnIsIGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25GYWlsdXJlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9uRmFpbHVyZSh0aGlzLnByb2Nlc3NDYWxsYmFja0Jsb2NrcyhlcnIsIGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25GYWlsdXJlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc0NhbGxiYWNrQmxvY2tzKGVyciwgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vbkV4Y2VwdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPbkV4Y2VwdGlvbih0aGlzLnByb2Nlc3NDYWxsYmFja0Jsb2NrcyhlcnIsIGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25FeGNlcHRpb24pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnSU5URVJOQUwnOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0VYVEVSTkFMJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN1Y2Nlc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmYWlsdXJlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhjZXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5PblN1Y2Nlc3MgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcuT25TdWNjZXNzIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uUmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsdXJlID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vbkZhaWx1cmUgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25GYWlsdXJlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uUmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHRpb24gPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uRmFpbHVyZSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vbkZhaWx1cmUgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25FeGNlcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VTdWJzY3JpcHRpb24gPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5ldmVudFJlc3BvbnNlU3Vic2NyaWJlci5zdWJzY3JpYmUoKHJlczogRXh0ZXJuYWxSZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuaGFuZGxlciAhPT0gaGFuZGxlci5ldmVudF9oYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGZvcm1hdHRlZFJlc3BvbnNlLCBmbGF0dGVuUmVzcG9uc2UgfSA9IHRoaXMuZXh0ZXJuYWxSZXF1ZXN0UmVzcG9uc2VVdGlsLnN0b3JlUmVzcG9uc2UocmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RpZmllZFJlc3VsdCA9IGZvcm1hdHRlZFJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbGF0dGVuUmVzcG9uc2UubG9nb3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuT0lEQ0xvZ291dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVybmFsQVBJUmVzcG9uc2VFbWl0dGVyID0gcHJpbWFyeURhdGFbJ2ludGVybmFsQVBJUmVzcG9uc2VFbWl0dGVyJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW50ZXJuYWxBUElSZXNwb25zZUVtaXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxBUElSZXNwb25zZUVtaXR0ZXIuZW1pdChtb2RpZmllZFJlc3VsdC5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlT3BlcmF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVyaXZlZF9ldmVudF9oYW5kbGVyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyPy5pbnZva2VfZXZlbnRfY29uZmlnPy5jYWxsYmFja19jb25maWc/Lm9uUmVzcG9uc2VbMF0/LmFkZGl0aW9uYWxfcGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZlZF9ldmVudF9oYW5kbGVyID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vblJlc3BvbnNlWzBdLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7IHJldHVybiBlbC5wYXJhbWV0ZXJfdHlwZSA9PSAnQ0VFX3RhYmxlX2xvY2FsX29wZXRhdGlvbicgfSkubGVuZ3RoID4gMCA/IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25SZXNwb25zZVswXS5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gZWwucGFyYW1ldGVyX3R5cGUgPT0gJ0NFRV90YWJsZV9sb2NhbF9vcGV0YXRpb24nIH0pWzBdLnZhbHVlIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhhbmRsZVNhdmVEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQucmVzcG9uc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmltYXJ5RGF0YTogcHJpbWFyeURhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZU9wZXJhdGlvbnM6IHRhYmxlT3BlcmF0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlT3BlcmF0aW9uc0Jsb2NrOiB0YWJsZU9wZXJhdGlvbnNCbG9jayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsT25QYWdlTGVhdmU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudF9jb25maWc6IHsgZGlzcGxheV9zdGVwOiBkZXJpdmVkX2V2ZW50X2hhbmRsZXIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X2hhbmRsZXI6IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWcub25SZXNwb25zZVswXS5oYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52b2tlX2V2ZW50X2NvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfcGFyYW1ldGVyczogaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vblJlc3BvbnNlWzBdLmFkZGl0aW9uYWxfcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFibGVPcGVyYXRpb25zQmxvY2sgIT09ICdzdWJqZWN0X3Byb3BlcnR5JyAmJiB0YWJsZU9wZXJhdGlvbnNCbG9jayAhPT0gJ3N1YmplY3RfcHJvcGVydHlfbW9ydGdhZ2UnICYmIHRhYmxlT3BlcmF0aW9uc0Jsb2NrICE9PSAnbW9ydGdhZ2UnICYmIHRhYmxlT3BlcmF0aW9uc0Jsb2NrICE9PSAndXBkYXRlX3N1YmplY3RfcHJvcGVydHknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlU2F2ZURhdGEudGFibGVPcGVyYXRpb25zID09PSBcInNhdmVcIiAmJiB0YWJsZU9wZXJhdGlvbnNCbG9jayAhPT0gJ3Byb3BlcnRpZXMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlTG9jYWxEYXRhUHJvY2VzcyhoYW5kbGVTYXZlRGF0YSwgaGFuZGxlU2F2ZURhdGEucHJpbWFyeURhdGEsIGhhbmRsZVNhdmVEYXRhLnJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlU2F2ZURhdGEudGFibGVPcGVyYXRpb25zID09PSBcInVwZGF0ZVwiICYmIHRhYmxlT3BlcmF0aW9uc0Jsb2NrICE9PSAncHJvcGVydGllcycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxvY2FsRGF0YVByb2Nlc3MoaGFuZGxlU2F2ZURhdGEsIGhhbmRsZVNhdmVEYXRhLnByaW1hcnlEYXRhLCBoYW5kbGVTYXZlRGF0YS5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZVNhdmVEYXRhLnRhYmxlT3BlcmF0aW9ucyA9PT0gXCJkZWxldGVcIiAmJiB0YWJsZU9wZXJhdGlvbnNCbG9jayAhPT0gJ3Byb3BlcnRpZXMnICYmIHRhYmxlT3BlcmF0aW9uc0Jsb2NrICE9PSAnbW9ydGdhZ2VkZWxldGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVMb2NhbERhdGFQcm9jZXNzKGhhbmRsZVNhdmVEYXRhLCBoYW5kbGVTYXZlRGF0YS5wcmltYXJ5RGF0YSwgaGFuZGxlU2F2ZURhdGEucmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZU9wZXJhdGlvbnNCbG9jayA9PT0gJ3N1YmplY3RfcHJvcGVydHknIHx8IHRhYmxlT3BlcmF0aW9uc0Jsb2NrID09PSAnbW9ydGdhZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyU2F2ZURhdGFbdGFibGVPcGVyYXRpb25zQmxvY2tdID0gaGFuZGxlU2F2ZURhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5ldmVudF9zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZW1pdEFwaVN1Y2Nlc3NSZXNwb25zZS5lbWl0KG1vZGlmaWVkUmVzdWx0LnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NDYWxsYmFjayA9IHRoaXMucHJvY2Vzc0NhbGxiYWNrQmxvY2tzKGZsYXR0ZW5SZXNwb25zZSwgc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFNhdmVIYW5kbGVyLmluY2x1ZGVzKHJlcy5oYW5kbGVyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaGFzX3Vuc2F2ZWRfZGF0YScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdldE9uU3VjY2VzcyhzdWNjZXNzQ2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhaWx1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhaWx1cmVDYWxsYmFjayA9IHRoaXMucHJvY2Vzc0NhbGxiYWNrQmxvY2tzKGZsYXR0ZW5SZXNwb25zZSwgZmFpbHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmFpbHVyZUNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPbkZhaWx1cmUoZmFpbHVyZUNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgT2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgcmVzcG9uc2UuICR7ZXJyfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhjZXB0aW9uQ2FsbGJhY2sgPSB0aGlzLnByb2Nlc3NDYWxsYmFja0Jsb2NrcyhlcnIsIGV4Y2VwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGNlcHRpb25DYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPbkZhaWx1cmUoZXhjZXB0aW9uQ2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgU2F2ZVJlc3BvbnNlRGF0YVN0ZXBJZCA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZyAmJiBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzID8gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maW5kKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLnBhcmFtZXRlcl90eXBlID09PSAnU2F2ZVJlc3BvbnNlRGF0YScgfSkgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2F2ZVJlc3BvbnNlRGF0YVN0ZXBJZCAmJiBTYXZlUmVzcG9uc2VEYXRhU3RlcElkLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVybmFsUmVzcG9uc2VVdGlsLnNhdmVSZXNwb25zZURhdGEoU2F2ZVJlc3BvbnNlRGF0YVN0ZXBJZC52YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRmlsZUVuY3JpcHRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlcm5hbFJlcXVlc3RSZXNwb25zZVV0aWwucHJlcGFyZU9iamVjdFRvQmVTZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmV2ZW50X2hhbmRsZXIsIGFwaVR5cGUgPT09ICdJTlRFUk5BTCcgPyAnaW50ZXJuYWwnIDogJycsIHRydWUsIHRoaXMuZG93bmxvYWRUeXBlLCB0aGlzLmVuY3JpcHRlZEZpbGVBcnJheSwgcHJpbWFyeURhdGEsIHRhYmxlT3BlcmF0aW9ucywgdGFibGVPcGVyYXRpb25zQmxvY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dGVybmFsUmVxdWVzdFJlc3BvbnNlVXRpbC5wcmVwYXJlT2JqZWN0VG9CZVNlbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5ldmVudF9oYW5kbGVyLCBhcGlUeXBlID09PSAnSU5URVJOQUwnID8gJ2ludGVybmFsJyA6ICcnLCB0cnVlLCB0aGlzLmRvd25sb2FkVHlwZSwgW10sIHByaW1hcnlEYXRhLCB0YWJsZU9wZXJhdGlvbnMsIHRhYmxlT3BlcmF0aW9uc0Jsb2NrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXBwRGF0YSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXBpRGF0YSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RvcmUgdGhlIGFwcERhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBEYXRhU2VydmljZS5nZXRBbGxBcHBEYXRhKCkuc3Vic2NyaWJlKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYXBwRGF0YScsIHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NpbmdsZUFwaUtleScpID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBEYXRhID0gcmVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxBcnIgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGEgb2YgcmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcmVxdWVzdEtleSBvZiBkYXRhWydyZXF1ZXN0QXBpS2V5J10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmogPSB7IC4uLm9iaiwgYXBpS2V5OiByZXF1ZXN0S2V5IH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChvYmopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsQXJyID0gWy4uLmZpbmFsQXJyLCAuLi5hcnJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBEYXRhID0gZmluYWxBcnI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYXBwIERhdGEnLCBhcHBEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdG9yZSB0aGUgYXBpRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwaURhdGFTZXJ2aWNlLmdldEFsbEFwaURhdGEoKS5zdWJzY3JpYmUocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdhcGlEYXRhJywgcmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaURhdGEgPSByZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBhcHAgZGF0YSB3aXRoIHRoZSBtYW5kYXRvcnkgZGF0YSBmcm9tIHRoZSByZXBlYXRhYmxlIGJsb2NrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YSBpbiBhcHBEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwRGF0YVtkYXRhXS5saW5rZWRCbG9ja0lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqWydtYW5kYXRvcnknXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwZWF0YWJsZUJsb2NrVXRpbC5nZXRSZXBlYXRhYmxlTG9jYWxTdG9yYWdlRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFwcERhdGFbZGF0YV0ubGlua2VkQmxvY2tJZCwgU3RyaW5nKGFwcERhdGFbZGF0YV0uaWQpKVsnaXNNYW5kYXRvcnknXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBEYXRhW2RhdGFdID0geyAuLi5hcHBEYXRhW2RhdGFdLCAuLi5vYmogfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYXBwRGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldmVudEhhbmRsZXJFbWl0dGVyT2JqZWN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjogaGFuZGxlci5ldmVudF9oYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaURhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZXZlbnRIYW5kbGVyRW1pdHRlci5lbWl0KGV2ZW50SGFuZGxlckVtaXR0ZXJPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdWJzY3JpYmUgdG8gdGhlIG91dGVyIGV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZXZlbnRSZXNwb25zZVN1YnNjcmliZXIuc3Vic2NyaWJlKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzWydldmVudF9zdWNlc3MnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNbJ2xpc3RSZXN1bHQnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLmVtaXRBcGlTdWNjZXNzUmVzcG9uc2UuZW1pdChyZXNbJ2xpc3RSZXN1bHQnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5lbWl0QXBpU3VjY2Vzc1Jlc3BvbnNlLmVtaXQocmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAocmVzKSA9PT0gJ3N0cmluZycgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIChyZXMpID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIGRhdGEgdG8gdGhlIGFraXRhIHN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZURhdGEoU3RyaW5nKHJlcyksIGhhbmRsZXIuZXZlbnRfaGFuZGxlciwgcmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGEgb2YgT2JqZWN0LmtleXMocmVzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAocmVzW2RhdGFdKSA9PT0gJ3N0cmluZycgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgKHJlc1tkYXRhXSkgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBkYXRhIHRvIHRoZSBha2l0YSBzdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZURhdGEoZGF0YSwgaGFuZGxlci5ldmVudF9oYW5kbGVyLCByZXNbZGF0YV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIGRhdGEgdG8gdGhlIGFraXRhIHN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlRGF0YShkYXRhLCBoYW5kbGVyLmV2ZW50X2hhbmRsZXIsIEpTT04uc3RyaW5naWZ5KHJlc1tkYXRhXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLk9uU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MocmVzLCBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLk9uU3VjY2VzcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0T25TdWNjZXNzKHRoaXMucHJvY2Vzc0NhbGxiYWNrQmxvY2tzKHJlcywgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5PblN1Y2Nlc3MpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MocmVzLCBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uUmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9uUmVzcG9uc2UodGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MocmVzLCBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uUmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uRmFpbHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MocmVzLCBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uRmFpbHVyZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0T25GYWlsdXJlKHRoaXMucHJvY2Vzc0NhbGxiYWNrQmxvY2tzKHJlcywgaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZy5vbkZhaWx1cmUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MocmVzLCBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uUmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9uUmVzcG9uc2UodGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MocmVzLCBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnLm9uUmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVNb3J0YWdlU3ViamVjdFByb3BlcnR5RGF0YSgpIHtcclxuICAgICAgICBsZXQgaGFuZGxlU2F2ZURhdGEgPSB0aGlzLmhhbmRsZXJTYXZlRGF0YVsnc3ViamVjdF9wcm9wZXJ0eSddID8gdGhpcy5oYW5kbGVyU2F2ZURhdGFbJ3N1YmplY3RfcHJvcGVydHknXSA6IHRoaXMuaGFuZGxlclNhdmVEYXRhWydtb3J0Z2FnZSddO1xyXG4gICAgICAgIGlmIChoYW5kbGVTYXZlRGF0YT8udGFibGVPcGVyYXRpb25zID09PSBcInNhdmVcIikge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVMb2NhbERhdGFQcm9jZXNzKGhhbmRsZVNhdmVEYXRhLCBoYW5kbGVTYXZlRGF0YS5wcmltYXJ5RGF0YSwgaGFuZGxlU2F2ZURhdGEucmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGhhbmRsZVNhdmVEYXRhPy50YWJsZU9wZXJhdGlvbnMgPT09IFwidXBkYXRlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVMb2NhbERhdGFQcm9jZXNzKGhhbmRsZVNhdmVEYXRhLCBoYW5kbGVTYXZlRGF0YS5wcmltYXJ5RGF0YSwgaGFuZGxlU2F2ZURhdGEucmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGhhbmRsZVNhdmVEYXRhPy50YWJsZU9wZXJhdGlvbnMgPT09IFwiZGVsZXRlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWxldGVMb2NhbERhdGFQcm9jZXNzKGhhbmRsZVNhdmVEYXRhLCBoYW5kbGVTYXZlRGF0YS5wcmltYXJ5RGF0YSwgaGFuZGxlU2F2ZURhdGEucmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBtZXRob2QgYWN0cyBvbiBlYWNoIGFuZCBldmVyeSBmaWxlIGFjdGlvblxyXG4gICAgICogQHBhcmFtIGV4dHJhQ29uZmlnRGF0YTogYXBpIGNvbmZpZyBkYXRhXHJcbiAgICAgKiBAcGFyYW0gaGFuZGxlcjogdGhlIGV2ZW50IGhhbmRsZXJcclxuICAgICAqIEBwYXJhbSBzdWNjZXNzOiB0aGUgc3VjY2VzcyBldmVudFxyXG4gICAgICogQHBhcmFtIGZhaWx1cmU6IHRoZSBmYWlsdXJlIGV2ZW50XHJcbiAgICAgKiBAcmV0dXJucyB2b2lkXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgYWN0T25GaWxlQWN0aW9uKGV4dHJhQ29uZmlnRGF0YSwgaGFuZGxlciwgc3VjY2VzcywgZmFpbHVyZSkge1xyXG5cclxuICAgICAgICBsZXQgZXZlbnRIYW5kbGVyTmFtZTogc3RyaW5nID0gaGFuZGxlci5ldmVudF9oYW5kbGVyO1xyXG4gICAgICAgIGlmIChleHRyYUNvbmZpZ0RhdGEuaGFzT3duUHJvcGVydHkoJ2hhc0N1c3RvbUV2ZW50SGFuZGxlcicpICYmIGV4dHJhQ29uZmlnRGF0YVsnaGFzQ3VzdG9tRXZlbnRIYW5kbGVyJ10pIHtcclxuICAgICAgICAgICAgZXZlbnRIYW5kbGVyTmFtZSA9IGV4dHJhQ29uZmlnRGF0YVsnY3VzdG9tRXZlbnRIYW5kbGVyJ11cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChleHRyYUNvbmZpZ0RhdGEuaXNFeHRlcm5hbCkge1xyXG4gICAgICAgICAgICBleHRyYUNvbmZpZ0RhdGEuaGFuZGxlciA9IGhhbmRsZXIuZXZlbnRfaGFuZGxlcjtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGF5TG9hZCAmJiB0aGlzLnBheUxvYWQuZmlsZURhdGEpIHtcclxuICAgICAgICAgICAgICAgIGV4dHJhQ29uZmlnRGF0YS5hdHRhY2htZW50SWQgPSB0aGlzLnBheUxvYWQuZmlsZURhdGEuYXR0YWNobWVudElkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZXZlbnRIYW5kbGVyRW1pdHRlci5lbWl0KGV4dHJhQ29uZmlnRGF0YSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZpbGVVcGxvYWRTZXJ2aWNlLmdlbmVyaWNGaWxlU2VydmljZShcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnQuZXZlbnRfbmFtZSwgdGhpcy5wYXlMb2FkLCBleHRyYUNvbmZpZ0RhdGEsIGhhbmRsZXIuZXZlbnRfaGFuZGxlcik7XHJcbiAgICAgICAgLy9cclxuICAgICAgICBpZiAoTnVtYmVyKHJlc3BvbnNlLnN0YXR1c0NvZGUpID09PSAyMDApIHtcclxuICAgICAgICAgICAgLy8gY2FsbCBvbiByZXNwb25zZSBvciBvbiBzdWNjZXNzXHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5lbWl0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcGlLZXlEYXRhID0gdGhpcy5hcGlEYXRhU2VydmljZS5nZXRBcGlEYXRhQnlIYW5kbGVyKGV2ZW50SGFuZGxlck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5lbWl0QXBpU3VjY2Vzc1Jlc3BvbnNlLmVtaXQoYXBpS2V5RGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc0NhbGxiYWNrID0gdGhpcy5wcm9jZXNzQ2FsbGJhY2tCbG9ja3MoeyBib2R5OiByZXNwb25zZS5kYXRhLCBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1c0NvZGUgfSwgc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgIGlmIChzdWNjZXNzQ2FsbGJhY2sgJiYgc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPblN1Y2Nlc3Moc3VjY2Vzc0NhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNhbGwgb24gZXhjZXB0aW9uIG9yIG9uIGZhaWx1cmVcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVtaXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZW1pdEFwaUVycm9yUmVzcG9uc2UuZW1pdChyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBmYWlsdXJlQ2FsbGJhY2sgPSB0aGlzLnByb2Nlc3NDYWxsYmFja0Jsb2Nrcyh7IGJvZHk6IHJlc3BvbnNlLmRhdGEsIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzQ29kZSB9LCBmYWlsdXJlKTtcclxuICAgICAgICAgICAgaWYgKGZhaWx1cmVDYWxsYmFjayAmJiBmYWlsdXJlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9uRmFpbHVyZShmYWlsdXJlQ2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVkaXJlY3QgdG8gbG9nb3V0IHdoZW4gdGhlIHJlc3BvbnNlIGlzIHRvIGxvZ291dCB0aGUgdXNlclxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIE9JRENMb2dvdXQoKSB7XHJcbiAgICAgICAgbGV0IGxvZ291dCA9ICcnO1xyXG4gICAgICAgIGlmICh3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnQ0VFX0xvZ2luX1N0ZXAnKSkge1xyXG4gICAgICAgICAgICBsb2dvdXQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnQ0VFX0xvZ2luX1N0ZXAnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDRUVfTG9naW5fU3RlcCBOb3QgRm91bmQgaW4gZ2xvYmFsIGFwcGxpY2F0aW9uIGNvbnN0YW50cy5cclxuICAgICAgICAgICAgIFNvIHJlZGlyZWN0aW5nIHRvIGRlZmF1bHQgc3RlcCBvZiB0aGUgZGVmYXVsdCBzZXF1ZW5jZSBgKTtcclxuICAgICAgICAgICAgbG9nb3V0ID0gT2JqZWN0LnZhbHVlcyh0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLnNlcXVlbmNlRGF0YU1hcClbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuYXBwRGF0YVNlcnZpY2UucmVtb3ZlQWxsQXBwRGF0YSgpO1xyXG4gICAgICAgIHRoaXMuYXBpRGF0YVNlcnZpY2UucmVtb3ZlQWxsQXBpRGF0YSgpO1xyXG4gICAgICAgIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2Uuc3RlcERhdGFTdG9yZSA9IHt9O1xyXG4gICAgICAgIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UuYmxvY2tEYXRhU3RvcmUgPSB7fTtcclxuICAgICAgICAvLyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnc3RlcERhdGFDYWNoZScpO1xyXG4gICAgICAgIC8vIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdsYXN0QmxvY2tMb2FkZWQnKTtcclxuICAgICAgICAvLyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYmxvY2tEYXRhQ2FjaGUnKTtcclxuICAgICAgICB0aGlzLnJlZGlyZWN0aW9uVXRpbC5yZWRpcmVjdFRvKGxvZ291dCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZURhdGEoa2V5OiBzdHJpbmcsIHVybDogc3RyaW5nLCBhcGlWYWx1ZTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgYXBpRGF0YSA9IHtcclxuICAgICAgICAgICAgaWQ6IGtleSxcclxuICAgICAgICAgICAgYXBpVXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGFwaUtleToga2V5LFxyXG4gICAgICAgICAgICB2YWx1ZTogYXBpVmFsdWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGFwaURhdGEpXHJcbiAgICAgICAgdGhpcy5hcGlEYXRhU2VydmljZS5zZXRBcGlEYXRhKE9iamVjdC5hc3NpZ24oe30sIGFwaURhdGEpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm9jZXNzQ2FsbGJhY2tCbG9jayhyZXM6IGFueSwgZmFpbHVyZUJsb2NrczogYW55KSB7XHJcbiAgICAgICAgbGV0IGNhbGxiYWNrQmxvY2s6IGFueTtcclxuICAgICAgICBpZiAoZmFpbHVyZUJsb2Nrcykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZhaWx1cmUgb2YgZmFpbHVyZUJsb2Nrcykge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZhaWx1cmUgYmxvY2snLCBmYWlsdXJlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmNoZWNrUmVzcG9uc2VWYWx1ZXMocmVzLCBmYWlsdXJlKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tCbG9jayA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coY2FsbGJhY2tCbG9jayk7XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrQmxvY2s7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvY2Vzc0NhbGxiYWNrQmxvY2tzMihyZXM6IGFueSwgZmFpbHVyZUJsb2NrczogYW55KSB7XHJcbiAgICAgICAgbGV0IGNhbGxiYWNrQmxvY2s6IGFueSA9IFtdO1xyXG4gICAgICAgIGlmIChmYWlsdXJlQmxvY2tzKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmFpbHVyZSBvZiBmYWlsdXJlQmxvY2tzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZmFpbHVyZSBibG9jaycsIGZhaWx1cmUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuY2hlY2tSZXNwb25zZVZhbHVlcyhyZXMsIGZhaWx1cmUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja0Jsb2NrLnB1c2goZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coY2FsbGJhY2tCbG9jayk7XHJcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrQmxvY2s7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvY2Vzc0NhbGxiYWNrQmxvY2tzKHJlczogYW55LCBmYWlsdXJlQmxvY2tzOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja0Jsb2NrOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgIGlmIChmYWlsdXJlQmxvY2tzICYmIGZhaWx1cmVCbG9ja3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgY29uc3QgYWN0dWFsU3RhdHVzID0gcmVzPy5zdGF0dXNDb2RlPy50b1N0cmluZygpIHx8IHJlcz8uc3RhdHVzPy50b1N0cmluZygpIHx8IHJlcz8uaGVhZGVyX3N0YXR1cz8udG9TdHJpbmcoKSB8fCByZXM/LnJldHVybj8udG9TdHJpbmcoKSB8fCAnMjAwJzsgLy8gRGVmYXVsdCB0byAyMDAgaWYgbm90IGRlZmluZWRcclxuICAgICBcclxuICAgICAgICAgIGZvciAoY29uc3QgZmFpbHVyZSBvZiBmYWlsdXJlQmxvY2tzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkU3RhdHVzID0gZmFpbHVyZT8uYXBpX3Jlc3BvbnNlPy5oZWFkZXJfc3RhdHVzPy50b1N0cmluZygpO1xyXG4gICAgIFxyXG4gICAgICAgICAgICAvLyDinIUgQ2hlY2sgaGVhZGVyX3N0YXR1cyBwZXIgYmxvY2sgaWYgZGVmaW5lZFxyXG4gICAgICAgICAgICBpZiAoZXhwZWN0ZWRTdGF0dXMgJiYgZXhwZWN0ZWRTdGF0dXMgIT09IGFjdHVhbFN0YXR1cykge1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyDinYwgc2tpcCB0aGlzIGJsb2NrLCBzdGF0dXMgbWlzbWF0Y2hcclxuICAgICAgICAgICAgfVxyXG4gICAgIFxyXG4gICAgICAgICAgICAvLyDinIUgTm93IGNoZWNrIHJlc3BvbnNlX3ZhbHVlcyBhbmQgY29uZGl0aW9uc1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5jaGVja1Jlc3BvbnNlVmFsdWVzKHJlcywgZmFpbHVyZSk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgY2FsbGJhY2tCbG9jay5wdXNoKGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgIFxyXG4gICAgICAgIHJldHVybiBjYWxsYmFja0Jsb2NrO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrUmVzcG9uc2VWYWx1ZXMocmVzOiBhbnksIGNhbGxiYWNrQ29uZmlnQmxvY2s6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgaGVhZGVyX3N0YXR1cyxcclxuICAgICAgICAgICAgcmVzcG9uc2VfdmFsdWVzXHJcbiAgICAgICAgfSA9IGNhbGxiYWNrQ29uZmlnQmxvY2suYXBpX3Jlc3BvbnNlO1xyXG4gICAgICAgIGxldCBjb250YWlucyA9IHRydWU7XHJcbiAgICAgICAgbGV0IHN0YXR1c1Bhc3MgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMpKTsgLy8gdG8gY2hlY2sgdGhlIHN0YXR1cyBjb2RlIGFzIHJlcy5ib2R5IGlzIGdldHRpbmcgYXNzaWduZWQgdG8gcmVzXHJcbiAgICAgICAgcmVzID0gcmVzICYmIHJlcy5ib2R5ID8gcmVzLmJvZHkgOiByZXM7XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgcmVzIGhhcyBzdGF0dXMgdGhlbiBjaGVjayBzdGF0dXMgZWxzZSBjaGVjayB0aGUgcmVzcG9uc2VcclxuICAgICAgICBpZiAocmVzcG9uc2UuYm9keSAmJiByZXNwb25zZS5zdGF0dXMgJiYgaGVhZGVyX3N0YXR1cyAmJiBoZWFkZXJfc3RhdHVzICE9IHJlc3BvbnNlLnN0YXR1cykge1xyXG4gICAgICAgICAgICBzdGF0dXNQYXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnRhaW5zID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzdGF0dXNQYXNzICYmIHJlc3BvbnNlX3ZhbHVlcyAmJiBPYmplY3Qua2V5cyhyZXNwb25zZV92YWx1ZXMpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29udGFpbnMgPSBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCByZWZlcmVuY2VWYWx1ZXMgPSBPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZV92YWx1ZXMpO1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhyZWZlcmVuY2VWYWx1ZXMpLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChjb250YWlucyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzW2tleV0gPT0gcmVmZXJlbmNlVmFsdWVzW2tleV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWlucyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc1trZXldICE9PSBudWxsICYmICh0eXBlb2YgKHJlc1trZXldKSA9PT0gJ2Jvb2xlYW4nIHx8IHR5cGVvZiAocmVzW2tleV0pID09PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KHJlc1trZXldKSlcclxuICAgICAgICAgICAgICAgICAgICAmJiBKU09OLnN0cmluZ2lmeShyZXNba2V5XSkgPT09IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UocmVmZXJlbmNlVmFsdWVzW2tleV0pKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVmZXJlbmNlVmFsdWVzW2tleV0uaW5jbHVkZXMoJ3wnKSAmJiByZWZlcmVuY2VWYWx1ZXNba2V5XS5zcGxpdCgnfCcpLm1hcChzdHIgPT4gc3RyLnRyaW0oKSkuaW5jbHVkZXMocmVzW2tleV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWZlcmVuY2VWYWx1ZXNba2V5XSA9PT0gXCIqXCIgJiYgcmVzW2tleV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWlucyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coY29udGFpbnMpO1xyXG4gICAgICAgIGlmIChjb250YWlucykge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2tDb25maWdCbG9jaztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRPbkZhaWx1cmUoZmFpbHVyZUJsb2NrPzogYW55KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJmYWlsdXJlQmxvY2s6IFwiLGZhaWx1cmVCbG9jaylcclxuICAgICAgICBpZiAoZmFpbHVyZUJsb2NrICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgLy8gYWN0IG9uIGZhaWx1cmVcclxuICAgICAgICAgICAgaWYgKCFpc0FycmF5KGZhaWx1cmVCbG9jaykpIHtcclxuICAgICAgICAgICAgICAgIGZhaWx1cmVCbG9jayA9IFtmYWlsdXJlQmxvY2tdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmFpbHVyZUJsb2NrLmZvckVhY2goZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlRXZlbnRDYWxsYmFjayhldmVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZhaWx1cmUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBldmVudCBvZiB0aGlzLmZhaWx1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVFdmVudENhbGxiYWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqICBnZXQgUmVzcG9uc2UgaXMgZXhlY3V0ZWQgZXZlcnkgdGltZSB0aGVyZSBpcyBhbiBBUEkgQ2FsbFxyXG4gICAgICogIGJlIGl0IEVTQiBvciBHZW5lcmljIE1hcHBlciBvciBSZXNwb25zZSBSZWNpZXZlZCBmb3IgdGhlIFByb2plY3QgRW5kIEFQSSBDYWxsXHJcbiAgICAgKi9cclxuXHJcbiAgICBnZXRPblJlc3BvbnNlKHJlc3BvbnNlQmxvY2s/OiBhbnkpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInJlc3BvbnNlQmxvY2s6IFwiLHJlc3BvbnNlQmxvY2spXHJcbiAgICAgICAgaWYgKHJlc3BvbnNlQmxvY2sgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAvLyBhY3Qgb24gcmVzcG9uc2VcclxuICAgICAgICAgICAgaWYgKCFpc0FycmF5KHJlc3BvbnNlQmxvY2spKSB7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZUJsb2NrID0gW3Jlc3BvbnNlQmxvY2tdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzcG9uc2VCbG9jay5mb3JFYWNoKGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZUV2ZW50Q2FsbGJhY2soZXZlbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIHRoaXMucmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVFdmVudENhbGxiYWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRXhjZXB0aW9uIEJsb2NrIGlzIG9ubHkgdHJpZ2dlcmVkIHdoZW4gdGhlcmUgaXMgYW4gZXhjZXB0aW9uIGluIGNhc2Ugb2YgQVBJIGNhbGxpbmdcclxuICAgICAqIEBwYXJhbSBleGNlcHRpb25CbG9ja1xyXG4gICAgICovXHJcblxyXG4gICAgZ2V0T25FeGNlcHRpb24oZXhjZXB0aW9uQmxvY2s/OiBhbnkpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImV4Y2VwdGlvbkJsb2NrOiBcIixleGNlcHRpb25CbG9jaylcclxuICAgICAgICBpZiAoZXhjZXB0aW9uQmxvY2sgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAvLyBhY3Qgb24gRXhjcHRpb25cclxuICAgICAgICAgICAgaWYgKCFpc0FycmF5KGV4Y2VwdGlvbkJsb2NrKSkge1xyXG4gICAgICAgICAgICAgICAgZXhjZXB0aW9uQmxvY2sgPSBbZXhjZXB0aW9uQmxvY2tdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXhjZXB0aW9uQmxvY2suZm9yRWFjaChldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVFdmVudENhbGxiYWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVzcG9uc2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBldmVudCBvZiB0aGlzLmV4Y2VwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZUV2ZW50Q2FsbGJhY2soZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldE9uU3VjY2VzcyhzdWNjZXNzQmxvY2s/OiBhbnkpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInN1Y2Nlc3NCbG9jazogXCIsc3VjY2Vzc0Jsb2NrKVxyXG4gICAgICAgIGlmIChzdWNjZXNzQmxvY2sgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAvLyBhY3Qgb24gc3VjY2Vzc1xyXG4gICAgICAgICAgICBpZiAoIWlzQXJyYXkoc3VjY2Vzc0Jsb2NrKSkge1xyXG4gICAgICAgICAgICAgICAgc3VjY2Vzc0Jsb2NrID0gW3N1Y2Nlc3NCbG9ja11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdWNjZXNzQmxvY2suZm9yRWFjaChldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVFdmVudENhbGxiYWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3VjY2VzcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBldmVudCBvZiB0aGlzLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVFdmVudENhbGxiYWNrKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleGVjdXRlRXZlbnRDYWxsYmFjayhldmVudDogYW55KSB7XHJcbiAgICAgICAgaWYgKCFldmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChldmVudC5OYXZpZ2F0ZXRvTmV4dFBhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFRvKGV2ZW50Lk5hdmlnYXRldG9OZXh0UGFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50LCAnY2FsbGVkJyk7XHJcbiAgICAgICAgaWYgKGV2ZW50Lm5leHRfZXZlbnRfaWQgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGJ1ZmZlciB0aW1lXHJcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlclRpbWUgPSBldmVudC5hZGRpdGlvbmFsX3BhcmFtZXRlcnMgPyBldmVudC5hZGRpdGlvbmFsX3BhcmFtZXRlcnMuZmluZCgoaSkgPT4gaS5wYXJhbWV0ZXJfdHlwZSA9PT0gJ0J1ZmZlclRpbWUnKSA6IG51bGw7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlRXZlbnQoZXZlbnQubmV4dF9ldmVudF9pZCk7XHJcbiAgICAgICAgICAgIH0sIGJ1ZmZlclRpbWUgJiYgIWlzTmFOKE51bWJlcihidWZmZXJUaW1lLnZhbHVlKSkgPyBOdW1iZXIoYnVmZmVyVGltZS52YWx1ZSkgOiAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1vcnRhZ2VTdWJqZWN0UHJvcGVydHlEYXRhKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4ZWN1dGUgaGFuZGxlclxyXG4gICAgICAgIC8vIGV4ZWN1dGUgbWVzc2FnZSBjb2RlXHJcbiAgICAgICAgY29uc3QgaW5saW5lRXJyb3JGaWVsZCA9IGV2ZW50LmFkZGl0aW9uYWxfcGFyYW1ldGVycyA/IGV2ZW50LmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maW5kKChpKSA9PiBpLnBhcmFtZXRlcl90eXBlID09PSAnSW5saW5lRXJyb3JGaWVsZCcpIDogbnVsbDtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5nZXRNZXNzYWdlKGV2ZW50Lm1lc3NhZ2VfY29kZSk7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKGlubGluZUVycm9yRmllbGQpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlubGluZUVycm9yRmllbGQudmFsdWUpLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+JyArIG1lc3NhZ2UgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVPdXQgPSBOdW1iZXIobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21lc3NhZ2VUaW1lT3V0JykpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zbmFja0Jhci5kaXNtaXNzKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGltZU91dCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc25hY2tCYXIub3BlbihtZXNzYWdlLCAnT0snLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsUG9zaXRpb246ICd0b3AnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYW5lbENsYXNzOiBbJ21hdC10b29sYmFyJywgJ21hdC1wcmltYXJ5J10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBOdW1iZXIodGltZU91dClcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbmFja0Jhci5vcGVuKG1lc3NhZ2UsICdPSycsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxQb3NpdGlvbjogJ3RvcCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsQ2xhc3M6IFsnbWF0LXRvb2xiYXInLCAnbWF0LXByaW1hcnknXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGlubGluZUVycm9yRmllbGQpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlubGluZUVycm9yRmllbGQudmFsdWUpLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vID09PT0gZGVwcmVjYXRlZCBmZWF0dXJlXHJcbiAgICAgICAgLy8gZm9yIChjb25zdCBhZGRpdGlvbmFsUGFyYW0gb2YgZXZlbnQuYWRkaXRpb25hbF9wYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgLy8gICAgIGlmIChhZGRpdGlvbmFsUGFyYW0udmFsdWUpIHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbnN0IG9iamVjdCA9IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICBkaXNwbGF5X3N0ZXA6IChhZGRpdGlvbmFsUGFyYW0udmFsdWUpLnNwbGl0KCd8JylbMF1cclxuICAgICAgICAvLyAgICAgICAgIH07XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmplY3QpO1xyXG4gICAgICAgIC8vICAgICAgICAgdGhpcy5ldmVudENvbmZpZyhvYmplY3QsICcnKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBzcGVjaWFsIGV2ZW50IGhhbmRsZXIgdG8gaGFuZGxlIHRoZSBzZXNzaW9uIGNsZWFyIGV2ZW50XHJcbiAgICBzZXNzaW9uRXZlbnRIYW5kbGVyKGhhbmRsZXI6IGFueSwgcGFyYW1ldGVyVHlwZTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIuZXZlbnRfaGFuZGxlciAhPT0gJycpIHtcclxuICAgICAgICAgICAgY29uc3Qgb2JqID0ge307XHJcbiAgICAgICAgICAgIGxldCBhcnIgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBhZGRpdGlvbmFsUGFyYW1ldGVyIG9mIHRoaXMuYWRkaXRpb25hbFBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbmFsUGFyYW1ldGVyLnBhcmFtZXRlcl90eXBlID09PSBwYXJhbWV0ZXJUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyID0gWy4uLmFyciwgLi4uYWRkaXRpb25hbFBhcmFtZXRlci52YWx1ZS5pbmNsdWRlcygnfCcpID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbFBhcmFtZXRlci52YWx1ZS5zcGxpdCgnfCcpLm1hcChzdHIgPT4gc3RyLnRyaW0oKSkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgQXJyYXkoYWRkaXRpb25hbFBhcmFtZXRlci52YWx1ZSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9ialtoYW5kbGVyLmV2ZW50X2hhbmRsZXJdID0gYXJyO1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHNwZWNpYWwgZXZlbnQgaGFuZGxlciB0byBoYW5kbGUgdGhlIERpc3BsYXkgTW9kYWwgZXZlbnRcclxuICAgIGRpc3BsYXlNb2RhbChoYW5kbGVyOiBhbnkpIHtcclxuICAgICAgICBsZXQgbW9kYWxzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbW9kYWxzJykpO1xyXG4gICAgICAgIG1vZGFscy5mb3JFYWNoKChtb2RhbCwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobW9kYWwubW9kYWxJZCA9PSBoYW5kbGVyLmV2ZW50X2hhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ1JlZiA9IHRoaXMuZGlhbG9nLm9wZW4oTW9kYWxSZW5kZXJlckNvbXBvbmVudCwgeyBkYXRhOiB7IG1vZGFsOiBtb2RhbCB9LCBpZDogYGV2ZW50TW9kYWwtJHtoYW5kbGVyLmV2ZW50X2hhbmRsZXJ9YCwgcGFuZWxDbGFzczogYGV2ZW50TW9kYWwtJHtoYW5kbGVyLmV2ZW50X2hhbmRsZXJ9YCB9KTtcclxuICAgICAgICAgICAgICAgIGRpYWxvZ1JlZi5hZnRlckNsb3NlZCgpLnN1YnNjcmliZShyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdUaGUgZGlhbG9nICcgKyBtb2RhbC5tb2RhbElkICsgJyB3YXMgY2xvc2VkLicpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgY2xhc3MgdG8gdGhlIGVsZW1lbnQgd2l0aCAnLmNkay1vdmVybGF5LXBhbmUnIGNsYXNzIHNlbGVjdG9yIG9mIGEgbW9kYWwuXHJcbiAgICB0b2dnbGVNb2RhbENzc0NsYXNzKCkge1xyXG4gICAgICAgIGNvbnN0IG1vZGFsV3JhcHBlciA9IHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2RrLW92ZXJsYXktcGFuZScpO1xyXG4gICAgICAgIGlmIChtb2RhbFdyYXBwZXIpIHtcclxuICAgICAgICAgICAgbW9kYWxXcmFwcGVyLmNsYXNzTGlzdC50b2dnbGUoJ21vZGFsLXN0ZXAtd3JhcHBlcicpO1xyXG4gICAgICAgICAgICBtb2RhbFdyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZSh0aGlzLm1vZGFsR2VuZXJpY0Nzc0NsYXNzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc3BlY2lhbCBldmVudCBoYW5kbGVyIHRvIGhhbmRsZSB0aGUgbWFuZGF0b3J5IGNoZWNrIGV2ZW50XHJcbiAgICBjb3B5VG9DbGlwYm9hcmRFdmVudEhhbmRsZXIoaGFuZGxlcjogYW55KSB7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIuZXZlbnRfaGFuZGxlciAhPT0gJycpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBhZGRpdGlvbmFsUGFyYW0gb2YgdGhpcy5hZGRpdGlvbmFsUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBvYmplY3RbaGFuZGxlci5ldmVudF9oYW5kbGVyXSA9IGFkZGl0aW9uYWxQYXJhbS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoQ29weVRvQ2xpcGJvYXJkVHlwZShvYmplY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gc3BlY2lhbCBldmVudCBoYW5kbGVyIHRvIGhpZ2hsaWdodCBNYXAgTWFya2VyXHJcbiAgICBoaWdobGlnaHRNYXBNYXJrZXIoaGFuZGxlcjogYW55KSB7XHJcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbFBhcmFtczogYW55ID0gdGhpcy5nZXRBZGRpdGlvbmFsUGFyYW1ldGVyKCk7XHJcbiAgICAgICAgaWYgKGFkZGl0aW9uYWxQYXJhbXNbJ01hcE1hcmtlcktleSddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMubWFwTWFya2VyRW1pdHRlci5lbWl0KGFkZGl0aW9uYWxQYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHNwZWNpYWwgZXZlbnQgaGFuZGxlciB0byBTZWFyY2ggRmlsdGVyXHJcbiAgICBzZWFyY2hGaWx0ZXIoaGFuZGxlcjogYW55KSB7XHJcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbFBhcmFtczogYW55ID0gdGhpcy5nZXRBZGRpdGlvbmFsUGFyYW1ldGVyKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG9iaiA9IHtcclxuICAgICAgICAgICAgdW5pcXVlSWRzOiBbXSxcclxuICAgICAgICAgICAgZmlsdGVyQ29sOiBbXSxcclxuICAgICAgICAgICAgdmFsdWVzOiBbXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIG9ialsndW5pcXVlSWRzJ10gPSBhZGRpdGlvbmFsUGFyYW1zWydUYXJnZXRGaWVsZHMnXS5zcGxpdCgnfCcpLm1hcChzdHIgPT4gc3RyLnRyaW0oKSk7XHJcbiAgICAgICAgb2JqWyd2YWx1ZXMnXSA9IHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0RmllbGREYXRhQnlGaWVsZElkcyhhZGRpdGlvbmFsUGFyYW1zWydWYWx1ZUZpZWxkcyddLCAnfCcpO1xyXG4gICAgICAgIG9ialsnZmlsdGVyQ29sJ10gPSB0aGlzLmFwcERhdGFTZXJ2aWNlLmdldEZpZWxkRGF0YUJ5RmllbGRJZHMoYWRkaXRpb25hbFBhcmFtc1snRmlsdGVyQ29sdW1uS2V5cyddLCAnfCcpLmZpbHRlcihzdHIgPT4gc3RyKS5sZW5ndGggPyB0aGlzLmFwcERhdGFTZXJ2aWNlLmdldEZpZWxkRGF0YUJ5RmllbGRJZHMoYWRkaXRpb25hbFBhcmFtc1snRmlsdGVyQ29sdW1uS2V5cyddLCAnfCcpIDpcclxuICAgICAgICAgICAgYWRkaXRpb25hbFBhcmFtc1snRmlsdGVyQ29sdW1uS2V5cyddLnNwbGl0KCd8JykubWFwKHN0ciA9PiBzdHIudHJpbSgpKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0QWRkaXRpb25hbFBhcmFtZXRlcigpWydUYXJnZXRGaWVsZHMnXSkge1xyXG4gICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLnNlYXJjaEZpbHRlckVtaXR0ZXIuZW1pdChvYmopO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHNwZWNpYWwgZXZlbnQgaGFuZGxlciB0byBtYXAgQ2VudGVyXHJcbiAgICBtYXBDZW50ZXIoaGFuZGxlcjogYW55KSB7XHJcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbFBhcmFtczogYW55ID0gdGhpcy5nZXRBZGRpdGlvbmFsUGFyYW1ldGVyKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG9iaiA9IHtcclxuICAgICAgICAgICAgdW5pcXVlSWRzOiBbXSxcclxuICAgICAgICAgICAgdmFsdWVzOiBbXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIG9ialsndW5pcXVlSWRzJ10gPSBhZGRpdGlvbmFsUGFyYW1zWydUYXJnZXRGaWVsZHMnXS5zcGxpdCgnfCcpLm1hcChzdHIgPT4gc3RyLnRyaW0oKSk7XHJcbiAgICAgICAgb2JqWyd2YWx1ZXMnXSA9IHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0RmllbGREYXRhQnlGaWVsZElkcyhhZGRpdGlvbmFsUGFyYW1zWydWYWx1ZUZpZWxkcyddLCAnfCcpO1xyXG5cclxuICAgICAgICBpZiAoYWRkaXRpb25hbFBhcmFtc1snVGFyZ2V0RmllbGRzJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5tYXBDZW50ZXJFbWl0dGVyLmVtaXQob2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc3BlY2lhbCBldmVudCBoYW5kbGVyIHRvIG1hcCBMYXllclxyXG4gICAgTWFwTGF5ZXIoaGFuZGxlcjogYW55KSB7XHJcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbFBhcmFtczogYW55ID0gdGhpcy5nZXRBZGRpdGlvbmFsUGFyYW1ldGVyKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG9iaiA9IHtcclxuICAgICAgICAgICAgdW5pcXVlSWRzOiBbXSxcclxuICAgICAgICAgICAgdmFsdWVzOiBbXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIG9ialsndW5pcXVlSWRzJ10gPSBhZGRpdGlvbmFsUGFyYW1zWydUYXJnZXRGaWVsZHMnXS5zcGxpdCgnfCcpLm1hcChzdHIgPT4gc3RyLnRyaW0oKSk7XHJcbiAgICAgICAgb2JqWyd2YWx1ZXMnXSA9IHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0RmllbGREYXRhQnlGaWVsZElkcyhhZGRpdGlvbmFsUGFyYW1zWydWYWx1ZUZpZWxkcyddLCAnfCcpO1xyXG5cclxuICAgICAgICBpZiAoYWRkaXRpb25hbFBhcmFtc1snVGFyZ2V0RmllbGRzJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5tYXBMYXllckVtaXR0ZXIuZW1pdChvYmopO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHNwZWNpYWwgZXZlbnQgaGFuZGxlciB0byBUb2dnbGUgQWNjb3JkaW9uXHJcbiAgICB0b2dnbGVBY2NvcmRpb24oaGFuZGxlcjogYW55KSB7XHJcbiAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy50b2dnbGVBY2NvcmRpb25FbWl0dGVyLmVtaXQodGhpcy5nZXRBZGRpdGlvbmFsUGFyYW1ldGVyKCkpO1xyXG4gICAgfVxyXG4gICAgLy8gZXhlY3V0ZSBPbkxvYWQgZXZlbnRzIG9mIGN1cnJlbnQgc3RlcFxyXG4gICAgZXhlY3V0ZVN0ZXBPbkxvYWRFdmVudHMoKSB7XHJcbiAgICAgICAgbGV0IG9sZFVybCA9IHRoaXMucm91dGVyLnVybDtcclxuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZUJ5VXJsKFwiL2R1bW15LXVua25vd24tcm91dGVcIiwgeyBza2lwTG9jYXRpb25DaGFuZ2U6IHRydWUsIHN0YXRlOiB7IFwiZXhlY3V0ZU9uTG9hZEV2ZW50c1wiOiB0cnVlfSB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtvbGRVcmxdKTsgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gY3VzdG9tRnVuY3Rpb25zXHJcbiAgICBjdXN0b21GdW5jdGlvbnMoaGFuZGxlcjogYW55LCBwYXJhbWV0ZXJfdHlwZTE6IHN0cmluZywgcGFyYW1ldGVyX3R5cGUyOiBzdHJpbmcsIHByaW1hcnlEYXRhOiBhbnkpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgb2JqID0ge307XHJcbiAgICAgICAgbGV0IHZhcmlhYmxlcyA9IFtdO1xyXG4gICAgICAgIGxldCB0YXJnZXRzID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBhZGRpdGlvbmFsUGFyYW1ldGVyIG9mIHRoaXMuYWRkaXRpb25hbFBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxQYXJhbWV0ZXIucGFyYW1ldGVyX3R5cGUgPT09IHBhcmFtZXRlcl90eXBlMSkge1xyXG4gICAgICAgICAgICAgICAgdmFyaWFibGVzID0gWy4uLnZhcmlhYmxlcywgLi4uYWRkaXRpb25hbFBhcmFtZXRlci52YWx1ZS5pbmNsdWRlcygnfCcpID9cclxuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsUGFyYW1ldGVyLnZhbHVlLnNwbGl0KCd8JykubWFwKHN0ciA9PiBzdHIudHJpbSgpKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEFycmF5KGFkZGl0aW9uYWxQYXJhbWV0ZXIudmFsdWUpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYWRkaXRpb25hbFBhcmFtZXRlci5wYXJhbWV0ZXJfdHlwZSA9PT0gcGFyYW1ldGVyX3R5cGUyKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRzID0gWy4uLnRhcmdldHMsIC4uLmFkZGl0aW9uYWxQYXJhbWV0ZXIudmFsdWUuaW5jbHVkZXMoJ3wnKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbFBhcmFtZXRlci52YWx1ZS5zcGxpdCgnfCcpLm1hcChzdHIgPT4gc3RyLnRyaW0oKSkgOlxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBBcnJheShhZGRpdGlvbmFsUGFyYW1ldGVyLnZhbHVlKV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hDdXN0b21IYW5kbGVyRnVuY3Rpb24oaGFuZGxlciwgdmFyaWFibGVzLCB0YXJnZXRzLCBwcmltYXJ5RGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhlY3V0ZUV2ZW50KGV2ZW50SWQ6IHN0cmluZykge1xyXG4gICAgICAgIC8vIGV4ZWN1dGUgdGhlIGV2ZW50XHJcbiAgICAgICAgZm9yIChjb25zdCBzaW5nbGVFdmVudCBvZiB0aGlzLmV2ZW50X2xpc3QpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5ldmVudF9saXN0LCBzaW5nbGVFdmVudFsnZXZlbnRfaWQnXSwgZXZlbnRJZCk7XHJcbiAgICAgICAgICAgIGlmIChzaW5nbGVFdmVudFsnZXZlbnRfaWQnXSA9PT0gZXZlbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hFdmVudERpc3BsYXlUeXBlKHNpbmdsZUV2ZW50LCB0aGlzLmV2ZW50X2xpc3QpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3dpdGNoQ2xlYXJlbmNlVHlwZShjbGVhck9iamVjdCwgaGFuZGxlckRhdGEsIHByaW1hcnlEYXRhID0ge30pIHtcclxuICAgICAgICBsZXQgcm9vdERhdGEgPSB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLnJvb3REYXRhO1xyXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjbGVhck9iamVjdCk7XHJcbiAgICAgICAgbGV0IGJsb2NrcztcclxuICAgICAgICAvLyBsZXQgYmxvY2tLZXlzID0gW107XHJcbiAgICAgICAgbGV0IHVuaXF1ZUlkcyA9IFtdO1xyXG4gICAgICAgIGxldCBhcGlLZXlzID0gW107XHJcbiAgICAgICAgbGV0IHN0ZXBJZHMgPSBbXTtcclxuICAgICAgICBsZXQgaGFuZGxlcnMgPSBbXTtcclxuICAgICAgICBsZXQgc3RlcFZhbHVlcztcclxuICAgICAgICBsZXQgZnJvbVN0ZXAgPSBmYWxzZTtcclxuICAgICAgICBzd2l0Y2ggKGtleXNbMF0pIHtcclxuICAgICAgICAgICAgY2FzZSAnd29ya2Zsb3cnOlxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzdGVwcyBvZiBjbGVhck9iamVjdFtrZXlzWzBdXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0ZXBJZHMgPSBbLi4uc3RlcElkcywgLi4udGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5nZXRMaXN0T2ZTdGVwSWRzQnlXb3JrZmxvdyhzdGVwcyldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3RlcFZhbHVlcyA9IHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0QWxsQXBwU3RvcmVEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN0ZXBWYWwgb2Ygc3RlcFZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGVwSWRzLmluY2x1ZGVzKHN0ZXBWYWwuc3RlcElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVJZHMucHVzaChzdGVwVmFsLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpS2V5cy5wdXNoKHN0ZXBWYWwuYXBpS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpS2V5cyA9IFsuLi5hcGlLZXlzLCAuLi5zdGVwVmFsLnJlcXVlc3RBcGlLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlzID0gWy4uLmFwaUtleXMsIC4uLnN0ZXBWYWwucmVzcG9uc2VBcGlLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tU3RlcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGVwVmFsLmxpbmtlZEJsb2NrSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwZWF0YWJsZUJsb2NrVXRpbC5yZW1vdmVCeUJsb2NrSWQoc3RlcFZhbC5saW5rZWRCbG9ja0lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdoYW5kbGVyJzpcclxuICAgICAgICAgICAgICAgIGhhbmRsZXJzID0gT2JqZWN0LmFzc2lnbihoYW5kbGVycywgY2xlYXJPYmplY3Rba2V5c1swXV0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Jsb2NrJzpcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYmxvY2tLZXkgb2YgY2xlYXJPYmplY3Rba2V5c1swXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm9vdERhdGEgJiYgcm9vdERhdGEuYmxvY2tGaWVsZHMgJiYgcm9vdERhdGEuYmxvY2tGaWVsZHNbYmxvY2tLZXldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZUlkcyA9IFsuLi51bmlxdWVJZHMsIC4uLnJvb3REYXRhLmJsb2NrRmllbGRzW2Jsb2NrS2V5XV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N0ZXAnOlxyXG4gICAgICAgICAgICAgICAgc3RlcFZhbHVlcyA9IHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0QWxsQXBwU3RvcmVEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICBzdGVwSWRzID0gY2xlYXJPYmplY3Rba2V5c1swXV07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN0ZXBWYWwgb2Ygc3RlcFZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGVwSWRzLmluY2x1ZGVzKHN0ZXBWYWwuc3RlcElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVJZHMucHVzaChzdGVwVmFsLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpS2V5cy5wdXNoKHN0ZXBWYWwuYXBpS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpS2V5cyA9IFsuLi5hcGlLZXlzLCAuLi5zdGVwVmFsLnJlcXVlc3RBcGlLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlzID0gWy4uLmFwaUtleXMsIC4uLnN0ZXBWYWwucmVzcG9uc2VBcGlLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tU3RlcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGVwVmFsLmxpbmtlZEJsb2NrSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwZWF0YWJsZUJsb2NrVXRpbC5yZW1vdmVCeUJsb2NrSWQoc3RlcFZhbC5saW5rZWRCbG9ja0lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzZWN0aW9uJzpcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYmxvY2tLZXkgb2YgY2xlYXJPYmplY3Rba2V5c1swXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm9vdERhdGEgJiYgcm9vdERhdGEuc2VjdGlvbkZpZWxkcyAmJiByb290RGF0YS5zZWN0aW9uRmllbGRzW2Jsb2NrS2V5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVJZHMgPSBbLi4udW5pcXVlSWRzLCAuLi5yb290RGF0YS5zZWN0aW9uRmllbGRzW2Jsb2NrS2V5XV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2ZpZWxkJzpcclxuICAgICAgICAgICAgICAgIHVuaXF1ZUlkcyA9IFsuLi51bmlxdWVJZHMsIC4uLmNsZWFyT2JqZWN0W2tleXNbMF1dXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdyZXBlYXRhYmxlX2Jsb2NrJzpcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbEFQUERhdGEgPSB0aGlzLmFwcERhdGFTZXJ2aWNlLmdldEFsbEFwcFN0b3JlRGF0YSgpOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNsZWFyT2JqZWN0W2tleXNbMF1dLmZvckVhY2goKHJlcGVhdEJsb2NrSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IHJlcGVhdEJsb2NrID0gYWxsQVBQRGF0YS5maW5kKGkgPT4gaS5pZCA9PT0gcmVwZWF0QmxvY2tJZCB8fCBpLmxpbmtlZEJsb2NrSWQgPT09IHJlcGVhdEJsb2NrSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZEJ5TGlua2VkQmxvY2tJZCA9IGZhbHNlOyAvLyB0byBjaGVjayBpZiB0aGUgcmVwZWF0IGJsb2NrIGlzIGZvdW5kIGJ5IGxpbmtlZEJsb2NrSWRcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBlYXRCbG9jayA9IGFsbEFQUERhdGEuZmluZChpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkuaWQgPT09IHJlcGVhdEJsb2NrSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kQnlMaW5rZWRCbG9ja0lkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpLmxpbmtlZEJsb2NrSWQgPT09IHJlcGVhdEJsb2NrSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kQnlMaW5rZWRCbG9ja0lkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVwZWF0QmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcGVhdEJsb2NrLnN0ZXBJZCA9PSB3aW5kb3dbJ2N1cnJlbnRTdGVwSWQnXSAmJiAhZm91bmRCeUxpbmtlZEJsb2NrSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSB0aGUgY2FzZSB3aGVyZSBibG9jayBpcyBvbiBjdXJyZW50IHN0ZXAgYW5kIG5vdCBmb3VuZCBieSBsaW5rZWRCbG9ja0lkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLnJlcGVhdGFibGVCbG9ja1Nlc3Npb25DbGVhcmFuY2VFbWl0dGVyLmVtaXQocmVwZWF0QmxvY2tJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21tb24gY29kZSBwYXRoIGZvciBib3RoIGNhc2VzIHdoZXJlIGZvdW5kQnlMaW5rZWRCbG9ja0lkIGlzIHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yIHdoZW4gcmVwZWF0QmxvY2suc3RlcElkICE9IHdpbmRvd1snY3VycmVudFN0ZXBJZCddIGFuZCBmb3VuZEJ5TGlua2VkQmxvY2tJZCBpcyBmYWxzZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZEJ5TGlua2VkQmxvY2tJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCBhbGwgaWRzIG9mIHRoZSByZXBlYXRhYmxlIGJsb2NrIHdoZW4gZm91bmQgYnkgbGlua2VkQmxvY2tJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkSWRzID0gYWxsQVBQRGF0YS5yZWR1Y2UoKGFjYywgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaS5saW5rZWRCbG9ja0lkID09PSByZXBlYXRCbG9ja0lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2MucHVzaChpLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFtdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlSWRzID0gWy4uLnVuaXF1ZUlkcywgLi4uZmlsdGVyZWRJZHMsIHJlcGVhdEJsb2NrSWRdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwZWF0QmxvY2tJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShyZXBlYXRCbG9ja0lkICsgJ19jb3VudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnUmVwZWF0YWJsZUJsb2NrXycgKyByZXBlYXRCbG9ja0lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBjYXNlIHdoZW4gYmxvY2sgaXMgbm90IG9uIGN1cnJlbnQgc3RlcCBhbmQgbm90IGZvdW5kIGJ5IGxpbmtlZEJsb2NrSWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGlua0Jsb2NrSWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXF1ZUlkcyA9IGFsbEFQUERhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtCbG9ja0lkID0gaS5saW5rZWRCbG9ja0lkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkucmVwZWF0ZWRCbG9ja0ZpZWxkSWQgPT09IHJlcGVhdEJsb2NrSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoaSA9PiBpLmlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcXVlSWRzLnB1c2gocmVwZWF0QmxvY2tJZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rQmxvY2tJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShsaW5rQmxvY2tJZCArICdfY291bnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ1JlcGVhdGFibGVCbG9ja18nICsgbGlua0Jsb2NrSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Fzc29jaWF0ZWRfcmVwZWF0YWJsZV9ibG9jayc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLmFzc29jaWF0ZWRSZXBlYXRhYmxlQmxvY2tTZXNzaW9uQ2xlYXJhbmNlRW1pdHRlci5lbWl0KGNsZWFyT2JqZWN0W2tleXNbMF1dKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhcGlfa2V5JzpcclxuICAgICAgICAgICAgICAgIGFwaUtleXMgPSBbLi4uYXBpS2V5cywgLi4uY2xlYXJPYmplY3Rba2V5c1swXV1dO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FsbCc6XHJcbiAgICAgICAgICAgICAgICAvKiAgd2luZG93LnNlc3Npb25TdG9yYWdlLmNsZWFyKCk7ICovXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZy5jbG9zZUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5zdGVwRGF0YVN0b3JlID0ge307XHJcbiAgICAgICAgICAgICAgICB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLmJsb2NrRGF0YVN0b3JlID0ge307XHJcbiAgICAgICAgICAgICAgICAvLyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnc3RlcERhdGFDYWNoZScpO1xyXG4gICAgICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2xhc3RCbG9ja0xvYWRlZCcpO1xyXG4gICAgICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2Jsb2NrRGF0YUNhY2hlJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcERhdGFTZXJ2aWNlLnJlbW92ZUFsbEFwcERhdGEoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBpRGF0YVNlcnZpY2UucmVtb3ZlQWxsQXBpRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNhbGxCYWNrRGF0YSA9IGhhbmRsZXJEYXRhLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnO1xyXG5cclxuICAgICAgICBpZiAoaGFuZGxlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcGlEYXRhU2VydmljZS5kZWxldGVBcGlEYXRhKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBza2lwRmllbGRzSWQgPSBoYW5kbGVyRGF0YS5pbnZva2VfZXZlbnRfY29uZmlnLmFkZGl0aW9uYWxfcGFyYW1ldGVycy5maW5kKGkgPT4gaS5wYXJhbWV0ZXJfdHlwZSA9PT0gJ1NraXBFcmFzZUZpZWxkcycpO1xyXG4gICAgICAgIGxldCBza2lwRmllbGRzSWRzID0gW107XHJcbiAgICAgICAgaWYgKHNraXBGaWVsZHNJZCkge1xyXG4gICAgICAgICAgICBza2lwRmllbGRzSWRzID0gc2tpcEZpZWxkc0lkLnZhbHVlLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVuaXF1ZUlkcyA9IHVuaXF1ZUlkcy5maWx0ZXIoZSA9PiAhc2tpcEZpZWxkc0lkcy5pbmNsdWRlcyhlKSk7XHJcblxyXG4gICAgICAgIHRoaXMudW5kb1JlZG9VdGlsLmRlbGV0QnlJZCh1bmlxdWVJZHMpO1xyXG4gICAgICAgIHRoaXMuYXNzb2NpYXRlZE1hcHV0aWwuZGVsZXRlQnlJZHModW5pcXVlSWRzKTtcclxuICAgICAgICB0aGlzLmFwcERhdGFTZXJ2aWNlLmRlbGV0ZU11bHRpcGxlQXBwRGF0YSh1bmlxdWVJZHMpO1xyXG4gICAgICAgIC8vIGNsZWFyIHRoZSBsYW5ndWFnZSBpbiB0aGUgc2Vzc2lvbiBzdG9yYWdlXHJcbiAgICAgICAgaWYgKHVuaXF1ZUlkcy5pbmNsdWRlcyh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xhbmdGaWVsZCcpKSkge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2xhbmcnKTtcclxuICAgICAgICAgICAgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5zdGVwRGF0YVN0b3JlID0ge307XHJcbiAgICAgICAgICAgIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UuYmxvY2tEYXRhU3RvcmUgPSB7fTtcclxuICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3N0ZXBEYXRhQ2FjaGUnKTtcclxuICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2xhc3RCbG9ja0xvYWRlZCcpO1xyXG4gICAgICAgICAgICAvLyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYmxvY2tEYXRhQ2FjaGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdXNlckluZm9IYW5kbGVyID0gdGhpcy5PSURDaW5mbyAmJiB0aGlzLk9JRENpbmZvWyd1c2VySW5mb0hhbmRsZXInXSA/IHRoaXMuT0lEQ2luZm9bJ3VzZXJJbmZvSGFuZGxlciddIDogXCJ1c2VySW5mb1wiO1xyXG4gICAgICAgIGFwaUtleXMgPSBhcGlLZXlzLmZpbHRlcihlID0+IHtcclxuICAgICAgICAgICAgaWYgKHVzZXJJbmZvSGFuZGxlciAmJiB0aGlzLmNvbW1vblV0aWwuZ2V0SGFuZGxlck5hbWUoZSkgPT09IHVzZXJJbmZvSGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFwaURhdGFTZXJ2aWNlLmRlbGV0ZU11bHRpcGxlQXBpRGF0YShhcGlLZXlzLCBmcm9tU3RlcCk7XHJcbiAgICAgICAgdGhpcy50cmlnZ2VyU3VjY2Vzc09yRmFpbHVyZShjYWxsQmFja0RhdGEuT25TdWNjZXNzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBnZXR0ZXIgc2V0dGVyIGdvZXMgaGVyZVxyXG4gICAgZ2V0IE9JRENpbmZvKCkge1xyXG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnb2lkY19jb25maWcnKSA/IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdvaWRjX2NvbmZpZycpIDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc3dpdGNoQ2xlYXJBa2l0YVN0b3JlKGNsZWFyT2JqZWN0LCBoYW5kbGVyRGF0YSwgcHJpbWFyeURhdGE6IGFueSA9IHt9KSB7XHJcbiAgICAgICAgbGV0IHJvb3REYXRhID0gdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5yb290RGF0YTtcclxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY2xlYXJPYmplY3QpO1xyXG4gICAgICAgIGNvbnN0IGVtaXR0ZXJPYmogPSB7XHJcbiAgICAgICAgICAgIHVuaXF1ZV9pZHM6IFtdLFxyXG4gICAgICAgICAgICBhcGlLZXlzOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IGlzQXNzb2NpYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBpc1JCS2V5ID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHN0ZXBMaXN0O1xyXG4gICAgICAgIGxldCB1bmlxdWVJZEpTT047XHJcbiAgICAgICAgbGV0IGJsb2NrS2V5cztcclxuICAgICAgICBsZXQgc2VjdGlvbktleXM7XHJcblxyXG4gICAgICAgIGNvbnN0IHNraXBGaWVsZHNJZCA9IGhhbmRsZXJEYXRhLmludm9rZV9ldmVudF9jb25maWcuYWRkaXRpb25hbF9wYXJhbWV0ZXJzLmZpbmQoaSA9PiBpLnBhcmFtZXRlcl90eXBlID09PSAnU2tpcEVyYXNlRmllbGRzJyk7XHJcbiAgICAgICAgbGV0IHNraXBGaWVsZHNJZHMgPSBbXTtcclxuICAgICAgICBpZiAoc2tpcEZpZWxkc0lkKSB7XHJcbiAgICAgICAgICAgIHNraXBGaWVsZHNJZHMgPSBza2lwRmllbGRzSWQudmFsdWUuc3BsaXQoJ3wnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGtleSA9IGtleXNbMF07XHJcbiAgICAgICAgaWYoa2V5LnN0YXJ0c1dpdGgoJ3JiXycpKSB7XHJcbiAgICAgICAgICAgIGlzUkJLZXkgPSB0cnVlO1xyXG4gICAgICAgICAgICBrZXkgPSBrZXkucmVwbGFjZSgncmJfJywgJycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgICAgY2FzZSAnd29ya2Zsb3cnOlxyXG4gICAgICAgICAgICAgICAgc3RlcExpc3QgPSB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLmdldExpc3RPZlN0ZXBJZHNCeVdvcmtmbG93KGNsZWFyT2JqZWN0W2tleXNbMF1dKTtcclxuICAgICAgICAgICAgICAgIHVuaXF1ZUlkSlNPTiA9IGF3YWl0IHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UubG9hZFdGRVVuaXF1ZUlkSlNPTigpLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgICAgICAgICAgZW1pdHRlck9ialsndW5pcXVlX2lkcyddID0gdGhpcy5nZXRTZXNzaW9uS2V5QnlTdGVwcyhzdGVwTGlzdCwgdW5pcXVlSWRKU09OKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdibG9jayc6XHJcbiAgICAgICAgICAgICAgICBibG9ja0tleXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYmxvY2tLZXkgb2YgY2xlYXJPYmplY3Rba2V5c1swXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm9vdERhdGEgJiYgcm9vdERhdGEuYmxvY2tGaWVsZHMgJiYgcm9vdERhdGEuYmxvY2tGaWVsZHNbYmxvY2tLZXldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrS2V5cyA9IFsuLi5ibG9ja0tleXMsIC4uLnJvb3REYXRhLmJsb2NrRmllbGRzW2Jsb2NrS2V5XV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZW1pdHRlck9ialsndW5pcXVlX2lkcyddID0gYmxvY2tLZXlzO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N0ZXAnOlxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcEFwcFZhbHVlcyA9IHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0QWxsQXBwU3RvcmVEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICBzdGVwTGlzdCA9IGNsZWFyT2JqZWN0W2tleXNbMF1dO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcGZpZWxkSWRzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN0ZXBWYWwgb2Ygc3RlcEFwcFZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGVwTGlzdC5pbmNsdWRlcyhzdGVwVmFsLnN0ZXBJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0ZXBWYWwucmVwZWF0ZWRCbG9ja0ZpZWxkSWQgIT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVwZWF0RmllbGRBcnIgPSBzdGVwVmFsLmlkLnNwbGl0KCckJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwZWF0RmllbGRBcnIubGVuZ3RoID4gMCAmJiAhc2tpcEZpZWxkc0lkcy5pbmNsdWRlcyhyZXBlYXRGaWVsZEFyclsxXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwZmllbGRJZHMucHVzaChzdGVwVmFsLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2tpcEZpZWxkc0lkcy5pbmNsdWRlcyhzdGVwVmFsLmlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXBmaWVsZElkcy5wdXNoKHN0ZXBWYWwuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZW1pdHRlck9ialsndW5pcXVlX2lkcyddID0gWy4uLiBuZXcgU2V0KHN0ZXBmaWVsZElkcyldO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NlY3Rpb24nOlxyXG4gICAgICAgICAgICAgICAgc2VjdGlvbktleXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYmxvY2tLZXkgb2YgY2xlYXJPYmplY3Rba2V5c1swXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocm9vdERhdGEgJiYgcm9vdERhdGEuc2VjdGlvbkZpZWxkcyAmJiByb290RGF0YS5zZWN0aW9uRmllbGRzW2Jsb2NrS2V5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uS2V5cyA9IFsuLi5zZWN0aW9uS2V5cywgLi4ucm9vdERhdGEuc2VjdGlvbkZpZWxkc1tibG9ja0tleV1dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlY3Rpb25LZXlzID0gc2VjdGlvbktleXMuZmlsdGVyKGUgPT4gIXNraXBGaWVsZHNJZHMuaW5jbHVkZXMoZSkpO1xyXG4gICAgICAgICAgICAgICAgZW1pdHRlck9ialsndW5pcXVlX2lkcyddID0gc2VjdGlvbktleXM7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmVwZWF0YWJsZV9ibG9jayc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGVwVmFsdWVzID0gdGhpcy5hcHBEYXRhU2VydmljZS5nZXRBbGxBcHBTdG9yZURhdGEoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGVhdGVkQmxvY2tJZHMgPSBjbGVhck9iamVjdFtrZXlzWzBdXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkSWRzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN0ZXBWYWwgb2Ygc3RlcFZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXBlYXRlZEJsb2NrSWRzLmluY2x1ZGVzKHN0ZXBWYWwucmVwZWF0ZWRCbG9ja0ZpZWxkSWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGVhdEZpZWxkQXJyID0gc3RlcFZhbC5pZC5zcGxpdCgnJCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNraXBGaWVsZHNJZHMuaW5jbHVkZXMocmVwZWF0RmllbGRBcnJbMV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZElkcy5wdXNoKHN0ZXBWYWwuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZW1pdHRlck9ialsndW5pcXVlX2lkcyddID0gWy4uLiBuZXcgU2V0KGZpZWxkSWRzKV07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYXNzb2NpYXRlZF9maWVsZCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2ZpZWxkJzpcclxuICAgICAgICAgICAgICAgIGlmIChrZXlzWzBdID09PSAnYXNzb2NpYXRlZF9maWVsZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpc0Fzc29jaWF0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZW1pdHRlck9ialsndW5pcXVlX2lkcyddID0gY2xlYXJPYmplY3Rba2V5c1swXV07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYXBpX2tleSc6XHJcbiAgICAgICAgICAgICAgICBlbWl0dGVyT2JqWydhcGlLZXlzJ10gPSBjbGVhck9iamVjdFtrZXlzWzBdXTtcclxuICAgICAgICAgICAgICAgIGVtaXR0ZXJPYmpbJ3NraXBGaWVsZHNJZHMnXSA9IHNraXBGaWVsZHNJZHM7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coZW1pdHRlck9iaik7XHJcbiAgICAgICAgaWYgKGlzQXNzb2NpYXRlZCkge1xyXG4gICAgICAgICAgICBlbWl0dGVyT2JqWydpc0Fzc29jaWF0ZWQnXSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNhbGxCYWNrRGF0YSA9IGhhbmRsZXJEYXRhLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnO1xyXG4gICAgICAgIGlmIChlbWl0dGVyT2JqLnVuaXF1ZV9pZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBmb3IgcmVwZWF0YWJsZSBmaWVsZFxyXG4gICAgICAgICAgICBpZihpc1JCS2V5KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdW5pcXVlX2lkID0gcHJpbWFyeURhdGE/LnZhbHVlPy51bmlxdWVfaWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodW5pcXVlX2lkKSB7ICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB3b3JkcyA9IHVuaXF1ZV9pZC5zcGxpdCgnJCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3b3Jkcy5sZW5ndGggPT09IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1pdHRlck9iai51bmlxdWVfaWRzLmZvckVhY2goKGVsZSwgaW5kZXgsIGFycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyW2luZGV4XSA9IGAke3dvcmRzWzBdfSQke2VsZX0kJHt3b3Jkc1syXX1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHdvcmRzLmxlbmd0aCA9PT0gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0dGVyT2JqLnVuaXF1ZV9pZHMuZm9yRWFjaCgoZWxlLCBpbmRleCwgYXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJbaW5kZXhdID0gYCR7d29yZHNbMF19JCR7ZWxlfSQke3dvcmRzWzJdfSQke3dvcmRzWzNdfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5hcHBEYXRhU2VydmljZS5jbGVhckRhdGFVc2luZ1VuaXF1ZUlkcyhlbWl0dGVyT2JqLnVuaXF1ZV9pZHMsIChtZXNzYWdlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLmVtaXRGb3JFbXB0eVNlc3Npb24uZW1pdChlbWl0dGVyT2JqKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5PblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlclN1Y2Nlc3NPckZhaWx1cmUoY2FsbEJhY2tEYXRhLk9uU3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRXJyb3IgT2NjdXJyZWQgd2hpbGUgY2xlYXJpbmcgc2Vzc2lvbiBkYXRhJywgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZW1pdHRlck9iai5hcGlLZXlzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBEYXRhU2VydmljZS5jbGVhckRhdGFVc2luZ0FwaUtleXMoZW1pdHRlck9iai5hcGlLZXlzLCAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5lbWl0Rm9yRW1wdHlTZXNzaW9uLmVtaXQoZW1pdHRlck9iaik7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsQmFja0RhdGEgJiYgY2FsbEJhY2tEYXRhLk9uU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJTdWNjZXNzT3JGYWlsdXJlKGNhbGxCYWNrRGF0YS5PblN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0Vycm9yIE9jY3VycmVkIHdoaWxlIGNsZWFyaW5nIHNlc3Npb24gZGF0YScsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLmVtaXRGb3JFbXB0eVNlc3Npb24uZW1pdChlbWl0dGVyT2JqKTtcclxuICAgICAgICAgICAgaWYgKGNhbGxCYWNrRGF0YSAmJiBjYWxsQmFja0RhdGEub25GYWlsdXJlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJTdWNjZXNzT3JGYWlsdXJlKGNhbGxCYWNrRGF0YS5vbkZhaWx1cmUsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGZ1bmN0aW9uIHRyaWdnZXJzIHN1Y2Nlc3Mgb3IgZmFpbHVyZSBiYXNlZCBvbiB0aGUgdHlwZVxyXG4gICAgICogdHJ1ZSBmb3Igc3VjY2VzcyBhbmQgZmFsc2UgZm9yIGZhaWx1cmVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB0cmlnZ2VyU3VjY2Vzc09yRmFpbHVyZShjYWxsYmFja3MsIHR5cGU6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICBjYWxsYmFja3MuZm9yRWFjaChjYWxsYmFjayA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0T25TdWNjZXNzKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRPbkZhaWx1cmUoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHN3aXRjaE1hbmRhdG9yeUNoZWNrVHlwZShjbGVhck9iamVjdCwgaGFuZGxlckRhdGEpIHtcclxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY2xlYXJPYmplY3QpO1xyXG4gICAgICAgIGNvbnN0IGFkZGl0aW9uYWxQYXJhbTogYW55ID0gdGhpcy5nZXRBZGRpdGlvbmFsUGFyYW1ldGVyKCk7XHJcbiAgICAgICAgY29uc3QgZmllbGREYXRhID0gW107XHJcbiAgICAgICAgbGV0IHN0ZXBJZHMgPSBbXTtcclxuICAgICAgICBsZXQgYmxvY2tLZXlzID0gW107XHJcbiAgICAgICAgY29uc3QgZW1wdHlGaWVsZElkcyA9IFtdO1xyXG4gICAgICAgIGxldCBibG9ja3M7XHJcbiAgICAgICAgY29uc3QgYXBwU3RvcmVEYXRhID0gdGhpcy5hcHBEYXRhU2VydmljZS5nZXRBbGxBcHBTdG9yZURhdGEoKTtcclxuICAgICAgICBjb25zdCBtYW5kYXRvcnlBcnIgPSBbXTsgLy8gb25seSBkb25lIGJlY2F1c2UgZGNzcyByZXF1aXJlcyB0byBjaGVjayBhbGwgdGhlIG1hbmRhdG9yeSBrZXlzIGFuZCBzaG93IGxhYmVscyBhcyBhIG1vZGFsXHJcbiAgICAgICAgc3dpdGNoIChrZXlzWzBdKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3dvcmtmbG93JzpcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3RlcHMgb2YgY2xlYXJPYmplY3Rba2V5c1swXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGVwSWRzID0gWy4uLnN0ZXBJZHMsIC4uLnRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UuZ2V0TGlzdE9mU3RlcElkc0J5V29ya2Zsb3coc3RlcHMpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YSBvZiBhcHBTdG9yZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RlcElkcy5pbmNsdWRlcyhkYXRhLnN0ZXBJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlGaWVsZElkcy5wdXNoKGRhdGEuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5tYW5kYXRvcnkgJiYgdGhpcy5lbXB0eVV0aWwuaXNFbXB0eShkYXRhLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5QXJyLnB1c2goZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxQYXJhbVsnU2hvd0ZpZWxkTGFiZWxzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZERhdGEucHVzaChkYXRhLmZpZWxkTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5QXJyLnB1c2godHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYmxvY2snOlxyXG4gICAgICAgICAgICAgICAgYmxvY2tzID0gYXdhaXQgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sb2FkV0ZFVW5pcXVlSWRKU09OKCkudG9Qcm9taXNlKCk7XHJcbiAgICAgICAgICAgICAgICBibG9ja0tleXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYmxvY2tLZXkgb2YgY2xlYXJPYmplY3Rba2V5c1swXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBibG9ja0tleXMgPSBbLi4uYmxvY2tLZXlzLCAuLi50aGlzLmdldFNlc3Npb25LZXlCeUJsb2NrKGJsb2NrS2V5LCBibG9ja3MpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFwcFN0b3JlRGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9ja0tleXMuaW5jbHVkZXMoZWxlbWVudC5pZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlGaWVsZElkcy5wdXNoKGVsZW1lbnQuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5tYW5kYXRvcnkgJiYgdGhpcy5lbXB0eVV0aWwuaXNFbXB0eShlbGVtZW50LnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5QXJyLnB1c2goZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxQYXJhbVsnU2hvd0ZpZWxkTGFiZWxzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZERhdGEucHVzaChlbGVtZW50LmZpZWxkTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5QXJyLnB1c2godHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzdGVwJzpcclxuICAgICAgICAgICAgICAgIHN0ZXBJZHMgPSBjbGVhck9iamVjdFtrZXlzWzBdXTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YSBvZiBhcHBTdG9yZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RlcElkcy5pbmNsdWRlcyhkYXRhLnN0ZXBJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlGaWVsZElkcy5wdXNoKGRhdGEuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5tYW5kYXRvcnkgJiYgdGhpcy5lbXB0eVV0aWwuaXNFbXB0eShkYXRhLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5QXJyLnB1c2goZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxQYXJhbVsnU2hvd0ZpZWxkTGFiZWxzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZERhdGEucHVzaChkYXRhLmZpZWxkTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5QXJyLnB1c2godHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc2VjdGlvbic6XHJcbiAgICAgICAgICAgICAgICBibG9ja3MgPSBhd2FpdCB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLmxvYWRXRkVVbmlxdWVJZEpTT04oKS50b1Byb21pc2UoKTtcclxuICAgICAgICAgICAgICAgIGJsb2NrS2V5cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBibG9ja0tleSBvZiBjbGVhck9iamVjdFtrZXlzWzBdXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrS2V5cyA9IFsuLi5ibG9ja0tleXMsIC4uLnRoaXMuZ2V0U2Vzc2lvbktleUJ5U2VjdGlvbihibG9ja0tleSwgYmxvY2tzKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhcHBTdG9yZURhdGEuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2tLZXlzLmluY2x1ZGVzKGVsZW1lbnQuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtcHR5RmllbGRJZHMucHVzaChlbGVtZW50LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQubWFuZGF0b3J5ICYmIHRoaXMuZW1wdHlVdGlsLmlzRW1wdHkoZWxlbWVudC52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbmRhdG9yeUFyci5wdXNoKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbmFsUGFyYW1bJ1Nob3dGaWVsZExhYmVscyddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGREYXRhLnB1c2goZWxlbWVudC5maWVsZExhYmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbmRhdG9yeUFyci5wdXNoKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmVwZWF0YWJsZV9ibG9jayc6XHJcbiAgICAgICAgICAgICAgICBhcHBTdG9yZURhdGEuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYXJPYmplY3Rba2V5c1swXV0uaW5jbHVkZXMoZWxlbWVudC5yZXBlYXRlZEJsb2NrRmllbGRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlGaWVsZElkcy5wdXNoKGVsZW1lbnQuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5tYW5kYXRvcnkgJiYgdGhpcy5lbXB0eVV0aWwuaXNFbXB0eShlbGVtZW50LnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5QXJyLnB1c2goZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxQYXJhbVsnU2hvd0ZpZWxkTGFiZWxzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZERhdGEucHVzaChlbGVtZW50LmZpZWxkTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5QXJyLnB1c2godHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdmaWVsZCc6XHJcbiAgICAgICAgICAgICAgICBhcHBTdG9yZURhdGEuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYXJPYmplY3Rba2V5c1swXV0uaW5jbHVkZXMoZWxlbWVudC5pZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlGaWVsZElkcy5wdXNoKGVsZW1lbnQuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5tYW5kYXRvcnkgJiYgdGhpcy5lbXB0eVV0aWwuaXNFbXB0eShlbGVtZW50LnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5QXJyLnB1c2goZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxQYXJhbVsnU2hvd0ZpZWxkTGFiZWxzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZERhdGEucHVzaChlbGVtZW50LmZpZWxkTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5QXJyLnB1c2godHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhcGlfa2V5JzpcclxuICAgICAgICAgICAgICAgIGFwcFN0b3JlRGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGVhck9iamVjdFtrZXlzWzBdXS5pbmNsdWRlcyhlbGVtZW50LmFwaUtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlGaWVsZElkcy5wdXNoKGVsZW1lbnQuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5tYW5kYXRvcnkgJiYgdGhpcy5lbXB0eVV0aWwuaXNFbXB0eShlbGVtZW50LnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5QXJyLnB1c2goZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxQYXJhbVsnU2hvd0ZpZWxkTGFiZWxzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZERhdGEucHVzaChlbGVtZW50LmZpZWxkTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5QXJyLnB1c2godHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhlbXB0eUZpZWxkSWRzLCBtYW5kYXRvcnlBcnIpO1xyXG4gICAgICAgIGlmIChhZGRpdGlvbmFsUGFyYW0uTWFuZGF0b3J5Q2hlY2s/LnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJykge1xyXG4gICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLnNob3dNYW5kYXRvcnlFcnJvck1zZy5lbWl0KHsgZmllbGRzOiBlbXB0eUZpZWxkSWRzLCB0eXBlOiAnZXZlbnQnIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjYWxsQmFja0RhdGEgPSBoYW5kbGVyRGF0YS5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZztcclxuICAgICAgICBpZiAobWFuZGF0b3J5QXJyLmluY2x1ZGVzKGZhbHNlKSkge1xyXG4gICAgICAgICAgICBpZiAoYWRkaXRpb25hbFBhcmFtWydEaXNwbGF5QXNNb2RhbCddKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RhbERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd01hbmRhdGVGaWVsZHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGluZzogYWRkaXRpb25hbFBhcmFtWydEaXNwbGF5QXNNb2RhbCddLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczogZmllbGREYXRhXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub3BlbkFsZXJ0KG1vZGFsRGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5vbkZhaWx1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJTdWNjZXNzT3JGYWlsdXJlKGNhbGxCYWNrRGF0YS5vbkZhaWx1cmUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChjYWxsQmFja0RhdGEgJiYgY2FsbEJhY2tEYXRhLk9uU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3VjY2Vzc09yRmFpbHVyZShjYWxsQmFja0RhdGEuT25TdWNjZXNzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIHN3aXRjaFZhbGlkYXRpb25DaGVja1R5cGUoY2xlYXJPYmplY3QsIGhhbmRsZXJEYXRhKSB7XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGNsZWFyT2JqZWN0KTtcclxuICAgICAgICBjb25zdCBhZGRpdGlvbmFsUGFyYW06IGFueSA9IHRoaXMuZ2V0QWRkaXRpb25hbFBhcmFtZXRlcigpO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkRGF0YSA9IFtdO1xyXG4gICAgICAgIGxldCBzdGVwSWRzID0gW107XHJcbiAgICAgICAgbGV0IGJsb2NrS2V5cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGludmFsaWRGaWVsZElkcyA9IFtdO1xyXG4gICAgICAgIGxldCBibG9ja3M7XHJcbiAgICAgICAgY29uc3QgYXBwU3RvcmVEYXRhID0gdGhpcy5hcHBEYXRhU2VydmljZS5nZXRBbGxBcHBTdG9yZURhdGEoKTtcclxuICAgICAgICBjb25zdCB2YWxpZEFyciA9IFtdOyAvLyBvbmx5IGRvbmUgYmVjYXVzZSBkY3NzIHJlcXVpcmVzIHRvIGNoZWNrIGFsbCB0aGUgdmFsaWQga2V5cyBhbmQgc2hvdyBsYWJlbHMgYXMgYSBtb2RhbFxyXG4gICAgICAgIHN3aXRjaCAoa2V5c1swXSkge1xyXG4gICAgICAgICAgICBjYXNlICd3b3JrZmxvdyc6XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN0ZXBzIG9mIGNsZWFyT2JqZWN0W2tleXNbMF1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RlcElkcyA9IFsuLi5zdGVwSWRzLCAuLi50aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLmdldExpc3RPZlN0ZXBJZHNCeVdvcmtmbG93KHN0ZXBzKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGEgb2YgYXBwU3RvcmVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0ZXBJZHMuaW5jbHVkZXMoZGF0YS5zdGVwSWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRGaWVsZElkcy5wdXNoKGRhdGEuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5tYW5kYXRvcnkgJiYgKHRoaXMuZW1wdHlVdGlsLmlzRW1wdHkoZGF0YS52YWx1ZSkgfHwgIWRhdGEuaXNWYWxpZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkQXJyLnB1c2goZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxQYXJhbVsnU2hvd0ZpZWxkTGFiZWxzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZERhdGEucHVzaChkYXRhLmZpZWxkTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRBcnIucHVzaCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdibG9jayc6XHJcbiAgICAgICAgICAgICAgICBibG9ja3MgPSBhd2FpdCB0aGlzLndmZVN0ZXBMb2FkZXJTZXJ2aWNlLmxvYWRXRkVVbmlxdWVJZEpTT04oKS50b1Byb21pc2UoKTtcclxuICAgICAgICAgICAgICAgIGJsb2NrS2V5cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBibG9ja0tleSBvZiBjbGVhck9iamVjdFtrZXlzWzBdXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrS2V5cyA9IFsuLi5ibG9ja0tleXMsIC4uLnRoaXMuZ2V0U2Vzc2lvbktleUJ5QmxvY2soYmxvY2tLZXksIGJsb2NrcyldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXBwU3RvcmVEYXRhLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrS2V5cy5pbmNsdWRlcyhlbGVtZW50LmlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkRmllbGRJZHMucHVzaChlbGVtZW50LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQubWFuZGF0b3J5ICYmICh0aGlzLmVtcHR5VXRpbC5pc0VtcHR5KGVsZW1lbnQudmFsdWUpIHx8ICFlbGVtZW50LmlzVmFsaWQpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRBcnIucHVzaChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25hbFBhcmFtWydTaG93RmllbGRMYWJlbHMnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkRGF0YS5wdXNoKGVsZW1lbnQuZmllbGRMYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZEFyci5wdXNoKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc3RlcCc6XHJcbiAgICAgICAgICAgICAgICBzdGVwSWRzID0gY2xlYXJPYmplY3Rba2V5c1swXV07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGEgb2YgYXBwU3RvcmVEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0ZXBJZHMuaW5jbHVkZXMoZGF0YS5zdGVwSWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRGaWVsZElkcy5wdXNoKGRhdGEuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5tYW5kYXRvcnkgJiYgKHRoaXMuZW1wdHlVdGlsLmlzRW1wdHkoZGF0YS52YWx1ZSkgfHwgIWRhdGEuaXNWYWxpZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkQXJyLnB1c2goZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxQYXJhbVsnU2hvd0ZpZWxkTGFiZWxzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZERhdGEucHVzaChkYXRhLmZpZWxkTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRBcnIucHVzaCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzZWN0aW9uJzpcclxuICAgICAgICAgICAgICAgIGJsb2NrcyA9IGF3YWl0IHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UubG9hZFdGRVVuaXF1ZUlkSlNPTigpLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgICAgICAgICAgYmxvY2tLZXlzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJsb2NrS2V5IG9mIGNsZWFyT2JqZWN0W2tleXNbMF1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tLZXlzID0gWy4uLmJsb2NrS2V5cywgLi4udGhpcy5nZXRTZXNzaW9uS2V5QnlTZWN0aW9uKGJsb2NrS2V5LCBibG9ja3MpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFwcFN0b3JlRGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9ja0tleXMuaW5jbHVkZXMoZWxlbWVudC5pZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZEZpZWxkSWRzLnB1c2goZWxlbWVudC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50Lm1hbmRhdG9yeSAmJiAodGhpcy5lbXB0eVV0aWwuaXNFbXB0eShlbGVtZW50LnZhbHVlKSB8fCAhZWxlbWVudC5pc1ZhbGlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRBcnIucHVzaChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25hbFBhcmFtWydTaG93RmllbGRMYWJlbHMnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkRGF0YS5wdXNoKGVsZW1lbnQuZmllbGRMYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZEFyci5wdXNoKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmVwZWF0YWJsZV9ibG9jayc6XHJcbiAgICAgICAgICAgICAgICBhcHBTdG9yZURhdGEuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYXJPYmplY3Rba2V5c1swXV0uaW5jbHVkZXMoZWxlbWVudC5yZXBlYXRlZEJsb2NrRmllbGRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZEZpZWxkSWRzLnB1c2goZWxlbWVudC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50Lm1hbmRhdG9yeSAmJiAodGhpcy5lbXB0eVV0aWwuaXNFbXB0eShlbGVtZW50LnZhbHVlKSB8fCAhZWxlbWVudC5pc1ZhbGlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRBcnIucHVzaChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25hbFBhcmFtWydTaG93RmllbGRMYWJlbHMnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkRGF0YS5wdXNoKGVsZW1lbnQuZmllbGRMYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZEFyci5wdXNoKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZmllbGQnOlxyXG4gICAgICAgICAgICAgICAgYXBwU3RvcmVEYXRhLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsZWFyT2JqZWN0W2tleXNbMF1dLmluY2x1ZGVzKGVsZW1lbnQuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRGaWVsZElkcy5wdXNoKGVsZW1lbnQuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5tYW5kYXRvcnkgJiYgKHRoaXMuZW1wdHlVdGlsLmlzRW1wdHkoZWxlbWVudC52YWx1ZSkgfHwgIWVsZW1lbnQuaXNWYWxpZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkQXJyLnB1c2goZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxQYXJhbVsnU2hvd0ZpZWxkTGFiZWxzJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZERhdGEucHVzaChlbGVtZW50LmZpZWxkTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRBcnIucHVzaCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FwaV9rZXknOlxyXG4gICAgICAgICAgICAgICAgYXBwU3RvcmVEYXRhLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsZWFyT2JqZWN0W2tleXNbMF1dLmluY2x1ZGVzKGVsZW1lbnQuYXBpS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkRmllbGRJZHMucHVzaChlbGVtZW50LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQubWFuZGF0b3J5ICYmICh0aGlzLmVtcHR5VXRpbC5pc0VtcHR5KGVsZW1lbnQudmFsdWUpIHx8ICFlbGVtZW50LmlzVmFsaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZEFyci5wdXNoKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbmFsUGFyYW1bJ1Nob3dGaWVsZExhYmVscyddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGREYXRhLnB1c2goZWxlbWVudC5maWVsZExhYmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkQXJyLnB1c2godHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhpbnZhbGlkRmllbGRJZHMsIHZhbGlkQXJyKTtcclxuICAgICAgICBpZiAoYWRkaXRpb25hbFBhcmFtLlZhbGlkYXRpb25DaGVjay50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5zaG93VmFsaWRhdGlvbkVycm9yTXNnLmVtaXQoeyBmaWVsZHM6IGludmFsaWRGaWVsZElkcywgdHlwZTogJ2V2ZW50JyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2FsbEJhY2tEYXRhID0gaGFuZGxlckRhdGEuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWc7XHJcbiAgICAgICAgaWYgKHZhbGlkQXJyLmluY2x1ZGVzKGZhbHNlKSkge1xyXG4gICAgICAgICAgICBpZiAoYWRkaXRpb25hbFBhcmFtWydEaXNwbGF5QXNNb2RhbCddKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RhbERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd01hbmRhdGVGaWVsZHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGluZzogYWRkaXRpb25hbFBhcmFtWydEaXNwbGF5QXNNb2RhbCddLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczogZmllbGREYXRhXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub3BlbkFsZXJ0KG1vZGFsRGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5vbkZhaWx1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJTdWNjZXNzT3JGYWlsdXJlKGNhbGxCYWNrRGF0YS5vbkZhaWx1cmUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChjYWxsQmFja0RhdGEgJiYgY2FsbEJhY2tEYXRhLk9uU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3VjY2Vzc09yRmFpbHVyZShjYWxsQmFja0RhdGEuT25TdWNjZXNzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzd2l0Y2hDdXN0b21IYW5kbGVyRnVuY3Rpb24oaGFuZGxlcjogYW55LCB2YXJpYWJsZXM6IGFueVtdLCB0YXJnZXRzOiBzdHJpbmdbXSwgcHJpbWFyeURhdGE6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHZhcmlhYmxlVmFsdWVzID0ge307XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0VmFsdWVzID0gW107XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby11bnVzZWQtZXhwcmVzc2lvblxyXG4gICAgICAgIHZhcmlhYmxlcy5sZW5ndGggJiYgKHZhcmlhYmxlcy5mb3JFYWNoKChlbGVtZW50OiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hcHBEYXRhU2VydmljZS5nZXRJbmRpdmlkdWFsQXBwRGF0YShlbGVtZW50KS5zdWJzY3JpYmUocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVZhbHVlc1tyZXNbMF0uaWRdID0gcmVzWzBdLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby11bnVzZWQtZXhwcmVzc2lvblxyXG4gICAgICAgIHRhcmdldHMubGVuZ3RoICYmICh0YXJnZXRzLmZvckVhY2goKGVsZW1lbnQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICB0YXJnZXRWYWx1ZXMucHVzaChlbGVtZW50KTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRXZlbnRWYXJpYWJsZUVtaXR0ZXJPYmplY3QgPSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXI6IGhhbmRsZXIuZXZlbnRfaGFuZGxlcixcclxuICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZVZhbHVlcyxcclxuICAgICAgICAgICAgdGFyZ2V0czogdGFyZ2V0VmFsdWVzLFxyXG4gICAgICAgICAgICBwcmltYXJ5RGF0YTogcHJpbWFyeURhdGFcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGNhbGxCYWNrRGF0YSA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZz8uY2FsbGJhY2tfY29uZmlnO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5pbkJ1aWxkRnVuY3Rpb25zVXRpbFtjdXN0b21FdmVudFZhcmlhYmxlRW1pdHRlck9iamVjdC5oYW5kbGVyXSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmluQnVpbGRGdW5jdGlvbnNVdGlsW2N1c3RvbUV2ZW50VmFyaWFibGVFbWl0dGVyT2JqZWN0LmhhbmRsZXJdKGN1c3RvbUV2ZW50VmFyaWFibGVFbWl0dGVyT2JqZWN0KTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiByID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgclsndGhlbiddID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgIHIudGhlbihyZXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcmV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsQmFja0RhdGEgJiYgY2FsbEJhY2tEYXRhLm9uRmFpbHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3VjY2Vzc09yRmFpbHVyZShjYWxsQmFja0RhdGEub25GYWlsdXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsQmFja0RhdGEgJiYgY2FsbEJhY2tEYXRhLk9uU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3VjY2Vzc09yRmFpbHVyZShjYWxsQmFja0RhdGEuT25TdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHIgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxCYWNrRGF0YSAmJiAoY2FsbEJhY2tEYXRhLm9uRmFpbHVyZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3VjY2Vzc09yRmFpbHVyZShjYWxsQmFja0RhdGEub25GYWlsdXJlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5PbkZhaWx1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3VjY2Vzc09yRmFpbHVyZShjYWxsQmFja0RhdGEuT25GYWlsdXJlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5PblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3VjY2Vzc09yRmFpbHVyZShjYWxsQmFja0RhdGEuT25TdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5vblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3VjY2Vzc09yRmFpbHVyZShjYWxsQmFja0RhdGEub25TdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLmN1c3RvbUV2ZW50VmFyaWFibGVFbWl0dGVyLmVtaXQoY3VzdG9tRXZlbnRWYXJpYWJsZUVtaXR0ZXJPYmplY3QpO1xyXG4gICAgICAgICAgICBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5PblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlclN1Y2Nlc3NPckZhaWx1cmUoY2FsbEJhY2tEYXRhLk9uU3VjY2Vzcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzd2l0Y2hDb3B5VG9DbGlwYm9hcmRUeXBlKG9iamVjdCkge1xyXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xyXG4gICAgICAgIGxldCBjb3BpZWRfZmllbGRzID0gW107XHJcbiAgICAgICAgc3dpdGNoIChrZXlzWzBdKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0ZpZWxkdmFsdWUnOlxyXG4gICAgICAgICAgICAgICAgb2JqZWN0W2tleXNbMF1dLnNwbGl0KCd8JykuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcERhdGFTZXJ2aWNlLmdldEluZGl2aWR1YWxBcHBEYXRhKGVsZW1lbnQudHJpbSgpKS5zdWJzY3JpYmUocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29waWVkX2ZpZWxkcy5wdXNoKHJlc1swXS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29weVRvQ2xpcGJvYXJkKGNvcGllZF9maWVsZHMuam9pbignLCcpKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdVUkwnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3B5VG9DbGlwYm9hcmQoZG9jdW1lbnQuVVJMKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvcHlUb0NsaXBib2FyZCh2YWw6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHNlbEJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XHJcbiAgICAgICAgc2VsQm94LnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICBzZWxCb3guc3R5bGUubGVmdCA9ICcwJztcclxuICAgICAgICBzZWxCb3guc3R5bGUudG9wID0gJzAnO1xyXG4gICAgICAgIHNlbEJveC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xyXG4gICAgICAgIHNlbEJveC52YWx1ZSA9IHZhbDtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNlbEJveCk7XHJcbiAgICAgICAgc2VsQm94LmZvY3VzKCk7XHJcbiAgICAgICAgc2VsQm94LnNlbGVjdCgpO1xyXG4gICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzZWxCb3gpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNlc3Npb25LZXlCeUJsb2NrKGJsb2NrSWQsIHVuaXF1ZUlkSlNPTikge1xyXG4gICAgICAgIGxldCBzZXNzaW9uS2V5cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHVuaXF1ZUlkcyA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2luZ2xlT2JqZWN0IG9mIHVuaXF1ZUlkSlNPTikge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGJsb2Nrc0RhdGEgb2Ygc2luZ2xlT2JqZWN0LmRhdGEuYmxvY2tzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNpbmdsZUJsb2NrIGluIGJsb2Nrc0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2luZ2xlQmxvY2sgPT09IGJsb2NrSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbktleXMgPSBbLi4uc2Vzc2lvbktleXMsIC4uLmJsb2Nrc0RhdGFbc2luZ2xlQmxvY2tdXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2Vzc2lvbktleXMpIHtcclxuICAgICAgICAgICAgdW5pcXVlSWRzLnB1c2godGhpcy5zZXNzaW9uS2V5VXRpbC5nZXRGaWVsZE5hbWVGcm9tU2Vzc2lvbktleShrZXkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFsuLi4gbmV3IFNldCh1bmlxdWVJZHMpXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZXNzaW9uS2V5QnlTdGVwcyhzdGVwSWRzLCB1bmlxdWVJZEpTT04pIHtcclxuICAgICAgICBjb25zdCB1bmlxdWVJZHMgPSBbXTtcclxuICAgICAgICBsZXQgc2Vzc2lvbktleXMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiB1bmlxdWVJZEpTT04pIHtcclxuICAgICAgICAgICAgaWYgKHN0ZXBJZHMuaW5jbHVkZXMob2JqLnN0ZXBJZCkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbkRhdGEgb2Ygb2JqLmRhdGEuc2VjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGZvcmluXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzaW5nbGVTZWN0aW9uIGluIHNlY3Rpb25EYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25LZXlzID0gWy4uLnNlc3Npb25LZXlzLCAuLi5zZWN0aW9uRGF0YVtzaW5nbGVTZWN0aW9uXV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBibG9ja3NEYXRhIG9mIG9iai5kYXRhLmJsb2Nrcykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogZm9yaW5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNpbmdsZUJsb2NrIGluIGJsb2Nrc0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbktleXMgPSBbLi4uc2Vzc2lvbktleXMsIC4uLmJsb2Nrc0RhdGFbc2luZ2xlQmxvY2tdXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2Vzc2lvbktleXMpIHtcclxuICAgICAgICAgICAgdW5pcXVlSWRzLnB1c2godGhpcy5zZXNzaW9uS2V5VXRpbC5nZXRGaWVsZE5hbWVGcm9tU2Vzc2lvbktleShrZXkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFsuLi4gbmV3IFNldCh1bmlxdWVJZHMpXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZXNzaW9uS2V5QnlTZWN0aW9uKHNlY3Rpb25JZCwgdW5pcXVlSWRKU09OKSB7XHJcbiAgICAgICAgY29uc3QgdW5pcXVlSWRzID0gW107XHJcbiAgICAgICAgbGV0IHNlc3Npb25LZXlzID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBzaW5nbGVPYmplY3Qgb2YgdW5pcXVlSWRKU09OKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbkRhdGEgb2Ygc2luZ2xlT2JqZWN0LmRhdGEuc2VjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc2luZ2xlU2VjdGlvbiBpbiBzZWN0aW9uRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaW5nbGVTZWN0aW9uID09PSBzZWN0aW9uSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbktleXMgPSBbLi4uc2Vzc2lvbktleXMsIC4uLnNlY3Rpb25EYXRhW3NpbmdsZVNlY3Rpb25dXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2Vzc2lvbktleXMpIHtcclxuICAgICAgICAgICAgdW5pcXVlSWRzLnB1c2godGhpcy5zZXNzaW9uS2V5VXRpbC5nZXRGaWVsZE5hbWVGcm9tU2Vzc2lvbktleShrZXkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFsuLi4gbmV3IFNldCh1bmlxdWVJZHMpXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyB0aGlzIGlzIHRoZSBhZGRpdGlvbmFsIHBhcmFtZXRlciBvYmplY3QgdGhhdCBpcyBpbiB0aGUgcm9vdFxyXG4gICAgLy8gb2YgdGhlIGludm9rZV9ldmVudF9jb25maWdcclxuICAgIGdldEFkZGl0aW9uYWxQYXJhbWV0ZXIoKSB7XHJcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbFBhcmFtID0ge307XHJcbiAgICAgICAgZm9yIChjb25zdCBwYXJhbSBvZiB0aGlzLmFkZGl0aW9uYWxQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgIGFkZGl0aW9uYWxQYXJhbVtwYXJhbS5wYXJhbWV0ZXJfdHlwZV0gPSBwYXJhbS52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFkZGl0aW9uYWxQYXJhbTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmdW5jdGlvbiB0aGF0IHNldHMgY2VsbCBkYXRhIG9mIGxpc3Qgb3IgdGFibGVcclxuICAgIHNldENlbGxEYXRhKHByaW1hcnlEYXRhLCBoYW5kbGVyKSB7XHJcbiAgICAgICAgdGhpcy5jZWxsQXBwRGF0YS5zdGVwSWQgPSBwcmltYXJ5RGF0YS5zdGVwSWQ7XHJcbiAgICAgICAgaWYgKHByaW1hcnlEYXRhLnR5cGUgPT09ICd0YWJsZScpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBwcmltYXJ5RGF0YS52YWx1ZS5maWVsZHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcmltYXJ5RGF0YS52YWx1ZS5kYXRhW2ZpZWxkLnVuaXF1ZV9pZF0gIT09IHVuZGVmaW5lZCAmJiBmaWVsZC5maWVsZF90eXBlICE9PSBcIk1lbnVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iajogYW55ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmlkID0gZmllbGQudW5pcXVlX2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai52YWx1ZSA9IHByaW1hcnlEYXRhLnZhbHVlLmRhdGFbZmllbGQudW5pcXVlX2lkXSB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3QgdXNpbmcgY29uY2F0ZW5hdGlvbiBiZWNhdXNlIGNoaWxkIGZpZWxkIHdpdGhpbiBsaXN0IGRvZXMgbm90IHN1cHBvcnQgY29uY2F0ZW5hdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIG9iai5yZXNwb25zZUFwaUtleSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBpS2V5VXRpbC5nZXRNdWx0aXBsZUFwaUtleXMoZmllbGQucmVzcG9uc2VfYXBpX2tleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnJlcXVlc3RBcGlLZXkgPSB0aGlzLmFwaUtleVV0aWwuZ2V0TXVsdGlwbGVBcGlLZXlzKGZpZWxkLnJlcXVlc3RfYXBpX2tleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmFwaUtleSA9IGZpZWxkLmFwaV9rZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBEYXRhU2VydmljZS5zZXRBcHBEYXRhKHsgLi4udGhpcy5jZWxsQXBwRGF0YSwgLi4ub2JqIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRMaXN0Q2VsbERhdGEocHJpbWFyeURhdGEudmFsdWUuZmllbGRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZykge1xyXG4gICAgICAgICAgICBjb25zdCBjYWxsQmFja0RhdGEgPSBoYW5kbGVyLmludm9rZV9ldmVudF9jb25maWcuY2FsbGJhY2tfY29uZmlnO1xyXG4gICAgICAgICAgICBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5PblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlclN1Y2Nlc3NPckZhaWx1cmUoY2FsbEJhY2tEYXRhLk9uU3VjY2Vzcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVjdXJzaXZlIGZ1bmN0aW9uIHRvIGZpbmQgYWxsIHRoZSBrZXlzIHdoaWNoIGhhcyByZXF1ZXN0IHJlc3BvbnNlIGFwaSBrZXlcclxuICAgIC8vIGFuZCBzdG9yZSB0aGUgZGF0YSBpbiB0aGUgYWtpdGEgc3RvcmUgYXBwIGRhdGFcclxuICAgIHB1YmxpYyBnZXRMaXN0Q2VsbERhdGEoZGF0YTogQXJyYXk8YW55Pikge1xyXG4gICAgICAgIGZvciAoY29uc3QgZmllbGQgb2YgZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZmllbGQuY2hpbGRfZmllbGRzICYmIGZpZWxkLmNoaWxkX2ZpZWxkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdENlbGxEYXRhKGZpZWxkLmNoaWxkX2ZpZWxkcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NpbmdsZUFwaUtleScpID09PSAndHJ1ZScgPyBmaWVsZC5hcGlfa2V5IDogKGZpZWxkLnJlcXVlc3RfYXBpX2tleSB8fCBmaWVsZC5yZXNwb25zZV9hcGlfa2V5KSAmJiBmaWVsZC5maWVsZF90eXBlICE9PSBcIk1lbnVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdDogYW55ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmlkID0gZmllbGQudW5pcXVlX2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC52YWx1ZSA9IGZpZWxkLnJvd0RhdGEudmFsdWUgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IHVzaW5nIGNvbmNhdGVuYXRpb24gYmVjYXVzZSBjaGlsZCBmaWVsZCB3aXRoaW4gbGlzdCBkb2VzIG5vdCBzdXBwb3J0IGNvbmNhdGVuYXRpb25cclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QucmVzcG9uc2VBcGlLZXkgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwaUtleVV0aWwuZ2V0TXVsdGlwbGVBcGlLZXlzKGZpZWxkLnJlc3BvbnNlX2FwaV9rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5yZXF1ZXN0QXBpS2V5ID0gdGhpcy5hcGlLZXlVdGlsLmdldE11bHRpcGxlQXBpS2V5cyhmaWVsZC5yZXF1ZXN0X2FwaV9rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5hcGlLZXkgPSBmaWVsZC5hcGlfa2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwRGF0YVNlcnZpY2Uuc2V0QXBwRGF0YSh7IC4uLnRoaXMuY2VsbEFwcERhdGEsIC4uLm9iamVjdCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgaGFzVW5zYXZlZERhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoYXNfdW5zYXZlZF9kYXRhJykgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbW9kYWxPblBhZ2VMZWF2ZSgpIHtcclxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21vZGFsX29uX3BhZ2VfbGVhdmUnKSA/IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtb2RhbF9vbl9wYWdlX2xlYXZlJykgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGFnZUxlYXZlU3RlcElkKCkge1xyXG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGFnZV9sZWF2ZV9zdGVwX2lkJykgPyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGFnZV9sZWF2ZV9zdGVwX2lkJykgOiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcGFnZUxlYXZlSHJlZigpIHtcclxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BhZ2VfbGVhdmVfaHJlZicpID8gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BhZ2VfbGVhdmVfaHJlZicpIDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBhZ2VMZWF2ZUhyZWZUYXJnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwYWdlX2xlYXZlX2hyZWZfdGFyZ2V0JykgPyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGFnZV9sZWF2ZV9ocmVmX3RhcmdldCcpIDogJyc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGdldE9uUGFnZUxlYXZlQ2hlY2tUeXBlKCkge1xyXG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnT25QYWdlTGVhdmVDaGVja1R5cGUnKSA/IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdPblBhZ2VMZWF2ZUNoZWNrVHlwZScpIDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmVkaXJlY3RUbyhzdGVwSWQ6IHN0cmluZywgTW9kYWxPblBhZ2VMZWF2ZTogc3RyaW5nID0gbnVsbCwgdGFyZ2V0OiBzdHJpbmcgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKCh0aGlzLm1vZGFsT25QYWdlTGVhdmUgfHwgTW9kYWxPblBhZ2VMZWF2ZSkgJiYgISh0aGlzLmdldE9uUGFnZUxlYXZlQ2hlY2tUeXBlID09PSAnc2F2ZWQnICYmICF0aGlzLmhhc1Vuc2F2ZWREYXRhKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VMZWF2ZUhyZWYgJiYgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3BhZ2VfbGVhdmVfaHJlZicpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGFnZV9sZWF2ZV9zdGVwX2lkJywgc3RlcElkKTtcclxuICAgICAgICAgICAgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sb2FkU3RlcEJ5SWQoTW9kYWxPblBhZ2VMZWF2ZSA/IE1vZGFsT25QYWdlTGVhdmUgOiB0aGlzLm1vZGFsT25QYWdlTGVhdmUpLnN1YnNjcmliZSgoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSAhPT0gdW5kZWZpbmVkICYmIGRhdGEuZGlzcGxheV9hc19tb2RhbCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbkRpYWxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdGlvblV0aWwucmVkaXJlY3RUbyhzdGVwSWQsIHRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlZGlyZWN0VG9IcmVmKGxpbms6IHN0cmluZywgTW9kYWxPblBhZ2VMZWF2ZTogc3RyaW5nID0gbnVsbCwgdGFyZ2V0OiBzdHJpbmcgPSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgZ2xvYmFsUGFyYW1ldGVycyA9IHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UuYWRkaXRpb25hbFBhcmFtZXRlcnM7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzVW5zYXZlZERhdGEgJiYgKHRoaXMubW9kYWxPblBhZ2VMZWF2ZSB8fCBNb2RhbE9uUGFnZUxlYXZlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2VMZWF2ZVN0ZXBJZCAmJiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncGFnZV9sZWF2ZV9zdGVwX2lkJyk7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwYWdlX2xlYXZlX2hyZWYnLCBsaW5rKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BhZ2VfbGVhdmVfaHJlZl90YXJnZXQnLCB0YXJnZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UubG9hZFN0ZXBCeUlkKE1vZGFsT25QYWdlTGVhdmUgPyBNb2RhbE9uUGFnZUxlYXZlIDogdGhpcy5tb2RhbE9uUGFnZUxlYXZlKS5zdWJzY3JpYmUoKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCAmJiBkYXRhLmRpc3BsYXlfYXNfbW9kYWwgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5EaWFsb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChnbG9iYWxQYXJhbWV0ZXJzWydleHRlcm5hbFNpdGVQcm9tcHQnXSAmJiAhdGhpcy5wYWdlTGVhdmVIcmVmKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZUxlYXZlU3RlcElkICYmIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdwYWdlX2xlYXZlX3N0ZXBfaWQnKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BhZ2VfbGVhdmVfaHJlZicsIGxpbmspO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGFnZV9sZWF2ZV9ocmVmX3RhcmdldCcsIHRhcmdldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5TW9kYWwoeyBldmVudF9oYW5kbGVyOiBnbG9iYWxQYXJhbWV0ZXJzWydleHRlcm5hbFNpdGVQcm9tcHQnXSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGxpbmssIHRhcmdldCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGxpbms7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB0aGF0IGVtaXRzIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQgc3RhdGUgZXZlbnQgd2l0aCB0aGUgZmllbGRzIGFuZCB0aGUgdmFsdWVcclxuICAgICAqIEBwYXJhbSBvYmogdGhlIHR5cGUgb2YgdGhlIGV2ZW50IGNhbiBiZSBibG9jaywgc2VjdGlvbiwgZmllbGQgYW5kIHRoZSBmaWVsZCBpZHNcclxuICAgICAqIEBwYXJhbSB0eXBlIHRoZSB0eXBlIG9mIHRoZSBzdGF0ZSB0byBiZSBjaGFuZ2UgbGlrZSB2aXNpYmlsaXR5LCBtYW5kYXRvcnksIGVkaXRhYmxlXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGZpZWxkU3RhdGVDaGFuZ2VFdmVudChvYmosIHR5cGUsIHJlYWREYXRhRnJvbU1vZGFsOiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdGVDaGFuZ2VkT2JqID0ge1xyXG4gICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICBpZHM6IFtdLFxyXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5nZXRBZGRpdGlvbmFsUGFyYW1ldGVyKClbJ0ZpZWxkU3RhdGVWYWx1ZSddLnNwbGl0KCd8JykubWFwKHN0ciA9PiBOdW1iZXIoc3RyLnRyaW0oKSkpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgdW5pcXVlSWRKU09OO1xyXG4gICAgICAgIHN3aXRjaCAoT2JqZWN0LmtleXMob2JqKVswXSkge1xyXG4gICAgICAgICAgICBjYXNlICdmaWVsZCc6XHJcbiAgICAgICAgICAgICAgICBzdGF0ZUNoYW5nZWRPYmouaWRzID0gb2JqWydmaWVsZCddO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N0ZXAnOlxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcElkcyA9IG9ialsnc3RlcCddO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwU3RvcmVEYXRhID0gdGhpcy5hcHBEYXRhU2VydmljZS5nZXRBbGxBcHBTdG9yZURhdGEoKTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YSBvZiBhcHBTdG9yZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RlcElkcy5pbmNsdWRlcyhkYXRhLnN0ZXBJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDaGFuZ2VkT2JqLmlkcy5wdXNoKFN0cmluZyhkYXRhLmlkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NlY3Rpb24nOlxyXG4gICAgICAgICAgICAgICAgdW5pcXVlSWRKU09OID0gYXdhaXQgdGhpcy53ZmVTdGVwTG9hZGVyU2VydmljZS5sb2FkV0ZFVW5pcXVlSWRKU09OKCkudG9Qcm9taXNlKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RlcElkID0gcmVhZERhdGFGcm9tTW9kYWwgPyB3aW5kb3dbJ2N1cnJlbnRNb2RhbElkJ10gOiB3aW5kb3dbJ2N1cnJlbnRTdGVwSWQnXTtcclxuICAgICAgICAgICAgICAgIHVuaXF1ZUlkSlNPTiA9IHVuaXF1ZUlkSlNPTi5maWx0ZXIoaSA9PiBpLnN0ZXBJZCA9PT0gc3RlcElkKTtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbktleSBvZiBvYmpbJ3NlY3Rpb24nXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlQ2hhbmdlZE9iai5pZHMgPSBbLi4uc3RhdGVDaGFuZ2VkT2JqLmlkcywgLi4udGhpcy5nZXRTZXNzaW9uS2V5QnlTZWN0aW9uKHNlY3Rpb25LZXksIHVuaXF1ZUlkSlNPTildO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Jsb2NrJzpcclxuICAgICAgICAgICAgICAgIHVuaXF1ZUlkSlNPTiA9IGF3YWl0IHRoaXMud2ZlU3RlcExvYWRlclNlcnZpY2UubG9hZFdGRVVuaXF1ZUlkSlNPTigpLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBibG9ja0tleSBvZiBvYmpbJ2Jsb2NrJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZUNoYW5nZWRPYmouaWRzID0gWy4uLnN0YXRlQ2hhbmdlZE9iai5pZHMsIC4uLnRoaXMuZ2V0U2Vzc2lvbktleUJ5QmxvY2soYmxvY2tLZXksIHVuaXF1ZUlkSlNPTildO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHN0YXRlQ2hhbmdlZE9iaik7XHJcbiAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5lbWl0RmllbGRTdGF0ZUNoYW5nZUV2ZW50RW1pdHRlci5lbWl0KHN0YXRlQ2hhbmdlZE9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0IGZpZWxkIHZhbHVlc1xyXG4gICAgc2V0VmFsdWVzT25FdmVudChoYW5kbGVyLCBwcmltYXJ5RGF0YTogYW55ID0ge30pIHtcclxuICAgICAgICBjb25zdCBhZGRpdGlvbmFsUGFyYW1zOiBhbnkgPSB0aGlzLmdldEFkZGl0aW9uYWxQYXJhbWV0ZXIoKTtcclxuICAgICAgICBjb25zdCBvYmogPSB7XHJcbiAgICAgICAgICAgIHVuaXF1ZUlkczogW10sXHJcbiAgICAgICAgICAgIGFwaUtleXM6IFtdLFxyXG4gICAgICAgICAgICB2YWx1ZXM6IFtdLFxyXG4gICAgICAgICAgICB0cmlnZ2VyVXBkYXRlOlxyXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbFBhcmFtcy5UcmlnZ2VyT25VcGRhdGVFdmVudCAmJiBhZGRpdGlvbmFsUGFyYW1zLlRyaWdnZXJPblVwZGF0ZUV2ZW50LnRvTG93ZXJDYXNlKCkgPT09ICdmYWxzZScgPyB0cnVlIDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICghYWRkaXRpb25hbFBhcmFtc1snVGFyZ2V0RmllbGRzJ10gfHwgIWFkZGl0aW9uYWxQYXJhbXNbJ1ZhbHVlRmllbGRzJ10pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzd2l0Y2ggKGhhbmRsZXIuZXZlbnRfaGFuZGxlcikge1xyXG4gICAgICAgICAgICBjYXNlICdzaW5nbGVfc3RhdGljX3ZhbHVlJzpcclxuICAgICAgICAgICAgY2FzZSAnbXVsdGlfc3RhdGljX3ZhbHVlJzogICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBvYmpbJ3VuaXF1ZUlkcyddID0gYWRkaXRpb25hbFBhcmFtc1snVGFyZ2V0RmllbGRzJ10uc3BsaXQoJ3wnKS5tYXAoc3RyID0+IHN0ci50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgb2JqWyd2YWx1ZXMnXSA9IGFkZGl0aW9uYWxQYXJhbXNbJ1ZhbHVlRmllbGRzJ10uc3BsaXQoJ3wnKS5tYXAoc3RyID0+IHN0ci50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgLy9hcml0aG1ldGljIG9wZXJhdGlvbnNcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBvYmpbJ3ZhbHVlcyddLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB2ID0gb2JqWyd2YWx1ZXMnXVtpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYuaW5jbHVkZXMoJyV2YWx1ZSUnKSAmJiBvYmpbJ3VuaXF1ZUlkcyddW2luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0VmFsID0gdGhpcy5hcHBEYXRhU2VydmljZS5nZXRGaWVsZERhdGFCeUZpZWxkSWQob2JqWyd1bmlxdWVJZHMnXVtpbmRleF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSB2LnJlcGxhY2UoLyV2YWx1ZSUvLCB0VmFsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYuaW5jbHVkZXMoJyhjYWxjKScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gZXZhbCh2LnNwbGl0KCcoY2FsYyknKVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG9ialsndmFsdWVzJ11baW5kZXhdID0gdjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzaW5nbGVfZmllbGRfdmFsdWUnOlxyXG4gICAgICAgICAgICBjYXNlICdtdWx0aV9maWVsZF92YWx1ZSc6XHJcbiAgICAgICAgICAgICAgICBsZXQgdW5pcXVlSWRzID0gYWRkaXRpb25hbFBhcmFtc1snVGFyZ2V0RmllbGRzJ10uc3BsaXQoJ3wnKS5tYXAoc3RyID0+IHN0ci50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlRmllbGRzID0gYWRkaXRpb25hbFBhcmFtc1snVmFsdWVGaWVsZHMnXTtcclxuICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbmFsUGFyYW1zWydUYXJnZXRGaWVsZHMnXS5pbmNsdWRlcygnKGRhdGVDYWxjKScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqWyd1bmlxdWVJZHMnXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIG9ialsndmFsdWVzJ10gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWVzID0gYWRkaXRpb25hbFBhcmFtc1snVmFsdWVGaWVsZHMnXS5zcGxpdCgnfCcpLm1hcChzdHIgPT4gc3RyLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHZhbHVlcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRWYWwgPSB1bmlxdWVJZHNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodFZhbC5pbmNsdWRlcygnKGRhdGVDYWxjKScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRWYWwgPSB0VmFsLnNwbGl0KCcoZGF0ZUNhbGMpJylbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyclN0ciA9IHRWYWwuc3BsaXQoL1slJV0vKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbJ3VuaXF1ZUlkcyddLnB1c2goYXJyU3RyWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRWYWx1ZSA9IG5ldyBEYXRlKHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0RmllbGREYXRhQnlGaWVsZElkKHZhbHVlc1tpbmRleF0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWxTdHJpbmcgPSBhcnJTdHJbMl0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxTdHJpbmcgJiYgY2FsU3RyaW5nLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9wZXJhdG9yID0gY2FsU3RyaW5nWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdW5pdCA9IGNhbFN0cmluZ1tjYWxTdHJpbmcubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbW91bnQgPSBOdW1iZXIoY2FsU3RyaW5nLnJlcGxhY2UodW5pdCwgJycpLnJlcGxhY2Uob3BlcmF0b3IsICcnKS50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHVuaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2QnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob3BlcmF0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnKyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRWYWx1ZS5zZXREYXRlKHRhcmdldFZhbHVlLmdldERhdGUoKSArIGFtb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnLSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRWYWx1ZS5zZXREYXRlKHRhcmdldFZhbHVlLmdldERhdGUoKSAtIGFtb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wZXJhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJysnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VmFsdWUuc2V0TW9udGgodGFyZ2V0VmFsdWUuZ2V0TW9udGgoKSArIGFtb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnLSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRWYWx1ZS5zZXRNb250aCh0YXJnZXRWYWx1ZS5nZXRNb250aCgpIC0gYW1vdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3knOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob3BlcmF0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnKyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRWYWx1ZS5zZXRGdWxsWWVhcih0YXJnZXRWYWx1ZS5nZXRGdWxsWWVhcigpICsgYW1vdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICctJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFZhbHVlLnNldEZ1bGxZZWFyKHRhcmdldFZhbHVlLmdldEZ1bGxZZWFyKCkgLSBhbW91bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbERhdGUgPSAoKHRhcmdldFZhbHVlLmdldE1vbnRoKCkgPiA4KSA/ICh0YXJnZXRWYWx1ZS5nZXRNb250aCgpICsgMSkgOiAoJzAnICsgKHRhcmdldFZhbHVlLmdldE1vbnRoKCkgKyAxKSkpICsgJy8nICsgKCh0YXJnZXRWYWx1ZS5nZXREYXRlKCkgPiA5KSA/IHRhcmdldFZhbHVlLmdldERhdGUoKSA6ICgnMCcgKyB0YXJnZXRWYWx1ZS5nZXREYXRlKCkpKSArICcvJyArIHRhcmdldFZhbHVlLmdldEZ1bGxZZWFyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbJ3ZhbHVlcyddLnB1c2goZmluYWxEYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByaW1hcnlEYXRhICYmIHByaW1hcnlEYXRhLnZhbHVlICYmIHByaW1hcnlEYXRhLnZhbHVlLmlzUmVwZWF0YWJsZSAmJiBwcmltYXJ5RGF0YS5zdGVwSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVGaWVsZHMgPSB2YWx1ZUZpZWxkcy5zcGxpdCgnfCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKCh0YXJnZXRGaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRGaWVsZC5zdGFydHNXaXRoKHByaW1hcnlEYXRhLnN0ZXBJZCkpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0RmllbGQ7O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRJZCA9IHByaW1hcnlEYXRhLnN0ZXBJZCArICckJyArIHRhcmdldEZpZWxkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmltYXJ5RGF0YS52YWx1ZS5wYXJlbnRQb3NpdGlvbiAhPSBudWxsICYmIHByaW1hcnlEYXRhLnZhbHVlLnBhcmVudFBvc2l0aW9uICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZCArPSAnJCcgKyBwcmltYXJ5RGF0YS52YWx1ZS5wYXJlbnRQb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByaW1hcnlEYXRhLnZhbHVlLnBvc2l0aW9uICE9IG51bGwgfHwgcHJpbWFyeURhdGEudmFsdWUucG9zaXRpb24gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkICs9ICckJyArIHByaW1hcnlEYXRhLnZhbHVlLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCd8Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG9ialsndW5pcXVlSWRzJ10gPSBhZGRpdGlvbmFsUGFyYW1zWydUYXJnZXRGaWVsZHMnXS5zcGxpdCgnfCcpLm1hcChzdHIgPT4gc3RyLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqWyd2YWx1ZXMnXSA9IHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0RmllbGREYXRhQnlGaWVsZElkcyh2YWx1ZUZpZWxkcywgJ3wnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdvYmonLCBvYmopO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NpbmdsZV9hcGlfa2V5X3ZhbHVlJzpcclxuICAgICAgICAgICAgY2FzZSAnbXVsdGlfYXBpX2tleV92YWx1ZSc6XHJcbiAgICAgICAgICAgICAgICBvYmpbJ2FwaUtleXMnXSA9IGFkZGl0aW9uYWxQYXJhbXNbJ1RhcmdldEZpZWxkcyddLnNwbGl0KCd8JykubWFwKHN0ciA9PiBzdHIudHJpbSgpKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgb2JqWyd2YWx1ZXMnXSA9IHRoaXMuYXBpRGF0YVNlcnZpY2UuZ2V0QXBpS2V5VmFsdWVCeUtleVN0cmluZyhhZGRpdGlvbmFsUGFyYW1zWydWYWx1ZUZpZWxkcyddLCAnfCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NpbmdsZV9maWVsZF9hcGlfa2V5X3ZhbHVlJzpcclxuICAgICAgICAgICAgY2FzZSAnbXVsdGlfZmllbGRfYXBpX2tleV92YWx1ZSc6XHJcbiAgICAgICAgICAgICAgICBvYmpbJ3VuaXF1ZUlkcyddID0gYWRkaXRpb25hbFBhcmFtc1snVGFyZ2V0RmllbGRzJ10uc3BsaXQoJ3wnKS5tYXAoc3RyID0+IHN0ci50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGVja2JveFZhbHVlQXNBcnJheSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqWyd2YWx1ZXMnXSA9IHRoaXMuYXBpRGF0YVNlcnZpY2UuZ2V0QVBJS2V5VmFsdWVCeUFycmF5KGFkZGl0aW9uYWxQYXJhbXNbJ1ZhbHVlRmllbGRzJ10sICd8Jyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ialsndmFsdWVzJ10gPSB0aGlzLmFwaURhdGFTZXJ2aWNlLmdldEFwaUtleVZhbHVlQnlLZXlTdHJpbmcoYWRkaXRpb25hbFBhcmFtc1snVmFsdWVGaWVsZHMnXSwgJ3wnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzaW5nbGVfYXBpX2tleV9maWVsZF92YWx1ZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ211bHRpX2FwaV9rZXlfZmllbGRfdmFsdWUnOlxyXG4gICAgICAgICAgICAgICAgb2JqWydhcGlLZXlzJ10gPSBhZGRpdGlvbmFsUGFyYW1zWydUYXJnZXRGaWVsZHMnXS5zcGxpdCgnfCcpLm1hcChzdHIgPT4gc3RyLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICBvYmpbJ3ZhbHVlcyddID0gdGhpcy5hcHBEYXRhU2VydmljZS5nZXRGaWVsZERhdGFCeUZpZWxkSWRzKGFkZGl0aW9uYWxQYXJhbXNbJ1ZhbHVlRmllbGRzJ10sICd8Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGlzV2FpdEZvckRhdGFTZXQgPSBhZGRpdGlvbmFsUGFyYW1zWydDRUVfZXZlbnRfd2FpdF9mb3JfZGF0YV9zZXQnXT8udG9Mb3dlckNhc2UoKSA9PSAndHJ1ZSc7XHJcbiAgICAgICAgaWYoaXNXYWl0Rm9yRGF0YVNldCkge1xyXG4gICAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLnNldHRpbmdGaWVsZFZhbHVlRXZlbnRGaW5pc2hlZC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50U2V0VmFsdWVGaW5pc2hlZChoYW5kbGVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZW1pdFNldEZpZWxkVmFsdWVPbkV2ZW50LmVtaXQob2JqKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hhcmVkRXZlbnRzU2VydmljZXMuZW1pdFNldEZpZWxkVmFsdWVPbkV2ZW50LmVtaXQob2JqKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50U2V0VmFsdWVGaW5pc2hlZChoYW5kbGVyKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50U2V0VmFsdWVGaW5pc2hlZChoYW5kbGVyKSB7XHJcbiAgICAgICAgY29uc3QgY2FsbEJhY2tEYXRhID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZztcclxuICAgICAgICBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5PblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3VjY2Vzc09yRmFpbHVyZShjYWxsQmFja0RhdGEuT25TdWNjZXNzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNDaGVja2JveFZhbHVlQXNBcnJheSgpIHtcclxuICAgICAgICBjb25zdCBpc0NoZWNrQXJyYXkgPSB0aGlzLmFkZGl0aW9uYWxQYXJhbWV0ZXJzID8gdGhpcy5hZGRpdGlvbmFsUGFyYW1ldGVycy5maW5kKGkgPT4gaS5wYXJhbWV0ZXJfdHlwZSA9PSAnQ2hlY2tBbGxDaGVja2JveEdyb3VwJykgOiBbXTtcclxuICAgICAgICBpZiAoaXNDaGVja0FycmF5ICYmIGlzQ2hlY2tBcnJheVsndmFsdWUnXSA9PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLy8gc2V0IGdlbyBsb2NhdGlvblxyXG4gICAgZ2V0TG9jYXRpb24oZ2xvYmFsUGFyYW1ldGVycywgaGFuZGxlcikge1xyXG4gICAgICAgIC8vIGlmIHRoZXJlIGFyZSBnbG9iYWwgcGFyYW1ldGVycyBDRUVfRGV2aWNlTGF0aXR1ZGUgb3IgQ0VFX0RldmljZUxvbmdpdHVkZVxyXG4gICAgICAgIC8vIHRoZW4gZ2V0IHRoZSBsb2NhdGlvbiBpbmZvcm1hdGlvblxyXG4gICAgICAgIGlmIChnbG9iYWxQYXJhbWV0ZXJzLkNFRV9EZXZpY2VMYXRpdHVkZSB8fFxyXG4gICAgICAgICAgICBnbG9iYWxQYXJhbWV0ZXJzLkNFRV9EZXZpY2VMb25naXR1ZGUpIHtcclxuICAgICAgICAgICAgaWYgKCdnZW9sb2NhdGlvbicgaW4gbmF2aWdhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKChwb3NpdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUdlb0xvY2F0aW9uKGdsb2JhbFBhcmFtZXRlcnMsIHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSwgcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FsbEJhY2tEYXRhID0gaGFuZGxlci5pbnZva2VfZXZlbnRfY29uZmlnLmNhbGxiYWNrX2NvbmZpZztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5PblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3VjY2Vzc09yRmFpbHVyZShjYWxsQmFja0RhdGEuT25TdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlR2VvTG9jYXRpb24oZ2xvYmFsUGFyYW1ldGVycywgJycsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEaXNwbGF5IGVycm9yIGJhc2VkIG9uIHRoZSBlcnJvciBjb2RlLlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgY29kZSB9ID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9jY3VycmVkIHdoaWxlIGdldHRpbmcgZGV2aWNlIGxvY2F0aW9uOiBIYW5kbGUgdGltZW91dC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBvY2N1cnJlZCB3aGlsZSBnZXR0aW5nIGRldmljZSBsb2NhdGlvbjogVXNlciBkZW5pZWQgdGhlIHJlcXVlc3QuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igb2NjdXJyZWQgd2hpbGUgZ2V0dGluZyBkZXZpY2UgbG9jYXRpb246IFBvc2l0aW9uIG5vdCBhdmFpbGFibGUuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dlb2xvY2F0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChnbG9iYWxQYXJhbWV0ZXJzLkNFRV9EZXZpY2VJbmZvKSB7XHJcbiAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGV2aWNlSW5mb0JveCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBicm93c2VyQWdlbnQ6IG5hdmlnYXRvci51c2VyQWdlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEJyb3dzZXI6IHRoaXMuZGV0ZWN0QnJvd3NlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRPczogdGhpcy5kZXRlY3RPcGVyYXRpbmdTeXN0ZW0oKSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50T3NWZXJzaW9uOiB0aGlzLmRldGVjdE9wZXJhdGluZ1N5c3RlbVZlcnNpb24oKSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGV2aWNlOiB0aGlzLmRldGVjdERldmljZVR5cGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBicm93c2VyTGFuZ3VhZ2U6IG5hdmlnYXRvci5sYW5ndWFnZSxcclxuICAgICAgICAgICAgICAgICAgICBicm93c2VyVGltZXpvbmU6IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlRGV2aWNlSW5mbyhnbG9iYWxQYXJhbWV0ZXJzLCBkZXZpY2VJbmZvQm94KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxCYWNrRGF0YSA9IGhhbmRsZXIuaW52b2tlX2V2ZW50X2NvbmZpZy5jYWxsYmFja19jb25maWc7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbEJhY2tEYXRhICYmIGNhbGxCYWNrRGF0YS5PblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJTdWNjZXNzT3JGYWlsdXJlKGNhbGxCYWNrRGF0YS5PblN1Y2Nlc3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlRGV2aWNlSW5mbyhnbG9iYWxQYXJhbWV0ZXJzLCB7fSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZXRlY3RCcm93c2VyKCkge1xyXG4gICAgICAgIGNvbnN0IHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XHJcbiAgICAgICAgaWYgKHVzZXJBZ2VudC5pbmNsdWRlcyhcIkZpcmVmb3hcIikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiTW96aWxsYSBGaXJlZm94XCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQuaW5jbHVkZXMoXCJDaHJvbWVcIikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiR29vZ2xlIENocm9tZVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50LmluY2x1ZGVzKFwiU2FmYXJpXCIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIkFwcGxlIFNhZmFyaVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50LmluY2x1ZGVzKFwiRWRnZVwiKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJNaWNyb3NvZnQgRWRnZVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50LmluY2x1ZGVzKFwiT3BlcmFcIikgfHwgdXNlckFnZW50LmluY2x1ZGVzKFwiT1BSXCIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIk9wZXJhXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQuaW5jbHVkZXMoXCJUcmlkZW50XCIpIHx8IHVzZXJBZ2VudC5pbmNsdWRlcyhcIk1TSUVcIikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiSW50ZXJuZXQgRXhwbG9yZXJcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJVbmtub3duIGJyb3dzZXJcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRldGVjdE9wZXJhdGluZ1N5c3RlbSgpIHtcclxuICAgICAgICBjb25zdCB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xyXG4gICAgICAgIGlmICgvV2luL2kudGVzdCh1c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIldpbmRvd3NcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKC9NYWMvaS50ZXN0KHVzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiTWFjIE9TXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICgvTGludXgvaS50ZXN0KHVzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiTGludXhcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKC9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdCh1c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImlPU1wiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoL0FuZHJvaWQvaS50ZXN0KHVzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiQW5kcm9pZFwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlVua25vd24gb3BlcmF0aW5nIHN5c3RlbVwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRldGVjdE9wZXJhdGluZ1N5c3RlbVZlcnNpb24oKSB7XHJcbiAgICAgICAgY29uc3QgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuXHJcbiAgICAgICAgaWYgKC9XaW4vaS50ZXN0KHVzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgd2luZG93c1ZlcnNpb25SZWdleCA9IC9XaW5kb3dzIE5UIChcXGQrXFwuXFxkKykvO1xyXG4gICAgICAgICAgICBjb25zdCB3aW5kb3dzVmVyc2lvbk1hdGNoID0gdXNlckFnZW50Lm1hdGNoKHdpbmRvd3NWZXJzaW9uUmVnZXgpO1xyXG4gICAgICAgICAgICBpZiAod2luZG93c1ZlcnNpb25NYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiV2luZG93cyBcIiArIHdpbmRvd3NWZXJzaW9uTWF0Y2hbMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKC9NYWMvaS50ZXN0KHVzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgY29uc3QgbWFjVmVyc2lvblJlZ2V4ID0gL01hYyBPUyBYIChcXGQrW1xcLl9dXFxkKyg/OltcXC5fXVxcZCspPykvO1xyXG4gICAgICAgICAgICBjb25zdCBtYWNWZXJzaW9uTWF0Y2ggPSB1c2VyQWdlbnQubWF0Y2gobWFjVmVyc2lvblJlZ2V4KTtcclxuICAgICAgICAgICAgaWYgKG1hY1ZlcnNpb25NYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiTWFjIE9TIFwiICsgbWFjVmVyc2lvbk1hdGNoWzFdLnJlcGxhY2UoL18vZywgXCIuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICgvTGludXgvaS50ZXN0KHVzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgY29uc3QgbGludXhWZXJzaW9uUmVnZXggPSAvTGludXggKFxcZCtcXC5cXGQrXFwuXFxkKykvO1xyXG4gICAgICAgICAgICBjb25zdCBsaW51eFZlcnNpb25NYXRjaCA9IHVzZXJBZ2VudC5tYXRjaChsaW51eFZlcnNpb25SZWdleCk7XHJcbiAgICAgICAgICAgIGlmIChsaW51eFZlcnNpb25NYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiTGludXggXCIgKyBsaW51eFZlcnNpb25NYXRjaFsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KHVzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgY29uc3QgaW9zVmVyc2lvblJlZ2V4ID0gL09TIChcXGQrX1xcZCsoPzpfXFxkKyk/KS87XHJcbiAgICAgICAgICAgIGNvbnN0IGlvc1ZlcnNpb25NYXRjaCA9IHVzZXJBZ2VudC5tYXRjaChpb3NWZXJzaW9uUmVnZXgpO1xyXG4gICAgICAgICAgICBpZiAoaW9zVmVyc2lvbk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpT1MgXCIgKyBpb3NWZXJzaW9uTWF0Y2hbMV0ucmVwbGFjZSgvXy9nLCBcIi5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKC9BbmRyb2lkL2kudGVzdCh1c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuZHJvaWRWZXJzaW9uUmVnZXggPSAvQW5kcm9pZCAoXFxkK1xcLlxcZCsoPzpcXC5cXGQrKT8pLztcclxuICAgICAgICAgICAgY29uc3QgYW5kcm9pZFZlcnNpb25NYXRjaCA9IHVzZXJBZ2VudC5tYXRjaChhbmRyb2lkVmVyc2lvblJlZ2V4KTtcclxuICAgICAgICAgICAgaWYgKGFuZHJvaWRWZXJzaW9uTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIkFuZHJvaWQgXCIgKyBhbmRyb2lkVmVyc2lvbk1hdGNoWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gXCJVbmtub3duIG9wZXJhdGluZyBzeXN0ZW0gdmVyc2lvblwiO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGV0ZWN0RGV2aWNlVHlwZSgpIHtcclxuICAgICAgICBjb25zdCB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xyXG5cclxuICAgICAgICBpZiAoL01vYmkvaS50ZXN0KHVzZXJBZ2VudCkgfHwgL0FuZHJvaWQvaS50ZXN0KHVzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiTW9iaWxlXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICgvaVBhZC9pLnRlc3QodXNlckFnZW50KSB8fCAvVGFibGV0L2kudGVzdCh1c2VyQWdlbnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlRhYmxldFwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIkRlc2t0b3BcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzYXZlRGV2aWNlSW5mbyhnbG9iYWxQYXJhbWV0ZXJzLCBicm93c2VyQWdlbnQpIHtcclxuICAgICAgICBjb25zdCBicm93c2VyQWdlbnRBcGlLZXkgPSBnbG9iYWxQYXJhbWV0ZXJzLkNFRV9EZXZpY2VJbmZvICYmXHJcbiAgICAgICAgICAgIGdsb2JhbFBhcmFtZXRlcnMuQ0VFX0RldmljZUluZm8uaW5jbHVkZXMoJyQkJykgP1xyXG4gICAgICAgICAgICBnbG9iYWxQYXJhbWV0ZXJzLkNFRV9EZXZpY2VJbmZvLnNwbGl0KCckJCcpWzFdIDogZ2xvYmFsUGFyYW1ldGVycy5DRUVfRGV2aWNlSW5mbztcclxuICAgICAgICB0aGlzLnNhdmVEYXRhKGJyb3dzZXJBZ2VudEFwaUtleSwgJycsIGJyb3dzZXJBZ2VudCk7XHJcbiAgICAgICAgdGhpcy5lbWl0RGF0YShicm93c2VyQWdlbnRBcGlLZXksIGJyb3dzZXJBZ2VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzYXZlR2VvTG9jYXRpb24oZ2xvYmFsUGFyYW1ldGVycywgbGF0aXR1ZGUsIGxvbmdpdHVkZSkge1xyXG4gICAgICAgIGNvbnN0IGxhdEFwaUtleSA9IGdsb2JhbFBhcmFtZXRlcnMuQ0VFX0RldmljZUxhdGl0dWRlICYmXHJcbiAgICAgICAgICAgIGdsb2JhbFBhcmFtZXRlcnMuQ0VFX0RldmljZUxhdGl0dWRlLmluY2x1ZGVzKCckJCcpID9cclxuICAgICAgICAgICAgZ2xvYmFsUGFyYW1ldGVycy5DRUVfRGV2aWNlTGF0aXR1ZGUuc3BsaXQoJyQkJylbMV0gOiBnbG9iYWxQYXJhbWV0ZXJzLkNFRV9EZXZpY2VMYXRpdHVkZTtcclxuICAgICAgICBjb25zdCBsb25nQXBpS2V5ID0gZ2xvYmFsUGFyYW1ldGVycy5DRUVfRGV2aWNlTG9uZ2l0dWRlICYmXHJcbiAgICAgICAgICAgIGdsb2JhbFBhcmFtZXRlcnMuQ0VFX0RldmljZUxvbmdpdHVkZS5pbmNsdWRlcygnJCQnKSA/XHJcbiAgICAgICAgICAgIGdsb2JhbFBhcmFtZXRlcnMuQ0VFX0RldmljZUxvbmdpdHVkZS5zcGxpdCgnJCQnKVsxXSA6IGdsb2JhbFBhcmFtZXRlcnMuQ0VFX0RldmljZUxvbmdpdHVkZTtcclxuICAgICAgICB0aGlzLnNhdmVEYXRhKGxhdEFwaUtleSwgJycsIGxhdGl0dWRlKTtcclxuICAgICAgICB0aGlzLnNhdmVEYXRhKGxvbmdBcGlLZXksICcnLCBsb25naXR1ZGUpO1xyXG4gICAgICAgIHRoaXMuZW1pdERhdGEobGF0QXBpS2V5LCBsYXRpdHVkZSk7XHJcbiAgICAgICAgdGhpcy5lbWl0RGF0YShsb25nQXBpS2V5LCBsb25naXR1ZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGVtaXREYXRhKHJlc3BvbnNlX2FwaV9rZXksIGRhdGEpIHtcclxuICAgICAgICBjb25zdCBvYmogPSB7fTtcclxuICAgICAgICBvYmpbcmVzcG9uc2VfYXBpX2tleV0gPSBkYXRhO1xyXG4gICAgICAgIGlmIChyZXNwb25zZV9hcGlfa2V5LmluY2x1ZGVzKCcjIycpKSB7XHJcbiAgICAgICAgICAgIG9ialsnaGFuZGxlcl9uYW1lJ10gPSByZXNwb25zZV9hcGlfa2V5LnNwbGl0KCcjIycpWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNoYXJlZEV2ZW50c1NlcnZpY2VzLmVtaXRBcGlTdWNjZXNzUmVzcG9uc2UuZW1pdChvYmopO1xyXG4gICAgfVxyXG5cclxuICAgIC8vc3BlY2lhbCBldmVudCBoYW5kbGVyIGZvciBjb250ZXh0IG1lbnVcclxuICAgIGNvbnRleHRNZW51KGhhbmRsZXI6IGFueSwgcHJpbWFyeURhdGE6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IGFkZGl0aW9uYWxQYXJhbXM6IGFueSA9IHRoaXMuZ2V0QWRkaXRpb25hbFBhcmFtZXRlcigpO1xyXG4gICAgICAgIGxldCBjb250ZXh0QXJyYXkgPSBbYWRkaXRpb25hbFBhcmFtc1snVGFyZ2V0RmllbGRzJ10uc3BsaXQoJ3wnKS5tYXAoc3RyID0+IHN0ci50cmltKCkpWzBdLCBwcmltYXJ5RGF0YS54LCBwcmltYXJ5RGF0YS55XTtcclxuICAgICAgICBpZiAoYWRkaXRpb25hbFBhcmFtc1snVGFyZ2V0RmllbGRzJ10pIHtcclxuICAgICAgICAgICAgdGhpcy5zaGFyZWRFdmVudHNTZXJ2aWNlcy5jb250ZXh0TWVudUVtaXR0ZXIuZW1pdChjb250ZXh0QXJyYXkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHRyYWN0RW1haWxJZHMoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLmV2ZW50QWRkaXRpb25hbFBhcmFtcyA9IHRoaXMuZ2V0QWRkaXRpb25hbFBhcmFtZXRlcigpO1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZUZpZWxkTmFtZSA9IHRoaXMuZXZlbnRBZGRpdGlvbmFsUGFyYW1zICYmIHRoaXMuZXZlbnRBZGRpdGlvbmFsUGFyYW1zWydDRUVfRVhUUkFDVF9FTUFJTF9TT1VSQ0VfRklFTEQnXSA/IHRoaXMuZXZlbnRBZGRpdGlvbmFsUGFyYW1zWydDRUVfRVhUUkFDVF9FTUFJTF9TT1VSQ0VfRklFTEQnXSA6ICcnXHJcbiAgICAgICAgY29uc3QgZXh0cmFjdEVtYWlsSWRzU3RvcmVLZXkgPSB0aGlzLmV2ZW50QWRkaXRpb25hbFBhcmFtcyAmJiB0aGlzLmV2ZW50QWRkaXRpb25hbFBhcmFtc1snQ0VFX0VYVFJBQ1RfRU1BSUxfU1RPUkVfRklFTEQnXSA/IHRoaXMuZXZlbnRBZGRpdGlvbmFsUGFyYW1zWydDRUVfRVhUUkFDVF9FTUFJTF9TVE9SRV9GSUVMRCddIDogJyc7XHJcblxyXG4gICAgICAgIGxldCBzb3VyY2VGaWVsZFZhbHVlO1xyXG5cclxuICAgICAgICBpZiAoc291cmNlRmllbGROYW1lKSB7XHJcbiAgICAgICAgICAgIHNvdXJjZUZpZWxkVmFsdWUgPSB0aGlzLmFwcERhdGFTZXJ2aWNlLmdldEZpZWxkRGF0YUJ5RmllbGRJZChzb3VyY2VGaWVsZE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZXh0cmFjdGVkRW1haWxJZHMgPSAnJztcclxuICAgICAgICBpZiAoc291cmNlRmllbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAvL3JlZ2V4IHRvIG1hdGNoIGVtYWlscyBpbnNpZGUgZGF0YS1pZCBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgY29uc3QgZGF0YUlkUmVnZXggPSAvZGF0YS1pZD1cIihbYS16QS1aMC05Ll8lKy1dK0BbYS16QS1aMC05Li1dK1xcLlthLXpBLVpdezIsNn0pXCIvZztcclxuICAgICAgICAgICAgbGV0IG1hdGNoQXJyYXk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRFbWFpbHMgPSBbXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENvbGxlY3QgYWxsIG1hdGNoZXNcclxuICAgICAgICAgICAgd2hpbGUgKChtYXRjaEFycmF5ID0gZGF0YUlkUmVnZXguZXhlYyhzb3VyY2VGaWVsZFZhbHVlKSkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoZWRFbWFpbHMucHVzaChtYXRjaEFycmF5WzFdKTsgLy8gR3JvdXAgMSBjb250YWlucyBqdXN0IHRoZSBlbWFpbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAobWF0Y2hlZEVtYWlscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVFbWFpbHMgPSBbLi4ubmV3IFNldChtYXRjaGVkRW1haWxzKV07XHJcbiAgICAgICAgICAgICAgICBleHRyYWN0ZWRFbWFpbElkcyA9IHVuaXF1ZUVtYWlscy5qb2luKFwiLFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGV4dHJhY3RFbWFpbElkc1N0b3JlS2V5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwRGF0YVNlcnZpY2UuZ2V0SW5kaXZpZHVhbEFwcERhdGEoZXh0cmFjdEVtYWlsSWRzU3RvcmVLZXkpLnBpcGUodGFrZSgxKSkuc3Vic2NyaWJlKGZpZWxkRGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmllbGREYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2hhbmdlVmFsdWUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZpZWxkRGF0YVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGV4dHJhY3RlZEVtYWlsSWRzXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwRGF0YVNlcnZpY2UudXBkYXRlQXBwRGF0YShjaGFuZ2VWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgY2xlYW5VcE1hdGVyaWFsRmllbGRzKGNvbWJpbmVkQ29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgLy8gUmVtb3ZlIGRhdGVwaWNrZXItcmVsYXRlZCBlbGVtZW50c1xyXG4gICAgY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW21hdC1kYXRlcGlja2VyLWlucHV0XSxtYXQtZGF0ZXBpY2tlci1pbnB1dCxzaGFkb3ctZGF0ZUlucHV0JykuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1JlbW92aW5nIGVsZW1lbnQ6JywgZWwpO1xyXG4gICAgICAgIGVsLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubWF0LW1kYy1mb3JtLWZpZWxkLWljb24tc3VmZml4JykuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1JlbW92aW5nIGVsZW1lbnQ6JywgZWwpO1xyXG4gICAgICAgIGVsLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dC5tYXQtZGF0ZXBpY2tlci1pbnB1dCcpLmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICAgIGlucHV0LnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdtYXQtaWNvblthcmlhLWxhYmVsPVwiY2xvc2UgZGF0ZSBwaWNrZXJcIl0nKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcclxuIFxyXG4gICAgLy8gUmVtb3ZlIGVycm9yIG1lc3NhZ2UgZWxlbWVudHNcclxuICAgIGNvbWJpbmVkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5lcnJvci1tZXNzYWdlLXZhbGlkYXRpb24nKS5mb3JFYWNoKGRpdiA9PiBkaXYucmVtb3ZlKCkpO1xyXG4gXHJcbiAgICAvLyBTZXQgYmFja2dyb3VuZCBjb2xvciBmb3IgdGV4dCBmaWVsZCB3cmFwcGVyc1xyXG4gICAgY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm1hdC1tZGMtdGV4dC1maWVsZC13cmFwcGVyJykuZm9yRWFjaCh3cmFwcGVyID0+IHtcclxuICAgICAgICAod3JhcHBlciBhcyBIVE1MRWxlbWVudCkuc3R5bGUuYmFja2dyb3VuZCA9ICd3aGl0ZSc7XHJcbiAgICB9KTtcclxufVxyXG4gLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHNob3cgdGhlIGxvYWRlclxyXG4gICAgc2hvd0xvYWRlcihtZXNzYWdlID0gJ1Byb2Nlc3NpbmcgeW91ciBkb3dubG9hZC4uLicpIHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGxvYWRlciBpZiBpdCBkb2Vzbid0IGV4aXN0XHJcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd25sb2FkLWxvYWRlcicpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2FkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGxvYWRlci5pZCA9ICdkb3dubG9hZC1sb2FkZXInO1xyXG4gICAgICAgICAgICAgICAgbG9hZGVyLmNsYXNzTmFtZSA9ICdsb2FkZXItb3ZlcmxheSc7XHJcbiAgICAgICAgICAgICAgICBsb2FkZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRlci1zcGlubmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNwaW5uZXJcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8cD4ke21lc3NhZ2V9PC9wPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsb2FkZXIpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgc3R5bGVzIGlmIG5lZWRlZFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgICAgICAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBgXHJcbiAgICAgICAgICAgICAgICAubG9hZGVyLW92ZXJsYXkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMDtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTk5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLmxvYWRlci1zcGlubmVyIHtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAuc3Bpbm5lciB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiA0cHggc29saWQgI2YzZjNmMztcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wOiA0cHggc29saWQgIzM0OThkYjtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDMwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAzMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiAycyBsaW5lYXIgaW5maW5pdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG8gMTBweDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7XHJcbiAgICAgICAgICAgICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgbWVzc2FnZSBpZiBsb2FkZXIgYWxyZWFkeSBleGlzdHNcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Rvd25sb2FkLWxvYWRlciAubG9hZGVyLXNwaW5uZXIgcCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNob3cgdGhlIGxvYWRlclxyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWQtbG9hZGVyJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgIH1cclxuXHJcbiAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gaGlkZSB0aGUgbG9hZGVyXHJcbiAgICBoaWRlTG9hZGVyKCkge1xyXG4gICAgICAgICAgICBjb25zdCBsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bmxvYWQtbG9hZGVyJyk7XHJcbiAgICAgICAgICAgIGlmIChsb2FkZXIpIHtcclxuICAgICAgICAgICAgICAgIGxvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBib2xkRm9ybWF0aW5nT25Tb21lRm9ybXMoY29tYmluZWRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICBjb25zdCBkb3ducGF5bWVudCA9IGNvbWJpbmVkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kb3ducGF5bWVudCcpO1xyXG4gICAgLy8gIGNvbnNvbGUubG9nKFwiZG93bnBheW1lbnRcIiwgZG93bnBheW1lbnQpO1xyXG4gICAgZG93bnBheW1lbnQuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGVsLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3RvdGFsJykpIHtcclxuICAgICAgICAgICAgZWwuc3R5bGUuY29sb3IgPSAnIzMzMyc7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmxldHRlclNwYWNpbmcgPSAnMSc7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICAgICAgICAgIC8vZWwuc3R5bGUubWFyZ2luID0gJzE2cHggMCc7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmZvbnRGYW1pbHkgPSAnUXVpY2tzYW5kJztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICAgIGNvbnN0IGZvcm1pbnZlc3RvcmxlbmRlcmRpID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1pbnZlc3RvcmxlbmRlcmRpJyk7XHJcbiAgICAvLyAgY29uc29sZS5sb2coXCJmb3JtaW52ZXN0b3JsZW5kZXJkaVwiLCBmb3JtaW52ZXN0b3JsZW5kZXJkaSk7XHJcbiAgICBmb3JtaW52ZXN0b3JsZW5kZXJkaS5mb3JFYWNoKChlbDogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAvLyBpZiAoZWwudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygndG90YWwnKSkge1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5jb2xvciA9ICcjMDAwJztcclxuICAgICAgICAgICAgZWwuc3R5bGUubGV0dGVyU3BhY2luZyA9ICcxJztcclxuICAgICAgICAgICAgZWwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgICAgICAgICAgLy9lbC5zdHlsZS5tYXJnaW4gPSAnMTZweCAwJztcclxuICAgICAgICAgICAgZWwuc3R5bGUuZm9udEZhbWlseSA9ICdRdWlja3NhbmQnO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgZG93bnBheW1lbnR2YWx1ZSA9IGNvbWJpbmVkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21wLTU1ODkwNS5kb3ducGF5bWVudCcpO1xyXG4gICAgLy8gY29uc29sZS5sb2coXCJkb3ducGF5bWVudFwiLCBkb3ducGF5bWVudHZhbHVlKTtcclxuICAgIGRvd25wYXltZW50dmFsdWUuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgLy8gaWYgKGVsLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3RvdGFsJykpIHtcclxuICAgICAgICBlbC5zdHlsZS5jb2xvciA9ICcjMzMzJztcclxuICAgICAgICBlbC5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gJzEnO1xyXG4gICAgICAgIGVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICAgICAgLy9lbC5zdHlsZS5tYXJnaW4gPSAnMTZweCAwJztcclxuICAgICAgICBlbC5zdHlsZS5mb250RmFtaWx5ID0gJ1F1aWNrc2FuZCc7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfSk7XHJcbiAgICAvLyBjZi1sYWJlbC1ib3JkZXItdG9wIGNvbXAtMTI5Mzk4IGZlZXMgbmctc3Rhci1pbnNlcnRlZFxyXG4gICAgY29uc3QgdG90YWxGZWVzID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmNmLWxhYmVsLWJvcmRlci10b3AuY29tcC0xMjkzOTguZmVlcy5uZy1zdGFyLWluc2VydGVkJyk7XHJcbiAgICAvLyAgICBjb25zb2xlLmxvZyhcImRvd25wYXltZW50XCIsIGRvd25wYXltZW50dmFsdWUpO1xyXG4gICAgdG90YWxGZWVzLmZvckVhY2goKGVsOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIC8vIGlmIChlbC50ZXh0Q29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0b3RhbCcpKSB7XHJcbiAgICAgICAgZWwuc3R5bGUuY29sb3IgPSAnIzMzMyc7XHJcbiAgICAgICAgZWwuc3R5bGUubGV0dGVyU3BhY2luZyA9ICcxJztcclxuICAgICAgICBlbC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgIC8vZWwuc3R5bGUubWFyZ2luID0gJzE2cHggMCc7XHJcbiAgICAgICAgZWwuc3R5bGUuZm9udEZhbWlseSA9ICdRdWlja3NhbmQnO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH0pO1xyXG4gICAgLy8gY2xhc3M9XCJhbW9ydGl6YXRpb25zY2hlZHVsZSBjZi1ib3JkZXItdG9wIGNvbXAtNTM3OTQ2IG5nLXN0YXItaW5zZXJ0ZWRcIlxyXG4gICAgY29uc3QgYW1vcnRpemF0aW9uc2NoZWR1bGUgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuY2YtYm9yZGVyLXRvcCwuY29tcC0xNTE4NTExMjA3NTk1Njkubmctc3Rhci1pbnNlcnRlZCwuY29tcC0yMzg2OTguZmluZGVyc2ZlZWRpc2Nsb3N1cmUsLmNvbXAtODc2MzIwLmZpbmRlcnNmZWVkaXNjbG9zdXJlLC5jb21wLTA1NDU0Mi5maW5kZXJzZmVlZGlzY2xvc3VyZSwuY29tcC0wNzc2NTguZmluZGVyc2ZlZWRpc2Nsb3N1cmUsLmNvbXAtODUyNDE0LmZpbmRlcnNmZWVkaXNjbG9zdXJlLC5jb21wLTAyOTIyMi5maW5kZXJzZmVlZGlzY2xvc3VyZSwuY29tcC00MDE5NDEuZmluZGVyc2ZlZWRpc2Nsb3N1cmUsLmNvbXAtNzM1NTc1LnRoZW1vcnRnYWdvcnNhY2tub3dsJyk7XHJcbiAgICAvLyAgICBjb25zb2xlLmxvZyhcImRvd25wYXltZW50XCIsIGRvd25wYXltZW50dmFsdWUpO1xyXG4gICAgYW1vcnRpemF0aW9uc2NoZWR1bGUuZm9yRWFjaCgoZWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgLy8gaWYgKGVsLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3RvdGFsJykpIHtcclxuICAgICAgICBlbC5zdHlsZS5jb2xvciA9ICcjMzMzJztcclxuICAgICAgICBlbC5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gJzEnO1xyXG4gICAgICAgIGVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICAgICAgLy9lbC5zdHlsZS5tYXJnaW4gPSAnMTZweCAwJztcclxuICAgICAgICBlbC5zdHlsZS5mb250RmFtaWx5ID0gJ1F1aWNrc2FuZCc7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdGFibGVIZWFkZXJzRWxlbWVudHMoY29tYmluZWRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KSB7XHJcbiAgICAvLyBjb25zdCB0YWJsZUhlYWRlcnMgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCd0aC5tYXQtbWRjLWhlYWRlci1jZWxsLm1hdC1zb3J0LWhlYWRlcicpO1xyXG4gICAgLy8gLy8gY29uc3QgdGFibGVIZWFkZXJzID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnbWF0LW1kYy10YWJsZSB0aGVhZCB0ciB0aCcpO1xyXG4gICAgLy8gLy8gY29uc29sZS5sb2coXCJ0YWJsZUhlYWRlcnMtLVwiLHRhYmxlSGVhZGVycyk7XHJcbiAgICAvLyB0YWJsZUhlYWRlcnMuZm9yRWFjaCgoaGVhZGVyOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgLy8gICAgIC8vIFNldCBiYWNrZ3JvdW5kIGNvbG9yIGFuZCB0ZXh0IGNvbG9yXHJcbiAgICAvLyAgICAgaGVhZGVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjNjU2NzcyJztcclxuICAgIC8vICAgICBoZWFkZXIuc3R5bGUuY29sb3IgPSAnI2ZmZmZmZic7IC8vIFdoaXRlIHRleHRcclxuXHJcblxyXG4gICAgLy8gICAgIC8vIENhbGN1bGF0ZSBhbmQgc2V0IGR5bmFtaWMgZm9udCBzaXplIGJhc2VkIG9uIGNvbnRlbnQgbGVuZ3RoXHJcbiAgICAvLyAgICAgY29uc3QgY29udGVudCA9IGhlYWRlci50ZXh0Q29udGVudCB8fCAnJztcclxuICAgIC8vICAgICBjb25zdCBjb250ZW50TGVuZ3RoID0gY29udGVudC50cmltKCkubGVuZ3RoO1xyXG5cclxuICAgIC8vICAgICAvLyBEeW5hbWljIGZvbnQgc2l6ZSBjYWxjdWxhdGlvbiAtIHNtYWxsZXIgZm9udCBmb3IgbG9uZ2VyIHRleHRcclxuICAgIC8vICAgICBsZXQgZm9udFNpemUgPSAnMTRweCc7IC8vIERlZmF1bHQgc2l6ZVxyXG4gICAgLy8gICAgIGlmIChjb250ZW50TGVuZ3RoID4gMjApIHtcclxuICAgIC8vICAgICAgICAgZm9udFNpemUgPSAnMTJweCc7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIGlmIChjb250ZW50TGVuZ3RoID4gMzApIHtcclxuICAgIC8vICAgICAgICAgZm9udFNpemUgPSAnMTFweCc7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIGlmIChjb250ZW50TGVuZ3RoID4gNDApIHtcclxuICAgIC8vICAgICAgICAgZm9udFNpemUgPSAnMTBweCc7XHJcbiAgICAvLyAgICAgfVxyXG5cclxuICAgIC8vICAgICAvLyBoZWFkZXIuc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZTtcclxuICAgIC8vICAgICAvLyBoZWFkZXIuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcclxuICAgIC8vICAgICAvLyBoZWFkZXIuc3R5bGUucGFkZGluZyA9ICc4cHggNHB4JzsgLy8gQWRkIGFkZXF1YXRlIHBhZGRpbmdcclxuICAgIC8vICAgICAvLyBoZWFkZXIuc3R5bGUud2hpdGVTcGFjZSA9ICdub3JtYWwnOyAvLyBBbGxvdyB0ZXh0IHdyYXBwaW5nXHJcbiAgICAvLyAgICAgLy8gaGVhZGVyLnN0eWxlLndvcmRCcmVhayA9ICdicmVhay13b3JkJzsgLy8gQnJlYWsgbG9uZyB3b3JkcyBpZiBuZWVkZWRcclxuICAgIC8vICAgICAvLyBoZWFkZXIuc3R5bGUubGluZUhlaWdodCA9ICcxLjInOyAvLyBUaWdodGVyIGxpbmUgaGVpZ2h0IGZvciB3cmFwcGVkIHRleHRcclxuICAgIC8vICAgICAvLyBoZWFkZXIuc3R5bGUubWF4SGVpZ2h0ID0gJ25vbmUnOyAvLyBSZW1vdmUgYW55IGhlaWdodCByZXN0cmljdGlvbnNcclxuICAgIC8vICAgICAvLyBoZWFkZXIuc3R5bGUub3ZlcmZsb3cgPSAndmlzaWJsZSc7IC8vIEVuc3VyZSB0ZXh0IGlzIG5vdCBjdXQgb2ZmXHJcbiAgICAvLyAgICAgLy8g4pyFIE5ldzogQ2VudGVyLWFsaWduIHRleHQgaG9yaXpvbnRhbGx5IGFuZCB2ZXJ0aWNhbGx5XHJcbiAgICAvLyAgICAgaGVhZGVyLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInOyAvLyBIb3Jpem9udGFsIGNlbnRlclxyXG4gICAgLy8gICAgIGhlYWRlci5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7IC8vIFZlcnRpY2FsIGNlbnRlclxyXG4gICAgLy8gICAgIGNvbnN0IGlubmVyVGV4dERpdiA9IGhlYWRlci5xdWVyeVNlbGVjdG9yKCcud2lkdGhfY2xlYXInKTtcclxuICAgIC8vICAgICBpZiAoaW5uZXJUZXh0RGl2KSB7XHJcbiAgICAvLyAgICAgICAgIGNvbnN0IGlubmVyRWxlbSA9IGlubmVyVGV4dERpdiBhcyBIVE1MRWxlbWVudDtcclxuICAgIC8vICAgICAgICAgLy8gaW5uZXJFbGVtLnN0eWxlLmZvbnRGYW1pbHkgPSAnQXJpYWwsIHNhbnMtc2VyaWYnOyAgLy8gT3IgeW91ciBwcmVmZXJyZWQgZm9udFxyXG4gICAgLy8gICAgICAgICBpbm5lckVsZW0uc3R5bGUuZm9udFNpemUgPSAnMTJweCc7IC8vZm9udFNpemU7XHJcbiAgICAvLyAgICAgICAgIGlubmVyRWxlbS5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgLy8gICAgICAgICBpbm5lckVsZW0uc3R5bGUuY29sb3IgPSAnI2ZmZmZmZic7XHJcbiAgICAvLyAgICAgICAgIGlubmVyRWxlbS5zdHlsZS50ZXh0QWxpZ24gPSAnbGVmdCc7XHJcbiAgICAvLyAgICAgICAgIGlubmVyRWxlbS5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XHJcbiAgICAvLyAgICAgICAgIC8vIGlubmVyRWxlbS5zdHlsZS53aGl0ZVNwYWNlID0gJ25vcm1hbCc7XHJcbiAgICAvLyAgICAgICAgIC8vIGlubmVyRWxlbS5zdHlsZS5vdmVyZmxvdyA9ICd2aXNpYmxlJztcclxuICAgIC8vICAgICAgICAgaW5uZXJFbGVtLnN0eWxlLndoaXRlU3BhY2UgPSAnbm93cmFwJzsgLy8gUHJldmVudCBuZXcgbGluZXNcclxuICAgIC8vICAgICAgICAgaW5uZXJFbGVtLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICAvLyAgICAgICAgIGlubmVyRWxlbS5zdHlsZS50ZXh0T3ZlcmZsb3cgPSAnZWxsaXBzaXMnOyAvLyBBZGQgZWxsaXBzaXMgaWYgdGV4dCBvdmVyZmxvd3NcclxuICAgICAgIFxyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH0pO1xyXG5cclxuICAgIGNvbnN0IGhlYWRlcnMgPSBjb21iaW5lZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCd0aC5tYXQtbWRjLWhlYWRlci1jZWxsLm1hdC1zb3J0LWhlYWRlcicpO1xyXG5cclxuaGVhZGVycy5mb3JFYWNoKChoZWFkZXI6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICBoZWFkZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM2NTY3NzInO1xyXG4gICAgaGVhZGVyLnN0eWxlLmNvbG9yID0gJyNmZmZmZmYnO1xyXG4gICAgaGVhZGVyLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgaGVhZGVyLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcclxuICAgIGhlYWRlci5zdHlsZS5mb250U2l6ZSA9ICcxM3B4JztcclxuICAgIGhlYWRlci5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgaGVhZGVyLnN0eWxlLnBhZGRpbmcgPSAnOHB4IDRweCc7XHJcbiAgICBoZWFkZXIuc3R5bGUud2hpdGVTcGFjZSA9ICdub3dyYXAnOyAvLyBQcmV2ZW50IHdyYXBwaW5nXHJcbiAgICBoZWFkZXIuc3R5bGUub3ZlcmZsb3cgPSAndmlzaWJsZSc7ICAvLyBFbnN1cmUgZnVsbCB0ZXh0XHJcbiAgICAvLyBoZWFkZXIuc3R5bGUucG9zaXRpb24gPSAnc3RhdGljJzsgICAvLyBSZW1vdmUgc3RpY2t5IGlmIHByZXNlbnRcclxuICAgIC8vIE9wdGlvbmFsbHksIGRvbid0IHNldCBoZWlnaHQgdW5sZXNzIHlvdSBtdXN0OlxyXG4gICAgLy8gaGVhZGVyLnN0eWxlLmhlaWdodCA9ICcyOHB4JzsgLy8gT3Igd2hhdGV2ZXIgaXMgYXBwcm9wcmlhdGVcclxuICAgaGVhZGVyLnN0eWxlLnRhYmxlTGF5b3V0ID0gJ2F1dG8nO1xyXG5cclxuICAgIC8vIEFsc28gc3R5bGUgYW55IGRpcmVjdCBpbm5lciBjb250ZW50IGlmIG5lZWRlZFxyXG4gICAgY29uc3QgaW5uZXJEaXYgPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLndpZHRoX2NsZWFyJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBpZiAoaW5uZXJEaXYpIHtcclxuICAgICAgICBpbm5lckRpdi5zdHlsZS5mb250U2l6ZSA9ICcxMnB4JztcclxuICAgICAgICBpbm5lckRpdi5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xyXG4gICAgICAgIGlubmVyRGl2LnN0eWxlLmNvbG9yID0gJyNmZmZmZmYnO1xyXG4gICAgICAgIGlubmVyRGl2LnN0eWxlLndoaXRlU3BhY2UgPSAnbm93cmFwJztcclxuICAgIH1cclxufSk7XHJcbiAgICAvLyBjZi1sYWJlbC1ib2xkIGNvbXAtMTc3MTY0IGxpYWJpbGl0aWVzY29tYmluZWQgbmctc3Rhci1pbnNlcnRlZFxyXG4gICAgY29uc3QgaW5uZXJUZXh0RGl2ID0gY29tYmluZWRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmxpYWJpbGl0aWVzY29tYmluZWQubmctc3Rhci1pbnNlcnRlZCcpO1xyXG4gICAgaW5uZXJUZXh0RGl2LmZvckVhY2goKGlubmVyRWxlbTogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAvLyBjb25zdCBpbm5lckVsZW0gPSBpbm5lclRleHREaXYgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgLy8gaW5uZXJFbGVtLnN0eWxlLmZvbnRGYW1pbHkgPSAnQXJpYWwsIHNhbnMtc2VyaWYnOyAgLy8gT3IgeW91ciBwcmVmZXJyZWQgZm9udFxyXG4gICAgICAgIGlubmVyRWxlbS5zdHlsZS5mb250U2l6ZSA9ICcxNHB4JzsgLy8gZm9udFNpemU7XHJcbiAgICAgICAgLy8gaW5uZXJFbGVtLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XHJcbiAgICAgICAgLy8gaW5uZXJFbGVtLnN0eWxlLmNvbG9yID0gJyNmZmZmZmYnO1xyXG4gICAgICAgIC8vIGlubmVyRWxlbS5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAvLyBpbm5lckVsZW0uc3R5bGUucGFkZGluZyA9ICc0cHggNHB4JzsgLy8gQWRkIGFkZXF1YXRlIHBhZGRpbmdcclxuICAgICAgICAvLyBpbm5lckVsZW0uc3R5bGUud2hpdGVTcGFjZSA9ICdub3JtYWwnOyAvLyBBbGxvdyB0ZXh0IHdyYXBwaW5nXHJcbiAgICAgICAgaW5uZXJFbGVtLnN0eWxlLndvcmRCcmVhayA9ICdicmVhay13b3JkJzsgLy8gQnJlYWsgbG9uZyB3b3JkcyBpZiBuZWVkZWRcclxuICAgICAgICBpbm5lckVsZW0uc3R5bGUubGluZUhlaWdodCA9ICcxLjInOyAvLyBUaWdodGVyIGxpbmUgaGVpZ2h0IGZvciB3cmFwcGVkIHRleHRcclxuICAgICAgICAvLyBpbm5lckVsZW0uc3R5bGUubWF4SGVpZ2h0ID0gJ25vbmUnOyAvLyBSZW1vdmUgYW55IGhlaWdodCByZXN0cmljdGlvbnNcclxuICAgICAgICBpbm5lckVsZW0uc3R5bGUub3ZlcmZsb3cgPSAndmlzaWJsZSc7XHJcblxyXG4gICAgfSk7XHJcbn1cclxuLy8gZnVuY3Rpb24gcmVwYXRhYmxlV29ya2Zsb3dNYXN0ZXJEYXRhKHJlcGF0YWJsZVdvcmtmbG93TWFzdGVyRGF0YTogYW55KTogc3RyaW5nIHtcclxuLy8gICAgIHRocm93IG5ldyBFcnJvcignRnVuY3Rpb24gbm90IGltcGxlbWVudGVkLicpO1xyXG4vLyB9XHJcblxyXG4iXX0=