{"version":3,"file":"ng-cee-core-cee-profile-image.component-RXkFPn1m.mjs","sources":["../../../../../Angular-17/ESF-Angular-WFE-Library/projects/ng-cee-core/src/lib/field-components/cee-profile-image/cee-profile-image.component.html","../../../../../Angular-17/ESF-Angular-WFE-Library/projects/ng-cee-core/src/lib/field-components/cee-profile-image/cee-profile-image.component.ts"],"sourcesContent":["<div class=\"field-wrapper\" id=\"{{fieldData.unique_id}}\" *ngIf=\"isVisible\" style=\"margin-bottom: 20px;\">\r\n    <div>\r\n        <div class=\"form-label\">\r\n            <ng-container *ngIf=\"fieldData.field_label!=''\">\r\n                <label class=\"col-form-label\" *ngIf=\"!isHTML(fieldData.field_label)\">{{fieldData.field_label}}</label>\r\n                <label class=\"col-form-label\" *ngIf=\"isHTML(fieldData.field_label)\"\r\n                    [innerHTML]=\"fieldData.field_label\"></label>\r\n            </ng-container>\r\n            <span *ngIf=\"isMandatory\" class=\"mandetory-mark\"> *</span>\r\n            <button *ngIf=\"hasTooltip\" type=\"button\" class=\"btn-tooltip\" [tooltip]=\"fieldData.tooltip\" [attr.aria-label]=\"'Tooltip: ' + fieldData.tooltip \">i</button>\r\n        </div>\r\n        <div class=\"image-upload {{isCustomClass && custom_class_name ? custom_class_name[0] : ''}} {{ !valid && isMandatory  ? 'invalid' : 'valid' }}\" [ngStyle]=\"{'background-image': 'url(' + imageName + ')'}\">\r\n            <label for=\"file-input\">\r\n                <img *ngIf=\"isEditable\" src=\"./assets/images/icon_expand.png\"/>\r\n            </label>\r\n            <input #fileInput (click)=\"fileInput.value = ''\" id=\"file-input\" type=\"file\" (change)=\"fileChangeEvent($event)\" accept=\"image/*,.heic\" />\r\n        </div>\r\n        <ng-container *ngFor=\"let message of messages\">\r\n            <div class=\"error-message-wrapper\" *ngIf=\"showErrorOnNext\">\r\n                <p *ngIf=\"isMandatory && message.type == 'Mandatory' && !fieldValue\" [ngStyle]=\"{'color': returnMessageData(message.code).color}\">\r\n                    {{returnMessageData(message.code).message_text}}</p>\r\n            </div>\r\n            <div class=\"error-message-wrapper\" *ngIf=\"errorType\">\r\n                <p *ngIf=\"message.type == errorType\" [ngStyle]=\"{'color': returnMessageData(message.code).color}\">\r\n                    {{returnMessageData(message.code).message_text}}</p>\r\n            </div>\r\n        </ng-container>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, Input, OnDestroy, HostListener, SimpleChanges, OnChanges, ViewChild, ElementRef, CUSTOM_ELEMENTS_SCHEMA, NO_ERRORS_SCHEMA, forwardRef } from '@angular/core';\r\nimport { BaseView } from '../cee-base-class';\r\nimport { Router } from '@angular/router';\r\nimport { UserDataHandlerService } from '../../services/user-data-handler.service';\r\nimport { WfeStepLoaderService } from '../../services/wfe-step-loader.service';\r\nimport { SharedEventsServiceService } from '../../services/shared-events-service.service';\r\nimport { ApiDataService } from '../../models/api-data/api-data.service';\r\nimport { AppDataService } from '../../models/app-data/app-data.service';\r\nimport { CeeApiService } from '../../services/cee-api-service.service';\r\nimport { FileUploadService } from '../../services/file-upload-service.service';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { CEEInternalEmitterService } from '../../services/internal-cee-emitter-service.service';\r\nimport { Observable, Subject, Subscription } from 'rxjs';\r\nimport {WebcamImage, WebcamInitError, WebcamModule, WebcamUtil} from 'ngx-webcam';\r\nimport {NgxBarcodeScannerModule, NgxBarcodeScannerService} from \"@eisberg-labs/ngx-barcode-scanner\";\r\nimport { CommonModule, JsonPipe } from '@angular/common';\r\nimport { Dimensions, ImageCroppedEvent, ImageCropperComponent, ImageTransform, LoadedImage } from 'ngx-image-cropper';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { ImageCropModalComponent } from './image-crop-modal.component';\r\nimport { CeeAttachmentsComponent } from \"../cee-attachments/cee-attachments.component\";\r\nimport { DOC_ORIENTATION, NgxImageCompressService } from 'ngx-image-compress';\r\nimport heic2any from \"heic2any\";\r\nexport interface IFileData {\r\n  id: string;\r\n  type: string;\r\n  size: number;\r\n}\r\n\r\nexport interface IFilePayload {\r\n  type: string;\r\n  fileData: any;\r\n}\r\n\r\nexport interface IFile {\r\n  uploaded: boolean;\r\n  progress?: number;\r\n  uId: string;\r\n  attachmentId: string;\r\n  attachmentPath: string;\r\n  url: string;\r\n  file: File;\r\n  custom: Array<any>;\r\n}\r\n\r\nexport interface ICompressImage {\r\n    orientation: DOC_ORIENTATION,\r\n    ratio?: number,\r\n    quality?: number,\r\n    maxWidth?: number,\r\n    maxHeight?: number\r\n}\r\n\r\n@Component({\r\n    selector: 'app-cee-profile-image',\r\n    templateUrl: './cee-profile-image.component.html',\r\n    styleUrls: ['./cee-profile-image.component.scss', '../field-common.scss'],\r\n    imports: [ WebcamModule, JsonPipe, NgxBarcodeScannerModule, CommonModule, ImageCropperComponent, forwardRef(() => CeeAttachmentsComponent), forwardRef(() => ImageCropModalComponent)],\r\n    standalone: true,\r\n    schemas:[CUSTOM_ELEMENTS_SCHEMA, NO_ERRORS_SCHEMA]\r\n\r\n})\r\nexport class CeeProfileImageComponent extends BaseView implements OnInit, OnDestroy, OnChanges {\r\n\r\n    @Input() declare stepId: any;\r\n    @Input() declare fieldData: any;\r\n    @Input() keepState = false;\r\n    @Input() rowData: any;\r\n    @Input() declare rootData: any;\r\n\r\n    imageName: any = \"/assets/images/avatar.png\";\r\n    \r\n    errors: WebcamInitError[] = [];\r\n    AdditionalParameter: any = {};\r\n    isError = false;\r\n    files: Array<IFile> = [];\r\n\r\n    maintainAspectRatio: any = false;\r\n    cropperStaticWidth: any = 170;\r\n    cropperStaticHeight: any = 170;\r\n    cropperMinWidth: any = 170;\r\n    cropperMinHeight: any = 170;\r\n    onlyScaleDown: any = true;\r\n    roundCropper: any = true;\r\n\r\n    imageChangedEvent: any = '';\r\n    croppedImage: any = '';\r\n    canvasRotation = 0;\r\n    rotation?: number;\r\n    translateH = 0;\r\n    translateV = 0;\r\n    scale = 1;\r\n    aspectRatio = 1/1;\r\n    showCropper = false;\r\n    containWithinAspectRatio = false;\r\n    transform: ImageTransform = {\r\n      translateUnit: 'px'\r\n    };\r\n    imageURL?: string;\r\n    loading = false;\r\n    allowMoveImage = true;\r\n    hidden = false;\r\n    isPicChangeBtnClickd = false;\r\n    custom_class_name: string[];\r\n    errorType = '';\r\n    fileUploads: any = {};\r\n    preDefineMimeType: any = {\r\n      csv: 'text/csv',\r\n      heic: 'image/heic',\r\n      heif: 'image/heif',\r\n  };\r\n  preDefineMimeTypeCheck: any = {\r\n      csv: ['', 'application/vnd.ms-excel'],\r\n      heic: ['', 'image/heic'],\r\n      heif: ['', 'image/heif'],\r\n  };\r\n  html_id = '';\r\n    constructor(\r\n        public userDataHandlerService: UserDataHandlerService,\r\n        public sharedEventsService: SharedEventsServiceService,\r\n        public internalCEEEmitter: CEEInternalEmitterService,\r\n        public appDataService: AppDataService,\r\n        public apiDataService: ApiDataService,\r\n        public wfeStepLoaderService: WfeStepLoaderService,\r\n        public dialog: MatDialog,\r\n        public snackBar: MatSnackBar,\r\n        public http: HttpClient,\r\n        public ceeApiService: CeeApiService,\r\n        public router: Router,\r\n        public fileUploadService: FileUploadService,\r\n        public service: NgxBarcodeScannerService,\r\n        private sanitizer: DomSanitizer,\r\n        private imageCompress: NgxImageCompressService\r\n    ) {\r\n      super(userDataHandlerService, sharedEventsService, internalCEEEmitter, appDataService, apiDataService, wfeStepLoaderService, dialog, snackBar, http, ceeApiService, router, fileUploadService);``\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.init(this.stepId, this.fieldData, this.keepState, this.rowData);\r\n    }\r\n\r\n    //@HostListener('window:beforeunload')\r\n    onDestroy() {\r\n        this.onViewUnload();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.onViewUnload();\r\n    }\r\n\r\n    onViewDataInit(): void {\r\n      this.html_id = this.fieldData.html_id;\r\n      if(this.fieldData.additional_parameters && this.fieldData.additional_parameters.length > 0) {\r\n        for (const param of this.fieldData.additional_parameters) {\r\n            this.AdditionalParameter[param.parameter_type] = param.value;\r\n        }\r\n      }\r\n      this.custom_class_name = this.fieldData.field_style && this.fieldData.field_style.custom_class_name ? this.fieldData.field_style.custom_class_name.split('|') : []\r\n      // console.log(\"rowData: \", this.rowData, \" fieldData: \", this.fieldData, \" rootData: \", this.rootData,)\r\n      let ppData = this.appDataService.getFieldDataByFieldId(this.fieldData.unique_id);\r\n      if(ppData) {\r\n        this.fieldValue = this.imageName = ppData;\r\n      } else if (this.fieldData.hasOwnProperty('response_api_key')) {\r\n        let val;\r\n        for (const key of this.fieldData.response_api_key.split('||')) {\r\n          val = this.returnValueFromCallback(key);\r\n          // console.log(key, \" :=: \", val);\r\n        }\r\n        if (val) {\r\n          this.fieldValue = this.imageName = val;\r\n          this.updateFieldData(this.fieldValue);\r\n        }\r\n      }\r\n      if(!this.fieldValue && this.isMandatory && this.isPicChangeBtnClickd) {\r\n        this.valid = false\r\n      } else {\r\n        this.valid = true\r\n      }\r\n      this.updateFieldData(this.fieldValue, this.valid);\r\n\r\n      this.variableObject['emitForEmptySession_' + this.fieldData.unique_id] = this.sharedEventsService.emitForEmptySession.subscribe(res => {\r\n        // console.log(\"res: \",res['unique_ids'],\" => \",this.fieldData.unique_id)\r\n        if (res && res['unique_ids'] && res['unique_ids'].includes(this.fieldData.unique_id)) {\r\n            this.fieldValue = \"\";\r\n            this.imageName = \"/assets/images/avatar.png\";\r\n        }\r\n      });\r\n      for (const [i, possibleValue] of this.fieldData.possible_values.entries()) {\r\n        const values = possibleValue.split('|');\r\n        if (values.length == 2) {\r\n            const obj: IFileData = {\r\n                id: `${this.fieldData.html_id}-${i}`,\r\n                type: values[0],\r\n                size: Number(values[1])\r\n            };\r\n            this.fileUploads = { ...this.fileUploads, ...{ [obj.type]: obj } };\r\n        } else {\r\n            console.error(`Something is wrong in the configuration for ${possibleValue}`);\r\n        }\r\n    }\r\n    }\r\n\r\n    onSessionDataUpdated(event): void {\r\n        // on click on switch\r\n        // setting the value of the switch and passing it as payload so that\r\n        // it can be set and emitted from the event list\r\n        // this.onComponentEvent('OnClick', {}, true, { uniqueId: this.fieldData.unique_id, value: event ? this.value2 : this.value1 });\r\n    }\r\n\r\n    onAPICallback(data: any): void {\r\n        if (!this.rowData) {\r\n          const resData = this.setApiCallBackDataUtil.setApiCallBackData(this.fieldData, data);\r\n          let ppData = this.appDataService.getFieldDataByFieldId(this.fieldData.unique_id);\r\n          if(ppData) {\r\n            this.fieldValue = this.imageName = ppData;\r\n          } else if (resData !== null && resData !== undefined && resData !== '') {\r\n            this.fieldValue = this.imageName = resData;\r\n            this.updateFieldData(this.fieldValue);\r\n          }\r\n      }\r\n    }\r\n\r\n    onSetSessionData(apiKey: string, value: any): void {\r\n        super.onSetSessionData(apiKey, value);\r\n        this.setModalorSanckBarMessage(this.fieldData.unique_id, value);\r\n    }\r\n\r\n    onEmptySession(data: any) {\r\n        // throw new Error('Method not implemented.');\r\n    }\r\n    handleCustomFunction(get_data: any) {\r\n        // throw new Error('Method not implemented.');\r\n    }\r\n\r\n    setFieldValueOnSetValuesEvent(data: object) {\r\n\r\n    }\r\n\r\n    setFieldStateOnStateChangeEvent(data: object) {\r\n\r\n    }\r\n\r\n    toggleLanguage(data: object) {\r\n \r\n    }\r\n\r\n    updateStateHistory(data: any): void {\r\n        // throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n      // if (changes.fieldData && changes.rootData && changes.rootData.currentValue.langChanged) {\r\n      //     this.toggleLanguage(changes.fieldData.currentValue);\r\n      // }\r\n\r\n      if (changes.editableCondition) {\r\n          this.setConditions(changes.editableCondition.currentValue, 'isEditable');\r\n      }\r\n      if (changes.visibleCondition) {\r\n          this.setConditions(changes.visibleCondition.currentValue, 'isVisible');\r\n      }\r\n      if (changes.mandatoryCondition) {\r\n          this.setConditions(changes.mandatoryCondition.currentValue, 'isMandatory');\r\n      }\r\n    }\r\n\r\n    concatData() { }\r\n\r\n    onError(error :any) {\r\n      this.isError = true;\r\n    }\r\n\r\n    // ############################################\r\n\r\n    // fileChangeEvent(event: any): void {\r\n    //   this.isPicChangeBtnClickd = true;\r\n    //   this.loading = true;\r\n    //   this.imageChangedEvent = event;\r\n    //   this.openDialog(event)\r\n    // }\r\n\r\n    convertReadableCSVFile(file: any) {\r\n      const ext = file.name?.split('.').pop();\r\n      if (file && file.size > 0 && this.preDefineMimeType[ext] && this.preDefineMimeTypeCheck[ext].includes(file.type)) {\r\n          file = new File([file], file.name, { type: this.preDefineMimeType[ext] });\r\n      }\r\n      return file;\r\n  }\r\n\r\n    fileChangeEvent(event: any): void {\r\n      this.errorType = '';\r\n      const file = event.target.files[0];\r\n      const fileObj = this.convertReadableCSVFile(file);\r\n      const fileData = this.fileUploads[fileObj.type];\r\n      const fileName = file['name'];\r\n      // ✅ Allow only filenames with exactly one dot (e.g., abc.pdf)\r\n      const dotCount = (fileName.match(/\\./g) || []).length;\r\n      if (dotCount !== 1) {\r\n        this.setModalorSanckBarMessage(this.html_id, this.files, 'invalid_file_extension');\r\n        this.errorType = 'invalid_file_extension';\r\n        event.target.value = ''; // Clear the input value\r\n        return;\r\n      }\r\n      // 2. ✅ Block dangerous extensions\r\n       const disallowedExtensions = ['exe', 'js', 'html', 'htm', 'svg', 'php', 'aspx', 'jsp', 'bat', 'sh'];\r\n       const fileExtension = fileName.split('.').pop();\r\n       if (disallowedExtensions.includes(fileExtension)) {\r\n       this.setModalorSanckBarMessage(this.html_id, this.files, 'invalid_file_extension');\r\n       this.errorType = 'invalid_file_extension';\r\n       event.target.value = '';\r\n       return;\r\n       }\r\n      if (!fileData) {\r\n          this.setModalorSanckBarMessage(this.html_id, this.files, 'file_type');\r\n          this.errorType = 'file_type';\r\n          return;\r\n      }\r\n      if((fileData.type.toLowerCase() == fileObj.type.toLowerCase()) && fileObj.size > (fileData.size * 1024)){\r\n        this.setModalorSanckBarMessage(this.html_id, this.files, 'individual_file_size');\r\n        this.errorType = 'individual_file_size';\r\n        return;\r\n      }\r\n      this.isPicChangeBtnClickd = true;\r\n      this.loading = true;    \r\n      if (file && file.name.toLowerCase().endsWith(\".heic\")) {\r\n        heic2any({\r\n          blob: file,\r\n          toType: \"image/png\",\r\n        })\r\n        .then((convertedBlob: Blob) => {\r\n          const pngFile = new File([convertedBlob], file.name.replace(/\\.heic$/i, \".png\"), {\r\n            type: \"image/png\",\r\n            lastModified: new Date().getTime()\r\n          });\r\n    \r\n          // Create new event with converted file\r\n          const dataTransfer = new DataTransfer();\r\n          dataTransfer.items.add(pngFile);\r\n          const newEvent = { ...event, target: { ...event.target, files: dataTransfer.files } };\r\n    \r\n          this.imageChangedEvent = newEvent;\r\n          this.openDialog(newEvent);\r\n        })\r\n        .catch((e: any) => {\r\n          console.error(\"Error converting HEIC to PNG\", e);\r\n          this.loading = false;\r\n        });\r\n      } else {\r\n        this.imageChangedEvent = event;\r\n        this.openDialog(event);\r\n      }\r\n    }\r\n  \r\n    imageCropped(event: ImageCroppedEvent) {\r\n      this.croppedImage = this.sanitizer.bypassSecurityTrustUrl(event.objectUrl || event.base64 || '');\r\n      // console.log(event);\r\n    }\r\n  \r\n    imageLoaded() {\r\n      this.showCropper = true;\r\n      // console.log('Image loaded');\r\n    }\r\n  \r\n    cropperReady(sourceImageDimensions: Dimensions) {\r\n      // console.log('Cropper ready', sourceImageDimensions);\r\n      this.loading = false;\r\n    }\r\n  \r\n    loadImageFailed() {\r\n      console.error('Load image failed');\r\n    }\r\n  \r\n    rotateLeft() {\r\n      this.loading = true;\r\n      setTimeout(() => { // Use timeout because rotating image is a heavy operation and will block the ui thread\r\n        this.canvasRotation--;\r\n        this.flipAfterRotate();\r\n      });\r\n    }\r\n  \r\n    rotateRight() {\r\n      this.loading = true;\r\n      setTimeout(() => {\r\n        this.canvasRotation++;\r\n        this.flipAfterRotate();\r\n      });\r\n    }\r\n  \r\n    moveLeft() {\r\n      this.transform = {\r\n        ...this.transform,\r\n        translateH: ++this.translateH\r\n      };\r\n    }\r\n  \r\n    moveRight() {\r\n      this.transform = {\r\n        ...this.transform,\r\n        translateH: --this.translateH\r\n      };\r\n    }\r\n  \r\n    moveTop() {\r\n      this.transform = {\r\n        ...this.transform,\r\n        translateV: ++this.translateV\r\n      };\r\n    }\r\n  \r\n    moveBottom() {\r\n      this.transform = {\r\n        ...this.transform,\r\n        translateV: --this.translateV\r\n      };\r\n    }\r\n  \r\n    private flipAfterRotate() {\r\n      const flippedH = this.transform.flipH;\r\n      const flippedV = this.transform.flipV;\r\n      this.transform = {\r\n        ...this.transform,\r\n        flipH: flippedV,\r\n        flipV: flippedH\r\n      };\r\n      this.translateH = 0;\r\n      this.translateV = 0;\r\n    }\r\n  \r\n    flipHorizontal() {\r\n      this.transform = {\r\n        ...this.transform,\r\n        flipH: !this.transform.flipH\r\n      };\r\n    }\r\n  \r\n    flipVertical() {\r\n      this.transform = {\r\n        ...this.transform,\r\n        flipV: !this.transform.flipV\r\n      };\r\n    }\r\n  \r\n    resetImage() {\r\n      this.scale = 1;\r\n      this.rotation = 0;\r\n      this.canvasRotation = 0;\r\n      this.transform = {\r\n        translateUnit: 'px'\r\n      };\r\n    }\r\n  \r\n    zoomOut() {\r\n      this.scale -= .1;\r\n      this.transform = {\r\n        ...this.transform,\r\n        scale: this.scale\r\n      };\r\n    }\r\n  \r\n    zoomIn() {\r\n      this.scale += .1;\r\n      this.transform = {\r\n        ...this.transform,\r\n        scale: this.scale\r\n      };\r\n    }\r\n  \r\n    toggleContainWithinAspectRatio() {\r\n      this.containWithinAspectRatio = !this.containWithinAspectRatio;\r\n    }\r\n  \r\n    updateRotation() {\r\n      this.transform = {\r\n        ...this.transform,\r\n        rotate: this.rotation\r\n      };\r\n    }\r\n  \r\n    toggleAspectRatio() {\r\n      this.aspectRatio = this.aspectRatio === 4 / 3 ? 16 / 5 : 4 / 3;\r\n    }\r\n\r\n    openDialog(data: any): void {\r\n      const dialogRef = this.dialog.open(ImageCropModalComponent, {\r\n          data: {\r\n              message: data,\r\n              additionalParameter: this.AdditionalParameter\r\n          }\r\n      });\r\n\r\n      dialogRef.afterClosed().subscribe(result => {\r\n        // console.log('The dialog was closed');\r\n        if (result !== undefined) {\r\n          // this.animal.set(result);\r\n          // console.log('result: ',result);\r\n          // If uploaded file size is smaller then skip compression \r\n          if (this.additionalParameter.hasOwnProperty(\"CEE_CompressImage_IfSizeExceedsInKB\") && this.additionalParameter[\"CEE_CompressImage_IfSizeExceedsInKB\"] !== \"\") {\r\n            this.compressImage(result, (compImg: any) => {\r\n              this.fieldValue = this.imageName = this.imageChangedEvent = compImg;\r\n              this.updateFieldData(this.fieldValue);\r\n              this.sendDatatoAttachments(compImg);\r\n            });\r\n          } else {\r\n            this.fieldValue = this.imageName = this.imageChangedEvent = result;\r\n            this.updateFieldData(this.fieldValue);\r\n            this.sendDatatoAttachments(result);\r\n          }\r\n        }\r\n        if(!this.fieldValue && this.isMandatory && this.isPicChangeBtnClickd) {\r\n          this.valid = false\r\n        } else {\r\n          this.valid = true\r\n        }\r\n        this.updateFieldData(this.fieldValue, this.valid);\r\n      });\r\n    }\r\n\r\n    urltoFile(url, filename, mimeType){\r\n        if (url.startsWith('data:')) {\r\n            var arr = url.split(','),\r\n                mime = arr[0].match(/:(.*?);/)[1],\r\n                bstr = atob(arr[arr.length - 1]), \r\n                n = bstr.length, \r\n                u8arr = new Uint8Array(n);\r\n            while(n--){\r\n                u8arr[n] = bstr.charCodeAt(n);\r\n            }\r\n            var file = new File([u8arr], filename, {type:mime || mimeType});\r\n            return Promise.resolve(file);\r\n        }\r\n        return fetch(url)\r\n            .then(res => res.arrayBuffer())\r\n            .then(buf => new File([buf], filename,{type:mimeType}));\r\n    }\r\n\r\n    dataURLtoFile(dataurl, filename) {\r\n      var arr = dataurl.split(','),\r\n          mime = arr[0].match(/:(.*?);/)[1],\r\n          bstr = atob(arr[arr.length - 1]), \r\n          n = bstr.length, \r\n          u8arr = new Uint8Array(n);\r\n      while(n--){\r\n          u8arr[n] = bstr.charCodeAt(n);\r\n      }\r\n      return new File([u8arr], filename, {type:mime});\r\n    }\r\n    public getName(originalName: string, fileName: string, regex: RegExp) {\r\n        let result = originalName;\r\n        const matched = originalName.match(new RegExp(regex));\r\n        if (matched) {\r\n            for (const name of matched) {\r\n                let val = '';\r\n                switch (name.toLowerCase()) {\r\n                    case '{filename}':\r\n                        val = fileName;\r\n                        break;\r\n                    case '{yyyymmddhhmmss}':\r\n                    case '{timestamp}':\r\n                        val = String(new Date().getTime());\r\n                        break;\r\n                    default:\r\n                        if (name.includes('##')) {\r\n                            const values = name.match(new RegExp(/[^{}]+/g));\r\n                            const key = values ? values[0] : name;\r\n                            const handlerData = this.apiDataService.getApiDataByHandler(key.split('##')[0]);\r\n                            val = handlerData ? handlerData.value[key] : '';\r\n                        } else {\r\n                            const apiData = this.apiDataService.getApiDataByApiKey(name);\r\n                            val = apiData ? apiData.value : '';\r\n                        }\r\n                        break;\r\n                }\r\n                result = result.split(name).join(val);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    \r\n    sendDatatoAttachments(fileData){\r\n      var imageName = this.AdditionalParameter['CEE_PP_Format'] ? 'profile_image.' + this.AdditionalParameter['CEE_PP_Format'] : 'profile_image.png';\r\n      if (this.AdditionalParameter['CEE_PP_Filename']) {\r\n        // check for the file name as concatenation of api keys\r\n        /**\r\n         * * File name can be {FileName}_{SomeAPIKey}_{TimeStamp}\r\n         * * or file-{application/renewal-create-record##currentEnrollmentId}_{YYYYMMDDHHMMSS}\r\n         * * here first searching would be done using FileName\r\n         * * and TimeStamp then need to check if there are any apiKey\r\n         * * then join\r\n         */\r\n        const file = imageName.split(\".\");\r\n        const extension = file.splice(-1)[0];\r\n        let resultFileName = this.getName(\r\n          this.AdditionalParameter['CEE_PP_Filename'],\r\n          file[0],\r\n          /\\{(.*?)\\}/g\r\n        );\r\n        resultFileName = `${resultFileName}.${extension}`;\r\n        imageName = resultFileName;\r\n      }\r\n\r\n      let selectedFile = {\r\n        uploaded: false,\r\n        file : this.dataURLtoFile(fileData,imageName),\r\n        attachmentId : '',\r\n        url: '',\r\n        attachmentPath : '',\r\n        uId : fileData.lastModified,\r\n        custom: [],\r\n        autoUpload : true\r\n      }\r\n      this.rootData[this.fieldData.unique_id](selectedFile);\r\n    }\r\n\r\n  async compressImage(file: any, callBack: Function) {\r\n\r\n    if (!file) return;\r\n\r\n    const settings: ICompressImage = {\r\n      orientation: 1,\r\n      ratio: 50,\r\n      quality: 50\r\n    }\r\n\r\n    // for orientation\r\n    if (this.additionalParameter.hasOwnProperty(\"CEE_CompressImg_Orientation\") && this.additionalParameter[\"CEE_CompressImg_Orientation\"] !== \"\") {\r\n      settings.orientation = this.additionalParameter[\"CEE_CompressImg_Orientation\"];\r\n    }\r\n    // for ratio\r\n    if (this.additionalParameter.hasOwnProperty(\"CEE_CompressImg_AspectRatio\") && this.additionalParameter[\"CEE_CompressImg_AspectRatio\"] !== \"\") {\r\n      settings.ratio = this.additionalParameter[\"CEE_CompressImg_AspectRatio\"];\r\n    }\r\n    // for quality\r\n    if (this.additionalParameter.hasOwnProperty(\"CEE_CompressImg_Quality\") && this.additionalParameter[\"CEE_CompressImg_Quality\"] !== \"\") {\r\n      settings.quality = this.additionalParameter[\"CEE_CompressImg_Quality\"];\r\n    }\r\n    // for maxWidth\r\n    if (this.additionalParameter.hasOwnProperty(\"CEE_CompressImg_maxHeight\") && this.additionalParameter[\"CEE_CompressImg_maxHeight\"] !== \"\") {\r\n      settings.maxWidth = parseInt(this.additionalParameter[\"CEE_CompressImg_maxHeight\"].toString().replace(/[^\\d]/g, ''));\r\n    }\r\n    // for maxHeight\r\n    if (this.additionalParameter.hasOwnProperty(\"CEE_CompressImg_maxWidth\") && this.additionalParameter[\"CEE_CompressImg_maxWidth\"] !== \"\") {\r\n      settings.maxHeight = parseInt(this.additionalParameter[\"CEE_CompressImg_maxWidth\"].toString().replace(/[^\\d]/g, ''));\r\n    }\r\n\r\n    const imageSizeLimit: number = Number(this.additionalParameter[\"CEE_CompressImage_IfSizeExceedsInKB\"].match(/\\d+/));\r\n    const fileSize = this.getBase64ImageSize(file);\r\n    if ((fileSize / 1000) < imageSizeLimit) {\r\n      callBack(file)\r\n    }\r\n    this.imageCompress.compressFile(\r\n      file,\r\n      settings.orientation,\r\n      settings.ratio,\r\n      settings.quality,\r\n      settings.maxWidth,\r\n      settings.maxHeight\r\n    ).then((result: string) => {\r\n      console.log('Compressed image: ', result);  // Base64 compressed image\r\n      callBack(result)\r\n    }).catch(error => {\r\n      console.log(error)\r\n    });\r\n  }\r\n\r\n  getBase64ImageSize(base64String) {\r\n    // Remove the prefix (if present)\r\n    const base64Data = base64String.split(',')[1];\r\n\r\n    // Calculate the size in bytes\r\n    const sizeInBytes = (base64Data.length * 3) / 4 - (base64Data.endsWith('==') ? 2 : base64Data.endsWith('=') ? 1 : 0);\r\n\r\n    return sizeInBytes;\r\n  }\r\n}\r\n"],"names":["i1.UserDataHandlerService","i2.SharedEventsServiceService","i3.CEEInternalEmitterService","i4.AppDataService","i5.ApiDataService","i6.WfeStepLoaderService","i10.CeeApiService","i12.FileUploadService","i14","i15","i16"],"mappings":"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"}