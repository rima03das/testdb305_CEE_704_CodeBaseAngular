{"version":3,"file":"ng-cee-core-cee-captcha.component-CBG5R6P9.mjs","sources":["../../../../../Angular-17/ESF-Angular-WFE-Library/projects/ng-cee-core/src/lib/field-components/cee-captcha/cee-captcha.component.html","../../../../../Angular-17/ESF-Angular-WFE-Library/projects/ng-cee-core/src/lib/field-components/cee-captcha/cee-captcha.component.ts"],"sourcesContent":["<div class=\"field-wrapper\" *ngIf=\"isVisible\">\r\n\t<div class=\"form-group\">\r\n\t\t<div class=\"form-label\">\r\n\t\t\t<label class=\"col-form-label\" *ngIf=\"!isHTML(fieldData.field_label)\">{{fieldData.field_label}}</label>\r\n\t\t\t<label class=\"col-form-label\" *ngIf=\"isHTML(fieldData.field_label)\"\r\n\t\t\t\t[innerHTML]=\"fieldData.field_label\"></label>\r\n\t\t\t<span *ngIf=\"isMandatory\" class=\"mandetory-mark\"> *</span>\r\n\t\t</div>\r\n\t\t<div #recaptcha></div>\r\n\t\t<!-- <re-captcha [(ngModel)]=\"inputValue\" name=\"captcha\" required></re-captcha> -->\r\n\t</div>\r\n</div>\r\n","import { Component, OnInit, Input, OnDestroy, HostListener, ElementRef, ViewChild } from '@angular/core';\r\nimport { UserDataHandlerService } from '../../services/user-data-handler.service';\r\nimport { WfeStepLoaderService } from '../../services/wfe-step-loader.service';\r\nimport { SharedEventsServiceService } from '../../services/shared-events-service.service';\r\nimport { CeeApiService } from '../../services/cee-api-service.service';\r\n\r\nimport { AppDataService } from '../../models/app-data/app-data.service';\r\nimport { ApiDataService } from '../../models/api-data/api-data.service';\r\nimport { BaseView } from '../cee-base-class';\r\nimport { SessionKeyUtil } from '../../utils/session-key-util';\r\nimport { WfeEncryptionUtil } from '../../utils/wfe-encryption-util';\r\nimport { MatDialog as MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar as MatSnackBar } from '@angular/material/snack-bar';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { CommonUtil } from '../../utils/common-util';\r\nimport { Router } from '@angular/router';\r\nimport { CEEInternalEmitterService } from '../../services/internal-cee-emitter-service.service';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n@Component({\r\n    selector: 'app-cee-captcha',\r\n    templateUrl: './cee-captcha.component.html',\r\n    styleUrls: ['./cee-captcha.component.scss'],\r\n    standalone: true,\r\n    imports: [CommonModule],\r\n})\r\nexport class CeeCaptchaComponent extends BaseView implements OnInit, OnDestroy {\r\n    // @ViewChild('txtVal', {static: false}) txtVal: ElementRef\r\n    @Input() declare stepId: any;\r\n    @Input() declare fieldData: any;\r\n    @Input() primaryKeyIndex: any;\r\n    @Input() keepState = false;\r\n    @Input() rowData: any;\r\n    @Input() mandatoryCondition: any;\r\n    @Input() editableCondition: any;\r\n    @Input() visibleCondition: any;\r\n    @ViewChild('recaptcha') recaptchaElement: ElementRef;\r\n    wfeEncryption: WfeEncryptionUtil;\r\n    declare sessionKeyUtil: SessionKeyUtil;\r\n    validationRegex = '';\r\n    inputValue = '';\r\n    buttonLabel = '';\r\n    searchButtonEditable = true;\r\n    isSearch = false;\r\n\r\n    constructor(\r\n        public userDataHandlerService: UserDataHandlerService,\r\n        public sharedEventsService: SharedEventsServiceService,\r\n        public internalCEEEmitter: CEEInternalEmitterService,\r\n        public appDataService: AppDataService,\r\n        public apiDataService: ApiDataService,\r\n        public wfeStepLoaderService: WfeStepLoaderService,\r\n        public dialog: MatDialog,\r\n        public snackBar: MatSnackBar,\r\n        public http: HttpClient,\r\n        public ceeApiService: CeeApiService,\r\n        public router: Router\r\n    ) {\r\n        super(\r\n            userDataHandlerService,\r\n            sharedEventsService,\r\n            internalCEEEmitter,\r\n            appDataService,\r\n            apiDataService,\r\n            wfeStepLoaderService,\r\n            dialog, snackBar, http, ceeApiService, router);\r\n        this.wfeEncryption = new WfeEncryptionUtil();\r\n        this.sessionKeyUtil = new SessionKeyUtil();\r\n        this.commonUtil = new CommonUtil();\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.init(this.stepId, this.fieldData, this.keepState, this.rowData);\r\n        if (this.additionalParameter['provider'] && this.additionalParameter['provider'] == \"Google\") {\r\n            this.addRecaptchaScript();\r\n        }\r\n    }\r\n    renderReCaptch() {\r\n        let google_sitekey = localStorage.getItem('google_sitekey')\r\n        window['grecaptcha'].render(this.recaptchaElement.nativeElement, {\r\n            'sitekey': google_sitekey,\r\n            'callback': (response) => {\r\n                // console.log(response);\r\n                // this.inputValue = response;\r\n                this.updateFieldData(this.wfeEncryption.getEncryptedData(this.additionalParameter['EncryptionType'], response));\r\n                this.onComponentEvent('OnClick');\r\n                this.onDirty();\r\n            }\r\n        });\r\n    }\r\n\r\n    addRecaptchaScript() {\r\n\r\n        window['grecaptchaCallback'] = () => {\r\n            this.renderReCaptch();\r\n        }\r\n        (function (d, s, id, obj) {\r\n            var js, fjs = d.getElementsByTagName(s)[0];\r\n            if (d.getElementById(id)) { return; }\r\n            js = d.createElement(s); js.id = id;\r\n            js.src = \"https://www.google.com/recaptcha/api.js?onload=grecaptchaCallback&amp;render=explicit\";\r\n            fjs.parentNode.insertBefore(js, fjs);\r\n        }(document, 'script', 'recaptcha-jssdk', this));\r\n    }\r\n    //@HostListener('window:beforeunload')\r\n    onDestroy() {\r\n        this.onViewUnload();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        \r\n        // Clear utility object references\r\n        this.wfeEncryption = null;\r\n        this.sessionKeyUtil = null;\r\n        this.commonUtil = null;\r\n        \r\n        // Clear component-specific properties\r\n        this.inputValue = '';\r\n        this.buttonLabel = '';\r\n        this.validationRegex = '';\r\n        \r\n        // Clear ViewChild reference\r\n        this.recaptchaElement = null;\r\n        \r\n        // Clear input properties\r\n\r\n\r\n        this.primaryKeyIndex = null;\r\n\r\n        this.mandatoryCondition = null;\r\n        this.editableCondition = null;\r\n        this.visibleCondition = null;\r\n        this.onViewUnload();\r\n    }\r\n\r\n    onAPICallback(data: any): void {\r\n        this.fieldData = this.setDynamicLabelUtil.getDynamicValue(this.fieldData, data);\r\n        const apiData = this.setApiCallBackDataUtil.setApiCallBackData(this.fieldData, data);\r\n        // console.log(apiData);\r\n        if (apiData !== null) {\r\n            if (!Array.isArray(apiData)) {\r\n                this.inputValue = apiData;\r\n                this.updateFieldData(this.inputValue);\r\n            }\r\n        }\r\n    }\r\n    setFieldValueOnSetValuesEvent(): void {\r\n\r\n    }\r\n    setFieldStateOnStateChangeEvent(): void {\r\n\r\n    }\r\n    onViewDataInit(): void {\r\n\r\n    }\r\n    concatData = (res) => {\r\n\r\n    }\r\n\r\n    handleCustomFunction(get_data: any) {\r\n\r\n    }\r\n    onEmptySession(get_data: any) {\r\n\r\n    }\r\n\r\n    toggleLanguage(data: object) {\r\n\r\n    }\r\n\r\n    updateStateHistory(data: any): void {\r\n        // throw new Error(\"Method not implemented.\");\r\n    }\r\n}\r\n"],"names":["i1.UserDataHandlerService","i2.SharedEventsServiceService","i3.CEEInternalEmitterService","i4.AppDataService","i5.ApiDataService","i6.WfeStepLoaderService","i10.CeeApiService","i12"],"mappings":"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"}