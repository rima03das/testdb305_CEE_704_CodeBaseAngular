{"version":3,"file":"ng-cee-core-cee-editor.component-BCar5kMU.mjs","sources":["../../../../../Angular-17/ESF-Angular-WFE-Library/projects/ng-cee-core/src/lib/field-components/cee-editor/cee-editor.component.html","../../../../../Angular-17/ESF-Angular-WFE-Library/projects/ng-cee-core/src/lib/field-components/cee-editor/cee-editor.component.ts"],"sourcesContent":["<div class=\"field-wrapper\" *ngIf=\"isVisible\">\r\n    <div class=\"form-group\">\r\n        <div class=\"form-label\">\r\n            <ng-container *ngIf=\"fieldData.field_label!=''\">\r\n                <label class=\"col-form-label\" *ngIf=\"!isHTML(fieldData.field_label)\">{{fieldData.field_label}}</label>\r\n                <label class=\"col-form-label\" *ngIf=\"isHTML(fieldData.field_label)\"\r\n                    [innerHTML]=\"fieldData.field_label\"></label>\r\n            </ng-container>\r\n            <span *ngIf=\"isMandatory\" class=\"mandetory-mark\"> *</span>\r\n            <button *ngIf=\"hasTooltip\" type=\"button\" class=\"btn-tooltip ml-auto\" [tooltip]=\"fieldData.tooltip\"\r\n         [attr.aria-label]=\"'Tooltip: ' + fieldData.tooltip \">\r\n                i\r\n            </button>\r\n        </div>\r\n        <div class=\"form-field\">\r\n            <!-- <div class=\"invisible-input-cont\">\r\n                <input #quillFile type=\"file\" (change)=\"quillFileSelected($event)\">\r\n            </div> -->\r\n            <div class=\"editor-container\" [attr.data-component-key]=\"componentKey\">\r\n              <quill-editor #contentCtrl=\"ngModel\"\r\n                            #quillEditor\r\n                            [attr.data-editor-key]=\"componentKey\"\r\n                            (dragover)=\"onDragOver($event)\"\r\n                            (dragleave)=\"enableUploadOnDragOver(false)\"\r\n                            (drop)=\"handleDrop($event)\"\r\n                            [(ngModel)]=\"inputValue\"\r\n                            [modules]=\"editorModules\"\r\n                            name=\"meQuillRef\"\r\n                            class=\"{{(isCustomClass && fieldData.field_style)?fieldData.field_style.custom_class_name:''}}  {{ !valid || (contentCtrl.invalid && isMandatory && contentCtrl.dirty) ? 'invalid' : 'valid' }} {{(contentCtrl.invalid && contentCtrl.touched) ? 'invalid-editor' : ''}}\"\r\n                            theme=\"snow\"\r\n                            format=\"html\"\r\n                            [required]=\"isMandatory\"\r\n                            [disabled]=\"!isEditable\"\r\n                            placeholder=\"{{fieldData.placeholder_text}}\"\r\n                            (onEditorCreated)=\"getEditorInstance($event)\"\r\n                            (onContentChanged)=\"onContentChanged($event)\"\r\n                            (onFocus)=\"onTouched(contentCtrl)\"\r\n                            (ngModelChange)=\"updatePreview()\">\r\n              </quill-editor>\r\n              <div *ngIf=\"contentCtrl.invalid && contentCtrl.touched\" class=\"text-danger\">\r\n                Field is required.\r\n              </div>\r\n            </div>\r\n            <div class=\"preview-container\" *ngIf=\"previewContent\">\r\n                <h6>Preview</h6>\r\n                <div class=\"preview-content\" [innerHTML]=\"sanitizedContent\"></div>\r\n            </div>\r\n            <div class=\"preview-container\" *ngIf=\"previewHtml\">\r\n              <h6>Format-Html</h6>\r\n              <div class=\"preview-content\">{{inputValue}}</div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnInit, Input, OnDestroy, HostListener, SimpleChanges, OnChanges, ElementRef, ChangeDetectionStrategy, ChangeDetectorRef, EventEmitter } from '@angular/core';\r\nimport { UserDataHandlerService } from '../../services/user-data-handler.service';\r\nimport { WfeStepLoaderService } from '../../services/wfe-step-loader.service';\r\nimport { SharedEventsServiceService } from '../../services/shared-events-service.service';\r\nimport { CeeApiService } from '../../services/cee-api-service.service';\r\nimport { AppDataService } from '../../models/app-data/app-data.service';\r\nimport { ApiDataService } from '../../models/api-data/api-data.service';\r\nimport { BaseView } from '../cee-base-class';\r\nimport { SessionKeyUtil } from '../../utils/session-key-util';\r\nimport { WfeEncryptionUtil } from '../../utils/wfe-encryption-util';\r\nimport { MatDialog as MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar as MatSnackBar } from '@angular/material/snack-bar';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { UndoRedo } from './../../utils/undo-redo.util';\r\nimport { ViewChild } from '@angular/core';\r\nimport { FormsModule, NgModel } from '@angular/forms';\r\nimport { CEEInternalEmitterService } from '../../services/internal-cee-emitter-service.service';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { TooltipModule } from '../../directives/tooltip/tooltip.module';\r\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\r\nimport { QuillModule, QuillEditorComponent } from 'ngx-quill';\r\nimport Quill from 'quill';\r\nimport ImageResize from 'quill-image-resize';\r\nimport { Mention, MentionBlot } from \"quill-mention\";\r\nimport heic2any from \"heic2any\";\r\n// import \"quill-mention\";\r\n// import \"quill-mention/autoregister\";\r\nlet globalDefaultKeyboardBindings: any = null;\r\n\r\ntry {\r\n    if (!globalDefaultKeyboardBindings) {\r\n        const Keyboard = Quill.import('modules/keyboard') as any;\r\n        if (Keyboard && Keyboard.DEFAULTS && Keyboard.DEFAULTS.bindings) {\r\n            // Safely copy keyboard bindings with validation\r\n            const originalBindings = Keyboard.DEFAULTS.bindings;\r\n            if (originalBindings && typeof originalBindings === 'object') {\r\n                globalDefaultKeyboardBindings = JSON.parse(JSON.stringify(originalBindings));\r\n            }\r\n        }\r\n    }\r\n\r\n    Quill.register('modules/imageResize', ImageResize.default);\r\n    Quill.register({ \"blots/mention\": MentionBlot, \"modules/mention\": Mention});\r\n    const imports = (Quill as any).imports;\r\n    const imageResizeRegistered = !!imports['modules/imageResize'];\r\n    const mentionRegistered = !!imports['modules/mention'];\r\n\r\n} catch (e) {\r\n    console.error('‚ùå Error registering Quill modules:', e);\r\n    // Reset global bindings on error to prevent corruption\r\n    globalDefaultKeyboardBindings = null;\r\n}\r\n\r\n@Component({\r\n    selector: 'app-cee-editor',\r\n    templateUrl: './cee-editor.component.html',\r\n    styleUrls: ['./cee-editor.component.scss', '../field-common.scss'],\r\n    standalone: true,\r\n    imports: [MatTooltipModule, FormsModule, CommonModule, TooltipModule, QuillModule]\r\n})\r\nexport class CeeEditorComponent extends BaseView implements OnInit, OnDestroy, OnChanges {\r\n    @Input() declare stepId: any;\r\n    @Input() declare fieldData: any;\r\n    @Input() primaryKeyIndex: any;\r\n    @Input() keepState = false;\r\n    @Input() rowData: any;\r\n    @Input() mandatoryCondition: any;\r\n    @Input() editableCondition: any;\r\n    @Input() visibleCondition: any;\r\n    @Input() declare rootData: any;\r\n    @ViewChild('contentCtrl') contentCtrl: NgModel;\r\n\r\n    wfeEncryption: WfeEncryptionUtil;\r\n    declare sessionKeyUtil: SessionKeyUtil;\r\n    inputValue: string = '';\r\n    html_id = '';\r\n    isValid = true;\r\n    undoRedoUtil: UndoRedo;\r\n    imageResize = ImageResize.default;\r\n    isReadOnly: boolean = false;\r\n    @ViewChild('quillFile') quillFileRef: ElementRef;\r\n    quillFile: any;\r\n    meQuillRef!: Quill;\r\n    sanitizedContent: SafeHtml = '';\r\n    previewContent: boolean = false;\r\n    previewHtml: boolean = false;\r\n    editorModules = {};\r\n    allOptions: any = [];\r\n    @ViewChild('quillEditor') quillEditor!: QuillEditorComponent;\r\n    uploadOutOfEditor: boolean = false;\r\n    searchStr: any = null;\r\n\r\n    // Component instance tracking for generic blocks\r\n    componentKey: string = '';\r\n    private isInitialized: boolean = false;\r\n    lastModifiedImage = \"\";\r\n    private timeoutIds: any[] = [];\r\n\r\n    // Essential functionality variables (not debug counters)\r\n    private lastEventTimestamp = 0;\r\n    private eventCallsInShortTime = 0;\r\n    private isUpdatingFieldData = false;\r\n    private debounceUpdateTimeout: any = null;\r\n    private isProgrammaticallySettingContent = false;\r\n    private urlDetectionTimeout: any = null;\r\n\r\n    private isApiSearchEnabledForMention: boolean = false;\r\n    private searchDebounceTime: number = 300;\r\n    requestApiKeyForSearch = '';\r\n    private internalAPIResponseEmitter: EventEmitter<any> = new EventEmitter();\r\n\r\n    currentRenderList: any = [];\r\n    currentSearchTerm: any = '';\r\n    private mentionSearchTimeout: any = null;\r\n    private lastMentionSearchTerm: string = '';\r\n\r\n    constructor(\r\n        private sanitizer: DomSanitizer,\r\n        public userDataHandlerService: UserDataHandlerService,\r\n        public sharedEventsService: SharedEventsServiceService,\r\n        public internalCEEEmitter: CEEInternalEmitterService,\r\n        public appDataService: AppDataService,\r\n        public apiDataService: ApiDataService,\r\n        public wfeStepLoaderService: WfeStepLoaderService,\r\n        public dialog: MatDialog,\r\n        public snackBar: MatSnackBar,\r\n        public http: HttpClient,\r\n        private cdr: ChangeDetectorRef\r\n    ) {\r\n        super(\r\n            userDataHandlerService,\r\n            sharedEventsService,\r\n            internalCEEEmitter,\r\n            appDataService, apiDataService, wfeStepLoaderService, dialog, snackBar, http);\r\n        this.wfeEncryption = new WfeEncryptionUtil();\r\n        this.sessionKeyUtil = new SessionKeyUtil();\r\n        this.undoRedoUtil = new UndoRedo();\r\n        this.verifyQuillModules();\r\n    }\r\n\r\n\r\n    ngOnInit() {\r\n        this.componentKey = `cee-editor-${this.fieldData?.html_id || 'unknown'}-${Date.now()}`;\r\n\r\n        // Ensure keyboard bindings are preserved before initialization\r\n        this.ensureKeyboardBindingsIntegrity();\r\n        // Initialize editor modules early so they're available for template binding\r\n        this.initializeEditorModules();\r\n\r\n        this.init(this.stepId, this.fieldData, this.keepState, this.rowData);\r\n        this.isInitialized = true;\r\n    }\r\n\r\n    setupSearchApiCallback() {\r\n        \r\n        if (this.variableObject['internalEmmitter' + this.appData.id]) {\r\n            this.variableObject['internalEmmitter' + this.appData.id].unsubscribe();\r\n        }\r\n\r\n        // Subscribe to internal API response emitter\r\n        this.variableObject['internalEmmitter' + this.appData.id] = this.internalAPIResponseEmitter.subscribe((res) => {\r\n            // Process the API response and update mention list\r\n            this.handleApiMentionResponse(res);\r\n        });\r\n    }\r\n\r\n\r\n\r\n    ngOnDestroy(): void {\r\n        this.timeoutIds.forEach(id => clearTimeout(id));\r\n        this.timeoutIds = [];\r\n\r\n        // Clear URL detection timeout\r\n        if (this.urlDetectionTimeout) {\r\n            clearTimeout(this.urlDetectionTimeout);\r\n            this.urlDetectionTimeout = null;\r\n        }\r\n\r\n        // Clear debounce timeout\r\n        if (this.debounceUpdateTimeout) {\r\n            clearTimeout(this.debounceUpdateTimeout);\r\n            this.debounceUpdateTimeout = null;\r\n        }\r\n\r\n        if (this.variableObject['internalEmmitter' + this.appData.id]) {\r\n            this.variableObject['internalEmmitter' + this.appData.id].unsubscribe();\r\n        }\r\n\r\n        if (this.meQuillRef) {\r\n            try {\r\n                this.cleanupMentionModule();\r\n                this.meQuillRef.off('text-change');\r\n                this.meQuillRef.off('selection-change');\r\n                this.meQuillRef.off('editor-change');\r\n                const toolbar = this.meQuillRef.getModule('toolbar') as any;\r\n                if (toolbar) {\r\n                    if (toolbar.container) {\r\n                        toolbar.container.innerHTML = '';\r\n                    }\r\n                    if (toolbar.handlers) {\r\n                        toolbar.handlers = {};\r\n                    }\r\n                }\r\n                this.meQuillRef.setContents([]);\r\n                const editorElement = this.meQuillRef.root;\r\n                if (editorElement && editorElement.parentNode) {\r\n                    editorElement.innerHTML = '';\r\n                }\r\n            } catch (e) {\r\n                console.warn('Error during Quill cleanup:', e);\r\n            }\r\n            this.meQuillRef = null;\r\n        }\r\n        this.quillEditor = null;\r\n        this.contentCtrl = null;\r\n        this.quillFileRef = null;\r\n        this.editorModules = {};\r\n        this.inputValue = '';\r\n        this.html_id = '';\r\n        this.searchStr = null;\r\n        this.undoRedoUtil = null;\r\n        this.wfeEncryption = null;\r\n        this.sessionKeyUtil = null;\r\n    }\r\n\r\n    async onViewDataInit() {\r\n        this.html_id = this.fieldData.html_id;\r\n        this.searchStr = null;\r\n\r\n        if (this.fieldValue) {\r\n            this.inputValue = this.fieldValue;\r\n        }\r\n        if (this.rowData) {\r\n            if (this.rowData.hasOwnProperty('value')) {\r\n                this.updateFieldData(this.inputValue);\r\n            }\r\n        }\r\n        this.previewContent = this.additionalParameter['CEE_editor_preview'] === \"true\" ? true : false;\r\n        this.previewHtml = this.additionalParameter['CEE_editor_preview_html'] === \"true\" ? true : false;\r\n        this.requestApiKeyForSearch = this.additionalParameter['CEE_Search_Request_api_Key_For_Search_input'] || '';\r\n        if (this.requestApiKeyForSearch) {\r\n            this.updateDataOnChange('');\r\n        }\r\n        // Re-initialize editor modules in case additional parameters changed\r\n        this.initializeEditorModules();\r\n\r\n        if (this.rootData && this.rootData['FieldErrorFunctions']) {\r\n            this.rootData['FieldErrorFunctions'][this.fieldData.html_id] = () => {\r\n                // Focus on the quill editor instead of a non-existent DOM element\r\n                if (this.quillEditor && this.quillEditor.quillEditor) {\r\n                    this.quillEditor.quillEditor.focus();\r\n                }\r\n            };\r\n        }\r\n\r\n        // Note: Don't create manual Quill instance here - let quill-editor component handle it\r\n        // The meQuillRef will be set in getEditorInstance() callback\r\n    }\r\n\r\n    /**\r\n     * Validates and normalizes mention items to ensure consistent structure\r\n     */\r\n    private validateMentionItem(item: any, index: number, type: 'item' | 'match' = 'item'): any {\r\n        if (!item || typeof item !== 'object') {\r\n            return {\r\n                id: index + 1,\r\n                value: `Invalid ${type.charAt(0).toUpperCase() + type.slice(1)}`\r\n            };\r\n        }\r\n\r\n        const normalizedItem = {\r\n            id: item.id !== undefined && item.id !== null ? item.id : index + 1,\r\n            value: item.value && typeof item.value === 'string' && item.value.length > 0\r\n                ? item.value\r\n                : `${type.charAt(0).toUpperCase() + type.slice(1)} ${index + 1}`\r\n        };\r\n\r\n        if (typeof normalizedItem.value !== 'string' || normalizedItem.value.length === 0) {\r\n            normalizedItem.value = `Default ${type.charAt(0).toUpperCase() + type.slice(1)} ${index + 1}`;\r\n        }\r\n\r\n        return normalizedItem;\r\n    }\r\n\r\n    /**\r\n     * Safely renders list with error handling and fallbacks\r\n     */\r\n    private safeRenderList(renderList: Function, items: any[], searchTerm: string, type: 'values' | 'matches' = 'values'): void {\r\n        const normalizedItems = items.map((item, index) => this.validateMentionItem(item, index, type === 'values' ? 'item' : 'match'));\r\n\r\n        this.safeExecute(() => {\r\n            renderList(normalizedItems, searchTerm);\r\n            this.addSafeTimeout(() => this.applyMentionStylingFixes(), 100);\r\n        }, `Failed to render normalized ${type} list`, () => {\r\n            this.renderFallbackList(renderList, searchTerm, type);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Renders fallback list when main rendering fails\r\n     */\r\n    private renderFallbackList(renderList: Function, searchTerm: string, type: string): void {\r\n        this.safeExecute(() => {\r\n            const safeFallbackList = [\r\n                { id: 1, value: `Safe ${type === 'matches' ? 'Match' : 'Item'} 1` },\r\n                { id: 2, value: `Safe ${type === 'matches' ? 'Match' : 'Item'} 2` }\r\n            ];\r\n            renderList(safeFallbackList, searchTerm);\r\n        }, `Even safe fallback render failed`);\r\n    }\r\n\r\n    /**\r\n     * Validates entry data for search operations\r\n     */\r\n    private isValidEntry(entry: any, index: number): boolean {\r\n        if (!entry ||\r\n            !entry.value ||\r\n            typeof entry.value !== 'string' ||\r\n            entry.value.length === 0) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Safe array validation utility\r\n     */\r\n    private isValidArray(arr: any, name: string = 'array'): boolean {\r\n        if (!Array.isArray(arr)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Safe array validation with length check\r\n     */\r\n    private isNonEmptyArray(arr: any, name: string = 'array'): boolean {\r\n        return this.isValidArray(arr, name) && arr.length > 0;\r\n    }\r\n\r\n    /**\r\n     * Utility for managing timeouts safely\r\n     */\r\n    private addSafeTimeout(callback: () => void, delay: number): void {\r\n        const timeoutId = setTimeout(callback, delay);\r\n        this.timeoutIds.push(timeoutId);\r\n    }\r\n\r\n    /**\r\n     * Utility method to clean up mention module references and event listeners\r\n     */\r\n    private cleanupMentionModule(quillInstance?: Quill): void {\r\n        const instance = quillInstance || this.meQuillRef;\r\n        if (!instance) return;\r\n\r\n        try {\r\n            const mentionModule: any = instance.getModule('mention');\r\n            if (mentionModule) {\r\n                // Clean up mention event listeners and references\r\n                const propertiesToCleanup = [\r\n                    'onContainerMouseDown',\r\n                    'selectHandler',\r\n                    'mentionList',\r\n                    'values',\r\n                    'existingValues'\r\n                ];\r\n\r\n                propertiesToCleanup.forEach(prop => {\r\n                    if (mentionModule[prop]) {\r\n                        if (prop === 'mentionList' || prop === 'values' || prop === 'existingValues') {\r\n                            mentionModule[prop] = null;\r\n                        } else {\r\n                            delete mentionModule[prop];\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        } catch (error) {\r\n            console.error('Error during mention module cleanup:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Try-catch wrapper for safe execution\r\n     */\r\n    private safeExecute<T>(operation: () => T, errorMessage: string, fallback?: (() => T) | T): T | undefined {\r\n        try {\r\n            return operation();\r\n        } catch (error) {\r\n            if (typeof fallback === 'function') {\r\n                return (fallback as () => T)();\r\n            }\r\n            return fallback as T;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Validates and ensures data is array with non-empty string values\r\n     */\r\n    private validateDataArray(data: any, context: string): any[] {\r\n        if (!this.isValidArray(data, context)) {\r\n            return [];\r\n        }\r\n\r\n        return data.filter((item: any, index: number) => {\r\n            if (!item || typeof item !== 'object') {\r\n                return false;\r\n            }\r\n\r\n            if (!item.hasOwnProperty('value') || !item.value) {\r\n                return false;\r\n            }\r\n\r\n            if (typeof item.value !== 'string') {\r\n                this.safeExecute(() => {\r\n                    item.value = String(item.value);\r\n                }, `${context}: Failed to convert value to string at index ${index}`);\r\n\r\n                if (typeof item.value !== 'string') {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if (item.value.length === 0) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Utility to check if Quill modules are properly registered (for debugging)\r\n     */\r\n    private verifyQuillModules(): boolean {\r\n        try {\r\n            const imports = (Quill as any).imports;\r\n            const hasImageResize = !!imports['modules/imageResize'];\r\n            const hasMention = !!imports['modules/mention'];\r\n            return hasImageResize && hasMention;\r\n        } catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Validates keyboard binding structure to prevent errors\r\n     */\r\n    private validateKeyboardBinding(binding: any): boolean {\r\n        if (!binding || typeof binding !== 'object') {\r\n            return false;\r\n        }\r\n\r\n        // Check if prefix/suffix are properly formed (should be RegExp or undefined)\r\n        if (binding.prefix && typeof binding.prefix !== 'object') {\r\n            return false;\r\n        }\r\n        if (binding.suffix && typeof binding.suffix !== 'object') {\r\n            return false;\r\n        }\r\n\r\n        // Ensure prefix/suffix are not empty objects (which cause the .test error)\r\n        if (binding.prefix && Object.keys(binding.prefix).length === 0 && !binding.prefix.test) {\r\n            delete binding.prefix;\r\n        }\r\n        if (binding.suffix && Object.keys(binding.suffix).length === 0 && !binding.suffix.test) {\r\n            delete binding.suffix;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Ensures keyboard bindings integrity at the global level\r\n     */\r\n    private ensureKeyboardBindingsIntegrity(): void {\r\n        try {\r\n            if (globalDefaultKeyboardBindings) {\r\n                const Keyboard = Quill.import('modules/keyboard') as any;\r\n                if (Keyboard && Keyboard.DEFAULTS && Keyboard.DEFAULTS.bindings) {\r\n                    // Validate and restore original bindings if they've been modified\r\n                    const cleanBindings = JSON.parse(JSON.stringify(globalDefaultKeyboardBindings));\r\n\r\n                    // Validate each binding category\r\n                    for (const key in cleanBindings) {\r\n                        if (Array.isArray(cleanBindings[key])) {\r\n                            cleanBindings[key] = cleanBindings[key].filter((binding: any) =>\r\n                                this.validateKeyboardBinding(binding)\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    Keyboard.DEFAULTS.bindings = cleanBindings;\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.warn('‚ö†Ô∏è Could not restore global keyboard bindings:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Forces restoration of keyboard bindings to ensure consistent Enter key behavior\r\n     */\r\n    private forceKeyboardBindingRestoration(editor: Quill): void {\r\n        try {\r\n            const keyboard = editor.getModule('keyboard') as any;\r\n            if (keyboard && keyboard.bindings) {\r\n\r\n                // Restore the correct Enter key binding order\r\n                const correctEnterBindings = [\r\n                    {\r\n                        key: 'Enter'\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        collapsed: true,\r\n                        format: ['blockquote'],\r\n                        empty: true\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        collapsed: true,\r\n                        format: ['list'],\r\n                        empty: true\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        collapsed: true,\r\n                        format: {\r\n                            'list': 'checked'\r\n                        }\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        collapsed: true,\r\n                        format: ['header']\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        shiftKey: null,\r\n                        format: ['table']\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        collapsed: true,\r\n                        format: ['code-block']\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        shiftKey: null\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        metaKey: null,\r\n                        ctrlKey: null,\r\n                        altKey: null\r\n                    }\r\n                ];\r\n\r\n                // Validate and force overwrite the Enter bindings\r\n                if (keyboard.bindings) {\r\n                    const validatedBindings = correctEnterBindings.filter(binding =>\r\n                        this.validateKeyboardBinding(binding)\r\n                    );\r\n                    keyboard.bindings.Enter = validatedBindings;\r\n                    keyboard.bindings[13] = validatedBindings;\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('‚ùå Error forcing keyboard binding restoration:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Debug method to log keyboard bindings structure\r\n     */\r\n    private debugKeyboardBindings(editor: Quill): void {\r\n        try {\r\n            const keyboard = editor.getModule('keyboard') as any;\r\n            if (keyboard && keyboard.bindings) {\r\n                if (keyboard.bindings.Enter || keyboard.bindings[13]) {\r\n                    const enterBindings = keyboard.bindings.Enter || keyboard.bindings[13];\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('üêõ Error debugging keyboard bindings:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Restores default keyboard bindings to ensure consistent Enter key behavior\r\n     */\r\n    private restoreDefaultKeyboardBindings(): any {\r\n        if (globalDefaultKeyboardBindings) {\r\n            try {\r\n                const cleanBindings = JSON.parse(JSON.stringify(globalDefaultKeyboardBindings));\r\n\r\n                // Validate all bindings before returning\r\n                for (const key in cleanBindings) {\r\n                    if (Array.isArray(cleanBindings[key])) {\r\n                        cleanBindings[key] = cleanBindings[key].filter((binding: any) =>\r\n                            this.validateKeyboardBinding(binding)\r\n                        );\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    bindings: cleanBindings\r\n                };\r\n            } catch (error) {\r\n                console.warn('‚ö†Ô∏è Error processing global keyboard bindings, using fallback:', error);\r\n            }\r\n        }\r\n\r\n        // Fallback to safe default bindings\r\n        // Comprehensive keyboard configuration with proper Enter key handling\r\n        return {\r\n            bindings: {\r\n                'Enter': [\r\n                    {\r\n                        key: 'Enter'\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        collapsed: true,\r\n                        format: ['blockquote'],\r\n                        empty: true\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        collapsed: true,\r\n                        format: ['list'],\r\n                        empty: true\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        collapsed: true,\r\n                        format: {\r\n                            'list': 'checked'\r\n                        }\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        collapsed: true,\r\n                        format: ['header']\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        shiftKey: null,\r\n                        format: ['table']\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        collapsed: true,\r\n                        format: ['code-block']\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        shiftKey: null\r\n                    },\r\n                    {\r\n                        key: 'Enter',\r\n                        metaKey: null,\r\n                        ctrlKey: null,\r\n                        altKey: null\r\n                    }\r\n                ]\r\n            }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Creates default toolbar configuration\r\n     */\r\n    private createDefaultToolbarConfig(): any {\r\n        return {\r\n            toolbar: {\r\n                container: [\r\n                    ['bold', 'italic', 'underline'],\r\n                    ['blockquote', 'code-block', 'code'],\r\n                    [{ 'header': 1 }, { 'header': 2 }],\r\n                    [{ 'list': 'ordered' }, { 'list': 'bullet' }],\r\n                    [{ 'script': 'sub' }, { 'script': 'super' }],\r\n                    [{ 'indent': '-1' }, { 'indent': '+1' }],\r\n                    [{ 'direction': 'rtl' }],\r\n                    [{ 'size': ['small', false, 'large', 'huge'] }],\r\n                    [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\r\n                    [{ 'color': [] }, { 'background': [] }],\r\n                    [{ 'font': [] }],\r\n                    [{ 'align': [] }],\r\n                    ['clean'],\r\n                    ['link', 'image'] // No video in default configuration\r\n                ],\r\n                handlers: {\r\n                    image: () => this.selectImage(),\r\n                    link: (value) => this.handleLinkClick(value)\r\n                }\r\n            },\r\n            clipboard: {\r\n                magicPaste: false,\r\n                matchVisual: false\r\n            },\r\n            keyboard: this.restoreDefaultKeyboardBindings(),\r\n            imageResize: true\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Creates custom toolbar configuration from additionalParameter\r\n     */\r\n    private createCustomToolbarConfig(): any {\r\n        const jsonString = this.additionalParameter['CEE_editor_options'].replace(/\\\\\"/g, '\"');\r\n        let obj = JSON.parse(jsonString);\r\n        obj.handlers = {\r\n            image: () => this.selectImage(),\r\n            link: (value) => this.handleLinkClick(value)\r\n        };\r\n        if (obj.container) {\r\n            obj.container = obj.container.map((group: any) => {\r\n                if (Array.isArray(group)) {\r\n                    return group.filter((item: any) => item !== 'video');\r\n                }\r\n                return group;\r\n            });\r\n        }\r\n\r\n        return {\r\n            toolbar: {\r\n                ...obj\r\n            },\r\n            clipboard: {\r\n                magicPaste: false,\r\n                matchVisual: false\r\n            },\r\n            keyboard: this.restoreDefaultKeyboardBindings()\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Creates mention configuration for tagging functionality\r\n     */\r\n    private createMentionConfig(): any {\r\n        return {\r\n            allowedChars: /^[A-Za-z\\s√Ö√Ñ√ñ√•√§√∂0-9]*$/,\r\n            mentionDenotationChars: [\"@\", \"#\"],\r\n            showDenotationChar: true,\r\n            isolateCharacter: false,\r\n            fixMentionsToQuill: true,\r\n            positioningStrategy: 'absolute',\r\n            defaultMenuOrientation: 'bottom',\r\n            // selectKeys: [13, 9],\r\n            minChars: 0,\r\n            maxChars: 50,\r\n            renderLoading: () => 'Loading...',\r\n            linkTarget: '_blank',\r\n            listItemClass: 'ql-mention-list-item',\r\n            mentionContainerClass: 'ql-mention-list-container',\r\n            mentionListClass: 'ql-mention-list',\r\n            blotName: 'mention',\r\n            hoverClass: 'selected',\r\n            selectClass: 'selected',\r\n            spaceAfterInsert: true,\r\n            stripHTML: true,\r\n            dataAttributes: ['id', 'value'],\r\n            onSelect: (item: any, insertItem: any) => this.handleMentionSelect(item, insertItem),\r\n            renderItem: (item: any, searchTerm: any) => this.renderMentionItem(item, searchTerm),\r\n            source: (searchTerm: any, renderList: any, mentionChar: any) => this.handleMentionSource(searchTerm, renderList, mentionChar),\r\n            _uniqueKey: `mention_${Date.now()}_${Math.random()}_${this.componentKey || 'default'}`\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Handles mention item selection\r\n     */\r\n    private handleMentionSelect(item: any, insertItem: any): void {\r\n        if (!item || typeof item !== 'object' || !item.value || typeof item.value !== 'string') {\r\n            item = { id: 'fallback', value: 'Unknown Mention' };\r\n        }\r\n\r\n        this.searchStr = null;\r\n        insertItem(item);\r\n    }\r\n\r\n    /**\r\n     * Renders mention item display\r\n     */\r\n    private renderMentionItem(item: any, searchTerm: any): string {\r\n\r\n        if (!item || typeof item !== 'object') {\r\n            return 'Invalid Item';\r\n        }\r\n\r\n        const displayValue = item.value && typeof item.value === 'string' && item.value.length > 0\r\n            ? item.value\r\n            : 'Unknown Item';\r\n\r\n        const itemDisplay = `üë§ ${displayValue}`;\r\n        return itemDisplay;\r\n    }\r\n\r\n    /**\r\n     * Handles mention source data retrieval and filtering\r\n     */\r\n    private handleMentionSource(searchTerm: any, renderList: any, mentionChar: any): void {\r\n        this.safeExecute(() => {\r\n\r\n            // Validate renderList function\r\n            if (typeof renderList !== 'function') {\r\n                return;\r\n            }\r\n\r\n            const safeSearchTerm = searchTerm === null || searchTerm === undefined ? '' : String(searchTerm);\r\n            const safeMentionChar = mentionChar === null || mentionChar === undefined ? '@' : String(mentionChar);\r\n\r\n            // Reset searchStr for fresh processing\r\n            if (safeMentionChar === '@' || safeMentionChar === '#') {\r\n                this.searchStr = null;\r\n                this.lastMentionSearchTerm = ' ';\r\n            }\r\n\r\n            // If API search is enabled, handle API-based search\r\n            if (this.isApiSearchEnabledForMention) {\r\n\r\n                // Check if search term has actually changed\r\n                if (this.lastMentionSearchTerm === safeSearchTerm) {\r\n                    return; // Skip duplicate calls with same search term\r\n                }\r\n                if (this.mentionSearchTimeout) {\r\n                    clearTimeout(this.mentionSearchTimeout);\r\n                }\r\n\r\n                // Store current render list and search term\r\n                this.currentRenderList = renderList;\r\n                this.currentSearchTerm = safeSearchTerm;\r\n                this.lastMentionSearchTerm = safeSearchTerm;\r\n\r\n                // Show loading state immediately\r\n                renderList([{ id: 'loading', value: 'Loading...' }], safeSearchTerm);\r\n\r\n                // Debounce the API call\r\n                this.mentionSearchTimeout = setTimeout(() => {\r\n                    this.handleApiBasedMentionSearch(safeSearchTerm, renderList, safeMentionChar);\r\n                },  this.searchDebounceTime); // 300ms debounce delay\r\n\r\n                this.timeoutIds.push(this.mentionSearchTimeout);\r\n                return;\r\n            }\r\n\r\n            let values = this.getMentionValues();\r\n\r\n            if (!this.isValidArray(values, 'mention values')) {\r\n                values = [];\r\n            }\r\n\r\n            values = this.sanitizeMentionValues(values);\r\n\r\n            if (values.length === 0) {\r\n                this.handleEmptyMentionValues(renderList, safeSearchTerm);\r\n                return;\r\n            }\r\n\r\n            const isEmptySearch = !safeSearchTerm || safeSearchTerm.length === 0 || safeSearchTerm.trim() === '';\r\n\r\n            if (isEmptySearch) {\r\n                this.handleEmptySearch(values, renderList, safeSearchTerm);\r\n            } else {\r\n                this.handleFilteredSearch(values, renderList, safeSearchTerm);\r\n            }\r\n\r\n            this.searchStr = safeSearchTerm;\r\n\r\n        }, 'CRITICAL ERROR in mention source function', () => {\r\n            this.renderEmergencyFallback(renderList);\r\n        });\r\n    }\r\n\r\n    handleApiBasedMentionSearch(searchTerm: string, renderList: Function, mentionChar: string): void {\r\n        this.currentRenderList = renderList;\r\n        this.currentSearchTerm = searchTerm;\r\n        this.updateDataOnChange(searchTerm);\r\n        setTimeout(() => {\r\n            this.onComponentEvent('OnKeyUp', {\r\n                internalAPIResponseEmitter: this.internalAPIResponseEmitter\r\n            });\r\n        }, 100);\r\n    }\r\n\r\n    private updateDataOnChange(term: string) {\r\n        const apiData = {\r\n            id: this.requestApiKeyForSearch,\r\n            apiUrl: '',\r\n            apiKey: this.requestApiKeyForSearch,\r\n            value: term\r\n        };\r\n        this.apiDataService.setApiData(Object.assign({}, apiData));\r\n    }\r\n\r\n    /**\r\n     * Gets mention values from allOptions or external API\r\n     */\r\n    private getMentionValues(): any[] {\r\n        let values = this.allOptions || [];\r\n\r\n        if (values.length === 0 && this.additionalParameter['externalApiOptionValue']) {\r\n            const externalOptions = this.additionalParameter['externalApiOptionValue'] || [];\r\n            if (this.isNonEmptyArray(externalOptions, 'external options')) {\r\n                values = externalOptions;\r\n                this.allOptions = values;\r\n            }\r\n        }\r\n\r\n        // if (values.length === 0) {\r\n        //     if (this.refreshMentionData() && this.isNonEmptyArray(this.allOptions, 'refreshed options')) {\r\n        //         values = this.allOptions;\r\n        //     }\r\n        // }\r\n\r\n        return values;\r\n    }\r\n\r\n    /**\r\n     * Sanitizes mention values array\r\n     */\r\n    private sanitizeMentionValues(values: any[]): any[] {\r\n        return this.validateDataArray(values, 'mention values');\r\n    }\r\n\r\n    /**\r\n     * Handles empty mention values scenario\r\n     */\r\n    private handleEmptyMentionValues(renderList: Function, searchTerm: string): void {\r\n        try {\r\n            renderList([], searchTerm);\r\n        } catch (e) {\r\n            console.error('Failed to render empty list:', e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handles empty search (show all values)\r\n     */\r\n    private handleEmptySearch(values: any[], renderList: Function, searchTerm: string): void {\r\n\r\n        try {\r\n            const valueStrings = values.map(v => v && v.value && typeof v.value === 'string' ? `\"${v.value}\"` : '\"Invalid\"').join(', ');\r\n        } catch (e) {\r\n            console.warn('Error creating value string:', e);\r\n        }\r\n\r\n\r\n        this.safeRenderList(renderList, values, searchTerm, 'values');\r\n    }\r\n\r\n    /**\r\n     * Handles filtered search (search with term)\r\n     */\r\n    private handleFilteredSearch(values: any[], renderList: Function, searchTerm: string): void {\r\n        const matches: any[] = [];\r\n        values.forEach((entry, index) => {\r\n            try {\r\n                if (this.isValidEntry(entry, index)) {\r\n                    const entryValue = entry.value.toLowerCase();\r\n                    const searchTermLower = searchTerm.toLowerCase();\r\n\r\n                    if (entryValue.indexOf(searchTermLower) !== -1) {\r\n                        matches.push(entry);\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error(`Error processing entry at index ${index}:`, error);\r\n            }\r\n        });\r\n        if (matches.length > 0) {\r\n            try {\r\n                const matchStrings = matches.map(m => m && m.value && typeof m.value === 'string' ? `\"${m.value}\"` : '\"Invalid\"').join(', ');\r\n            } catch (e) {\r\n                console.warn('Error creating match string:', e);\r\n            }\r\n        }\r\n\r\n\r\n        this.safeRenderList(renderList, matches, searchTerm, 'matches');\r\n    }\r\n\r\n    /**\r\n     * Renders emergency fallback when everything fails\r\n     */\r\n    private renderEmergencyFallback(renderList: Function): void {\r\n        try {\r\n            const emergencyFallback = [\r\n                { id: 1, value: 'Emergency Item 1' },\r\n                { id: 2, value: 'Emergency Item 2' }\r\n            ];\r\n            renderList(emergencyFallback, '');\r\n        } catch (fallbackError) {\r\n            try {\r\n                renderList([], '');\r\n            } catch (lastResortError) {\r\n                console.error('Complete failure - cannot render anything:', lastResortError);\r\n            }\r\n        }\r\n    }\r\n\r\n    selectImage() {\r\n        const input = document.createElement('input');\r\n        input.type = 'file';\r\n        input.accept = 'image/*';\r\n        input.click();\r\n        input.onchange = async () => {\r\n            const file = input.files?.[0];\r\n            if (file) {\r\n                let fileToCompress = file;\r\n                if (this.isHEIC(file)) {\r\n                    try {\r\n                        fileToCompress = await this.convertHEICToPNG(file);\r\n                    } catch (error) {\r\n                        console.error(error);\r\n                        return;\r\n                    }\r\n                }\r\n                const compressedImage = await this.compressImage(fileToCompress, 800, 600, 0.6);\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(compressedImage);\r\n                reader.onload = () => {\r\n                    const quillInstance = this.meQuillRef;\r\n                    if (!quillInstance) {\r\n                        return;\r\n                    }\r\n                    const range = quillInstance.getSelection();\r\n                    if (!range) {\r\n                        quillInstance.insertEmbed(quillInstance.getLength(), 'image', reader.result);\r\n                        this.updateEditorField();\r\n                    } else {\r\n\r\n                        quillInstance.insertEmbed(range.index, 'image', reader.result);\r\n                        this.updateEditorField();\r\n                    }\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    private isHEIC(file: File): boolean {\r\n        return (file.type === \"image/heic\" || file.name.split('.').pop().toLowerCase() === \"heic\");  // Check MIME type (it might be available in some browsers)\r\n    }\r\n\r\n    private convertHEICToPNG(file: any): Promise<File> {\r\n        return new Promise((resolve, reject) => {\r\n            heic2any({\r\n                blob: file,\r\n                toType: \"image/png\",\r\n            }).then((convertedBlob: Blob) => {\r\n                const pngFile = new File([convertedBlob], file.name.replace(/\\.heic$/i, \".png\"), {\r\n                    type: \"image/png\",\r\n                    lastModified: new Date().getTime()\r\n                });\r\n                resolve(pngFile);  // Resolve the promise with the pngFile\r\n            }).catch((error: any) => {\r\n                console.error(\"Error converting HEIC to PNG:\", error);\r\n                reject(error);  // Reject the promise in case of an error\r\n            });\r\n        });\r\n    }\r\n\r\n\r\n    updateEditorField() {\r\n        // after image upload need trigger change\r\n        const editor = this.quillEditor && this.quillEditor.quillEditor;\r\n        if (editor) {\r\n            editor.insertText(editor.getLength() - 1, '', 'user');\r\n\r\n            // Clear clipboard after editor field update\r\n            // setTimeout(() => {\r\n            //     this.clearClipboard();\r\n            // }, 100);\r\n        }\r\n    }\r\n\r\n    async compressImage(file: File, maxWidth: number, maxHeight: number, quality: number): Promise<File> {\r\n        return new Promise((resolve) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = (event) => {\r\n                const img = new Image();\r\n                img.src = event.target?.result as string;\r\n\r\n                img.onload = () => {\r\n                    const canvas = document.createElement('canvas');\r\n                    let width = img.width;\r\n                    let height = img.height;\r\n\r\n                    // Resize logic\r\n                    if (width > maxWidth) {\r\n                        height = (maxWidth / width) * height;\r\n                        width = maxWidth;\r\n                    }\r\n                    if (height > maxHeight) {\r\n                        width = (maxHeight / height) * width;\r\n                        height = maxHeight;\r\n                    }\r\n\r\n                    canvas.width = width;\r\n                    canvas.height = height;\r\n                    const ctx = canvas.getContext('2d');\r\n                    ctx?.drawImage(img, 0, 0, width, height);\r\n\r\n                    // Convert canvas to Blob\r\n                    canvas.toBlob((blob) => {\r\n                        if (blob) {\r\n                            resolve(new File([blob], file.name, { type: file.type, lastModified: Date.now() }));\r\n                        }\r\n                    }, file.type, quality);\r\n                };\r\n            };\r\n        });\r\n    }\r\n\r\n    updatePreview() {\r\n        this.sanitizedContent = this.sanitizer.bypassSecurityTrustHtml(this.inputValue);\r\n    }\r\n\r\n    /**\r\n     * Initialize editor modules early for template binding\r\n     */\r\n    private initializeEditorModules(): void {\r\n        this.editorModules = {}; // Reset to completely empty object\r\n\r\n        // Use utility methods for toolbar configuration\r\n        if (this.additionalParameter['CEE_editor_options']) {\r\n            this.editorModules = this.createCustomToolbarConfig();\r\n        } else {\r\n            this.editorModules = this.createDefaultToolbarConfig();\r\n        }\r\n\r\n        this.isApiSearchEnabledForMention = this.additionalParameter['CEE_Enable_API_Search_For_Mention'] && this.additionalParameter['CEE_Enable_API_Search_For_Mention'] === 'true';\r\n        this.searchDebounceTime = this.additionalParameter['CEE_Search_Debounce_Time'] ? parseInt(this.additionalParameter['CEE_Search_Debounce_Time']): 300;\r\n        let ceeTagging = this.additionalParameter['CEE_tagging'] && this.additionalParameter['CEE_tagging'] === \"true\" ? true : false;\r\n        \r\n        \r\n        if (this.isApiSearchEnabledForMention && ceeTagging) {\r\n            this.setupSearchApiCallback();\r\n        }\r\n\r\n        if (ceeTagging) {\r\n            this.setupMentionSystem();\r\n        }\r\n\r\n        // Trigger change detection to update template binding\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * Sets up the mention system for tagging functionality\r\n     */\r\n    private setupMentionSystem(): void {\r\n        if (!this.isNonEmptyArray(this.allOptions, 'mention options')) {\r\n            this.allOptions = [];\r\n            this.loadMentionOptions();\r\n        }\r\n\r\n        // Ensure we have valid mention options\r\n        if (!this.isValidArray(this.allOptions, 'mention options')) {\r\n            this.allOptions = [];\r\n        }\r\n\r\n        // Deep validate each option\r\n        this.allOptions = this.allOptions.map((option, index) => {\r\n            if (!option || typeof option !== 'object') {\r\n                return { id: index + 1, value: `Option ${index + 1}` };\r\n            }\r\n\r\n            return {\r\n                id: option.id !== undefined && option.id !== null ? option.id : index + 1,\r\n                value: option.value && typeof option.value === 'string' && option.value.length > 0\r\n                    ? option.value\r\n                    : `Option ${index + 1}`\r\n            };\r\n        });\r\n\r\n        this.editorModules['mention'] = this.createMentionConfig();\r\n    }\r\n\r\n    /**\r\n     * Loads mention options from external API\r\n     */\r\n    private loadMentionOptions(): void {\r\n        if (this.additionalParameter['externalApiOptionValue']) {\r\n            this.addSafeTimeout(() => {\r\n                this.safeExecute(() => {\r\n                    var runtimeDropDownData = this.apiDataService.getApiDataByHandler(this.additionalParameter['externalApiOptionValue']);\r\n\r\n                    if (this.isNonEmptyArray(runtimeDropDownData, 'runtime dropdown data')) {\r\n                        this.allOptions = runtimeDropDownData;\r\n                    } else {\r\n                        const externalOptions = this.additionalParameter['externalApiOptionValue'];\r\n                        if (this.isNonEmptyArray(externalOptions, 'external options')) {\r\n                            this.allOptions = externalOptions;\r\n                        }\r\n                    }\r\n                }, 'Error loading API data asynchronously');\r\n            }, 500);\r\n\r\n            // Also try immediate sync call in case data is already available\r\n            this.safeExecute(() => {\r\n                var immediateTryData = this.apiDataService.getApiDataByHandler(this.additionalParameter['externalApiOptionValue']);\r\n                if (this.isNonEmptyArray(immediateTryData, 'immediate API data')) {\r\n                    this.allOptions = immediateTryData;\r\n                }\r\n            }, 'Immediate API call not ready, will try async');\r\n        }\r\n    }\r\n\r\n    getEditorInstance(editor: Quill) {\r\n        // Set the meQuillRef to the editor instance provided by quill-editor component\r\n        this.meQuillRef = editor;\r\n\r\n        // Ensure modules are properly configured before proceeding\r\n        if (!this.editorModules || Object.keys(this.editorModules).length === 0) {\r\n            this.initializeEditorModules();\r\n        }\r\n\r\n        this.forceKeyboardBindingRestoration(editor);\r\n        this.debugKeyboardBindings(editor);\r\n\r\n        this.addSafeTimeout(() => {\r\n            this.safeExecute(() => {\r\n                const toolbar = editor.getModule('toolbar') as any;\r\n                if (toolbar && toolbar.container) {\r\n                    const videoButtons = toolbar.container.querySelectorAll('.ql-video');\r\n                    if (videoButtons.length > 0) {\r\n                        videoButtons.forEach((btn: any) => {\r\n                            btn.remove();\r\n                        });\r\n                    }\r\n                }\r\n            }, 'Error checking for video buttons');\r\n        }, 100);\r\n        if (this.additionalParameter['CEE_tagging'] === \"true\") {\r\n            const mentionModule = editor.getModule('mention');\r\n        }\r\n\r\n        // Load existing content if available\r\n        if (this.inputValue && this.inputValue.trim() !== '') {\r\n            // Set flag to prevent event loops during programmatic content setting\r\n            this.isProgrammaticallySettingContent = true;\r\n            this.meQuillRef.clipboard.dangerouslyPasteHTML(this.inputValue);\r\n\r\n            setTimeout(() => {\r\n                if (this.meQuillRef) {\r\n                    const length = this.meQuillRef.getLength();\r\n                    this.meQuillRef.setSelection(length - 1, 0);\r\n\r\n                    // Clear clipboard after content is loaded\r\n                    // this.clearClipboard();\r\n\r\n                    // Reset flag after content is set\r\n                    setTimeout(() => {\r\n                        this.isProgrammaticallySettingContent = false;\r\n                    }, 100);\r\n                }\r\n            }, 100);\r\n        }\r\n\r\n        setTimeout(() => {\r\n            const mentionModule = editor.getModule('mention');\r\n            if (!mentionModule && this.additionalParameter['CEE_tagging'] === \"true\") {\r\n                try {\r\n                    const availableModules = [];\r\n                    ['toolbar', 'keyboard', 'history', 'clipboard', 'uploader', 'mention', 'imageResize'].forEach(moduleName => {\r\n                        const module = editor.getModule(moduleName);\r\n                        if (module) {\r\n                            availableModules.push(moduleName);\r\n                        }\r\n                    });\r\n                } catch (e) {\r\n                    console.warn('‚ö†Ô∏è Error checking available modules:', e);\r\n                }\r\n                try {\r\n                    const MentionClass = (Quill as any).imports['modules/mention'];\r\n                    if (MentionClass) {\r\n                        const mentionConfig = this.editorModules['mention'];\r\n                        const mentionInstance = new MentionClass(editor, mentionConfig);\r\n                    }\r\n                } catch (e) {\r\n                    console.error('‚ùå Failed to manually instantiate mention module:', e);\r\n                }\r\n            }\r\n\r\n            if (mentionModule && this.additionalParameter['CEE_tagging'] === \"true\") {\r\n\r\n                // Force reset mention module to ensure denotation chars work\r\n                const mentionConfig = this.editorModules['mention'];\r\n                if (mentionConfig) {\r\n                    (mentionModule as any).mentionDenotationChars = mentionConfig.mentionDenotationChars;\r\n                    (mentionModule as any).allowedChars = mentionConfig.allowedChars;\r\n\r\n                    // Force re-bind the source function\r\n                    if (mentionConfig.source) {\r\n                        (mentionModule as any).options.source = mentionConfig.source;\r\n                    }\r\n                }\r\n                setTimeout(() => {\r\n                    this.applyMentionStylingFixes();\r\n                }, 1000);\r\n\r\n            }\r\n        }, 500); // Increased timeout to ensure module is fully loaded\r\n\r\n        // Add keyboard event listener to debug mention character detection\r\n        editor.root.addEventListener('input', (event) => {\r\n            const text = editor.getText();\r\n            const selection = editor.getSelection();\r\n            if (selection) {\r\n                const currentChar = text.charAt(selection.index - 1);\r\n            }\r\n        });\r\n\r\n        // Auto-detect URLs and convert to links - OPTIMIZED to reduce cursor jumping  \r\n        editor.on('text-change', (delta, oldDelta, source) => {\r\n            // Check for excessive text-change events\r\n            if (this.detectExcessiveEvents('text-change')) {\r\n                // Don't return here as text-change is critical, but log the issue  \r\n            }\r\n\r\n            // Skip URL detection if we're programmatically setting content\r\n            if (this.isProgrammaticallySettingContent) {\r\n                return;\r\n            }\r\n\r\n            if (source === 'user') {\r\n                const currentSelection = editor.getSelection();\r\n\r\n                // Clear previous timeout to debounce\r\n                if (this.urlDetectionTimeout) {\r\n                    clearTimeout(this.urlDetectionTimeout);\r\n                }\r\n\r\n                const text = editor.getText();\r\n                const hasUrl = /(https?:\\/\\/[^\\s]+|www\\.[^\\s]+)/i.test(text);\r\n\r\n                if (hasUrl && currentSelection) {\r\n                    // Only detect URLs if user has stopped typing for a moment\r\n                    this.urlDetectionTimeout = setTimeout(() => {\r\n                        // Check if cursor is still in a reasonable position\r\n                        const newSelection = editor.getSelection();\r\n                        if (newSelection && currentSelection) {\r\n                            // Only auto-detect if cursor hasn't moved significantly or if it's at the end of a potential URL\r\n                            const textBeforeCursor = text.substring(0, newSelection.index);\r\n                            const isAtEndOfUrl = /[^\\s]$/.test(textBeforeCursor) &&\r\n                                /(https?:\\/\\/[^\\s]+|www\\.[^\\s]+)$/.test(textBeforeCursor);\r\n\r\n                            if (Math.abs(newSelection.index - currentSelection.index) < 3 || isAtEndOfUrl) {\r\n                                this.autoDetectLinks(this.meQuillRef);\r\n                            }\r\n                        }\r\n                    }, 1000); // Longer delay to allow user to finish typing\r\n                }\r\n            }\r\n        });\r\n\r\n        // Handle paste events specifically with logging\r\n        editor.root.addEventListener('paste', (event: ClipboardEvent) => {\r\n            event.preventDefault();\r\n\r\n            // Clear clipboard after preventing default paste\r\n            // this.clearClipboard();\r\n        });\r\n        // Handle input events for better coverage\r\n        editor.root.addEventListener('input', (event) => {\r\n            const selectionBeforeInput = editor.getSelection();\r\n        });\r\n\r\n        // For handling Drag n Drop inside Quill Editor\r\n        editor.root.addEventListener('drop', (event: DragEvent) => {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            this.enableUploadOnDragOver(false);\r\n            if (event.dataTransfer && event.dataTransfer.files.length > 0) {\r\n                const validFiles: File[] = Array.from(event.dataTransfer.files).filter(file => file.type.startsWith('image/'));\r\n                if (validFiles.length == 0) return;\r\n                const timeoutId = setTimeout(() => {\r\n                    this.setFilesToEditor(validFiles);\r\n                }, 100);\r\n                this.timeoutIds.push(timeoutId);\r\n            }\r\n        }, true);\r\n    }\r\n\r\n    autoDetectLinks(editor) {\r\n        const delta = editor.getContents();\r\n        // Store current cursor position\r\n        const currentSelection = editor.getSelection();\r\n        const currentIndex = currentSelection ? currentSelection.index : editor.getLength() - 1;\r\n\r\n        // Track position in the editor\r\n        let currentPos = 0;\r\n        let hasChanges = false;\r\n\r\n        // Process each operation in the delta\r\n        if (delta && delta.ops) {\r\n            for (let i = 0; i < delta.ops.length; i++) {\r\n                const op = delta.ops[i];\r\n\r\n                if (op.insert && typeof op.insert === 'string') {\r\n                    const text = op.insert;\r\n                    const urlRegex = /(https?:\\/\\/[^\\s]+|www\\.[^\\s]+|[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\\.[a-zA-Z]{2,}[^\\s]*)/g;\r\n                    let match;\r\n\r\n                    // Reset regex for this text segment\r\n                    urlRegex.lastIndex = 0;\r\n\r\n                    while ((match = urlRegex.exec(text)) !== null) {\r\n                        const url = match[0];\r\n                        const urlStartInText = match.index;\r\n                        const urlStartInEditor = currentPos + urlStartInText;\r\n                        const urlLength = url.length;\r\n\r\n                        // Check if this URL is already formatted as a link\r\n                        const urlFormat = editor.getFormat(urlStartInEditor, urlLength);\r\n                        if (!urlFormat.link) {\r\n\r\n                            // Look backwards from current operation to find mentions to include\r\n                            let linkStartPos = urlStartInEditor;\r\n                            let mentionsFound = [];\r\n\r\n                            // Check preceding operations for mentions\r\n                            for (let j = i - 1; j >= 0; j--) {\r\n                                const prevOp = delta.ops[j];\r\n\r\n                                if (prevOp.insert && typeof prevOp.insert === 'string') {\r\n                                    // Check if this is just whitespace\r\n                                    if (prevOp.insert.trim() === '') {\r\n                                        // Skip whitespace, continue looking for mentions\r\n                                        continue;\r\n                                    } else {\r\n                                        // Non-whitespace text without mention formatting - stop here\r\n                                        if (!prevOp.attributes || !prevOp.attributes.mention) {\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                }\r\n\r\n                                // If this operation has mention formatting, include it\r\n                                if (prevOp.attributes && prevOp.attributes.mention) {\r\n                                    const mentionLength = typeof prevOp.insert === 'string' ? prevOp.insert.length : 1;\r\n                                    linkStartPos -= mentionLength;\r\n                                    mentionsFound.unshift(prevOp);\r\n                                } else {\r\n                                    // Stop if we hit an operation without mention formatting\r\n                                    break;\r\n                                }\r\n                            }\r\n\r\n                            // Calculate total link length including mentions\r\n                            const totalLinkLength = (urlStartInEditor + urlLength) - linkStartPos;\r\n\r\n                            // Ensure URL has proper protocol\r\n                            const validUrl = this.ensureProtocol(url);\r\n\r\n                            // Format the entire range (mentions + URL) as a link\r\n                            editor.formatText(linkStartPos, totalLinkLength, 'link', validUrl);\r\n                            hasChanges = true;\r\n                        }\r\n                    }\r\n\r\n                    // Update position tracker\r\n                    currentPos += text.length;\r\n                } else if (op.insert) {\r\n                    // Handle non-string inserts (like embeds)\r\n                    currentPos += 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (hasChanges) {\r\n            this.updateEditorField();\r\n            // IMPROVED: Better cursor position preservation\r\n            setTimeout(() => {\r\n                if (editor && currentSelection) {\r\n                    const newSelection = editor.getSelection();\r\n                    const newLength = editor.getLength();\r\n\r\n                    // Determine the best position to restore cursor\r\n                    let restoreIndex = currentIndex;\r\n\r\n                    // If cursor moved significantly or is at position 0, try to restore intelligently\r\n                    if (!newSelection || newSelection.index === 0 || Math.abs(newSelection.index - currentIndex) > 5) {\r\n                        // Check if we're at the end of the text\r\n                        if (currentIndex >= newLength - 1) {\r\n                            restoreIndex = Math.max(0, newLength - 1);\r\n                        } else {\r\n                            // Try to maintain relative position, but ensure it's valid\r\n                            restoreIndex = Math.min(Math.max(0, currentIndex), newLength - 1);\r\n                        }\r\n\r\n                        editor.setSelection(restoreIndex, 0);\r\n                    }\r\n                }\r\n            }, 10);\r\n        }\r\n    }\r\n\r\n    handleLinkClick(value: any) {\r\n        const range = this.meQuillRef.getSelection();\r\n\r\n        if (value) {\r\n            let currentLink = '';\r\n\r\n            if (range && range.length > 0) {\r\n                const currentFormat = this.meQuillRef.getFormat(range);\r\n                currentLink = (currentFormat.link as string) || '';\r\n            }\r\n\r\n            this.openLinkDialog(currentLink).then((href) => {\r\n                if (href !== null && href !== undefined) {\r\n                    if (href === '') {\r\n                        if (range && range.length > 0) {\r\n                            this.meQuillRef.format('link', false);\r\n                        }\r\n                    } else {\r\n                        const validUrl = this.ensureProtocol(href);\r\n\r\n                        if (range && range.length > 0) {\r\n                            const selectedContent = this.meQuillRef.getContents(range.index, range.length);\r\n                            let hasMentions = false;\r\n\r\n                            if (selectedContent && selectedContent.ops) {\r\n                                selectedContent.ops.forEach((op, index) => {\r\n                                    if (op.attributes && op.attributes.mention) {\r\n                                        hasMentions = true;\r\n                                    }\r\n                                });\r\n                            }\r\n\r\n                            if (hasMentions) {\r\n                                this.meQuillRef.formatText(range.index, range.length, 'link', validUrl);\r\n                                setTimeout(() => {\r\n                                    const updatedContent = this.meQuillRef.getContents(range.index, range.length);\r\n                                    if (updatedContent && updatedContent.ops) {\r\n                                        updatedContent.ops.forEach((op, opIndex) => {\r\n                                            if (op.attributes && op.attributes.mention && (!op.attributes.link || op.attributes.link !== validUrl)) {\r\n                                                // Re-apply mention formatting if it was lost\r\n                                                const opStart = range.index + this.getOpOffset(updatedContent.ops, opIndex);\r\n                                                const opLength = typeof op.insert === 'string' ? op.insert.length : 1;\r\n                                                this.meQuillRef.formatText(opStart, opLength, 'mention', op.attributes.mention);\r\n                                                this.meQuillRef.formatText(opStart, opLength, 'link', validUrl);\r\n                                            }\r\n                                        });\r\n                                    }\r\n                                }, 50);\r\n                            } else {\r\n                                // No mentions, standard link formatting\r\n                                this.meQuillRef.format('link', validUrl);\r\n                            }\r\n                        } else {\r\n                            const insertIndex = range ? range.index : this.meQuillRef.getLength();\r\n                            this.meQuillRef.insertText(insertIndex, href, 'user');\r\n                            this.meQuillRef.formatText(insertIndex, href.length, 'link', validUrl);\r\n                            this.meQuillRef.setSelection(insertIndex + href.length);\r\n                        }\r\n                    }\r\n                    this.onTouched(this.contentCtrl);\r\n                    this.triggerContentChange();\r\n                    this.updateEditorField();\r\n                }\r\n            });\r\n        } else {\r\n            if (range && range.length > 0) {\r\n                this.meQuillRef.format('link', false);\r\n                this.onTouched(this.contentCtrl);\r\n                this.triggerContentChange();\r\n                this.updateEditorField();\r\n            }\r\n        }\r\n    }\r\n\r\n    // Helper function to calculate offset for operations in Delta\r\n    private getOpOffset(ops: any[], targetIndex: number): number {\r\n        let offset = 0;\r\n        for (let i = 0; i < targetIndex && i < ops.length; i++) {\r\n            const op = ops[i];\r\n            if (op.insert) {\r\n                offset += typeof op.insert === 'string' ? op.insert.length : 1;\r\n            }\r\n        }\r\n        return offset;\r\n    }\r\n\r\n    ensureProtocol(url: string): string {\r\n        if (!url) return '';\r\n\r\n        // Check if URL already has a protocol\r\n        if (!/^https?:\\/\\//i.test(url)) {\r\n            // Add https:// if no protocol is present\r\n            return 'https://' + url;\r\n        }\r\n\r\n        return url;\r\n    }\r\n    private openLinkDialog(currentUrl: string = ''): Promise<string | null> {\r\n        return new Promise((resolve) => {\r\n            // Create a simple input dialog\r\n            const url = window.prompt('Enter the URL:', currentUrl);\r\n            resolve(url);\r\n        });\r\n    }\r\n    triggerContentChange() {\r\n        // Check for excessive events that might cause freezing\r\n        if (this.detectExcessiveEvents('triggerContentChange')) {\r\n            console.error('üõë BLOCKING triggerContentChange due to potential infinite loop');\r\n            return;\r\n        }\r\n\r\n        // Trigger a content change event to save the updated content\r\n        const html = this.meQuillRef.root.innerHTML;\r\n        this.inputValue = html;\r\n        this.isValid = this.contentCtrl.valid;\r\n\r\n        // CRITICAL FIX: Use debounced updateFieldData\r\n        this.debouncedUpdateFieldData(this.inputValue, this.isValid, 200);\r\n\r\n        this.onComponentEvent('OnChangeValue');\r\n        this.onComponentEvent('OnFocusOut');\r\n        this.onDirty();\r\n        this.contentCtrl.control.markAsDirty();\r\n\r\n        // Clear clipboard after content changes\r\n        // setTimeout(() => {\r\n        //     this.clearClipboard();\r\n        // }, 200);\r\n    }\r\n\r\n    onContentChanged(event: any) {\r\n        // Check for excessive events that might cause freezing\r\n        if (this.detectExcessiveEvents('onContentChanged')) {\r\n            console.error('üõë BLOCKING onContentChanged due to potential infinite loop');\r\n            return;\r\n        }\r\n\r\n        // CRITICAL FIX: Skip if this is an API-triggered event to break circular dependency\r\n        if (event?.source === 'api') {\r\n            return;\r\n        }\r\n\r\n        if (event && (event.source == \"user\" || event.source == \"api\")) {\r\n            this.isValid = this.contentCtrl.valid;\r\n            this.inputValue = event.html; // Make sure to update inputValue\r\n            this.onChange(event.html);\r\n\r\n            const newContent = event.html;\r\n            const oldContent = event.oldDelta?.ops.map(op => op.insert).join('') || '';\r\n            if (newContent !== oldContent) {\r\n                // CRITICAL FIX: Use debounced updateFieldData to prevent circular dependency\r\n                this.debouncedUpdateFieldData(this.inputValue, this.isValid, 150);\r\n\r\n                this.onComponentEvent('OnChangeValue');\r\n                this.onComponentEvent('OnFocusOut');\r\n                this.onDirty();\r\n                this.contentCtrl.control.markAsDirty();\r\n            }\r\n        }\r\n    }\r\n\r\n    onChange(newValue) {\r\n    }\r\n\r\n    onTouched(control: any) {\r\n        // Check for excessive events that might cause freezing\r\n        if (this.detectExcessiveEvents('onTouched')) {\r\n            console.error('üõë BLOCKING onTouched due to potential infinite loop');\r\n            return;\r\n        }\r\n\r\n        if (control && control.control) {\r\n            control.control.markAsTouched();\r\n            if (this.meQuillRef) {\r\n                this.inputValue = this.meQuillRef.root.innerHTML;\r\n                this.isValid = control.valid;\r\n\r\n                // CRITICAL FIX: Use debounced updateFieldData\r\n                this.debouncedUpdateFieldData(this.inputValue, this.isValid, 100);\r\n            }\r\n        }\r\n    }\r\n\r\n    onSessionDataUpdated(value: any): void {\r\n        this.isValid = this.contentCtrl.valid;\r\n        this.updateFieldData(value, this.isValid);\r\n        this.onComponentEvent('OnChangeValue');\r\n        this.onComponentEvent('OnFocusOut');\r\n        this.setModalorSanckBarMessage(this.fieldData.unique_id, value);\r\n        this.onDirty();\r\n    }\r\n\r\n    onEmptySession(get_data: any) {\r\n        let data = [];\r\n        let associatedData = [];\r\n        let unique_id_value = [];\r\n        if (get_data.unique_ids.length > 0) {\r\n            data = get_data.unique_ids;\r\n            unique_id_value = [this.appData.id];\r\n        } else {\r\n            data = get_data.apiKeys;\r\n            if (this.isSingleApiKey) {\r\n                unique_id_value = [this.fieldData.api_key];\r\n            } else {\r\n                unique_id_value = [...unique_id_value,\r\n                ...this.apiKeyUtil.getMultipleApiKeys(\r\n                    this.apiKeyUtil.getConcatenatedApiKeys(\r\n                        this.fieldData.response_api_key))];\r\n                unique_id_value = [\r\n                    ...unique_id_value,\r\n                    ...this.apiKeyUtil.getMultipleApiKeys(this.fieldData.request_api_key)];\r\n            }\r\n        }\r\n        if (get_data.isAssociated) {\r\n            if (data.some(r => unique_id_value.includes(r))) {\r\n                const values = this.getAssociatedFields();\r\n                if (values.includes(this.undoRedoUtil.getCurrentId())) {\r\n                    // associatedData = new Array(unique_id_value);\r\n                    associatedData = unique_id_value;\r\n                }\r\n            }\r\n        }\r\n        (get_data.isAssociated ? associatedData : data).forEach(elm => {\r\n            if ((unique_id_value).includes(elm)) {\r\n                // TODO Update\r\n                let value = '';\r\n                this.inputValue = value;\r\n                if (this.fieldData.additional_parameters && this.fieldData.additional_parameters.length > 0) {\r\n                    for (const paramter of this.fieldData.additional_parameters) {\r\n                        this.additionalParameter[paramter.parameter_type] = paramter.value;\r\n                        if (paramter.parameter_type === 'default_value') {\r\n                            this.inputValue = paramter.value;\r\n                            value = paramter.value;\r\n                        }\r\n                    }\r\n                }\r\n                this.updateFieldData(value);\r\n                this.showErrorOnNext = false;\r\n                this.valid = true;\r\n                if (this.contentCtrl) {\r\n                    this.contentCtrl.reset(value);\r\n                    this.contentCtrl.control.markAsUntouched();\r\n                    this.contentCtrl.control.markAsPristine();\r\n                    this.contentCtrl.control.updateValueAndValidity();\r\n                }\r\n                return;\r\n            }\r\n        });\r\n    }\r\n\r\n    handleCustomFunction(get_data: any) {\r\n        let data = [];\r\n        let unique_id_value = '';\r\n        if (typeof get_data === 'object') {\r\n            Object.keys(get_data).forEach((key, value) => {\r\n                data.push(key);\r\n            });\r\n            unique_id_value = this.fieldData.unique_id;\r\n        }\r\n        if (data.includes(unique_id_value)) {\r\n            this.inputValue = get_data[unique_id_value];\r\n            this.updateFieldData(this.inputValue);\r\n        }\r\n    }\r\n\r\n    onAPICallback(data: any): void {\r\n        this.fieldData = this.setDynamicLabelUtil.getDynamicValue(this.fieldData, data);\r\n        const apiValue = this.setApiCallBackDataUtil.setApiCallBackData(this.fieldData, data);\r\n        if (apiValue !== null) {\r\n            this.isValid = true;\r\n            this.inputValue = apiValue;\r\n            this.updateFieldData(this.inputValue, this.isValid);\r\n            const timeoutId = setTimeout(() => {\r\n                if (this.meQuillRef) {\r\n                    this.meQuillRef.clipboard.dangerouslyPasteHTML(this.inputValue);\r\n\r\n                    // CRITICAL: Set cursor to the end after API content load\r\n                    setTimeout(() => {\r\n                        if (this.meQuillRef) {\r\n                            const length = this.meQuillRef.getLength();\r\n                            this.meQuillRef.setSelection(length - 1, 0);\r\n\r\n                            // Clear clipboard after API content is loaded\r\n                            // this.clearClipboard();\r\n                        }\r\n                    }, 50);\r\n                }\r\n            }, 0);\r\n            this.timeoutIds.push(timeoutId);\r\n        }\r\n\r\n        // from additionalParameter with type externalApiOptionValue\r\n        if (this.fieldData.additional_parameters && this.fieldData.additional_parameters.length > 0) {\r\n            for (const parameter of this.fieldData.additional_parameters) {\r\n                if (parameter.parameter_type === 'externalApiOptionValue') {\r\n                    const externalApiOptionValue = this.getExternalApiOptionValue(parameter.value, data);\r\n                    if (externalApiOptionValue !== null) {\r\n                        // CRITICAL FIX: Ensure allOptions is always an array before pushing\r\n                        if (!this.allOptions || !Array.isArray(this.allOptions)) {\r\n                            this.allOptions = [];\r\n                        }\r\n\r\n                        if (Array.isArray(externalApiOptionValue)) {\r\n                            externalApiOptionValue.forEach((val) => {\r\n                                if (parameter.value && parameter.value.split('[*]')[parameter.value.split('[*]').length - 1] == '' && typeof val == 'object') {\r\n                                    this.allOptions.push({ id: val['value'], value: val['name'] });\r\n                                } else {\r\n                                    this.allOptions.push({ id: val.split('||')[0], value: val.split('||')[val.split('||').length - 1] });\r\n                                }\r\n                            });\r\n                        } else {\r\n                            console.error('Something Went Wrong in editor !!!');\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onSetSessionData(apiKey: string, value: any) {\r\n        super.onSetSessionData(apiKey, value);\r\n    }\r\n\r\n    concatData() { }\r\n\r\n    setFieldValueOnSetValuesEvent(data: object) {\r\n        if (data) {\r\n            if (data['uniqueIds'].includes(this.fieldData.unique_id)) {\r\n                this.inputValue = data['values'].length > 0 ?\r\n                    data['values'][data['uniqueIds'].indexOf(this.fieldData.unique_id)] :\r\n                    data['values'][0];\r\n                // of triggerUpdate is true then update the field value or update value and emit conditions event\r\n                this[data['triggerUpdate'] ? 'updateFieldEntity' : 'updateFieldData'](this.inputValue);\r\n            }\r\n        }\r\n    }\r\n\r\n    setFieldStateOnStateChangeEvent(data: object) {\r\n    }\r\n\r\n    updateStateHistory(data: any): void {\r\n        // throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n    toggleLanguage(data: object) {\r\n        // const changeMap = {\r\n        //     field_label: 'fieldData.field_label',\r\n        //     placeholder_text: 'fieldData.placeholder_text',\r\n        //     tooltip: 'fieldData.tooltip',\r\n        //     'additional_parameters[*]Aria-Label': 'AdditionalParameter[\\'Aria-Label\\']'\r\n        // };\r\n        // for (const value of Object.keys(changeMap)) {\r\n        //     const langVal = this.switchLang(value, data, changeMap);\r\n        //     if (langVal) {\r\n        //         this[langVal.key] = langVal.val;\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        // Handle critical changes that require component reinitialization for generic blocks\r\n        if (changes.fieldData && !changes.fieldData.firstChange && this.isInitialized) {\r\n            this.reinitializeEditor();\r\n        }\r\n\r\n        if (changes.additionalParameter && !changes.additionalParameter.firstChange && this.isInitialized) {\r\n            // Check if tagging configuration changed\r\n            const oldTagging = changes.additionalParameter.previousValue?.['CEE_tagging'];\r\n            const newTagging = changes.additionalParameter.currentValue?.['CEE_tagging'];\r\n            if (oldTagging !== newTagging) {\r\n                this.reinitializeEditor();\r\n            }\r\n        }\r\n\r\n        if (changes.editableCondition) {\r\n            this.setConditions(changes.editableCondition.currentValue, 'isEditable');\r\n        }\r\n        if (changes.visibleCondition) {\r\n            this.setConditions(changes.visibleCondition.currentValue, 'isVisible');\r\n        }\r\n        if (changes.mandatoryCondition) {\r\n            this.setConditions(changes.mandatoryCondition.currentValue, 'isMandatory');\r\n        }\r\n    }\r\n\r\n    private reinitializeEditor(): void {\r\n        // Generate new component key to force recreation\r\n        this.componentKey = `cee-editor-${this.fieldData?.html_id || 'unknown'}-${Date.now()}`;\r\n\r\n        // Clean up current state\r\n        if (this.meQuillRef) {\r\n            try {\r\n                // CRITICAL: Clean up mention module thoroughly\r\n                this.cleanupMentionModule();\r\n\r\n                this.meQuillRef.off('text-change');\r\n                this.meQuillRef.off('selection-change');\r\n                this.meQuillRef.setContents([]);\r\n            } catch (e) {\r\n                console.warn('‚ö†Ô∏è Error during Quill cleanup:', e);\r\n            }\r\n            this.meQuillRef = null;\r\n        }\r\n        this.editorModules = {}\r\n        this.searchStr = null;\r\n        if (this.allOptions && Array.isArray(this.allOptions)) {\r\n            this.allOptions = this.allOptions.filter((entry, index) => {\r\n                if (!entry || typeof entry !== 'object') {\r\n                    return false;\r\n                }\r\n\r\n                if (!entry.hasOwnProperty('value') || entry.value === null || entry.value === undefined) {\r\n                    return false;\r\n                }\r\n\r\n                if (typeof entry.value !== 'string') {\r\n                    try {\r\n                        entry.value = String(entry.value);\r\n                    } catch (e) {\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                return entry.value.length > 0;\r\n            });\r\n        } else {\r\n            this.allOptions = [];\r\n        }\r\n\r\n        // Trigger fresh initialization\r\n        setTimeout(() => {\r\n            this.onViewDataInit();\r\n        }, 100);\r\n    }\r\n\r\n    /**\r\n     * Apply additional styling fixes to mention dropdowns after initialization\r\n     */\r\n    private applyMentionStylingFixes(): void {\r\n        try {\r\n            const mentionContainers = document.querySelectorAll('.ql-mention-list-container');\r\n\r\n            mentionContainers.forEach((container, index) => {\r\n                if (this.meQuillRef) {\r\n                    const selection = this.meQuillRef.getSelection();\r\n                    if (selection) {\r\n                        const bounds = this.meQuillRef.getBounds(selection.index);\r\n                        const editorElement = this.meQuillRef.root;\r\n                        const editorRect = editorElement.getBoundingClientRect();\r\n\r\n\r\n\r\n                        // Calculate position relative to the editor container\r\n                        const leftPosition = bounds.left;\r\n                        const topPosition = bounds.top + bounds.height - 5;\r\n\r\n                        (container as HTMLElement).style.left = `${leftPosition}px`;\r\n                        (container as HTMLElement).style.top = `${topPosition}px`;\r\n                    }\r\n                }\r\n\r\n                // Ensure proper z-index and other styling\r\n                (container as HTMLElement).style.zIndex = '9999';\r\n                (container as HTMLElement).style.position = 'absolute';\r\n                (container as HTMLElement).style.backgroundColor = 'white';\r\n                (container as HTMLElement).style.border = '1px solid #ddd';\r\n                (container as HTMLElement).style.borderRadius = '4px';\r\n                (container as HTMLElement).style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';\r\n                (container as HTMLElement).style.maxHeight = '200px';\r\n                (container as HTMLElement).style.overflowY = 'auto';\r\n                (container as HTMLElement).style.minWidth = '200px';\r\n                (container as HTMLElement).style.maxWidth = '300px';\r\n\r\n                // Apply styling to list items\r\n                const listItems = container.querySelectorAll('.ql-mention-list-item');\r\n                listItems.forEach((item) => {\r\n                    (item as HTMLElement).style.padding = '10px 12px';\r\n                    (item as HTMLElement).style.cursor = 'pointer';\r\n                    (item as HTMLElement).style.borderBottom = '1px solid #f0f0f0';\r\n                    (item as HTMLElement).style.fontSize = '14px';\r\n                    (item as HTMLElement).style.color = '#333';\r\n                    (item as HTMLElement).style.display = 'flex';\r\n                    (item as HTMLElement).style.alignItems = 'center';\r\n                    (item as HTMLElement).style.backgroundColor = 'white';\r\n\r\n                    // Add hover effects\r\n                    (item as HTMLElement).addEventListener('mouseenter', () => {\r\n                        (item as HTMLElement).style.backgroundColor = '#e8f4f8';\r\n                        (item as HTMLElement).style.color = '#0066cc';\r\n                    });\r\n\r\n                    (item as HTMLElement).addEventListener('mouseleave', () => {\r\n                        if (!(item as HTMLElement).classList.contains('selected')) {\r\n                            (item as HTMLElement).style.backgroundColor = 'white';\r\n                            (item as HTMLElement).style.color = '#333';\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n\r\n        } catch (error) {\r\n            console.warn('‚ö†Ô∏è Error applying mention styling fixes:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Detect if we're in a potential infinite loop or excessive event firing\r\n     */\r\n    private detectExcessiveEvents(methodName: string): boolean {\r\n        const now = Date.now();\r\n        const timeDiff = now - this.lastEventTimestamp;\r\n\r\n        if (timeDiff < 100) { // Less than 100ms between calls\r\n            this.eventCallsInShortTime++;\r\n\r\n            if (this.eventCallsInShortTime > 10) {\r\n\r\n                // Reset counter after logging\r\n                this.eventCallsInShortTime = 0;\r\n                return true;\r\n            }\r\n        } else {\r\n            this.eventCallsInShortTime = 0;\r\n        }\r\n\r\n        this.lastEventTimestamp = now;\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Debounced version of updateFieldData to prevent rapid successive calls\r\n     */\r\n    private debouncedUpdateFieldData(inputValue: string, isValid: boolean, delay: number = 100): void {\r\n        // Clear any existing timeout\r\n        if (this.debounceUpdateTimeout) {\r\n            clearTimeout(this.debounceUpdateTimeout);\r\n        }\r\n\r\n        // Set new timeout\r\n        this.debounceUpdateTimeout = setTimeout(() => {\r\n            if (!this.isUpdatingFieldData) {\r\n\r\n                this.isUpdatingFieldData = true;\r\n                try {\r\n                    this.updateFieldData(inputValue, isValid);\r\n                } finally {\r\n                    setTimeout(() => {\r\n                        this.isUpdatingFieldData = false;\r\n                    }, 50);\r\n                }\r\n            }\r\n        }, delay);\r\n\r\n        this.timeoutIds.push(this.debounceUpdateTimeout);\r\n    }\r\n\r\n    /**\r\n     * Log comprehensive event statistics for debugging (removed for production)\r\n     */\r\n    private logEventSummary(): void {\r\n        // Removed verbose logging for production\r\n    }\r\n\r\n    /**\r\n     * Clear the clipboard content to prevent unwanted pasting\r\n     */\r\n    // private clearClipboard(): void {\r\n    //     try {\r\n    //         console.log('üßπ Attempting to clear clipboard:', {\r\n    //             timestamp: new Date().toISOString(),\r\n    //             componentKey: this.componentKey\r\n    //         });\r\n\r\n    //         // Method 1: Try using the modern Clipboard API\r\n    //         if (navigator.clipboard && navigator.clipboard.writeText) {\r\n    //             navigator.clipboard.writeText('').then(() => {\r\n    //                 console.log('‚úÖ Clipboard cleared successfully using Clipboard API');\r\n    //             }).catch((error) => {\r\n    //                 console.warn('‚ö†Ô∏è Error clearing clipboard with Clipboard API:', error);\r\n    //                 this.fallbackClearClipboard();\r\n    //             });\r\n    //         } else {\r\n    //             // Method 2: Fallback for older browsers\r\n    //             this.fallbackClearClipboard();\r\n    //         }\r\n    //     } catch (error) {\r\n    //         console.error('‚ùå Error in clearClipboard method:', error);\r\n    //     }\r\n    // }\r\n\r\n    /**\r\n     * Fallback method to clear clipboard for older browsers\r\n     */\r\n    // private fallbackClearClipboard(): void {\r\n    //     try {\r\n    //         // Create a temporary input element\r\n    //         const tempInput = document.createElement('input');\r\n    //         tempInput.style.position = 'absolute';\r\n    //         tempInput.style.left = '-9999px';\r\n    //         tempInput.style.opacity = '0';\r\n    //         tempInput.value = '';\r\n\r\n    //         document.body.appendChild(tempInput);\r\n    //         tempInput.select();\r\n    //         tempInput.setSelectionRange(0, 0);\r\n\r\n    //         // Try to execute copy command to clear clipboard\r\n    //         const success = document.execCommand('copy');\r\n    //         if (success) {\r\n    //             console.log('‚úÖ Clipboard cleared using fallback method');\r\n    //         } else {\r\n    //             console.warn('‚ö†Ô∏è Fallback clipboard clear may not have worked');\r\n    //         }\r\n\r\n    //         // Clean up\r\n    //         document.body.removeChild(tempInput);\r\n    //     } catch (error) {\r\n    //         console.error('‚ùå Error in fallback clipboard clear:', error);\r\n    //     }\r\n    // }\r\n\r\n    /* ********************************************************* \r\n    *  Methods for Handling Drag n Drops inside editor block \r\n    *  including toolbar and remaining parts of editor\r\n    * **********************************************************/\r\n\r\n    //Handles Drag n Dropped files\r\n    async handleDrop(event: DragEvent) {\r\n        event.preventDefault();\r\n        if (event.dataTransfer && event.dataTransfer.files.length > 0) {\r\n            const validFiles: File[] = Array.from(event.dataTransfer.files).filter(file => file.type.startsWith('image/'));\r\n            if (validFiles.length == 0) return;\r\n            const timeoutId = setTimeout(() => {\r\n                if (this.uploadOutOfEditor) {\r\n                    this.setFilesToEditor(validFiles);\r\n                }\r\n            }, 100);\r\n            this.timeoutIds.push(timeoutId);\r\n        }\r\n    }\r\n\r\n    // Set files to editor\r\n    async setFilesToEditor(files: File[]) {\r\n        for (const file of files) {\r\n            await this.readImageFile(file);\r\n        }\r\n    }\r\n    // Read files\r\n    async readImageFile(file: File) {\r\n        const compressedImage = await this.compressImage(file, 800, 600, 0.6);\r\n        // console.log('Compressed file:', compressedImage);\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n            const base64 = reader.result as string;\r\n            this.insertImageIntoEditor(base64);\r\n        };\r\n        reader.readAsDataURL(compressedImage);\r\n    }\r\n    // Inserts images in to editor\r\n    insertImageIntoEditor(imageUrl: string) {\r\n        const quill = this.quillEditor.quillEditor;\r\n\r\n        if (!quill) {\r\n            console.error('Quill editor instance not found.');\r\n            return;\r\n        }\r\n\r\n        // Get current selection or set to end if there's no selection\r\n        const range = quill.getSelection(true) || { index: quill.getLength(), length: 0 };\r\n\r\n        quill.insertEmbed(range.index, 'image', imageUrl, 'user');\r\n        quill.setSelection(range.index + 1, 'user'); // move cursor after image\r\n    }\r\n\r\n    enableUploadOnDragOver(flag: boolean) {\r\n        this.uploadOutOfEditor = flag;\r\n    }\r\n\r\n    // Allows drag n drops\r\n    onDragOver(event: DragEvent) {\r\n        event.preventDefault(); // allow drop        \r\n        this.enableUploadOnDragOver(true);\r\n    }\r\n\r\n    /* ********************************************************* \r\n    *  Methods for Dynamic Mention Data Loading\r\n    * **********************************************************/\r\n\r\n    // Refresh mention data from API - called when data becomes available\r\n    refreshMentionData() {\r\n        if (this.additionalParameter['externalApiOptionValue']) {\r\n            try {\r\n                var runtimeDropDownData = this.apiDataService.getApiDataByHandler(this.additionalParameter['externalApiOptionValue']);\r\n\r\n                if (runtimeDropDownData && Array.isArray(runtimeDropDownData) && runtimeDropDownData.length > 0) {\r\n                    this.allOptions = runtimeDropDownData;\r\n                    return true;\r\n                } else {\r\n                    const externalOptions = this.additionalParameter['externalApiOptionValue'];\r\n                    if (externalOptions && Array.isArray(externalOptions) && externalOptions.length > 0) {\r\n                        this.allOptions = externalOptions;\r\n                        return true;\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.warn('‚ö†Ô∏è Error refreshing mention data:', error);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    handleApiMentionResponse(response: any) {\r\n        if (this.additionalParameter['externalApiOptionValue']) {\r\n            let parameter = this.additionalParameter['externalApiOptionValue']\r\n            const externalApiOptionValue = this.getExternalApiOptionValue(parameter, response);\r\n            if (externalApiOptionValue !== null) {\r\n                // CRITICAL FIX: Ensure allOptions is always an array before pushing\r\n                this.allOptions = [];\r\n                if (Array.isArray(externalApiOptionValue)) {\r\n                    externalApiOptionValue.forEach((val) => {\r\n                        if (parameter.value && parameter.value.split('[*]')[parameter.value.split('[*]').length - 1] == '' && typeof val == 'object') {\r\n                            this.allOptions.push({ id: val['value'], value: val['name'] });\r\n                        } else {\r\n                            this.allOptions.push({ id: val.split('||')[0], value: val.split('||')[val.split('||').length - 1] });\r\n                        }\r\n                    });\r\n\r\n                    let values = this.getMentionValues();\r\n\r\n                    if (!this.isValidArray(values, 'mention values')) {\r\n                        values = [];\r\n                    }\r\n\r\n                    values = this.sanitizeMentionValues(values);\r\n\r\n                    if (values.length === 0) {\r\n                        this.handleEmptyMentionValues(this.currentRenderList, this.currentSearchTerm);\r\n                        return;\r\n                    }\r\n\r\n                    const isEmptySearch = !this.currentSearchTerm || this.currentSearchTerm.length === 0 || this.currentSearchTerm.trim() === '';\r\n\r\n                    if (isEmptySearch) {\r\n                        this.handleEmptySearch(values, this.currentRenderList, this.currentSearchTerm);\r\n                    } else {\r\n                        this.safeRenderList(this.currentRenderList, values, this.currentSearchTerm, 'values');\r\n                    }\r\n                } else {\r\n                    console.error('Something Went Wrong in editor !!!');\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n"],"names":["i2.UserDataHandlerService","i3.SharedEventsServiceService","i4.CEEInternalEmitterService","i5.AppDataService","i6.ApiDataService","i7.WfeStepLoaderService","i8","i9","i10","i11","i12","i14"],"mappings":"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"}